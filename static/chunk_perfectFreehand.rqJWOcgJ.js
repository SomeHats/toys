import{V as j}from"./chunk_Vector2.KSidYDSo.js";const{min:S,PI:K}=Math,O=.275,_=K+1e-4;function Y(e,E={}){const{size:s=16,smoothing:v=.5,thinning:f=.5,simulatePressure:x=!0,easing:a=t=>t,start:p={},end:d={},last:N=!1}=E,{cap:M=!0,easing:b=t=>t*(2-t)}=p,{cap:U=!0,easing:i=t=>--t*t*t+1}=d;if(e.length===0||s<=0)return[];const u=e[e.length-1].runningLength,h=p.taper===!1?0:p.taper===!0?Math.max(s,u):p.taper,g=d.taper===!1?0:d.taper===!0?Math.max(s,u):d.taper,q=Math.pow(s*v,2),C=[],L=[];let n=e.slice(0,10).reduce((t,l)=>{let r=l.pressure;if(x){const c=S(1,l.distance/s),B=S(1,1-c);r=S(1,t+(B-t)*(c*O))}return(t+r)/2},e[0].pressure),o=w(s,f,e[e.length-1].pressure,a),A,T=e[0].point,m=T,I=T,z=m;for(let t=0;t<e.length;t++){let{pressure:l}=e[t];const{point:r,vector:c,distance:B,runningLength:V}=e[t];if(t<e.length-1&&u-V<3)continue;if(f){if(x){const D=S(1,B/s),G=S(1,1-D);l=S(1,n+(G-n)*(D*O))}o=w(s,f,l,a)}else o=s/2;A===void 0&&(A=o);const k=V<h?b(V/h):1,J=u-V<g?i((u-V)/g):1;if(o=Math.max(.01,o*Math.min(k,J)),t===e.length-1){const D=c.perpendicular().scale(o);C.push(r.sub(D)),L.push(r.add(D));continue}const H=e[t+1].vector,Q=c.dot(H);if(Q<0){const D=c.perpendicular().scale(o);for(let G=1/13,F=0;F<=1;F+=G)I=r.sub(D).rotateAround(r,_*F),C.push(I),z=r.add(D).rotateAround(r,_*-F),L.push(z);T=I,m=z;continue}const X=H.lerp(c,Q).perpendicular().scale(o);I=r.sub(X),(t<=1||T.distanceToSquared(I))&&(C.push(I),T=I),z=r.add(X),(t<=1||m.distanceToSquared(z)>q)&&(L.push(z),m=z),n=l}const P=e[0].point,R=e.length>1?e[e.length-1].point:P.add(j.UNIT),Z=[],y=[];if(e.length===1){if(!(h||g)||N){const t=P.project(P.sub(R).perpendicular().normalize(),-(A??o)),l=[];for(let r=1/13,c=r;c<=1;c+=r)l.push(t.rotateAround(P,_*2*c));return l}}else{if(!(h||g&&e.length===1))if(M)for(let l=1/13,r=l;r<=1;r+=l){const c=L[0].rotateAround(P,_*r);Z.push(c)}else{const l=C[0].sub(L[0]),r=l.scale(.5),c=l.scale(.51);Z.push(P.sub(r),P.sub(c),P.add(c),P.add(r))}const t=e[e.length-1].vector.negate().perpendicular();if(g||h&&e.length===1)y.push(R);else if(U){const l=R.project(t,o);for(let r=1/29,c=r;c<1;c+=r)y.push(l.rotateAround(R,_*3*c))}else y.push(R.add(t.scale(o)),R.add(t.scale(o*.99)),R.sub(t.scale(o*.99)),R.sub(t.scale(o)))}return C.concat(y,L.reverse(),Z)}function $(e,E={}){const{size:s=16,smoothing:v=.5,thinning:f=.5,simulatePressure:x=!0,easing:a=n=>n,start:p={},end:d={}}=E,{easing:N=n=>n*(2-n)}=p,{easing:M=n=>--n*n*n+1}=d;if(e.length===0||s<=0)return[];const b=e[e.length-1].runningLength,U=p.taper===!1?0:p.taper===!0?Math.max(s,b):p.taper,i=d.taper===!1?0:d.taper===!0?Math.max(s,b):d.taper,u=Math.pow(s*v,2),h=[];let g=e.slice(0,10).reduce((n,o)=>{let A=o.pressure;if(x){const T=S(1,o.distance/s),m=S(1,1-T);A=S(1,n+(m-n)*(T*O))}return(n+A)/2},e[0].pressure),q=w(s,f,e[e.length-1].pressure,a),C=e[0].point,L=C;for(let n=0;n<e.length;n++){let{pressure:o}=e[n];const{point:A,distance:T,runningLength:m}=e[n];if(n<e.length-1&&b-m<3)continue;if(f){if(x){const P=S(1,T/s),R=S(1,1-P);o=S(1,g+(R-g)*(P*O))}q=w(s,f,o,a)}else q=s/2;const I=m<U?N(m/U):1,z=b-m<i?M((b-m)/i):1;if(q=Math.max(.01,q*Math.min(I,z)),n===e.length-1){h.push({center:A,radius:q});continue}L=A,(n<=1||C.distanceToSquared(L)>u)&&(h.push({center:A,radius:q}),C=L),g=o}return h}function ee(e,E={}){var U;const{streamline:s=.5,size:v=16,last:f=!1}=E;if(e.length===0)return[];const x=.15+(1-s)*.85;let a=e.map(i=>({point:j.from(i),pressure:i.pressure}));if(a.length===2){const i=a[1];a=a.slice(0,-1);for(let u=1;u<5;u++)a.push({point:a[0].point.lerp(i.point,u/4),pressure:i.pressure})}a.length===1&&a.push({point:a[0].point.add(j.UNIT),pressure:a[0].pressure});const p=[{point:a[0].point,pressure:a[0].pressure!=null&&a[0].pressure>=0?a[0].pressure:.25,vector:j.UNIT,distance:0,runningLength:0}];let d=!1,N=0,M=p[0];const b=a.length-1;for(let i=1;i<a.length;i++){const u=a[i],h=f&&i===b?u.point:M.point.lerp(u.point,x);if(M.point.equals(h))continue;const g=h.distanceTo(M.point);if(N+=g,i<b&&!d){if(N<v)continue;d=!0}M={point:h,pressure:u.pressure!=null&&u.pressure>=0?u.pressure:.5,vector:M.point.sub(h).normalize(),distance:g,runningLength:N},p.push(M)}return p[0].vector=((U=p[1])==null?void 0:U.vector)??j.ZERO,p}function w(e,E,s,v=f=>f){return e*v(.5-E*(.5-s))}function te(e){if(!e.length)return"";const E=["M",e[0].x,e[0].y,"Q"];for(let s=0;s<e.length;s++){const v=e[s],f=e[(s+1)%e.length],x=v.add(f).scale(.5);E.push(v.x,v.y,x.x,x.y)}return E.push("Z"),E.join(" ")}export{Y as a,te as b,$ as c,ee as g};
