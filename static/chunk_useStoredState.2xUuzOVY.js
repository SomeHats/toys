import{e as f,f as S,u as c}from"./chunk_storage.dLvRSUJZ.js";import{C as m}from"./chunk_utils.ferkvykK.js";import{r as n}from"./chunk_index.V9mWGg2B.js";function l(t,e,r,o,{delayMs:i=null}={}){const[u,s]=n.useState(()=>({dirty:!1,value:f(t,e,r,o)}));return n.useEffect(()=>{if(u.dirty)if(i!==null){const a=setTimeout(()=>{S(t,e,r,u.value)},i);return()=>clearTimeout(a)}else S(t,e,r,u.value)},[t,e,r,u,i]),n.useEffect(()=>{if("watchItem"in t)return t.watchItem(e,()=>{s(a=>({dirty:!1,value:f(t,e,r,a.value)}))})},[t,e,r]),[u.value,n.useCallback(a=>{s(p=>({dirty:!0,value:m(p.value,a)}))},[])]}function I(t,e,r,o){return l(window.localStorage,t,e,r)}function g(t,e,r,o){return l(window.sessionStorage,t,e,r)}function E(t,e,r,o){return l(c,t,e,r)}export{E as a,g as b,I as u};
