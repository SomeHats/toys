function t(t,e,i){return(e-t)*i+t}function e(e,i){return"number"==typeof i?t(e,i,Math.random()):t(0,e,Math.random())}function i(t){return t[Math.floor(e(t.length))]}function o(t,e){const i=new Set(t),o=new Set;for(const t of e)i.has(t)&&o.add(t);return Array.from(o)}function s(t=""){return`${t}${Math.random().toString(36).slice(1)}`}class n{static fromPolar(t,e){return new n(e*Math.cos(t),e*Math.sin(t))}static average(t){return t.reduce(((t,e)=>t.add(e)),n.ZERO).div(t.length)}static fromVectorLike({x:t,y:e}){return new n(t,e)}toString(){return`Vector2(${this.x}, ${this.y})`}get magnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitude(){return Math.sqrt(this.magnitudeSquared)}get angle(){return Math.atan2(this.y,this.x)}isInPolygon(t){const{x:e,y:i}=this;let o=!1;for(let s=0,n=t.length-1;s<t.length;n=s++){const{x:r,y:h}=t[s],{x:l,y:a}=t[n];h>i!=a>i&&e<(l-r)*(i-h)/(a-h)+r&&(o=!o)}return o}equals(t){return this===t||this.x===t.x&&this.y===t.y}distanceTo({x:t,y:e}){const i=t-this.x,o=e-this.y;return Math.sqrt(i*i+o*o)}angleTo(t){return t.sub(this).angle}angleBetween(t){return e=Math.atan2(t.y,t.x)-Math.atan2(this.y,this.x),function(t,e,i){const o=e-t;for(i-=t;i<0;)i+=o;return t+i%o}(-Math.PI,Math.PI,e);var e}dot(t){return this.x*t.x+this.y*t.y}div(t){return new n(this.x/t,this.y/t)}scale(t){return new n(this.x*t,this.y*t)}negate(){return this.scale(-1)}add({x:t,y:e}){return new n(this.x+t,this.y+e)}sub({x:t,y:e}){return new n(this.x-t,this.y-e)}floor(){return new n(Math.floor(this.x),Math.floor(this.y))}ceil(){return new n(Math.ceil(this.x),Math.ceil(this.y))}round(){return new n(Math.round(this.x),Math.round(this.y))}withMagnitude(t){return n.fromPolar(this.angle,t)}normalize(){return this.withMagnitude(1)}withAngle(t){return n.fromPolar(t,this.magnitude)}rotate(t){return this.withAngle(this.angle+t)}lerp(e,i){return new n(t(this.x,e.x,i),t(this.y,e.y,i))}constructor(t,e){this.x=t,this.y=e}}n.ZERO=new n(0,0);const r=new n(5,0),h=.75*Math.PI;const l=document.createElement("canvas"),a=l.getContext("2d"),u=document.body.clientWidth,c=document.body.clientHeight,d=window.devicePixelRatio;l.width=u*d,l.height=c*d,l.style.width=`${u}px`,l.style.height=`${c}px`,a.scale(d,d);const g=new class{clear(t){t?(this.applyFillOptions({fill:t}),this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)):this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}beginPath(){this.ctx.beginPath()}moveTo({x:t,y:e}){this.ctx.moveTo(t,e)}lineTo({x:t,y:e}){this.ctx.lineTo(t,e)}arc({x:t,y:e},i,o,s,n){this.ctx.arc(t,e,i,o,s,n)}arcTo(t,e,i){this.ctx.arcTo(t.x,t.y,e.x,e.y,i)}quadraticCurveTo(t,e){this.ctx.quadraticCurveTo(t.x,t.y,e.x,e.y)}bezierCurveTo(t,e,i){this.ctx.bezierCurveTo(t.x,t.y,e.x,e.y,i.x,i.y)}applyStrokeOptions({strokeWidth:t=1,stroke:e,strokeCap:i="butt",strokeDash:o=[],strokeDashOffset:s=0,strokeJoin:n="round"}){e&&(this.ctx.lineWidth=t,this.ctx.strokeStyle=e,this.ctx.lineCap=i,this.ctx.setLineDash(o),this.ctx.lineDashOffset=s,this.ctx.lineJoin=n)}stroke(t){t.stroke&&(this.applyStrokeOptions(t),this.ctx.stroke())}applyFillOptions({fill:t}){t&&(this.ctx.fillStyle=t)}fill(t){t.fill&&(this.applyFillOptions(t),this.ctx.fill())}applyStrokeAndFillOptions(t){this.applyFillOptions(t),this.applyStrokeOptions(t)}strokeAndFill(t){this.fill(t),this.stroke(t)}getDebugStrokeOptions(t="magenta"){return{stroke:t,strokeWidth:.5}}debugStroke(t="magenta"){this.stroke(this.getDebugStrokeOptions(t))}fillText(t,e,i={}){this.applyFillOptions(i),this.ctx.fillText(t,e.x,e.y)}circle(t,e,i){this.beginPath(),this.arc(t,e,0,2*Math.PI),this.strokeAndFill(i)}ellipse(t,e,i,o){this.beginPath(),this.ctx.ellipse(t.x,t.y,e,i,0,0,2*Math.PI),this.strokeAndFill(o)}debugLabel(t,e,i){t&&(this.applyFillOptions({fill:i}),this.fillText(t,e.add(r)))}debugPointX(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t,e),this.beginPath(),this.ctx.moveTo(t.x-3,t.y-3),this.ctx.lineTo(t.x+3,t.y+3),this.ctx.moveTo(t.x+3,t.y-3),this.ctx.lineTo(t.x-3,t.y+3),this.stroke({strokeWidth:.5,stroke:e})}debugPointO(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t,e),this.circle(t,3,{strokeWidth:.5,stroke:e})}debugArrow(t,e,{color:i="magenta",label:o}={}){this.debugLabel(o,n.average([t,e]),i),this.ctx.beginPath(),this.moveTo(t),this.lineTo(e);const s=e.sub(t),r=s.rotate(-h).withMagnitude(5).add(e),l=s.rotate(+h).withMagnitude(5).add(e);this.moveTo(r),this.lineTo(e),this.lineTo(l),this.stroke({strokeWidth:.5,stroke:i})}debugVectorAtPoint(t,e,i){this.debugArrow(e,e.add(t),i)}polygon(t,e={}){this.beginPath(),this.moveTo(t[t.length-1]);for(const e of t)this.lineTo(e);this.strokeAndFill(e)}polyLine(t,e={}){this.beginPath(),this.moveTo(t[0]);for(let e=1;e<t.length;e++)this.lineTo(t[e]);this.stroke(e)}debugPolygon(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t[0],e),this.polygon(t,this.getDebugStrokeOptions(e))}debugPolyLine(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t[0],e),this.polyLine(t,this.getDebugStrokeOptions(e))}debugQuadraticCurve(t,e,i,{color:o="magenta",label:s}={}){this.debugLabel(s,t,o),this.beginPath(),this.moveTo(t),this.quadraticCurveTo(e,i),this.stroke(this.getDebugStrokeOptions(o))}debugBezierCurve(t,e,i,o,{color:s="magenta",label:n}={}){this.debugLabel(n,t,s),this.beginPath(),this.moveTo(t),this.bezierCurveTo(e,i,o),this.stroke(this.getDebugStrokeOptions(s))}debugLine2(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t.start,e),this.debugArrow(t.start,t.end,{color:e,label:i})}aabb(t,e){e.debug&&this.debugLabel(e.debug.label,t.origin,e.debug.color||"magenta"),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height),this.strokeAndFill(e)}constructor(t){this.ctx=t}}(a);function x(t,e){t||function(t){throw new Error(t)}(e||"Assertion Error")}document.body.appendChild(l);Math.PI;const b=function(t,e,i){const r=t*Math.sqrt(3)/2,h=[],l=[];for(let o=0;o*r<i+r;o++){const i=[];h.push(i);const a=[];l.push(a);for(let l=0;l*t<e+t;l++){const e=new n(l*t+(o%2==0?-t/2:0),o*r);if(i.push(e),0!==o&&0!==l)if(o%2==0){const t={id:s("triangle"),points:[e,h[o][l-1],h[o-1][l-1]]},i={id:s("triangle"),points:[e,h[o-1][l-1],h[o-1][l]]};a.push(t,i)}else if(h[o-1][l+1]){const t={id:s("triangle"),points:[e,h[o][l-1],h[o-1][l]]},i={id:s("triangle"),points:[e,h[o-1][l+1],h[o-1][l]]};a.push(t,i)}}}const a=new Map;for(let t=0;t<l.length;t++)for(let e=0;e<l[t].length;e++){var u,c,d,g,x,b,y,p,f,v,k,m;const i=l[t][e],s=n.average(i.points),r=(e%2==0?t%2==0?[null===(u=l[t])||void 0===u?void 0:u[e-1],null===(c=l[t])||void 0===c?void 0:c[e+1],null===(d=l[t+1])||void 0===d?void 0:d[e-1]]:[null===(g=l[t])||void 0===g?void 0:g[e-1],null===(x=l[t])||void 0===x?void 0:x[e+1],null===(b=l[t+1])||void 0===b?void 0:b[e+1]]:t%2==0?[null===(y=l[t])||void 0===y?void 0:y[e-1],null===(p=l[t])||void 0===p?void 0:p[e+1],null===(f=l[t-1])||void 0===f?void 0:f[e-1]]:[null===(v=l[t])||void 0===v?void 0:v[e-1],null===(k=l[t])||void 0===k?void 0:k[e+1],null===(m=l[t-1])||void 0===m?void 0:m[e+1]]).filter((t=>null!=t)),h=i;h.center=s,h.neighbours=r.map((t=>({triangle:t,sharedPoints:o(i.points,t.points)}))),h.ix=e,h.iy=t,a.set(h.id,h)}return a}(15,u,c),y=new Set,p=()=>{const t=[];let e=i([...b.values()].filter((t=>!y.has(t))));let o=[...b.values()];for(let s=0;s<40;s++){t.push(e),y.add(e),o=e.neighbours.map((t=>t.triangle));const s=o.filter((t=>!y.has(t)));if(!s.length)break;e=i(s)}return{triangles:t}},f=[],v=u/15*(c/15)*.01;console.log({snakeCount:v});for(let t=0;t<v;t++)f.push(p());g.clear("black");for(const{triangles:t}of f){g.beginPath();for(let e=0;e<t.length;e++){const i=t[e],o=t[e-1],s=t[e+1];o?s?g.arcTo(i.center,s.center,7):(x(o),g.lineTo(i.center)):g.moveTo(i.center)}g.stroke({strokeWidth:4.5,stroke:"white",strokeCap:"round"})}
//# sourceMappingURL=index.af386c41.js.map
