import{a as X,b as ee}from"../chunks/chunk_assert.b3c9f562.js";/* empty css                               */import{a as oe,r as x,R as ae}from"../chunks/chunk_index.0b2a17fa.js";import{V as R}from"../chunks/chunk_Vector2.6df6a1fc.js";import{R as ce,j as A,a as ie}from"../chunks/chunk_ResizeObserver.1a5bc318.js";import"../chunks/chunk__commonjsHelpers.fbcca4d8.js";var te,J=oe.exports;te=J.createRoot,J.hydrateRoot;let G;const O=new Map;function le(e){for(const n of e)for(const t of ee(O.get(n.target),"callback does not exist for tracked entry"))t(n)}function se(){return G||(G=new ce(le)),G}function ue(e,n){let t=O.get(e);t||(t=new Set,O.set(e,t),se().observe(e)),t.add(n)}function pe(e,n){const t=O.get(e);X(t,"element is not tracked");const u=t.delete(n);X(u,"callback did not exist for element"),t.size===0&&(O.delete(e),se().unobserve(e))}function fe(e,n){const[t,u]=x.exports.useState(null);return x.exports.useEffect(()=>{if(!e)return;const p=g=>{u(n(g))};return ue(e,p),()=>{pe(e,p)}},[e,n]),t}function de(e){return new R(e.contentRect.width,e.contentRect.height)}const{min:y,PI:he}=Math,K=.275,L=he+1e-4;function ge(e,n={}){return me(ve(e,n),n)}function me(e,n={}){const{size:t=16,smoothing:u=.5,thinning:p=.5,simulatePressure:g=!0,easing:o=s=>s,start:h={},end:m={},last:k=!1}=n,{cap:c=!0,easing:E=s=>s*(2-s)}=h,{cap:z=!0,easing:T=s=>--s*s*s+1}=m;if(e.length===0||t<=0)return[];const i=e[e.length-1].runningLength,f=h.taper===!1?0:h.taper===!0?Math.max(t,i):h.taper,v=m.taper===!1?0:m.taper===!0?Math.max(t,i):m.taper,j=Math.pow(t*u,2),w=[],C=[];let B=e.slice(0,10).reduce((s,l)=>{let r=l.pressure;if(g){const a=y(1,l.distance/t),Z=y(1,1-a);r=y(1,s+(Z-s)*(a*K))}return(s+r)/2},e[0].pressure),d=Y(t,p,e[e.length-1].pressure,o),_;e[0].vector;let F=e[0].point,N=F,M=F,D=N;for(let s=0;s<e.length;s++){let{pressure:l}=e[s];const{point:r,vector:a,distance:Z,runningLength:I}=e[s];if(s<e.length-1&&i-I<3)continue;if(p){if(g){const P=y(1,Z/t),$=y(1,1-P);l=y(1,B+($-B)*(P*K))}d=Y(t,p,l,o)}else d=t/2;_===void 0&&(_=d);const ne=I<f?E(I/f):1,re=i-I<v?T((i-I)/v):1;if(d=Math.max(.01,d*Math.min(ne,re)),s===e.length-1){const P=a.perpendicular().scale(d);w.push(r.sub(P)),C.push(r.add(P));continue}const H=e[s+1].vector,Q=a.dot(H);if(Q<0){const P=a.perpendicular().scale(d);for(let $=1/13,U=0;U<=1;U+=$)M=r.sub(P).rotateAround(r,L*U),w.push(M),D=r.add(P).rotateAround(r,L*-U),C.push(D);F=M,N=D;continue}const W=H.lerp(a,Q).perpendicular().scale(d);M=r.sub(W),(s<=1||F.distanceToSq(M))&&(w.push(M),F=M),D=r.add(W),(s<=1||N.distanceToSq(D)>j)&&(C.push(D),N=D),B=l}const b=e[0].point,S=e.length>1?e[e.length-1].point:b.add(R.UNIT),q=[],V=[];if(e.length===1){if(!(f||v)||k){const s=b.project(b.sub(S).perpendicular().normalize(),-(_||d)),l=[];for(let r=1/13,a=r;a<=1;a+=r)l.push(s.rotateAround(b,L*2*a));return l}}else{if(!(f||v&&e.length===1))if(c)for(let l=1/13,r=l;r<=1;r+=l){const a=C[0].rotateAround(b,L*r);q.push(a)}else{const l=w[0].sub(C[0]),r=l.scale(.5),a=l.scale(.51);q.push(b.sub(r),b.sub(a),b.add(a),b.add(r))}const s=e[e.length-1].vector.negate().perpendicular();if(v||f&&e.length===1)V.push(S);else if(z){const l=S.project(s,d);for(let r=1/29,a=r;a<1;a+=r)V.push(l.rotateAround(S,L*3*a))}else V.push(S.add(s.scale(d)),S.add(s.scale(d*.99)),S.sub(s.scale(d*.99)),S.sub(s.scale(d)))}return w.concat(V,C.reverse(),q)}function ve(e,n={}){var z,T;const{streamline:t=.5,size:u=16,last:p=!1}=n;if(e.length===0)return[];const g=.15+(1-t)*.85;let o=e.map(i=>({point:R.fromVectorLike(i),pressure:i.pressure}));if(o.length===2){const i=o[1];o=o.slice(0,-1);for(let f=1;f<5;f++)o.push({point:o[0].point.lerp(i.point,f/4),pressure:i.pressure})}o.length===1&&o.push({point:o[0].point.add(R.UNIT),pressure:o[0].pressure});const h=[{point:o[0].point,pressure:o[0].pressure!=null&&o[0].pressure>=0?o[0].pressure:.25,vector:R.UNIT,distance:0,runningLength:0}];let m=!1,k=0,c=h[0];const E=o.length-1;for(let i=1;i<o.length;i++){const f=o[i],v=p&&i===E?f.point:c.point.lerp(f.point,g);if(c.point.equals(v))continue;const j=v.distanceTo(c.point);if(k+=j,i<E&&!m){if(k<u)continue;m=!0}c={point:v,pressure:f.pressure!=null&&f.pressure>=0?f.pressure:.5,vector:c.point.sub(v).normalize(),distance:j,runningLength:k},h.push(c)}return h[0].vector=(T=(z=h[1])==null?void 0:z.vector)!=null?T:R.ZERO,h}function Y(e,n,t,u=p=>p){return e*u(.5-n*(.5-t))}const xe=20,be=.5,Ee=.5,Se=.5,Pe=!0;function Re(){const[e,n]=x.exports.useState(null),t=fe(e,de);return A("div",{ref:n,className:"absolute inset-0",children:t&&A(ke,{size:t})})}function ke({size:e}){const[n,t]=x.exports.useState(!1),[u,p]=x.exports.useState([]),g=x.exports.useCallback(c=>{c.preventDefault(),p([R.fromEvent(c)]),t(!0)},[]),o=x.exports.useCallback(c=>{c.preventDefault(),p(E=>[...E,R.fromEvent(c)])},[]),h=x.exports.useCallback(c=>{c.preventDefault(),t(!1)},[]),m=x.exports.useMemo(()=>ge(u,{size:xe,streamline:be,smoothing:Ee,thinning:Se,simulatePressure:Pe}),[u]),k=x.exports.useMemo(()=>Me(m),[m]);return ie("svg",{viewBox:`0 0 ${e.x} ${e.y}`,onMouseDown:g,onMouseMove:n?o:void 0,onMouseUp:n?h:void 0,children:[A("path",{d:k,className:"fill-stone-600"}),m.map(({x:c,y:E},z)=>A("circle",{cx:c,cy:E,r:1,stroke:"red",strokeWidth:.5,fill:"transparent"},z))]})}function Me(e){if(!e.length)return"";const n=["M",e[0].x,e[0].y,"Q"];for(let t=0;t<e.length;t++){const u=e[t],p=e[(t+1)%e.length],g=u.add(p).scale(.5);n.push(u.x,u.y,g.x,g.y)}return n.push("Z"),n.join(" ")}const De=ee(document.getElementById("root"));te(De).render(A(ae.StrictMode,{children:A(Re,{})}));
