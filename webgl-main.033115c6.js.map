{"version":3,"sources":["lib/assert.ts","webgl/test.vert","webgl/test.frag","lib/utils.ts","lib/geom/Vector2.ts","lib/geom/AABB.ts","webgl/webgl-main.ts"],"names":["module","exports"],"mappings":"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","file":"webgl-main.033115c6.js","sourceRoot":"../src","sourcesContent":["export function assert(value: unknown, message?: string): asserts value {\n  if (!value) {\n    throw new Error(message || 'Assertion Error');\n  }\n}\n","module.exports=\"#define GLSLIFY 1\\n// an attribute will receive data from a buffer\\nattribute vec2 a_position;\\nattribute vec4 a_color;\\n\\nvarying vec4 v_color;\\n\\nuniform vec2 u_resolution;\\n\\n// all shaders have a main function\\nvoid main() {\\n  // convert the position from pixels to 0.0 to 1.0\\n  vec2 zeroToOne = a_position / u_resolution;\\n \\n  // convert from 0->1 to 0->2\\n  vec2 zeroToTwo = zeroToOne * 2.0;\\n \\n  // convert from 0->2 to -1->+1 (clip space)\\n  vec2 clipSpace = zeroToTwo - 1.0;\\n \\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\\n\\n  // Convert from clip space to color space.\\n  // Clip space goes -1.0 to +1.0\\n  // Color space goes from 0.0 to 1.0\\n  v_color = a_color;\\n}\";","module.exports=\"precision mediump float;\\n#define GLSLIFY 1\\n \\nuniform vec4 u_color;\\nvarying vec4 v_color;\\n\\nvoid main() {\\n  gl_FragColor = v_color;\\n}\";","export type TimeoutId = ReturnType<typeof setTimeout>;\nexport type IntervalId = ReturnType<typeof setInterval>;\n\nexport function times<T>(n: number, fn: (idx: number) => T): Array<T> {\n  const result = [];\n  for (let i = 0; i < n; i++) {\n    result.push(fn(i));\n  }\n  return result;\n}\n\nexport function lerp(a: number, b: number, n: number): number {\n  return (b - a) * n + a;\n}\n\nexport function invLerp(a: number, b: number, n: number): number {\n  return (n - a) / (b - a);\n}\n\nexport function constrain(min: number, max: number, n: number): number {\n  return Math.min(max, Math.max(min, n));\n}\n\nexport function constrainWrapped(min: number, max: number, n: number): number {\n  const size = max - min;\n  n = n - min;\n  while (n < 0) {\n    n += size;\n  }\n  n = n % size;\n  return min + n;\n}\n\nexport function mapRange(\n  a1: number,\n  b1: number,\n  a2: number,\n  b2: number,\n  n: number,\n): number {\n  return lerp(a2, b2, invLerp(a1, b1, n));\n}\n\nexport function random(a: number, b?: number) {\n  if (typeof b === 'number') {\n    return lerp(a, b, Math.random());\n  }\n  return lerp(0, a, Math.random());\n}\n\nexport function randomInt(a: number, b?: number) {\n  return Math.floor(random(a, b));\n}\n\nexport function varyAbsolute(base: number, amount: number): number {\n  return random(base - amount, base + amount);\n}\n\nexport function varyRelative(base: number, amount: number): number {\n  return varyAbsolute(base, base * amount);\n}\n\nexport function sample<T>(arr: ReadonlyArray<T>): T {\n  return arr[Math.floor(random(arr.length))];\n}\n\nexport function flatten<T>(arr: ReadonlyArray<ReadonlyArray<T>>): Array<T> {\n  return arr.reduce<Array<T>>((a, b) => a.concat(b), []);\n}\n\nexport function uniq<T>(arr: T[]): Array<T> {\n  return Array.from(new Set(arr));\n}\n\nexport function intersection<T>(a1: T[], a2: T[]): T[] {\n  const a1Items = new Set(a1);\n  const result = new Set<T>();\n  for (const item of a2) {\n    if (a1Items.has(item)) {\n      result.add(item);\n    }\n  }\n  return Array.from(result);\n}\n\nexport function groupBy<T, Key>(\n  items: ReadonlyArray<T>,\n  getKey: (item: T) => Key,\n): Map<Key, Array<T>> {\n  const groups = new Map<Key, T[]>();\n  for (const item of items) {\n    const key = getKey(item);\n    const existing = groups.get(key);\n    if (existing) {\n      existing.push(item);\n    } else {\n      groups.set(key, [item]);\n    }\n  }\n\n  return groups;\n}\n\nexport function sortBy<T, Key extends number | string>(\n  items: ReadonlyArray<T>,\n  getKey: (item: T) => Key,\n): Array<T> {\n  return items.slice().sort((a, b) => (getKey(a) < getKey(b) ? -1 : 1));\n}\n\nexport function partition<T>(\n  items: ReadonlyArray<T>,\n  condition: (item: T) => boolean,\n): [T[], T[]] {\n  const pass = [];\n  const fail = [];\n  for (const item of items) {\n    if (condition(item)) {\n      pass.push(item);\n    } else {\n      fail.push(item);\n    }\n  }\n  return [pass, fail];\n}\n\nexport function randomColor(): string {\n  return `rgb(${Math.floor(random(256))},${Math.floor(\n    random(256),\n  )},${Math.floor(random(256))})`;\n}\n\nexport function removeFromArray<T>(array: Array<T>, item: T) {\n  const idx = array.indexOf(item);\n  if (idx !== -1) {\n    array.splice(idx, 1);\n  }\n}\n\nexport function frame(): Promise<number> {\n  return new Promise((resolve) => {\n    window.requestAnimationFrame((time) => resolve(time));\n  });\n}\n\nexport function wait(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(() => resolve(), ms));\n}\n\nexport async function frameLoop(\n  cb: (time: number, cancel: () => void) => void,\n) {\n  let shouldCancel = false;\n  const cancel = () => {\n    shouldCancel = true;\n  };\n  while (true) {\n    cb(await frame(), cancel);\n    if (shouldCancel) {\n      return;\n    }\n  }\n}\n\nexport function fromEntries<K extends PropertyKey, V>(\n  entries: ReadonlyArray<[K, V]>,\n): Record<K, V> {\n  const result = {} as Record<K, V>;\n  for (const [key, value] of entries) {\n    result[key] = value;\n  }\n  return result;\n}\n\nexport function compact<T>(arr: ReadonlyArray<T>): Array<NonNullable<T>> {\n  return arr.filter(\n    (item): item is NonNullable<T> => item !== null && item !== undefined,\n  );\n}\n\nexport function normalizeAngle(angle: number): number {\n  return constrainWrapped(-Math.PI, Math.PI, angle);\n}\n\nexport function clamp(min: number, max: number, n: number): number {\n  return Math.max(min, Math.min(max, n));\n}\n\nexport function shuffle<T>(arr: ReadonlyArray<T>): Array<T> {\n  const newArr = arr.slice();\n  for (let i = newArr.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\n  }\n  return newArr;\n}\n\nexport function getId(prefix = ''): string {\n  return `${prefix}${Math.random().toString(36).slice(1)}`;\n}\n\nexport function getLocalStorageItem(\n  key: string,\n  fallback: unknown = null,\n): unknown {\n  try {\n    // Get from local storage by key\n    const item = window.localStorage.getItem(key);\n    // Parse stored json or if none return initialValue\n    return item ? JSON.parse(item) : fallback;\n  } catch (error) {\n    // If error also return initialValue\n    console.log(error);\n    return fallback;\n  }\n}\n\nexport function setLocalStorageItem(key: string, value: unknown) {\n  const stringified = JSON.stringify(value);\n  try {\n    window.localStorage.setItem(key, stringified);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function debounce<Args extends Array<unknown>>(\n  ms: number,\n  fn: (...args: Args) => void,\n): (...args: Args) => void {\n  let timeoutHandle: TimeoutId | undefined;\n\n  return (...args: Args) => {\n    if (timeoutHandle !== undefined) {\n      clearTimeout(timeoutHandle);\n    }\n    timeoutHandle = setTimeout(() => fn(...args), ms);\n  };\n}\n","import { normalizeAngle, lerp } from '../utils';\n\nexport default class Vector2 {\n  static readonly ZERO = new Vector2(0, 0);\n\n  static fromPolar(angle: number, radius: number) {\n    return new Vector2(radius * Math.cos(angle), radius * Math.sin(angle));\n  }\n\n  static average(points: ReadonlyArray<Vector2>): Vector2 {\n    const sum = points.reduce((memo, p) => memo.add(p), Vector2.ZERO);\n    return sum.div(points.length);\n  }\n\n  constructor(public readonly x: number, public readonly y: number) {}\n\n  toString(): string {\n    return `Vector2(${this.x}, ${this.y})`;\n  }\n\n  get magnitudeSquared(): number {\n    return this.x * this.x + this.y * this.y;\n  }\n\n  get magnitude(): number {\n    return Math.sqrt(this.magnitudeSquared);\n  }\n\n  get angle(): number {\n    return Math.atan2(this.y, this.x);\n  }\n\n  isInPolygon(polygon: ReadonlyArray<Vector2>): boolean {\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n\n    const { x, y } = this;\n\n    let isInside = false;\n    for (\n      let currentIdx = 0, previousIdx = polygon.length - 1;\n      currentIdx < polygon.length;\n      previousIdx = currentIdx++\n    ) {\n      const { x: currentX, y: currentY } = polygon[currentIdx];\n      const { x: previousX, y: previousY } = polygon[previousIdx];\n      const doesIntersect =\n        currentY > y != previousY > y &&\n        x <\n          ((previousX - currentX) * (y - currentY)) / (previousY - currentY) +\n            currentX;\n\n      if (doesIntersect) {\n        isInside = !isInside;\n      }\n    }\n\n    return isInside;\n  }\n\n  equals(other: Vector2) {\n    return this === other || (this.x === other.x && this.y === other.y);\n  }\n\n  distanceTo({ x, y }: Vector2): number {\n    const dx = x - this.x;\n    const dy = y - this.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  angleTo(other: Vector2): number {\n    return other.sub(this).angle;\n  }\n\n  angleBetween(other: Vector2): number {\n    return normalizeAngle(\n      Math.atan2(other.y, other.x) - Math.atan2(this.y, this.x),\n    );\n  }\n\n  dot(other: Vector2): number {\n    return this.x * other.x + this.y * other.y;\n  }\n\n  div(scale: number): Vector2 {\n    return new Vector2(this.x / scale, this.y / scale);\n  }\n\n  scale(scale: number): Vector2 {\n    return new Vector2(this.x * scale, this.y * scale);\n  }\n\n  negate(): Vector2 {\n    return this.scale(-1);\n  }\n\n  add({ x, y }: Vector2): Vector2 {\n    return new Vector2(this.x + x, this.y + y);\n  }\n\n  sub({ x, y }: Vector2): Vector2 {\n    return new Vector2(this.x - x, this.y - y);\n  }\n\n  floor(): Vector2 {\n    return new Vector2(Math.floor(this.x), Math.floor(this.y));\n  }\n\n  ceil(): Vector2 {\n    return new Vector2(Math.ceil(this.x), Math.ceil(this.y));\n  }\n\n  round(): Vector2 {\n    return new Vector2(Math.round(this.x), Math.round(this.y));\n  }\n\n  withMagnitude(newMagnitude: number): Vector2 {\n    return Vector2.fromPolar(this.angle, newMagnitude);\n  }\n\n  withAngle(newAngle: number): Vector2 {\n    return Vector2.fromPolar(newAngle, this.magnitude);\n  }\n\n  rotate(byAngle: number): Vector2 {\n    return this.withAngle(this.angle + byAngle);\n  }\n\n  lerp(other: Vector2, n: number): Vector2 {\n    return new Vector2(lerp(this.x, other.x, n), lerp(this.y, other.y, n));\n  }\n}\n","import Vector2 from './Vector2';\n\nexport default class AABB {\n  static fromLeftTopRightBottom(\n    left: number,\n    top: number,\n    right: number,\n    bottom: number,\n  ): AABB {\n    return new AABB(\n      new Vector2(left, top),\n      new Vector2(right - left, bottom - top),\n    );\n  }\n\n  constructor(public readonly origin: Vector2, public readonly size: Vector2) {\n    Object.freeze(this);\n  }\n\n  contains({ x, y }: Vector2): boolean {\n    return (\n      this.left <= x && x <= this.right && this.top <= y && y <= this.bottom\n    );\n  }\n\n  intersects(other: AABB): boolean {\n    return !(\n      this.right < other.left ||\n      this.left > other.right ||\n      this.bottom < other.top ||\n      this.top > other.bottom\n    );\n  }\n\n  getCenter(): Vector2 {\n    return this.origin.add(this.size.scale(0.5));\n  }\n\n  get left(): number {\n    return this.origin.x;\n  }\n\n  get right(): number {\n    return this.origin.x + this.size.x;\n  }\n\n  get top(): number {\n    return this.origin.y;\n  }\n\n  get bottom(): number {\n    return this.origin.y + this.size.y;\n  }\n}\n","import { assert } from '../lib/assert';\nimport testVert from './test.vert';\nimport testFrag from './test.frag';\nimport AABB from '../lib/geom/AABB';\nimport { times, random } from '../lib/utils';\nimport Vector2 from '../lib/geom/Vector2';\nimport { Triangle } from 'three';\n\nconst canvas = document.createElement('canvas');\ncanvas.width = document.body.clientWidth * window.devicePixelRatio;\ncanvas.height = document.body.clientHeight * window.devicePixelRatio;\ncanvas.style.width = `${document.body.clientWidth}px`;\ncanvas.style.height = `${document.body.clientHeight}px`;\ndocument.body.appendChild(canvas);\n\nconst gl = canvas.getContext('webgl');\nassert(gl);\n\nenum ShaderType {\n  Fragment = WebGLRenderingContext.FRAGMENT_SHADER,\n  Vertex = WebGLRenderingContext.VERTEX_SHADER,\n}\n\nfunction createShader(\n  gl: WebGLRenderingContext,\n  type: ShaderType,\n  source: string,\n): WebGLShader {\n  const shader = gl.createShader(type);\n  assert(shader);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const success: boolean = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  if (!success) {\n    console.log(gl.getShaderInfoLog(shader));\n    gl.deleteShader(shader);\n    throw new Error('compile error');\n  }\n  return shader;\n}\n\nfunction createProgram(\n  gl: WebGLRenderingContext,\n  vertexShader: WebGLShader,\n  fragmentShader: WebGLShader,\n): WebGLProgram {\n  const program = gl.createProgram();\n  assert(program);\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  const success: boolean = gl.getProgramParameter(program, gl.LINK_STATUS);\n  if (!success) {\n    console.log(gl.getProgramInfoLog(program));\n    gl.deleteProgram(program);\n    throw 'link error';\n  }\n  return program;\n}\n\nconst vertexShader = createShader(gl, ShaderType.Vertex, testVert);\nconst fragmentShader = createShader(gl, ShaderType.Fragment, testFrag);\nconst program = createProgram(gl, vertexShader, fragmentShader);\n\nconst positionAttributeLocation = gl.getAttribLocation(program, 'a_position');\nconst colorAttributeLocation = gl.getAttribLocation(program, 'a_color');\nconst resolutionUniformLocation = gl.getUniformLocation(\n  program,\n  'u_resolution',\n);\n\nconst positionBuffer = gl.createBuffer();\nassert(positionBuffer);\n\n// 2d points\nconst positions = [10, 20, 80, 20, 10, 30, 10, 30, 80, 20, 80, 30];\ngl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\ngl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\n\ngl.viewport(0, 0, canvas.width, canvas.height);\n\n// Clear the canvas\ngl.clearColor(0, 0, 0, 0);\ngl.clear(gl.COLOR_BUFFER_BIT);\n\n// Tell it to use our program (pair of shaders)\ngl.useProgram(program);\n\n// set the resolution\ngl.uniform2f(resolutionUniformLocation, gl.canvas.width, gl.canvas.height);\n\ngl.enableVertexAttribArray(positionAttributeLocation);\n\n// Bind the position buffer.\ngl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n// Tell the attribute how to get data out of positionBuffer (ARRAY_BUFFER)\ngl.vertexAttribPointer(\n  positionAttributeLocation,\n  2, // size = 2 components per iteration\n  gl.FLOAT, // type = the data is 32bit floats\n  false, // normalize = dont normalize the data\n  0, // stride = 0 = move forward size * sizeof(type) each iteration to get the next position\n  0, // offset = start at the beginning of the buffer\n);\n\nconst rectCount = 100;\nconst vertexBuffer = new Float32Array(rectCount * 12);\n\nfunction setRectangle(gl: WebGLRenderingContext, idx: number, rect: AABB) {\n  vertexBuffer.set(\n    [\n      rect.left,\n      rect.top,\n      rect.right,\n      rect.top,\n      rect.left,\n      rect.bottom,\n      rect.left,\n      rect.bottom,\n      rect.right,\n      rect.top,\n      rect.right,\n      rect.bottom,\n    ],\n    idx * 12,\n  );\n}\n\ntimes(rectCount, (idx) => {\n  const rect = new AABB(\n    new Vector2(random(gl.canvas.width), random(gl.canvas.height)),\n    new Vector2(random(200), random(200)),\n  );\n\n  setRectangle(gl, idx, rect);\n});\n\ngl.bufferData(gl.ARRAY_BUFFER, vertexBuffer, gl.STATIC_DRAW);\n\n// Set a random color.\n// gl.uniform4f(\n//   colorUniformLocation,\n//   Math.random(),\n//   Math.random(),\n//   Math.random(),\n//   1,\n// );\n\n// Draw the rectangle.\ngl.drawArrays(gl.TRIANGLES, 0, rectCount * 6);\n\nexport {};\n"]}