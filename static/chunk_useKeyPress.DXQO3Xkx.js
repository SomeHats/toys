import{a as l}from"./chunk_assert.pxkjFBOg.js";import{u as d}from"./chunk_useResizeObserver.DnDEPOOq.js";import{U as u}from"./chunk_utils.CSiPn6yw.js";import{r}from"./chunk_index.C5eOxiyT.js";const a=Symbol();function i(n){return u?n.metaKey:n.ctrlKey}function o(n,t){const e=typeof t=="string"?{key:t}:t;return n.key.toLowerCase()===e.key.toLowerCase()&&(e.command===a||(e.command??!1)===i(n))&&(e.shift===a||(e.shift??!1)===n.shiftKey)&&(e.alt===a||(e.alt??!1)===n.altKey)}function k(n,t){return o(n,t)&&n.repeat===!1}function h(n){const t=r.useContext(c),e=d(n);r.useEffect(()=>t.onKeyDown(e),[e,t])}function y(n){const t=r.useContext(c),e=d(n);r.useEffect(()=>t.onKeyUp(e),[e,t])}function D(n){const[t,e]=r.useState(!1);return h(s=>(console.log(s.key),o(s,n)?(e(!0),!0):!1)),y(s=>o(s,n)?(e(!1),!0):!1),t}class f{constructor(){this.handlers=new Set,this.handleKeyDown=t=>{for(const{type:e,callback:s}of this.handlers)if(e==="down"&&s(t))return},this.handleKeyUp=t=>{for(const{type:e,callback:s}of this.handlers)if(e==="up"&&s(t))return},document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}destroy(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}onKeyDown(t){const e={type:"down",callback:t};return this.handlers.add(e),()=>{l(this.handlers.delete(e),"handler has already been deleted")}}onKeyUp(t){const e={type:"up",callback:t};return this.handlers.add(e),()=>{l(this.handlers.delete(e),"handler has already been deleted")}}}const c=r.createContext(new f);export{a as A,k as a,o as m,D as u};
