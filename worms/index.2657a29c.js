function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},s=e.parcelRequire0561;function o(t,e,i){return(e-t)*i+t}function r(t,e){return"number"==typeof e?o(t,e,Math.random()):o(0,t,Math.random())}function l(t){return t[Math.floor(r(t.length))]}function h(t,e){const i=new Set(t),n=new Set;for(const t of e)i.has(t)&&n.add(t);return Array.from(n)}function a(t=""){return`${t}${Math.random().toString(36).slice(1)}`}null==s&&((s=function(t){if(t in i)return i[t].exports;if(t in n){var e=n[t];delete n[t];var s={id:t,exports:{}};return i[t]=s,e.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){n[t]=e},e.parcelRequire0561=s);class u{static fromPolar(t,e){return new u(e*Math.cos(t),e*Math.sin(t))}static average(t){return t.reduce(((t,e)=>t.add(e)),u.ZERO).div(t.length)}static fromVectorLike({x:t,y:e}){return new u(t,e)}toString(){return`Vector2(${this.x}, ${this.y})`}get magnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitude(){return Math.sqrt(this.magnitudeSquared)}get angle(){return Math.atan2(this.y,this.x)}isInPolygon(t){const{x:e,y:i}=this;let n=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const{x:r,y:l}=t[s],{x:h,y:a}=t[o];l>i!=a>i&&e<(h-r)*(i-l)/(a-l)+r&&(n=!n)}return n}equals(t){return this===t||this.x===t.x&&this.y===t.y}distanceTo({x:t,y:e}){const i=t-this.x,n=e-this.y;return Math.sqrt(i*i+n*n)}angleTo(t){return t.sub(this).angle}angleBetween(t){return e=Math.atan2(t.y,t.x)-Math.atan2(this.y,this.x),function(t,e,i){const n=e-t;for(i-=t;i<0;)i+=n;return t+i%n}(-Math.PI,Math.PI,e);var e}dot(t){return this.x*t.x+this.y*t.y}div(t){return new u(this.x/t,this.y/t)}scale(t){return new u(this.x*t,this.y*t)}negate(){return this.scale(-1)}add({x:t,y:e}){return new u(this.x+t,this.y+e)}sub({x:t,y:e}){return new u(this.x-t,this.y-e)}floor(){return new u(Math.floor(this.x),Math.floor(this.y))}ceil(){return new u(Math.ceil(this.x),Math.ceil(this.y))}round(){return new u(Math.round(this.x),Math.round(this.y))}withMagnitude(t){return u.fromPolar(this.angle,t)}normalize(){return this.withMagnitude(1)}withAngle(t){return u.fromPolar(t,this.magnitude)}rotate(t){return this.withAngle(this.angle+t)}lerp(t,e){return new u(o(this.x,t.x,e),o(this.y,t.y,e))}constructor(t,e){this.x=t,this.y=e}}u.ZERO=new u(0,0);const d=new u(5,0),c=.75*Math.PI;const g=document.createElement("canvas"),f=g.getContext("2d"),p=document.body.clientWidth,x=document.body.clientHeight,b=window.devicePixelRatio;g.width=p*b,g.height=x*b,g.style.width=`${p}px`,g.style.height=`${x}px`,f.scale(b,b);const y=new class{clear(t){t?(this.applyFillOptions({fill:t}),this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)):this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}beginPath(){this.ctx.beginPath()}moveTo({x:t,y:e}){this.ctx.moveTo(t,e)}lineTo({x:t,y:e}){this.ctx.lineTo(t,e)}arc({x:t,y:e},i,n,s,o){this.ctx.arc(t,e,i,n,s,o)}arcTo(t,e,i){this.ctx.arcTo(t.x,t.y,e.x,e.y,i)}applyStrokeOptions({strokeWidth:t=1,stroke:e,strokeCap:i="butt",strokeDash:n=[],strokeDashOffset:s=0,strokeJoin:o="round"}){e&&(this.ctx.lineWidth=t,this.ctx.strokeStyle=e,this.ctx.lineCap=i,this.ctx.setLineDash(n),this.ctx.lineDashOffset=s,this.ctx.lineJoin=o)}stroke(t){t.stroke&&(this.applyStrokeOptions(t),this.ctx.stroke())}applyFillOptions({fill:t}){t&&(this.ctx.fillStyle=t)}fill(t){t.fill&&(this.applyFillOptions(t),this.ctx.fill())}applyStrokeAndFillOptions(t){this.applyFillOptions(t),this.applyStrokeOptions(t)}strokeAndFill(t){this.fill(t),this.stroke(t)}getDebugStrokeOptions(t="magenta"){return{stroke:t,strokeWidth:.5}}debugStroke(t="magenta"){this.stroke(this.getDebugStrokeOptions(t))}fillText(t,e,i={}){this.applyFillOptions(i),this.ctx.fillText(t,e.x,e.y)}circle(t,e,i){this.beginPath(),this.arc(t,e,0,2*Math.PI),this.strokeAndFill(i)}ellipse(t,e,i,n){this.beginPath(),this.ctx.ellipse(t.x,t.y,e,i,0,0,2*Math.PI),this.strokeAndFill(n)}debugLabel(t,e,i){t&&(this.applyFillOptions({fill:i}),this.fillText(t,e.add(d)))}debugPointX(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t,e),this.beginPath(),this.ctx.moveTo(t.x-3,t.y-3),this.ctx.lineTo(t.x+3,t.y+3),this.ctx.moveTo(t.x+3,t.y-3),this.ctx.lineTo(t.x-3,t.y+3),this.stroke({strokeWidth:.5,stroke:e})}debugPointO(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t,e),this.circle(t,3,{strokeWidth:.5,stroke:e})}debugArrow(t,e,{color:i="magenta",label:n}={}){this.debugLabel(n,u.average([t,e]),i),this.ctx.beginPath(),this.moveTo(t),this.lineTo(e);const s=e.sub(t),o=s.rotate(-c).withMagnitude(5).add(e),r=s.rotate(+c).withMagnitude(5).add(e);this.moveTo(o),this.lineTo(e),this.lineTo(r),this.stroke({strokeWidth:.5,stroke:i})}debugVectorAtPoint(t,e,i){this.debugArrow(e,e.add(t),i)}polygon(t,e={}){this.beginPath(),this.moveTo(t[t.length-1]);for(const e of t)this.lineTo(e);this.strokeAndFill(e)}polyLine(t,e={}){this.beginPath(),this.moveTo(t[0]);for(let e=1;e<t.length;e++)this.lineTo(t[e]);this.stroke(e)}debugPolygon(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t[0],e),this.polygon(t,this.getDebugStrokeOptions(e))}debugPolyLine(t,{color:e="magenta",label:i}={}){this.debugLabel(i,t[0],e),this.polyLine(t,this.getDebugStrokeOptions(e))}aabb(t,e){e.debug&&this.debugLabel(e.debug.label,t.origin,e.debug.color||"magenta"),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height),this.strokeAndFill(e)}constructor(t){this.ctx=t}}(f);function v(t,e){t||function(t){throw new Error(t)}(e||"Assertion Error")}document.body.appendChild(g);var w=s("0FWmF");const k=new(t(w))("#E2ECC9"),m=[new(t(w))("#C33C54"),new(t(w))("#bfb915"),new(t(w))("#96ba3b"),new(t(w))("#39847f"),new(t(w))("#12416b")],M=50*Math.PI/6,T=function(t,e,i){const n=t*Math.sqrt(3)/2,s=[],o=[];for(let r=0;r*n<i+n;r++){const i=[];s.push(i);const l=[];o.push(l);for(let o=0;o*t<e+t;o++){const e=new u(o*t+(r%2==0?-t/2:0),r*n);if(i.push(e),0!==r&&0!==o)if(r%2==0){const t={id:a("triangle"),points:[e,s[r][o-1],s[r-1][o-1]]},i={id:a("triangle"),points:[e,s[r-1][o-1],s[r-1][o]]};l.push(t,i)}else if(s[r-1][o+1]){const t={id:a("triangle"),points:[e,s[r][o-1],s[r-1][o]]},i={id:a("triangle"),points:[e,s[r-1][o+1],s[r-1][o]]};l.push(t,i)}}}const r=new Map;for(let t=0;t<o.length;t++)for(let e=0;e<o[t].length;e++){var l,d,c,g,f,p,x,b,y,v,w,k;const i=o[t][e],n=u.average(i.points),s=(e%2==0?t%2==0?[null===(l=o[t])||void 0===l?void 0:l[e-1],null===(d=o[t])||void 0===d?void 0:d[e+1],null===(c=o[t+1])||void 0===c?void 0:c[e-1]]:[null===(g=o[t])||void 0===g?void 0:g[e-1],null===(f=o[t])||void 0===f?void 0:f[e+1],null===(p=o[t+1])||void 0===p?void 0:p[e+1]]:t%2==0?[null===(x=o[t])||void 0===x?void 0:x[e-1],null===(b=o[t])||void 0===b?void 0:b[e+1],null===(y=o[t-1])||void 0===y?void 0:y[e-1]]:[null===(v=o[t])||void 0===v?void 0:v[e-1],null===(w=o[t])||void 0===w?void 0:w[e+1],null===(k=o[t-1])||void 0===k?void 0:k[e+1]]).filter((t=>null!=t)),a=i;a.center=n,a.neighbours=s.map((t=>({triangle:t,sharedPoints:h(i.points,t.points)}))),a.ix=e,a.iy=t,r.set(a.id,a)}return r}(50,p,x),P=()=>{const t=function(t,e){const i=[];for(let n=0;n<t;n++)i.push(e(n));return i}((e=2,i=6,Math.floor(r(e,i))),(()=>l(m).string()));var e,i,n;if(1===(n=t,Array.from(new Set(n))).length)return P();let s=0;return{palette:t,current:()=>t[s%t.length],next:()=>(s++,t[s%t.length]),reset:(t=0)=>{s=t}}};function O(t,e){const i=t.neighbours.find((t=>t.triangle===e));return v(i,"must be a neighbour"),i.sharedPoints}const D=new Set,S=()=>{const t=[],e=P();let i=[...T.values()];for(let e=0;e<2;e++){const e=i.filter((t=>!D.has(t)));if(!e.length)break;const n=l(e);t.push(n),D.add(n),i=n.neighbours.map((t=>t.triangle))}return{triangles:t,palette:e,speed:r(.06,.12),offset:0,base:0,length:t.length,isDead:!1}},F=[];for(let t=0;t<10;t++)F.push(S());!async function(t){let e=!1;const i=()=>{e=!0};for(;;)if(t(await new Promise((t=>{window.requestAnimationFrame((e=>t(e)))})),i),e)return}((()=>{y.clear(k.string());for(const t of F){if(t.offset+=t.speed,t.offset>1){if(t.offset--,t.base++,!t.isDead){const e=t.triangles[0].neighbours.filter((t=>!D.has(t.triangle)));if(e.length){const i=l(e).triangle;D.add(i),t.triangles.unshift(i),t.base--,t.length++}else t.isDead=!0,F.push(S())}const e=t.triangles[t.triangles.length-t.base];e&&(D.delete(e),t.length--)}const{triangles:e,palette:i}=t;i.reset(t.base);for(let n=0;n<t.length;n++){const s=e[n],o=e[n-1],r=e[n+1],l=i.current(),h=i.next();y.beginPath(),o&&(r?(y.moveTo(u.average(O(s,o))),y.arcTo(s.center,r.center,24.5)):(v(o),y.moveTo(u.average(O(s,o))),y.lineTo(s.center)),(1!==n||t.isDead)&&y.stroke({strokeWidth:25,stroke:l,strokeCap:"round",strokeDash:[M,M],strokeDashOffset:t.offset*M}),n===t.length-1&&t.isDead||y.stroke({strokeWidth:25,stroke:h,strokeCap:"round",strokeDash:[M,M],strokeDashOffset:t.offset*M-M}))}}}));
//# sourceMappingURL=index.2657a29c.js.map
