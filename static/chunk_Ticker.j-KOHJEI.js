var J=(a,r,p)=>{if(!r.has(a))throw TypeError("Cannot "+p)};var $=(a,r,p)=>(J(a,r,"read from private field"),p?p.call(a):r.get(a)),B=(a,r,p)=>{if(r.has(a))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(a):r.set(a,p)},V=(a,r,p,v)=>(J(a,r,"write to private field"),v?v.call(a,p):r.set(a,p),p);import{r as F}from"./chunk_signia.U7SLsBs7.js";import{d as it,f as st}from"./chunk_utils.FedKR4y8.js";import{a as H,R as ot}from"./chunk_track.rtZiweUj.js";import"./chunk_index.HRzIbU8d.js";import{E as ct}from"./chunk_EventEmitter.awUKpn3C.js";var K,N,Q;function at(){function a(s,n){return function(u){(function(l,t){if(l.v)throw new Error("attempted to call "+t+" after decoration was finished")})(n,"addInitializer"),v(u,"An initializer"),s.push(u)}}function r(s,n){if(!s(n))throw new TypeError("Attempted to access private element on non-instance")}function p(s,n,u,l,t,g,h,m,_){var o;switch(t){case 1:o="accessor";break;case 2:o="method";break;case 3:o="getter";break;case 4:o="setter";break;default:o="field"}var i,e,d={kind:o,name:h?"#"+n:n,static:g,private:h},c={v:!1};if(t!==0&&(d.addInitializer=a(l,c)),h||t!==0&&t!==2)if(t===2)i=function(f){return r(_,f),u.value};else{var y=t===0||t===1;(y||t===3)&&(i=h?function(f){return r(_,f),u.get.call(f)}:function(f){return u.get.call(f)}),(y||t===4)&&(e=h?function(f,b){r(_,f),u.set.call(f,b)}:function(f,b){u.set.call(f,b)})}else i=function(f){return f[n]},t===0&&(e=function(f,b){f[n]=b});var w=h?_.bind():function(f){return n in f};d.access=i&&e?{get:i,set:e,has:w}:i?{get:i,has:w}:{set:e,has:w};try{return s(m,d)}finally{c.v=!0}}function v(s,n){if(typeof s!="function")throw new TypeError(n+" must be a function")}function I(s,n){var u=typeof n;if(s===1){if(u!=="object"||n===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");n.get!==void 0&&v(n.get,"accessor.get"),n.set!==void 0&&v(n.set,"accessor.set"),n.init!==void 0&&v(n.init,"accessor.init")}else if(u!=="function"){var l;throw l=s===0?"field":s===10?"class":"method",new TypeError(l+" decorators must return a function or void 0")}}function j(s){return function(n){s(this,n)}}function z(s,n,u,l,t,g,h,m,_){var o,i,e,d,c,y,w,f=u[0];if(h?o=t===0||t===1?{get:(d=u[3],function(){return d(this)}),set:j(u[4])}:t===3?{get:u[3]}:t===4?{set:u[3]}:{value:u[3]}:t!==0&&(o=Object.getOwnPropertyDescriptor(n,l)),t===1?e={get:o.get,set:o.set}:t===2?e=o.value:t===3?e=o.get:t===4&&(e=o.set),typeof f=="function")(c=p(f,l,o,m,t,g,h,e,_))!==void 0&&(I(t,c),t===0?i=c:t===1?(i=c.init,y=c.get||e.get,w=c.set||e.set,e={get:y,set:w}):e=c);else for(var b=f.length-1;b>=0;b--){var x;(c=p(f[b],l,o,m,t,g,h,e,_))!==void 0&&(I(t,c),t===0?x=c:t===1?(x=c.init,y=c.get||e.get,w=c.set||e.set,e={get:y,set:w}):e=c,x!==void 0&&(i===void 0?i=x:typeof i=="function"?i=[i,x]:i.push(x)))}if(t===0||t===1){if(i===void 0)i=function(E,M){return M};else if(typeof i!="function"){var k=i;i=function(E,M){for(var P=M,S=0;S<k.length;S++)P=k[S].call(E,P);return P}}else{var C=i;i=function(E,M){return C.call(E,M)}}s.push(i)}t!==0&&(t===1?(o.get=e.get,o.set=e.set):t===2?o.value=e:t===3?o.get=e:t===4&&(o.set=e),h?t===1?(s.push(function(E,M){return e.get.call(E,M)}),s.push(function(E,M){return e.set.call(E,M)})):t===2?s.push(e):s.push(function(E,M){return e.call(E,M)}):Object.defineProperty(n,l,o))}function D(s,n,u){for(var l,t,g,h=[],m=new Map,_=new Map,o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i)){var e,d,c=i[1],y=i[2],w=i.length>3,f=c>=5,b=u;if(f?(e=s,(c-=5)!==0&&(d=t=t||[]),w&&!g&&(g=function(C){return ut(C)===s}),b=g):(e=s.prototype,c!==0&&(d=l=l||[])),c!==0&&!w){var x=f?_:m,k=x.get(y)||0;if(k===!0||k===3&&c!==4||k===4&&c!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+y);!k&&c>2?x.set(y,c):x.set(y,!0)}z(h,e,i,y,c,f,w,d,b)}}return T(h,l),T(h,t),h}function T(s,n){n&&s.push(function(u){for(var l=0;l<n.length;l++)n[l].call(u);return u})}return function(s,n,u,l){return{e:D(s,n,l),get c(){return function(t,g){if(g.length>0){for(var h=[],m=t,_=t.name,o=g.length-1;o>=0;o--){var i={v:!1};try{var e=g[o](m,{kind:"class",name:_,addInitializer:a(h,i)})}finally{i.v=!0}e!==void 0&&(I(10,e),m=e)}return[m,function(){for(var d=0;d<h.length;d++)h[d].call(m)}]}}(s,u)}}}}function nt(a,r,p,v){return(nt=at())(a,r,p,v)}function ut(a){if(Object(a)!==a)throw TypeError("right-hand side of 'in' should be an object, got "+(a!==null?typeof a:"null"));return a}function L(a){const r=H("target",typeof a=="number"?H("signal",a):null),p={name:"signal",get value(){return r.value?r.value.value:a.value},get lastChangedEpoch(){return r.value?r.value.lastChangedEpoch:a.lastChangedEpoch},getDiffSince(){return ot},__unsafe__getWithoutCapture(){const v=r.__unsafe__getWithoutCapture();return v?v.__unsafe__getWithoutCapture():a.__unsafe__getWithoutCapture()},set(v){const I=r.value;return I?I.set(v):r.set(H("signal",v)),v},update(v){return p.set(v(p.value))}};return p}var O,R;const G=class G{constructor(r){B(this,O,void 0);B(this,R,void 0);V(this,O,(Q(this),K(this))),V(this,R,N(this,0)),this.destroy=it,this._target=L(r.target),this._tension=L(r.tension??230),this._friction=L(r.friction??22),this.value=r.value??this._target.__unsafe__getWithoutCapture(),this.ticker=r.ticker,(r.shouldStart??!0)&&this.start()}get value(){return $(this,O)}set value(r){V(this,O,r)}get velocity(){return $(this,R)}set velocity(r){V(this,R,r)}start(){this.destroy=this.ticker.listen(({deltaMs:r})=>{this.tick(r)})}get target(){return this._target.value}set target(r){this._target.set(r)}get tension(){return this._tension.value}set tension(r){this._tension.set(r)}get friction(){return this._friction.value}set friction(r){this._friction.set(r)}tick(r){const p=Math.min(r,100)/1e3,{target:v,tension:I,friction:j,value:z,velocity:D}=this;let T=z,s=D;const n=D,u=I*(v-T)-j*D;T=z+n*p*.5,s=D+u*p*.5;const l=s,t=I*(v-T)-j*s;T=z+l*p*.5,s=D+t*p*.5;const g=s,h=I*(v-T)-j*s;T=z+g*p,s=D+h*p;const m=s,_=I*(v-T)-j*s,o=1/6*(n+2*(l+g)+m),i=1/6*(u+2*(t+h)+_);Math.abs(o)<1e-6?this.value=this.target:this.value+=o*p,Math.abs(i)<1e-6?this.velocity=0:this.velocity+=i*p}};O=new WeakMap,R=new WeakMap,[K,N,Q]=nt(G,[[F,1,"value"],[F,1,"velocity"]],[]).e;let X=G;const A=[];for(let a=0;a<256;a++)A[a]=(a<16?"0":"")+a.toString(16);const ft=Math.PI/180;function lt(){const a=Math.random()*4294967295|0,r=Math.random()*4294967295|0,p=Math.random()*4294967295|0,v=Math.random()*4294967295|0;return(A[a&255]+A[a>>8&255]+A[a>>16&255]+A[a>>24&255]+"-"+A[r&255]+A[r>>8&255]+"-"+A[r>>16&15|64]+A[r>>24&255]+"-"+A[p&63|128]+A[p>>8&255]+"-"+A[p>>16&255]+A[p>>24&255]+A[v&255]+A[v>>8&255]+A[v>>16&255]+A[v>>24&255]).toUpperCase()}function wt(a){return a*ft}var Y,Z,tt;function ht(){function a(s,n){return function(u){(function(l,t){if(l.v)throw new Error("attempted to call "+t+" after decoration was finished")})(n,"addInitializer"),v(u,"An initializer"),s.push(u)}}function r(s,n){if(!s(n))throw new TypeError("Attempted to access private element on non-instance")}function p(s,n,u,l,t,g,h,m,_){var o;switch(t){case 1:o="accessor";break;case 2:o="method";break;case 3:o="getter";break;case 4:o="setter";break;default:o="field"}var i,e,d={kind:o,name:h?"#"+n:n,static:g,private:h},c={v:!1};if(t!==0&&(d.addInitializer=a(l,c)),h||t!==0&&t!==2)if(t===2)i=function(f){return r(_,f),u.value};else{var y=t===0||t===1;(y||t===3)&&(i=h?function(f){return r(_,f),u.get.call(f)}:function(f){return u.get.call(f)}),(y||t===4)&&(e=h?function(f,b){r(_,f),u.set.call(f,b)}:function(f,b){u.set.call(f,b)})}else i=function(f){return f[n]},t===0&&(e=function(f,b){f[n]=b});var w=h?_.bind():function(f){return n in f};d.access=i&&e?{get:i,set:e,has:w}:i?{get:i,has:w}:{set:e,has:w};try{return s(m,d)}finally{c.v=!0}}function v(s,n){if(typeof s!="function")throw new TypeError(n+" must be a function")}function I(s,n){var u=typeof n;if(s===1){if(u!=="object"||n===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");n.get!==void 0&&v(n.get,"accessor.get"),n.set!==void 0&&v(n.set,"accessor.set"),n.init!==void 0&&v(n.init,"accessor.init")}else if(u!=="function"){var l;throw l=s===0?"field":s===10?"class":"method",new TypeError(l+" decorators must return a function or void 0")}}function j(s){return function(n){s(this,n)}}function z(s,n,u,l,t,g,h,m,_){var o,i,e,d,c,y,w,f=u[0];if(h?o=t===0||t===1?{get:(d=u[3],function(){return d(this)}),set:j(u[4])}:t===3?{get:u[3]}:t===4?{set:u[3]}:{value:u[3]}:t!==0&&(o=Object.getOwnPropertyDescriptor(n,l)),t===1?e={get:o.get,set:o.set}:t===2?e=o.value:t===3?e=o.get:t===4&&(e=o.set),typeof f=="function")(c=p(f,l,o,m,t,g,h,e,_))!==void 0&&(I(t,c),t===0?i=c:t===1?(i=c.init,y=c.get||e.get,w=c.set||e.set,e={get:y,set:w}):e=c);else for(var b=f.length-1;b>=0;b--){var x;(c=p(f[b],l,o,m,t,g,h,e,_))!==void 0&&(I(t,c),t===0?x=c:t===1?(x=c.init,y=c.get||e.get,w=c.set||e.set,e={get:y,set:w}):e=c,x!==void 0&&(i===void 0?i=x:typeof i=="function"?i=[i,x]:i.push(x)))}if(t===0||t===1){if(i===void 0)i=function(E,M){return M};else if(typeof i!="function"){var k=i;i=function(E,M){for(var P=M,S=0;S<k.length;S++)P=k[S].call(E,P);return P}}else{var C=i;i=function(E,M){return C.call(E,M)}}s.push(i)}t!==0&&(t===1?(o.get=e.get,o.set=e.set):t===2?o.value=e:t===3?o.get=e:t===4&&(o.set=e),h?t===1?(s.push(function(E,M){return e.get.call(E,M)}),s.push(function(E,M){return e.set.call(E,M)})):t===2?s.push(e):s.push(function(E,M){return e.call(E,M)}):Object.defineProperty(n,l,o))}function D(s,n,u){for(var l,t,g,h=[],m=new Map,_=new Map,o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i)){var e,d,c=i[1],y=i[2],w=i.length>3,f=c>=5,b=u;if(f?(e=s,(c-=5)!==0&&(d=t=t||[]),w&&!g&&(g=function(C){return pt(C)===s}),b=g):(e=s.prototype,c!==0&&(d=l=l||[])),c!==0&&!w){var x=f?_:m,k=x.get(y)||0;if(k===!0||k===3&&c!==4||k===4&&c!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+y);!k&&c>2?x.set(y,c):x.set(y,!0)}z(h,e,i,y,c,f,w,d,b)}}return T(h,l),T(h,t),h}function T(s,n){n&&s.push(function(u){for(var l=0;l<n.length;l++)n[l].call(u);return u})}return function(s,n,u,l){return{e:D(s,n,l),get c(){return function(t,g){if(g.length>0){for(var h=[],m=t,_=t.name,o=g.length-1;o>=0;o--){var i={v:!1};try{var e=g[o](m,{kind:"class",name:_,addInitializer:a(h,i)})}finally{i.v=!0}e!==void 0&&(I(10,e),m=e)}return[m,function(){for(var d=0;d<h.length;d++)h[d].call(m)}]}}(s,u)}}}}function rt(a,r,p,v){return(rt=ht())(a,r,p,v)}function pt(a){if(Object(a)!==a)throw TypeError("right-hand side of 'in' should be an object, got "+(a!==null?typeof a:"null"));return a}var W,U;const q=class q{constructor(){B(this,W,void 0);B(this,U,void 0);this.id=lt(),this.event=new ct,V(this,W,(tt(this),Y(this,0))),V(this,U,Z(this,1e3/60)),this._stop=null}get elapsedMs(){return $(this,W)}set elapsedMs(r){V(this,W,r)}get deltaMs(){return $(this,U)}set deltaMs(r){V(this,U,r)}start(){if(this._stop)return this;let r=null;return this._stop=st(p=>{if(r!==null){const v=p-r;this.elapsedMs+=v,this.deltaMs=v,this.event.emit(this)}r=p}),this}stop(){var r;return(r=this._stop)==null||r.call(this),this._stop=null,this}listen(r){return this.event.listen(r)}};W=new WeakMap,U=new WeakMap,[Y,Z,tt]=rt(q,[[F,1,"elapsedMs"],[F,1,"deltaMs"]],[]).e;let et=q;export{X as S,et as T,wt as d};
