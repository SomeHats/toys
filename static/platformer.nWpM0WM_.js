import{u as f,a as m,b as M}from"./chunk_utils.qw3xpJ_t.js";/* empty css                       */import{E as N}from"./chunk_EventEmitter.__zN63g-.js";import{D as O}from"./chunk_DebugDraw.ychrZIxY.js";import{A as a}from"./chunk_AABB.VzaPYI_h.js";import{V as r}from"./chunk_Vector2.7Ra9a_Y4.js";import{a as u,E as p,C as F}from"./chunk_Entity.qjfsTDH5.js";import{S as L}from"./chunk_SceneSystem.qzPt8dlM.js";import"./chunk_index.HRzIbU8d.js";import"./chunk__commonjsHelpers.5-cIlDoe.js";class w{constructor(n){const s=new Map,A=new Map;for(const[_,E]of f(n)){for(const U of E)s.set(U,_);A.set(_,{downEvent:new N,upEvent:new N,isDown:!1})}this.keyCodeToAction=s,this.actionInfo=A,document.addEventListener("keydown",_=>{const E=this.getActionInfoForKeyCodeIfExists(_.keyCode);E&&(E.isDown=!0,E.downEvent.emit())}),document.addEventListener("keyup",_=>{const E=this.getActionInfoForKeyCodeIfExists(_.keyCode);E&&(E.isDown=!1,E.upEvent.emit())})}isDown(n){return this.getActionInfo(n).isDown}onDown(n,s){return this.getActionInfo(n).downEvent.listen(s)}onUp(n,s){return this.getActionInfo(n).upEvent.listen(s)}getActionInfoForKeyCodeIfExists(n){const s=this.keyCodeToAction.get(n);return s?this.getActionInfo(s):null}getActionInfo(n){const s=this.actionInfo.get(n);return m(s,"Assertion Error: actionInfo"),s}}var i=(t=>(t[t.THAT_KEY_HAS_NO_KEYCODE=0]="THAT_KEY_HAS_NO_KEYCODE",t[t.BREAK=3]="BREAK",t[t.BACKSPACE_DELETE=8]="BACKSPACE_DELETE",t[t.TAB=9]="TAB",t[t.CLEAR=12]="CLEAR",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.PAUSE_BREAK=19]="PAUSE_BREAK",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESCAPE=27]="ESCAPE",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT_ARROW=37]="LEFT_ARROW",t[t.UP_ARROW=38]="UP_ARROW",t[t.RIGHT_ARROW=39]="RIGHT_ARROW",t[t.DOWN_ARROW=40]="DOWN_ARROW",t[t.SELECT=41]="SELECT",t[t.PRINT=42]="PRINT",t[t.EXECUTE=43]="EXECUTE",t[t.PRINT_SCREEN=44]="PRINT_SCREEN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.HELP=47]="HELP",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_1=49]="DIGIT_1",t[t.DIGIT_2=50]="DIGIT_2",t[t.DIGIT_3=51]="DIGIT_3",t[t.DIGIT_4=52]="DIGIT_4",t[t.DIGIT_5=53]="DIGIT_5",t[t.DIGIT_6=54]="DIGIT_6",t[t.DIGIT_7=55]="DIGIT_7",t[t.DIGIT_8=56]="DIGIT_8",t[t.DIGIT_9=57]="DIGIT_9",t[t.COLON=58]="COLON",t[t.LESS_THAN=60]="LESS_THAN",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.NUMPAD_0=96]="NUMPAD_0",t[t.NUMPAD_1=97]="NUMPAD_1",t[t.NUMPAD_2=98]="NUMPAD_2",t[t.NUMPAD_3=99]="NUMPAD_3",t[t.NUMPAD_4=100]="NUMPAD_4",t[t.NUMPAD_5=101]="NUMPAD_5",t[t.NUMPAD_6=102]="NUMPAD_6",t[t.NUMPAD_7=103]="NUMPAD_7",t[t.NUMPAD_8=104]="NUMPAD_8",t[t.NUMPAD_9=105]="NUMPAD_9",t[t.NUMPAD_MULTIPLY=106]="NUMPAD_MULTIPLY",t[t.NUMPAD_ADD=107]="NUMPAD_ADD",t[t.NUMPAD_PERIOD=108]="NUMPAD_PERIOD",t[t.NUMPAD_SUBTRACT=109]="NUMPAD_SUBTRACT",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.F13=124]="F13",t[t.F14=125]="F14",t[t.F15=126]="F15",t[t.F16=127]="F16",t[t.F17=128]="F17",t[t.F18=129]="F18",t[t.F19=130]="F19",t[t.F20=131]="F20",t[t.F21=132]="F21",t[t.F22=133]="F22",t[t.F23=134]="F23",t[t.F24=135]="F24",t[t.F25=136]="F25",t[t.F26=137]="F26",t[t.F27=138]="F27",t[t.F28=139]="F28",t[t.F29=140]="F29",t[t.F30=141]="F30",t[t.F31=142]="F31",t[t.F32=143]="F32",t[t.NUM_LOCK=144]="NUM_LOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.AIRPLANE_MODE=151]="AIRPLANE_MODE",t[t.PAGE_BACKWARD=166]="PAGE_BACKWARD",t[t.PAGE_FORWARD=167]="PAGE_FORWARD",t[t.HOME_KEY=172]="HOME_KEY",t[t.SEMI_COLON=186]="SEMI_COLON",t[t.EQUAL_SIGN=187]="EQUAL_SIGN",t[t.COMMA=188]="COMMA",t[t.DASH=189]="DASH",t[t.PERIOD=190]="PERIOD",t[t.FORWARD_SLASH=191]="FORWARD_SLASH",t[t.GRAVE_ACCENT=192]="GRAVE_ACCENT",t[t.OPEN_BRACKET=219]="OPEN_BRACKET",t[t.BACK_SLASH=220]="BACK_SLASH",t[t.CLOSE_BRACKET=221]="CLOSE_BRACKET",t[t.SINGLE_QUOTE=222]="SINGLE_QUOTE",t))(i||{});const P=class P extends L{afterAddToScene(n){super.afterAddToScene(n),this.debugDraw=new O(n.ctx)}};P.systemName="DebugDragSystem";let I=P;const c=class c extends L{afterAddToScene(n){super.afterAddToScene(n),this.debugDraw=new O(n.ctx)}afterDraw(){}};c.systemName="AABBDebugDrawSystem";let S=c;class R extends F{constructor(n,s){super(n),this.value=s}setOrigin(n){this.value=new a(n,this.value.size)}beforeDraw(n,s){n.save(),n.translate(this.value.left,this.value.top)}afterDraw(n,s){n.restore()}}class l extends F{constructor(n,s){super(n),this.opts=s}getAABB(){return this.entity.getComponent(R).value}draw(n){this.getScene().getSystem(I).debugDraw.aabb(new a(r.ZERO,this.getAABB().size),this.opts)}}class h extends F{constructor(n,s,A){super(n),this.moveSpeed=s,this.controls=A}update(n){const s=this.entity.getComponent(R);let A=s.value.origin;this.controls.isDown("left")&&(A=A.sub(new r(this.moveSpeed*n,0))),this.controls.isDown("right")&&(A=A.add(new r(this.moveSpeed*n,0))),this.controls.isDown("jump")&&(A=A.sub(new r(0,this.moveSpeed*n))),this.controls.isDown("down")&&(A=A.add(new r(0,this.moveSpeed*n))),s.setOrigin(A)}}const D=new u(800,600,window.devicePixelRatio);D.addSystem(new I);const T=new p;T.addComponent(R,new a(new r(200,200),new r(20,30)));T.addComponent(l,{fill:"lime",stroke:"black",strokeWidth:1});T.addComponent(h,.4,new w({left:[i.A,i.LEFT_ARROW],right:[i.D,i.RIGHT_ARROW],jump:[i.W,i.UP_ARROW,i.SPACE],down:[i.S]}));D.addChild(T);D.appendTo(M(document.getElementById("root"),'Assertion Error: document.getElementById("root")'));D.start();console.log(D);
