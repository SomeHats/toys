var it=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var C=(t,e,n)=>(it(t,e,"read from private field"),n?n.call(t):e.get(t)),H=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Q=(t,e,n,r)=>(it(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);import{t as Y,s as Yt,O as Ye,k as Gt,h as st,g as vt,a as k,P as G,b as le,l as wt,f as ge,Q as at,F as Xt,E as Fe,H as Pt,c as T,R as ie,r as yt,S as en}from"../chunks/chunk_assert.132f6b36.js";/* empty css                               */import{r as P,s as Ae,a as tn,R as M}from"../chunks/chunk_index.8cb7377b.js";import{e as $e,d as Ce,u as Ge,b as D,m as nn,a as St,f as rn,g as Ue,s as on,c as sn}from"../chunks/chunk_theme.ab8349b3.js";import{b as an,R as je,P as yn,d as xn,c as W,V as v,a as cn,e as Le,f as ln,g as un,p as dn,h as pn}from"../chunks/chunk_Vector2.44438dce.js";import{A as It}from"../chunks/chunk_AABB.3f033cac.js";import{j as l,c as N,F as ue,a as _}from"../chunks/chunk_jsx-runtime.e6b2899b.js";import{E as hn}from"../chunks/chunk_EventEmitter.794fea6f.js";import"../chunks/chunk__commonjsHelpers.fbcca4d8.js";const Xe=300,fn=30,gn=500,mn=10,me={size:16,streamline:.5,smoothing:.5,thinning:.5,simulatePressure:!0,easing:t=>t,start:{},end:{},last:!1},vn="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("");class Oe{constructor(e,n=16){this.randomLength=n,this.debugIdCounter=0,this.prefix=e,this.Id=`${e}.SAMPLE`;const r=new RegExp(`^${this.prefix}\\.([a-zA-Z0-9_]+)$`);this.parse=an(xn,o=>r.test(o)?je.ok(o):je.error(new yn(`Expected ${this.prefix}.*, got ${o}`,[])))}generate(){const e=Y(this.randomLength,()=>Yt(vn)).join("");return`${this.prefix}.${e}`}}const de=new Oe("key"),wn=W({id:de.parse,position:v.parse}),pe=new Oe("shp"),Pn=W({id:pe.parse}),et=new Oe("shv"),Sn=W({id:et.parse,keyPointId:de.parse,shapeId:pe.parse,rawPoints:cn(v.parse)}),kt=new Oe("doc"),bt=W({id:kt.parse,keyPoints:Le(de.parse,wn),shapes:Le(pe.parse,Pn),shapeVersions:Le(et.parse,Sn)});function In(){return{id:kt.generate(),keyPoints:{},shapes:{},shapeVersions:{}}}class U{static fromArray(e){return new U(Ye(e.map(n=>[n.id,n])))}constructor(e){this.data=e}count(){return Gt(this.data).length}has(e){return st(this.data,e)}getIfExists(e){return vt(this.data,e)}get(e){const n=this.getIfExists(e);return k(n!=null,`Item with id ${e} not found`),n}insert(e){return new U({...this.data,[e.id]:e})}update(e,n){const r=this.get(e),o=G(r,n);return k(r.id===o.id),this.insert(o)}delete(e){const{[e]:n,...r}=this.data;return new U(r)}*[Symbol.iterator](){for(const e in this.data)st(this.data,e)&&(yield le(this.data[e]))}toJSON(){return this.data}}var K,X,ae;const _e=class{constructor(e,n,r,o){H(this,K,void 0);H(this,X,void 0);H(this,ae,void 0);this.index=e,Q(this,K,n),Q(this,X,r),Q(this,ae,o)}static build(e,n,r,o){const i=new Map;for(const s of e){const a=n(s);k(!i.has(a)),i.set(a,r(s))}return new _e(i,n,r,o)}withIndex(e){return new _e(e,C(this,K),C(this,X),C(this,ae))}lookup(e){return this.index.get(C(this,ae).call(this,e))}insert(e){const n=C(this,K).call(this,e);k(!this.index.has(n),`key ${n} already exists in index`);const r=new Map(this.index);return r.set(n,C(this,X).call(this,e)),this.withIndex(r)}remove(e){const n=C(this,K).call(this,e);k(this.index.has(n),`key ${n} does not exist in index`);const r=new Map(this.index);return r.delete(n),this.withIndex(r)}update(e){const n=C(this,K).call(this,e);k(this.index.has(n),`key ${n} does not exist in index`);const r=new Map(this.index);return r.set(n,C(this,X).call(this,e)),this.withIndex(r)}toJSON(){return Ye(this.index)}};let Ke=_e;K=new WeakMap,X=new WeakMap,ae=new WeakMap;const kn=new Set;var ee,te,ye;const Ne=class{constructor(e,n,r,o){H(this,ee,void 0);H(this,te,void 0);H(this,ye,void 0);this.index=e,Q(this,ee,n),Q(this,te,r),Q(this,ye,o)}static build(e,n,r,o){const i=new Map;for(const s of e){const a=n(s);let x=i.get(a);x||(x=new Set,i.set(a,x)),x.add(r(s))}return new Ne(i,n,r,o)}withIndex(e){return new Ne(e,C(this,ee),C(this,te),C(this,ye))}lookup(e){var n;return(n=this.index.get(C(this,ye).call(this,e)))!=null?n:kn}insert(e){const n=C(this,ee).call(this,e),r=C(this,te).call(this,e),o=this.index.get(n);let i;o?(k(!o.has(r),"already exists"),i=new Set(o)):i=new Set,i.add(r);const s=new Map(this.index);return s.set(n,i),this.withIndex(s)}remove(e){const n=C(this,ee).call(this,e),r=C(this,te).call(this,e),o=this.index.get(n);k(o&&o.has(r),"value does not exist"),new Set(o).delete(r);const s=new Map(this.index);return s.delete(n),this.withIndex(s)}update(e,n){return this.remove(e).insert(n)}toJSON(){return Ye(this.index)}};let ze=Ne;ee=new WeakMap,te=new WeakMap,ye=new WeakMap;const{min:re,PI:Qr}=Math,xt=.275;function Et(t,e={}){const{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:s=h=>h,start:a={},end:x={}}=e,{easing:y=h=>h*(2-h)}=a,{easing:c=h=>--h*h*h+1}=x;if(t.length===0||n<=0)return[];const u=t[t.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,u):a.taper,w=x.taper===!1?0:x.taper===!0?Math.max(n,u):x.taper,m=Math.pow(n*r,2),d=[];let S=t.slice(0,10).reduce((h,O)=>{let ne=O.pressure;if(i){const Ie=re(1,O.distance/n),q=re(1,1-Ie);ne=re(1,h+(q-h)*(Ie*xt))}return(h+ne)/2},t[0].pressure),b=ct(n,o,t[t.length-1].pressure,s),g=t[0].point,f=g;for(let h=0;h<t.length;h++){let{pressure:O}=t[h];const{point:ne,distance:Ie,runningLength:q}=t[h];if(h<t.length-1&&u-q<3)continue;if(o){if(i){const ot=re(1,Ie/n),Qt=re(1,1-ot);O=re(1,S+(Qt-S)*(ot*xt))}b=ct(n,o,O,s)}else b=n/2;const qt=q<p?y(q/p):1,Ht=u-q<w?c((u-q)/w):1;if(b=Math.max(.01,b*Math.min(qt,Ht)),h===t.length-1){d.push({center:ne,radius:b});continue}f=ne,(h<=1||g.distanceToSq(f)>m)&&(d.push({center:ne,radius:b}),g=f),S=O}return d}function Ct(t,e={}){var p,w;const{streamline:n=.5,size:r=16,last:o=!1}=e;if(t.length===0)return[];const i=.15+(1-n)*.85;let s=t.map(m=>({point:v.fromVectorLike(m),pressure:m.pressure}));if(s.length===2){const m=s[1];s=s.slice(0,-1);for(let d=1;d<5;d++)s.push({point:s[0].point.lerp(m.point,d/4),pressure:m.pressure})}s.length===1&&s.push({point:s[0].point.add(v.UNIT),pressure:s[0].pressure});const a=[{point:s[0].point,pressure:s[0].pressure!=null&&s[0].pressure>=0?s[0].pressure:.25,vector:v.UNIT,distance:0,runningLength:0}];let x=!1,y=0,c=a[0];const u=s.length-1;for(let m=1;m<s.length;m++){const d=s[m],S=o&&m===u?d.point:c.point.lerp(d.point,i);if(c.point.equals(S))continue;const b=S.distanceTo(c.point);if(y+=b,m<u&&!x){if(y<r)continue;x=!0}c={point:S,pressure:d.pressure!=null&&d.pressure>=0?d.pressure:.5,vector:c.point.sub(S).normalize(),distance:b,runningLength:y},a.push(c)}return a[0].vector=(w=(p=a[1])==null?void 0:p.vector)!=null?w:v.ZERO,a}function ct(t,e,n,r=o=>o){return t*r(.5-e*(.5-n))}function Ze(t){if(!t.length)return"";const e=["M",t[0].x,t[0].y,"Q"];for(let n=0;n<t.length;n++){const r=t[n],o=t[(n+1)%t.length],i=r.add(o).scale(.5);e.push(r.x,r.y,i.x,i.y)}return e.push("Z"),e.join(" ")}function zt(t,e){const n=[t[0]];if(t.length===0)return[];let r=e,o=t[0],i=t[0].center;for(let s=1;s<t.length;s++){const a=t[s],x=t[Math.min(s+1,t.length-1)],y=a.center.add(x.center).scale(.5),c=a.center.distanceTo(o.center),u=i,p=a.center,w=y;let m=0;for(;c-m>=r;){const d=(r+m)/c;n.push({center:u.lerp(p,d).lerp(p.lerp(w,d),d),radius:wt(o.radius,a.radius,d)}),m+=r,r=e}r-=c-m,o=a,i=y}return n.push(t[t.length-1]),n}function Me(t){var i,s;const e=Array.from(t);if(e.length===0)return{versions:new U({})};const n=[];let r=0;for(const a of e){const x=Ct(a.rawPoints),y=(s=(i=x[x.length-1])==null?void 0:i.runningLength)!=null?s:0;n.push({id:a.id,strokePoints:x,length:y}),y>r&&(r=y)}const o=Math.floor(r/me.size);return{versions:U.fromArray(n.map(({strokePoints:a,length:x,id:y})=>({id:y,length:x,normalizedCenterPoints:zt(Et(a,me),x/o)})))}}function J(){}J.prototype={diff:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.callback;typeof r=="function"&&(o=r,r={}),this.options=r;var i=this;function s(d){return o?(setTimeout(function(){o(void 0,d)},0),!0):d}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var a=n.length,x=e.length,y=1,c=a+x;r.maxEditLength&&(c=Math.min(c,r.maxEditLength));var u=[{newPos:-1,components:[]}],p=this.extractCommon(u[0],n,e,0);if(u[0].newPos+1>=a&&p+1>=x)return s([{value:this.join(n),count:n.length}]);function w(){for(var d=-1*y;d<=y;d+=2){var S=void 0,b=u[d-1],g=u[d+1],f=(g?g.newPos:0)-d;b&&(u[d-1]=void 0);var h=b&&b.newPos+1<a,O=g&&0<=f&&f<x;if(!h&&!O){u[d]=void 0;continue}if(!h||O&&b.newPos<g.newPos?(S=En(g),i.pushComponent(S.components,void 0,!0)):(S=b,S.newPos++,i.pushComponent(S.components,!0,void 0)),f=i.extractCommon(S,n,e,d),S.newPos+1>=a&&f+1>=x)return s(bn(i,S.components,n,e,i.useLongestToken));u[d]=S}y++}if(o)(function d(){setTimeout(function(){if(y>c)return o();w()||d()},0)})();else for(;y<=c;){var m=w();if(m)return m}},pushComponent:function(e,n,r){var o=e[e.length-1];o&&o.added===n&&o.removed===r?e[e.length-1]={count:o.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},extractCommon:function(e,n,r,o){for(var i=n.length,s=r.length,a=e.newPos,x=a-o,y=0;a+1<i&&x+1<s&&this.equals(n[a+1],r[x+1]);)a++,x++,y++;return y&&e.components.push({count:y}),e.newPos=a,x},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function bn(t,e,n,r,o){for(var i=0,s=e.length,a=0,x=0;i<s;i++){var y=e[i];if(y.removed){if(y.value=t.join(r.slice(x,x+y.count)),x+=y.count,i&&e[i-1].added){var u=e[i-1];e[i-1]=e[i],e[i]=u}}else{if(!y.added&&o){var c=n.slice(a,a+y.count);c=c.map(function(w,m){var d=r[x+m];return d.length>w.length?d:w}),y.value=t.join(c)}else y.value=t.join(n.slice(a,a+y.count));a+=y.count,y.added||(x+=y.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}function En(t){return{newPos:t.newPos,components:t.components.slice(0)}}var lt=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,ut=/\S/,Tt=new J;Tt.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!ut.test(t)&&!ut.test(e)};Tt.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&lt.test(e[n])&&lt.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var Dt=new J;Dt.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),e.push(o))}return e};var Cn=new J;Cn.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var zn=new J;zn.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Ee(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ee=function(e){return typeof e}:Ee=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(t)}var Tn=Object.prototype.toString,xe=new J;xe.useLongestToken=!0;xe.tokenize=Dt.tokenize;xe.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,o=r===void 0?function(i,s){return typeof s>"u"?n:s}:r;return typeof t=="string"?t:JSON.stringify(We(t,null,null,o),o,"  ")};xe.equals=function(t,e){return J.prototype.equals.call(xe,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Dn(t,e,n){return xe.diff(t,e,n)}function We(t,e,n,r,o){e=e||[],n=n||[],r&&(t=r(o,t));var i;for(i=0;i<e.length;i+=1)if(e[i]===t)return n[i];var s;if(Tn.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),i=0;i<t.length;i+=1)s[i]=We(t[i],e,n,r,o);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),Ee(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var a=[],x;for(x in t)t.hasOwnProperty(x)&&a.push(x);for(a.sort(),i=0;i<a.length;i+=1)x=a[i],s[x]=We(t[x],e,n,r,x);e.pop(),n.pop()}else s=t;return s}var Je=new J;Je.tokenize=function(t){return t.slice()};Je.join=Je.removeEmpty=function(t){return t};class ${constructor(e,n=0,r=!0){if(this.data=e,this.version=n,!r)return;const o=this.serialize(),i=$.deserialize(o,this.version);if(!$e(this,i)){console.log({actual:this,expected:i});const s=JSON.stringify(this,null,2),a=JSON.stringify(i,null,2);for(const x of Dn(s,a))console.log("CHANGE",x);ge(`Mismatch after update:
Actual:
${JSON.stringify(this,null,2)}

Expected:
${JSON.stringify(i,null,2)}`)}}static create(){return $.deserialize(In())}static deserialize(e,n=0){const r=new U(e.shapeVersions);return new $({id:e.id,keyPoints:new U(e.keyPoints),shapes:new U(e.shapes),shapeVersions:r,shapeVersionLookup:Ke.build(r,o=>`${o.shapeId}/${o.keyPointId}`,o=>o.id,([o,i])=>`${o}/${i}`),shapeVersionIdsByShape:ze.build(r,o=>o.shapeId,o=>o.id,at),shapeVersionIdsByKeyPoint:ze.build(r,o=>o.keyPointId,o=>o.id,at),normalizedShapeVersions:Me(Array.from(r)).versions},n,!1)}with(e){return new $({...this.data,...e},this.version+1)}serialize(){return{id:this.data.id,keyPoints:this.data.keyPoints.data,shapes:this.data.shapes.data,shapeVersions:this.data.shapeVersions.data}}get shapes(){return this.data.shapes}get keyPoints(){return this.data.keyPoints}get shapeVersions(){return this.data.shapeVersions}getShapeVersion(e,n){const r=this.data.shapeVersionLookup.lookup([n,e]);return r?this.shapeVersions.get(r):null}getNormalizedCenterPointsForShapeVersion(e){return this.data.normalizedShapeVersions.get(e).normalizedCenterPoints}*iterateShapeVersionsForShape(e){for(const n of this.data.shapeVersionIdsByShape.lookup(e))yield this.shapeVersions.get(n)}addShape(e){console.log("doc.addShape",e);const n=this.shapes.insert({id:e});return this.with({shapes:n})}addKeyPoint(e,n){console.log("doc.addKeyPoint",e);const r=this.keyPoints.insert({id:e,position:n});return this.with({keyPoints:r})}updateKeypoint(e,n){return this.with({keyPoints:this.keyPoints.update(e,n)})}replacePointsForVersion(e,n,r){const o=this.getShapeVersion(e,n);if(o){const a=this.shapeVersions.insert({...o,rawPoints:r});return this.with({shapeVersions:a,normalizedShapeVersions:Me(a).versions})}const i={id:et.generate(),keyPointId:e,shapeId:n,rawPoints:r},s=this.shapeVersions.insert(i);return this.with({shapeVersions:s,normalizedShapeVersions:Me(s).versions,shapeVersionLookup:this.data.shapeVersionLookup.insert(i),shapeVersionIdsByShape:this.data.shapeVersionIdsByShape.insert(i),shapeVersionIdsByKeyPoint:this.data.shapeVersionIdsByKeyPoint.insert(i)})}}var I=(t=>(t.Draw="draw",t.Rig="rig",t.Play="play",t))(I||{});const _n=ln(I);var tt=(t=>(t.Pan="quickPan",t))(tt||{});const Nn=W({pan:un,zoom:dn});class se{static default(e){return new se({pan:v.ZERO,zoom:1,screenSize:e})}static deserialize({pan:e,zoom:n},r){return new se({pan:v.deserialize(e),zoom:n,screenSize:r})}constructor({pan:e,zoom:n,screenSize:r}){this.pan=e,this.zoom=n,this.screenSize=r}with(e){var n,r,o;return new se({pan:(n=e.pan)!=null?n:this.pan,zoom:(r=e.zoom)!=null?r:this.zoom,screenSize:(o=e.screenSize)!=null?o:this.screenSize})}serialize(){return{pan:this.pan.serialize(),zoom:this.zoom}}canvasScreenSize(){return this.screenSize.sub(new v(Xe,0))}handleWheelEvent(e){e.preventDefault(),e.stopImmediatePropagation();const{deltaX:n,deltaY:r}=e;if(e.ctrlKey){const o=v.fromEvent(e),{pan:i,zoom:s}=this,a=Math.exp(-r/100)*s,x=o.add(i).scale(a/s).sub(o);return this.with({pan:x,zoom:a})}else return this.with({pan:this.pan.add(new v(n,r))})}origin(){return this.pan.sub(this.canvasScreenSize().scale(.5*this.zoom))}visibleSceneBounds(){return new It(this.origin(),this.canvasScreenSize())}screenToScene(e){return e.add(this.origin()).scale(1/this.zoom)}sceneToScreen(e){return e.scale(this.zoom).sub(this.origin())}eventSceneCoords(e){return this.screenToScene(v.fromEvent(e))}getSceneTransform(){const e=this.origin();return`translate(${-e.x}, ${-e.y}) scale(${this.zoom}) `}}const On=W({keyPointId:de.parse,shapeId:pe.parse,viewport:Nn,tool:_n});class ce{static deserialize(e,n){return new ce({keyPointId:e.keyPointId,shapeId:e.shapeId,viewport:se.deserialize(e.viewport,n),tool:e.tool})}constructor({keyPointId:e,shapeId:n,viewport:r,tool:o}){this.keyPointId=e,this.shapeId=n,this.viewport=r,this.tool=o}serialize(){return{keyPointId:this.keyPointId,shapeId:this.shapeId,viewport:this.viewport.serialize(),tool:this.tool}}with(e){var n,r,o,i;return new ce({keyPointId:(n=e.keyPointId)!=null?n:this.keyPointId,shapeId:(r=e.shapeId)!=null?r:this.shapeId,viewport:(o=e.viewport)!=null?o:this.viewport,tool:(i=e.tool)!=null?i:this.tool})}}const _t=W({document:bt,location:On});function Nt(t){return{document:t.document.serialize(),location:t.location.serialize()}}function Vn(t,e){return{document:$.deserialize(t.document),location:ce.deserialize(t.location,e)}}function An(t,e){return Fe(`splatapus.${t}`)?_t(Fe(`splatapus.${t}`)).mapErr(r=>r.toString()).map(r=>Vn(r,e)):je.error("No saved data found")}function Ln(t,e){window.splatSerializedDoc=e,Pt(`splatapus.${t}`,Nt(e))}const Mn=Xt(gn,Ln);function Ot(t,e){const n=[...t.keyPoints][0].id,r=[...t.shapes][0].id;return new ce({keyPointId:n,shapeId:r,viewport:se.default(e),tool:I.Draw})}function Vt(t){const e=de.generate(),n=pe.generate(),r=$.create().addKeyPoint(e,v.ZERO).addShape(n).replacePointsForVersion(e,n,[]);return{document:r,location:Ot(r,t)}}const dt={initialize(){return{state:"idle"}},onPointerEvent(t,e){switch(t.eventType){case"down":switch(e.state){case"idle":return{pan:{state:"oneFingerDown",pointerA:{id:t.event.pointerId,startScreenPosition:v.fromEvent(t.event),currentScreenPosition:v.fromEvent(t.event),startEvent:t.event}},passthroughContext:t};case"oneFingerDown":return{pan:{state:"bothFingersDown",pointerA:e.pointerA,pointerB:{id:t.event.pointerId,startScreenPosition:v.fromEvent(t.event),currentScreenPosition:v.fromEvent(t.event),startEvent:t.event},initialPan:t.viewport.pan,initialZoom:t.viewport.zoom},passthroughContext:{...t,eventType:"cancel",event:e.pointerA.startEvent}};case"bothFingersDown":return{pan:e,passthroughContext:t};default:throw T(e)}case"move":switch(e.state){case"idle":return{pan:e,passthroughContext:t};case"oneFingerDown":return e.pointerA.id===t.event.pointerId?{pan:{...e,pointerA:{...e.pointerA,currentScreenPosition:v.fromEvent(t.event)}},passthroughContext:t}:{pan:e,passthroughContext:t};case"bothFingersDown":if(t.event.pointerId===e.pointerA.id||t.event.pointerId===e.pointerB.id){const n=t.event.pointerId===e.pointerA.id?v.fromEvent(t.event):e.pointerA.currentScreenPosition,r=t.event.pointerId===e.pointerB.id?v.fromEvent(t.event):e.pointerB.currentScreenPosition,o=e.pointerA.startScreenPosition.distanceTo(e.pointerB.startScreenPosition),s=n.distanceTo(r)/o,a=e.pointerA.startScreenPosition.lerp(e.pointerB.startScreenPosition,.5),x=n.lerp(r,.5);return t.updateViewport(y=>{const c=a.add(e.initialPan).scale(s).sub(x);return y.with({zoom:e.initialZoom*s,pan:c})}),{pan:{...e,pointerA:{...e.pointerA,currentScreenPosition:n},pointerB:{...e.pointerB,currentScreenPosition:r}},passthroughContext:null}}return{pan:e,passthroughContext:t};default:throw T(e)}case"up":case"cancel":switch(e.state){case"idle":return{pan:e,passthroughContext:t};case"oneFingerDown":return t.event.pointerId===e.pointerA.id?{pan:{state:"idle"},passthroughContext:t}:{pan:e,passthroughContext:t};case"bothFingersDown":return t.event.pointerId===e.pointerA.id||t.event.pointerId===e.pointerB.id?{pan:{state:"idle"},passthroughContext:null}:{pan:e,passthroughContext:t};default:throw T(e)}default:T(t.eventType)}}};function Rn(t){return null}function Ve(){return function(e){return{getCanvasClassName:n=>"",getPreviewPosition:n=>null,Overlay:Rn,...e}}}function nt(t){const e={initialize:n=>({state:"idle",childState:n}),isIdle:n=>n.state==="idle",getState:n=>n.childState,onPointerEvent:(n,r,o)=>{switch(n.eventType){case"down":switch(r.state){case"idle":{const i=t.onDragStart(n,r.childState,o);return i?(n.event.preventDefault(),t.onTap?{state:"dragUnconfirmed",pointerId:n.event.pointerId,startPosition:v.fromEvent(n.event),childState:i,startArg:o}:{state:"dragConfirmed",pointerId:n.event.pointerId,childState:i,startArg:o}):r}case"dragUnconfirmed":case"dragConfirmed":return r;default:throw T(r)}case"move":switch(r.state){case"idle":return r;case"dragUnconfirmed":{if(r.pointerId!==n.event.pointerId)return r;const i=t.onDragMove(n,r.childState);return r.startPosition.distanceTo(v.fromEvent(n.event))>=mn?{state:"dragConfirmed",pointerId:r.pointerId,childState:i,startArg:r.startArg}:Object.is(r.childState,i)?r:{...r,childState:i}}case"dragConfirmed":{if(r.pointerId!==n.event.pointerId)return r;const i=t.onDragMove(n,r.childState);return Object.is(r.childState,i)?r:{...r,childState:i}}default:throw T(r)}case"up":switch(r.state){case"idle":return r;case"dragUnconfirmed":{if(r.pointerId!==n.event.pointerId)return r;let i=t.onDragCancel(n,r.childState);return i=t.onTap?t.onTap(n,i,r.startArg):i,{state:"idle",childState:i}}case"dragConfirmed":{if(r.pointerId!==n.event.pointerId)return r;const i=t.onDragEnd(n,r.childState);return{state:"idle",childState:i}}default:throw T(r)}case"cancel":switch(r.state){case"idle":return r;case"dragUnconfirmed":case"dragConfirmed":{if(r.pointerId!==n.event.pointerId)return r;const i=t.onDragCancel(n,r.childState);return{state:"idle",childState:i}}default:throw T(r)}default:T(n.eventType)}},createOnPointerEvent:n=>(r,o,i)=>ie(o,n,s=>e.onPointerEvent(r,s,i))};return e}const he=nt({onDragStart:({event:t,viewport:e})=>({state:"drawing",points:[e.eventSceneCoords(t)]}),onDragMove:({event:t,viewport:e},n)=>({state:"drawing",points:[...n.points,e.eventSceneCoords(t)]}),onDragEnd:({updateDocument:t,location:e},n)=>(t(r=>{const o=r.shapes.get(e.shapeId);return r.replacePointsForVersion(e.keyPointId,o.id,n.points)}),{state:"idle"}),onDragCancel:(t,e)=>({state:"idle"})}),Pe=Ve()({initialize:()=>({type:I.Draw,gesture:he.initialize({state:"idle"})}),isIdle:t=>he.isIdle(t.gesture),getDebugProperties:t=>{const e=he.getState(t.gesture);switch(e.state){case"idle":return{_:"idle"};case"drawing":return{_:"drawing",points:String(e.points.length)};default:T(e)}},getState:t=>he.getState(t.gesture),onPointerEvent:he.createOnPointerEvent("gesture")}),ve=Symbol(),Bn=Symbol(),At=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?P.exports.useEffect:P.exports.useLayoutEffect,Fn=Ae.exports.unstable_runWithPriority?t=>Ae.exports.unstable_runWithPriority(Ae.exports.unstable_NormalPriority,t):t=>t(),$n=t=>t;function Lt(t){const e=P.exports.createContext({[ve]:{v:{current:t},n:{current:-1},l:new Set,u:r=>r()}});var n;return e[Bn]=e.Provider,e.Provider=(n=e.Provider,({value:r,children:o})=>{const i=P.exports.useRef(r),s=P.exports.useRef(0),[a,x]=P.exports.useState(null);a&&(a(r),x(null));const y=P.exports.useRef();if(!y.current){const c=new Set,u=(p,w)=>{tn.exports.unstable_batchedUpdates(()=>{s.current+=1;const m={n:s.current};w!=null&&w.suspense&&(m.n*=-1,m.p=new Promise(d=>{x(()=>S=>{m.v=S,delete m.p,d(S)})})),c.forEach(d=>d(m)),p()})};y.current={[ve]:{v:i,n:s,l:c,u}}}return At(()=>{i.current=r,s.current+=1,Fn(()=>{y.current[ve].l.forEach(c=>{c({n:s.current,v:r})})})},[r]),P.exports.createElement(n,{value:y.current},o)}),delete e.Consumer,e}function Mt(t,e){const n=P.exports.useContext(t)[ve],{v:{current:r},n:{current:o},l:i}=n,s=e(r),[a,x]=P.exports.useReducer((y,c)=>{if(!c)return[r,s];if("p"in c)throw c.p;if(c.n===o)return Object.is(y[1],s)?y:[r,s];try{if("v"in c){if(Object.is(y[0],c.v))return y;const u=e(c.v);return Object.is(y[1],u)?y:[c.v,u]}}catch{}return[...y]},[r,s]);return Object.is(a[1],s)||x(),At(()=>(i.add(x),()=>{i.delete(x)}),[i]),a[1]}function Un(t){return Mt(t,$n)}function jn(t){const e=P.exports.useContext(t)[ve],{u:n}=e;return n}const Rt={interpolated:(t,e)=>({type:"interpolated",scenePosition:t,selectedShapeId:e}),keyPointId:(t,e)=>({type:"keyPointId",keyPointId:t,selectedShapeId:e}),toDebugString:t=>{switch(t.type){case"interpolated":return Ce(t.type,{_:t.scenePosition.toString(2),shape:t.selectedShapeId});case"keyPointId":return Ce(t.type,{_:t.keyPointId,shape:t.selectedShapeId});default:T(t)}}},V={initialize:t=>({undoStates:[],redoStates:[],pendingOp:null,current:{...t,options:{}}}),canUndo:t=>t.undoStates.length>0,canRedo:t=>{var e,n;return((n=(e=t.redoStates)==null?void 0:e.length)!=null?n:0)>0},beginOperation:t=>{const e=Math.random();return k(t.pendingOp==null,"pending op already in progress"),{undoStack:{...t,pendingOp:{txId:e,initialDoc:t.current.document,initialOptions:t.current.options},current:{...t.current,options:{}}},txId:e}},updateOperation:(t,e,n)=>{var r;return k(((r=t.pendingOp)==null?void 0:r.txId)===e,"pending op mismatch"),{...t,current:{...t.current,document:G(t.current.document,n)}}},revertOperation:(t,e)=>{var n;return k(((n=t.pendingOp)==null?void 0:n.txId)===e,"Pending op mismatch"),{...t,pendingOp:null,current:{document:t.pendingOp.initialDoc,location:t.current.location,options:t.pendingOp.initialOptions}}},commitOperation:(t,e,n={})=>{var i;k(((i=t.pendingOp)==null?void 0:i.txId)===e,"Pending op mismatch");const r=[{document:t.pendingOp.initialDoc,location:t.current.location,options:t.pendingOp.initialOptions},...t.undoStates];for(;r.length>fn;)r.pop();const o={...t.current,options:n};return n.lockstepLocation&&(o.location=G(o.location,n.lockstepLocation)),{...t,current:o,pendingOp:null,undoStates:r,redoStates:null}},updateDocument:(t,e,n)=>{let r;return{undoStack:t,txId:r}=V.beginOperation(t),t=V.updateOperation(t,r,e),V.commitOperation(t,r,n)},undo:(t,e)=>{var i;if(k(t.pendingOp==null,"Pending op in progress"),t.undoStates.length==0)return t;e.triggerAnimation("undo");const[n,...r]=t.undoStates;if(!$e(n.location,t.current.location)&&!t.current.options.lockstepLocation)return{...t,current:{...t.current,location:n.location}};const o=[t.current,...(i=t.redoStates)!=null?i:[]];return{...t,current:n,undoStates:r,redoStates:o}},redo:(t,e)=>{if(k(t.pendingOp==null,"pending op in progress"),!t.redoStates||t.redoStates.length==0)return t;e.triggerAnimation("redo");const[n,...r]=t.redoStates;if(!$e(n.location,t.current.location)&&!n.options.lockstepLocation)return{...t,current:{...t.current,location:n.location}};const o=[t.current,...t.undoStates];return{...t,current:n.options.lockstepLocation?{...n,location:G(t.current.location,n.options.lockstepLocation)}:n,undoStates:o,redoStates:r.length===0?null:r}},updateLocation:(t,e)=>({...t,current:{...t.current,location:G(t.current.location,e)}})};let Kn=1;const Te={initialize:()=>({activeAnimations:{}}),triggerAnimation:(t,e)=>({activeAnimations:{...t.activeAnimations,[e]:Kn++}}),getActiveAnimationId:(t,e)=>{var n;return(n=vt(t.activeAnimations,e))!=null?n:null},acknowledgeAnimation:(t,e,n)=>{const{[e]:r,...o}=t.activeAnimations;return r!==n?t:{activeAnimations:o}}};class Zn{constructor(e){this.updateVfx=e}triggerAnimation(e){this.updateVfx(n=>Te.triggerAnimation(n,e))}}function qe(t,e){const n=P.exports.useRef(null),r=E(s=>Te.getActiveAnimationId(s.vfx,t)),{updateVfx:o}=R(),i=Ge(e);return P.exports.useEffect(()=>{const s=n.current;if(!s||!r)return;const a=i(),x=s.animate(a.keyFrames,a);return x.addEventListener("finish",()=>{o((y,c)=>Te.acknowledgeAnimation(c,t,r))}),x.play(),()=>{x.cancel()}},[r,i,t,o]),n}const A={initialize:t=>({undoStack:V.initialize(t),interaction:L.initialize(I.Draw),vfx:Te.initialize()}),updateUndoStack:(t,e)=>ie(t,"undoStack",e),updateLocation:(t,e)=>A.updateUndoStack(t,n=>V.updateLocation(n,e)),updateDocument:(t,e,n)=>A.updateUndoStack(t,r=>V.updateDocument(r,e,n)),updateViewport:(t,e)=>A.updateLocation(t,n=>n.with({viewport:G(n.viewport,e)})),updateInteraction:(t,e)=>ie(t,"interaction",e),updateVfx:(t,e)=>ie(t,"vfx",e)};function Bt(t,e){const n=r=>e(o=>A.updateVfx(o,r));return{update:e,updateUndoStack:r=>e(o=>A.updateUndoStack(o,r)),updateLocation:r=>e(o=>A.updateLocation(o,r)),updateDocument:(r,o)=>e(i=>A.updateDocument(i,r,o)),updateViewport:r=>e(o=>A.updateViewport(o,r)),updateInteraction:r=>e(o=>A.updateInteraction(o,r)),updateVfx:n,vfx:new Zn(n),document:t.undoStack.current.document,location:t.undoStack.current.location,viewport:t.undoStack.current.location.viewport,state:t}}function Wn(t,e){const n=[];let r=!1;function o(i){k(!r),n.push(i)}e(Bt(t,o));for(let i=0;i<n.length;i++)t=n[i](t);return r=!0,t}function Jn(t,e){const[n,r]=P.exports.useReducer(Wn,null,t),o=Ge(()=>n),i=P.exports.useCallback(p=>{const w=g=>{p(()=>{r(g)})},m=g=>w(f=>f.updateInteraction(h=>g(f,h))),d=g=>w(f=>f.updateViewport(h=>g(f,h))),S=g=>f=>m((h,O)=>L.onPointerEvent({...h,event:f,eventType:g},O));return{getContextForEvent:()=>Bt(o(),g=>{w(f=>g(f.state))}),updateUndoStack:g=>w(f=>f.updateUndoStack(h=>g(f,h))),updateLocation:g=>w(f=>f.updateLocation(h=>g(f,h))),updateDocument:(g,f)=>w(h=>h.updateDocument(O=>g(h,O),f)),updateViewport:d,updateInteraction:m,updateVfx:g=>w(f=>f.updateVfx(h=>g(f,h))),onPointerDown:S("down"),onPointerMove:S("move"),onPointerUp:S("up"),onPointerCancel:S("cancel"),onKeyDown:g=>m((f,h)=>L.onKeyDown({...f,event:g},h)),onKeyUp:g=>m((f,h)=>L.onKeyUp({...f,event:g},h)),onWheel:g=>d((f,h)=>h.handleWheelEvent(g))}},[o]),s=n.undoStack.current.document,a=n.undoStack.current.location,{keyPointId:x,shapeId:y}=n.undoStack.current.location,c=L.getPreviewPosition(n.interaction,y),u=P.exports.useMemo(()=>c!=null?c:Rt.keyPointId(x,y),[c,x,y]);return P.exports.useMemo(()=>({events:i,document:s,location:a,undoStack:n.undoStack,interaction:n.interaction,previewPosition:u,vfx:n.vfx}),[s,i,a,u,n.interaction,n.undoStack,n.vfx])}const rt=Lt(null),Ft=Lt(null);function qn({initialize:t,size:e,children:n}){const r=Jn(t);return l(rt.Provider,{value:r,children:l(Hn,{events:r.events,children:n})})}const Hn=M.memo(function({events:e,children:n}){const r=jn(rt),o=P.exports.useMemo(()=>e(r),[e,r]);return l(Ft.Provider,{value:o,children:n})});function E(t){return Mt(rt,e=>(k(e),t(e)))}function He(t){return E(e=>e[t])}function R(){return le(Un(Ft))}function Qn({position:t,children:e,className:n,style:r,...o}){return l("div",{className:N("absolute top-0 left-0",n),style:{transform:`translate(${t.x}px, ${t.y}px)`,...r},...o,children:e})}function Yn({position:t,screenOffset:e=v.ZERO,...n}){const r=E(o=>o.location.viewport);return l(Qn,{position:r.sceneToScreen(t).add(e),...n})}const ke=nt({onTap:({updateLocation:t},e,n)=>(n&&t(r=>r.with({keyPointId:n})),e),onDragStart:({updateLocation:t,viewport:e,event:n},r,o)=>o?(t(i=>i.with({keyPointId:o})),{state:"moving",keyPointId:o,delta:v.ZERO,startingPosition:e.eventSceneCoords(n)}):null,onDragMove:({viewport:t,event:e},n)=>({...n,delta:t.eventSceneCoords(e).sub(n.startingPosition)}),onDragEnd:({event:t,viewport:e,updateDocument:n},r)=>{const o=e.eventSceneCoords(t).sub(r.startingPosition);return n(i=>i.updateKeypoint(r.keyPointId,s=>({...s,position:s.position.add(o)}))),{state:"idle"}},onDragCancel:()=>({state:"idle"})}),Se=Ve()({initialize:()=>({type:I.Rig,gesture:ke.initialize({state:"idle"}),previewPosition:null}),isIdle:t=>!0,getDebugProperties:t=>{const e=ke.getState(t.gesture);switch(e.state){case"idle":return{_:e.state};case"moving":return{_:e.state,keyPointId:e.keyPointId,delta:e.delta.toString(2)}}},onPointerEvent:ke.createOnPointerEvent("gesture"),Overlay:({tool:t,onUpdateTool:e})=>{const n=ke.getState(t.gesture),r=E(i=>i.document.keyPoints),o=E(i=>i.location.keyPointId);return l(ue,{children:Array.from(r,(i,s)=>{const a=n.state==="moving"&&n.keyPointId===i.id?i.position.add(n.delta):i.position;return l(Yn,{position:a,className:N("-mt-4 -ml-4 flex h-8 w-8 cursor-move items-center justify-center rounded-full"),onPointerDown:x=>{e((y,c)=>Se.onPointerEvent({...y,event:x,eventType:"down"},c,i.id))},children:l("div",{className:N("flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold shadow-md",i.id===o?"bg-gradient-to-br from-cyan-400 to-blue-400 text-white":"border border-stone-200 bg-white text-stone-400"),children:s+1})},i.id)})})}}),be=nt({onDragStart:({event:t,location:e})=>({state:"active",initialPan:e.viewport.pan,previousScreenPoint:v.fromEvent(t)}),onDragMove:({event:t,updateViewport:e},n)=>{const r=v.fromEvent(t);return e(o=>o.with({pan:o.pan.add(n.previousScreenPoint.sub(r).scale(o.zoom))})),{...n,previousScreenPoint:r}},onDragEnd:()=>({state:"idle"}),onDragCancel:({updateViewport:t},e)=>(t(n=>n.with({pan:e.initialPan})),{state:"idle"})}),oe=Ve()({initialize:()=>({type:tt.Pan,gesture:be.initialize({state:"idle"})}),getDebugProperties:t=>{const e=be.getState(t.gesture);switch(e.state){case"idle":return{_:e.state};case"active":return{_:e.state,initialPan:e.initialPan.toString(2),previousScreenPoint:e.previousScreenPoint.toString(0)}}},isIdle:t=>be.isIdle(t.gesture),getCanvasClassName:t=>oe.isIdle(t)?"cursor-grab":"cursor-grabbing",onPointerEvent:be.createOnPointerEvent("gesture")}),De=Ve()({initialize:()=>({type:I.Play,previewPosition:null}),isIdle:t=>!0,getDebugProperties:t=>{var e,n;return{_:(n=(e=t.previewPosition)==null?void 0:e.toString(2))!=null?n:null}},getPreviewPosition:(t,e)=>t.previewPosition?Rt.interpolated(t.previewPosition,e):null,onPointerEvent:({event:t,eventType:e,viewport:n},r)=>{switch(e){case"move":case"down":return t.isPrimary?{...r,previewPosition:n.eventSceneCoords(t)}:r;case"cancel":case"up":return r;default:T(e)}}}),Gn={[I.Draw]:Pe,[I.Rig]:Se,[I.Play]:De,[tt.Pan]:oe};function fe(t){return Gn[t]}const F={initialize:t=>fe(t).initialize(),initializeForKeyDown:({event:t})=>D(t,"d")?Pe.initialize():D(t,"r")?Se.initialize():D(t,"p")?De.initialize():null,isIdle:t=>fe(t.type).isIdle(t),getCanvasClassName:t=>fe(t.type).getCanvasClassName(t),getPreviewPosition:(t,e)=>fe(t.type).getPreviewPosition(t,e),toDebugString:t=>Ce(t.type,fe(t.type).getDebugProperties(t)),onPointerEvent:(t,e)=>{switch(e.type){case I.Draw:return Pe.onPointerEvent(t,e);case I.Rig:return Se.onPointerEvent(t,e);case I.Play:return De.onPointerEvent(t,e);default:T(e)}}},L={initialize:t=>({multiTouchPan:dt.initialize(),quickPanTool:null,selectedTool:F.initialize(t)}),toDebugString:t=>t.quickPanTool?Ce(t.quickPanTool.type,oe.getDebugProperties(t.quickPanTool)):F.toDebugString(t.selectedTool),getCanvasClassName:t=>t.quickPanTool?oe.getCanvasClassName(t.quickPanTool):F.getCanvasClassName(t.selectedTool),getPreviewPosition:(t,e)=>F.getPreviewPosition(t.selectedTool,e),updateSelectedTool:(t,e)=>ie(t,"selectedTool",e),updateQuickPanTool:(t,e)=>ie(t,"quickPanTool",e),requestSetSelectedTool:(t,e)=>t.quickPanTool||!F.isIdle(t.selectedTool)?t:{...t,selectedTool:F.initialize(e)},onKeyDown:(t,e)=>{if(F.isIdle(e.selectedTool)){if(!e.quickPanTool&&D(t.event," "))return{...e,quickPanTool:oe.initialize()};const r=F.initializeForKeyDown(t);if(r&&!e.quickPanTool)return t.vfx.triggerAnimation(r.type),{...e,selectedTool:r};if(D(t.event,{key:"z",command:!0}))return t.updateUndoStack(o=>V.undo(o,t.vfx)),e;if(D(t.event,{key:"z",command:!0,shift:!0}))return t.updateUndoStack(o=>V.redo(o,t.vfx)),e}if(D(t.event,{key:"0",command:!0}))return t.updateViewport(r=>r.with({pan:v.ZERO,zoom:1})),e;const n=r=>{var i;const o=(i=[...t.document.keyPoints][r])==null?void 0:i.id;o&&t.updateLocation(s=>s.with({keyPointId:o}))};return D(t.event,"1")&&n(0),D(t.event,"2")&&n(1),D(t.event,"3")&&n(2),D(t.event,"4")&&n(3),D(t.event,"5")&&n(4),D(t.event,"6")&&n(5),D(t.event,"7")&&n(6),D(t.event,"8")&&n(7),D(t.event,"9")&&n(8),e},onKeyUp:(t,e)=>e.quickPanTool&&nn(t.event," ")?{...e,quickPanTool:null}:e,onPointerEvent:(t,e)=>{const{pan:n,passthroughContext:r}=dt.onPointerEvent(t,e.multiTouchPan);return n!==e.multiTouchPan&&(e={...e,multiTouchPan:n}),r?e.quickPanTool?L.updateQuickPanTool(e,o=>oe.onPointerEvent(r,le(o))):L.updateSelectedTool(e,o=>F.onPointerEvent(r,o)):e},Overlay:M.memo(function(){const{updateInteraction:e}=R(),n=Ge(o=>e((i,s)=>L.updateSelectedTool(s,a=>(k(a.type===s.selectedTool.type),o(i,a))))),r=E(({interaction:o})=>o.selectedTool);switch(r.type){case I.Draw:return l(Pe.Overlay,{tool:r,onUpdateTool:n});case I.Rig:return l(Se.Overlay,{tool:r,onUpdateTool:n});case I.Play:return l(De.Overlay,{tool:r,onUpdateTool:n});default:T(r)}})},$t={[I.Draw]:{gradient500:"from-fuchsia-500 to-violet-500",border500:"border-purple-500",ring500:"ring-purple-500"},[I.Rig]:{gradient500:"from-cyan-500 to-blue-500",border500:"border-sky-500",ring500:"ring-sky-500"},[I.Play]:{gradient500:"from-lime-500 to-emerald-500",border500:"border-green-500",ring500:"ring-green-500"}};function Xn(){const t=E(e=>e.interaction.selectedTool.type);return $t[t]}function Ut(t,e=1/0){var r;const n=(r=St(t,rn))!=null?r:v.ZERO;return P.exports.useMemo(()=>{if(!n)return"none";const o=Math.min(n.x*.5,n.y*.5,e);return`path('${[`M 0,${o}`,`Q 0,0 ${o},0`,`T ${n.x-o},0`,`Q ${n.x},0 ${n.x},${o}`,`T ${n.x},${n.y-o}`,`Q ${n.x},${n.y} ${n.x-o},${n.y}`,`T ${o},${n.y}`,`Q 0,${n.y} 0,${n.y-o}`,"Z"].join(" ")}')`},[n,e])}function B({children:t,className:e,onClick:n,style:r,disabled:o,pressed:i,iconLeft:s,iconRight:a}){const[x,y]=P.exports.useState(null),c=Ut(x);return _("button",{ref:y,onClick:n,className:N(e,"group inline-flex items-center justify-center gap-2 rounded px-4 py-1 text-center font-bold tracking-wide text-stone-400 hover:bg-stone-300/25 hover:text-stone-500 focus:outline-none focus-visible:text-purple-600"),style:{...r!=null?r:{},clipPath:c},disabled:o,children:[s,l("span",{className:N("inline-block transition-transform duration-200 ease-out-back-md group-hover:scale-110 group-active:scale-90",i&&"scale-90"),children:t}),a]})}function er({children:t,actionName:e,...n}){const r=qe(e,()=>({keyFrames:{transform:["scale(1)","scale(0.8)","scale(1)"]},duration:300,easing:Ue.outBackMd}));return l(B,{...n,children:l("span",{className:"inline-block",ref:r,children:t})})}const tr=M.memo(function(){return _(ue,{children:[l(Re,{toolType:I.Draw,children:"draw"}),l(Re,{toolType:I.Rig,children:"rig"}),l(Re,{toolType:I.Play,children:"play"})]})}),Re=function({toolType:e,children:n}){const r=E(s=>s.interaction.selectedTool.type),{updateInteraction:o}=R(),i=r===e;return l(er,{actionName:e,onClick:()=>o((s,a)=>(s.vfx.triggerAnimation(e),L.requestSetSelectedTool(a,e))),className:N(i&&`pointer-events-none bg-gradient-to-br ${$t[e].gradient500} !text-white`),disabled:i,children:n})};class we{static distance(e,n){let r=0;for(let o=0;o<e.length;o++)r+=Math.pow(e[o]-n[o],2);return Math.sqrt(r)}static kernel(e,n){const r=we.distance(e,n);return r===0?0:Math.pow(r,2)*Math.log(r)}constructor(e,n){e.length===0&&ge("bad centers array :/"),e.every(y=>y.length===e[0].length)||ge("centers must have same dimensions :/"),this.centers=e;const r=n.slice(),o=[],i=[];for(let y=0;y<e.length;y++){const c=[],u=[1];for(let p=0;p<e[y].length;p++)u.push(e[y][p]);for(let p=0;p<e.length;p++)c.push(we.kernel(e[y],e[p]));i.push(u),o.push(c.concat(u))}const a=z.transpose(i).map(y=>{for(let c=y.length;c<o[0].length;c++)y.push(0);return y});for(let y=0;y<a.length;y++)o.push(a[y]),r.push(0);const x=this.solve(r,o);x||ge("rbf failed to compile with given centers./nCenters must be unique :/"),this.ws=x}solve(e,n){const r=z.inverse(n);return r?z.multiplyVector(r,e):null}getValue(e){k(this.ws);let n=0,r=0;for(r=0;r<this.centers.length;r++)n+=Number(this.ws[r])*we.kernel(e,this.centers[r]);for(n+=Number(this.ws[this.centers.length]),r=0;r<e.length;r++)n+=e[r]*Number(this.ws[this.centers.length+(r+1)]);return n}}const z={create(t){return t.map(e=>e.slice())},fromVector(t){return t.map(e=>[e])},identity(t){return Y(t,e=>Y(t,n=>e===n?1:0))},col(t,e){return t.map(n=>n[e-1])},clone(t){return t.slice()},canMultiplyFromLeft(t,e){return t[0].length===e.length},multiplyMatrix(t,e){if(!z.canMultiplyFromLeft(t,e))return null;const n=t[0].length;return Y(t.length,r=>Y(e[0].length,o=>{let i=0;for(let s=0;s<n;s++)i+=t[r][s]*e[s][o];return i}))},multiplyVector(t,e){return z.multiplyMatrix(t,z.fromVector(e))},transpose(t){return Y(t[0].length,e=>Y(t.length,n=>t[n][e]))},isSquare(t){return t.length===t[0].length},toRightTriangular(t){const e=z.clone(t),n=t.length,r=t[0].length;for(let o=0;o<n;o++){if(e[o][o]===0){for(let i=o+1;i<n;i++)if(e[i][o]!==0){const s=[];for(let a=0;a<r;a++)s.push(e[o][a]+e[i][a]);e[o]=s;break}}if(e[o][o]!==0)for(let i=o+1;i<n;i++){const s=e[i][o]/e[o][o],a=[];for(let x=0;x<r;x++)a.push(x<=o?0:e[i][x]-e[o][x]*s);e[i]=a}}return e},determinant(t){if(!z.isSquare(t))return null;const e=z.toRightTriangular(t);let n=e[0][0];for(let r=1;r<e.length;r++)n=n*e[r][r];return n},isSingular(t){return z.isSquare(t)&&z.determinant(t)===0},augment(t,e){const n=z.clone(t),r=n[0].length;k(n.length===e.length);for(let o=0;o<n.length;o++)for(let i=0;i<e[0].length;i++)n[o][r+i]=e[o][i];return n},inverse(t){if(!z.isSquare(t)||z.isSingular(t))return null;const e=t.length,n=[],r=z.toRightTriangular(z.augment(t,z.identity(e))),o=r[0].length;let i=t.length;for(;i--;){const s=[];n[i]=[];const a=r[i][i];for(let y=0;y<o;y++){const c=r[i][y]/a;s.push(c),y>=e&&n[i].push(c)}r[i]=s;let x=i;for(;x--;){const y=[];for(let c=0;c<o;c++)y.push(r[x][c]-r[i][c]*r[x][i]);r[x]=y}}return n}};class nr{interpolate(e){ge("cannot interpolate none")}}class rr{constructor(e){this.value=e}interpolate(e){return this.value}}class or{constructor(e,n,r,o){this.centerA=e,this.centerB=n,this.valueA=r,this.valueB=o}interpolate(e){const n=this.centerB.sub(this.centerA),o=e.sub(this.centerA).dot(n)/n.dot(n);return wt(this.valueA,this.valueB,o)}}class ir extends we{constructor(e,n){super(e.map(({x:r,y:o})=>[r,o]),n)}interpolate(e){return this.getValue([e.x,e.y])}}class Be{constructor(e,n){switch(k(e.length===n.length),e.length){case 0:this.interpolator=new nr;break;case 1:this.interpolator=new rr(n[0]);break;case 2:this.interpolator=new or(e[0],e[1],n[0],n[1]);break;default:this.interpolator=new ir(e,n)}}interpolate(e){return this.interpolator.interpolate(e)}}class sr{constructor(){this.cache=new Map}getCenterPointsAtPosition(e,n,r){switch(r.type){case"keyPointId":{const o=e.getShapeVersion(r.keyPointId,n);if(!o){const i=e.keyPoints.get(r.keyPointId);return this.getCenterPointsAtInterpolatedPosition(e,n,i.position)}return e.getNormalizedCenterPointsForShapeVersion(o.id)}case"interpolated":return this.getCenterPointsAtInterpolatedPosition(e,n,r.scenePosition);default:T(r)}}getCenterPointsAtInterpolatedPosition(e,n,r){const o=e.shapes.get(n),i=new Set(e.iterateShapeVersionsForShape(n));if(!i.size)return[];const s=new Set;for(const y of i)s.add(e.keyPoints.get(y.keyPointId));const a=this.getCacheEntry(o,i,s);let x;return a?x=a.interpolators:(x=this.calculateInterpolators(e,i),this.cache.set(o,{versions:i,keyPoints:s,interpolators:x})),x.map(({x:y,y:c,r:u})=>({center:new v(y.interpolate(r),c.interpolate(r)),radius:u.interpolate(r)}))}calculateInterpolators(e,n){console.time("calculatInterpolators");const r=Array.from(n,a=>({normalizedCenterPoints:e.getNormalizedCenterPointsForShapeVersion(a.id),version:a,keyPoint:e.keyPoints.get(a.keyPointId)})),o=r.map(({keyPoint:a})=>a.position),i=Math.min(...r.map(({normalizedCenterPoints:a})=>a.length)),s=[];for(let a=0;a<i;a++){const x=r.map(({normalizedCenterPoints:u})=>u[a].center.x),y=r.map(({normalizedCenterPoints:u})=>u[a].center.y),c=r.map(({normalizedCenterPoints:u})=>u[a].radius);s.push({x:new Be(o,x),y:new Be(o,y),r:new Be(o,c)})}return console.timeEnd("calculatInterpolators"),s}getCacheEntry(e,n,r){const o=this.cache.get(e);if(!o||n.size!==o.versions.size||r.size!==o.keyPoints.size)return null;for(const i of n)if(!o.versions.has(i))return null;for(const i of r)if(!o.keyPoints.has(i))return null;return o}}const ar=new sr;function Qe(t){const e=[],n=[];if(t.length===0)return[];if(t.length===1){const u=[];for(let p=0;p<12;p++)u.push(t[0].center.add(v.fromPolar(p*Math.PI/6,t[0].radius)));return u}const r=t[0],i=t[1].center.sub(r.center).normalize(),s=i.perpendicular().scale(r.radius);e.push(r.center.sub(i.scale(r.radius))),e.push(r.center.sub(s)),n.push(r.center.add(s));for(let u=1;u<t.length-1;u++){const p=t[u-1],w=t[u],S=t[u+1].center.sub(p.center).normalize().perpendicular().scale(w.radius);e.push(w.center.sub(S)),n.push(w.center.add(S))}const a=t[t.length-2],x=t[t.length-1],y=x.center.sub(a.center).normalize(),c=y.perpendicular().scale(x.radius);return e.push(x.center.sub(c)),e.push(x.center.add(y.scale(x.radius))),n.push(x.center.add(c)),e.concat(n.reverse())}const yr=M.memo(function({shapeId:e}){const n=E(({previewPosition:i,interaction:s})=>{if(i.selectedShapeId===e)switch(s.selectedTool.type){case I.Draw:{const a=Pe.getState(s.selectedTool);switch(a.state){case"drawing":return zt(Et(Ct(a.points,me),me),me.size);case"idle":return null;default:throw T(a)}}case I.Rig:case I.Play:return null;default:throw T(s.selectedTool)}return null}),r=E(({document:i,previewPosition:s})=>ar.getCenterPointsAtPosition(i,e,s)),o=E(({previewPosition:i})=>i.selectedShapeId===e);return _(ue,{children:[l("path",{d:Ze(Qe(r)),className:N(n?"fill-stone-300":o?"fill-stone-800":"fill-stone-600")}),n&&l("path",{d:Ze(Qe(n)),className:N(o?"fill-stone-800":"fill-stone-600")})]})}),xr=M.memo(function(){const e=E(r=>r.location.viewport),n=E(r=>L.getCanvasClassName(r.interaction));return l("svg",{viewBox:`0 0 ${e.screenSize.x} ${e.screenSize.y}`,className:N("absolute top-0 left-0",n),children:l("g",{transform:e.getSceneTransform(),children:l(cr,{})})})}),cr=M.memo(function(){const e=He("document");return l(ue,{children:Array.from(e.shapes,n=>l(yr,{shapeId:n.id},n.id))})});function lr(t,e){const n=e.visibleSceneBounds(),r=It.fromLeftTopRightBottom(n.left+n.width/10,n.top+n.height/10,n.right-n.width/10,n.bottom-n.height/10),o=Array.from(t.keyPoints,x=>x.position),s=(Math.min(n.width,n.height)/10)**2;let a=r.getCenter();for(let x=0;x<500;x++){if(o.every(y=>y.distanceToSq(a)>s))return a;a=new v(yt(r.left,r.right),yt(r.top,r.bottom))}return a}const pt=84,ht=80;function ur(){const{updateLocation:t,updateDocument:e}=R(),n=E(y=>y.location.keyPointId),r=E(y=>y.location.shapeId),o=Array.from(E(y=>y.document.keyPoints)),i=Array.from(E(y=>y.document.shapes)),s=Array.from(o).findIndex(y=>n===y.id),a=Array.from(i).findIndex(y=>r===y.id),x=Xn();return _("div",{className:"relative flex h-0 flex-auto flex-col gap-4 overflow-auto p-5 [-webkit-overflow-scrolling:touch]",children:[l("div",{className:"absolute top-5 left-5 z-0 w-20 rounded bg-stone-200 ring-2 ring-stone-200 transition-transform",style:{height:-16+ht*i.length,transform:`translateX(${s*pt}px)`}}),l("div",{className:"absolute top-5 z-0 h-16 rounded bg-stone-200 ring-2 ring-stone-200 transition-transform",style:{width:-4+pt*(o.length+1),transform:`translateY(${a*ht}px)`}}),i.map((y,c)=>l("div",{className:"relative flex w-max flex-col gap-2",children:_("div",{className:"flex gap-1",children:[o.map(u=>l("button",{className:N("overflow-none h-16 w-20 flex-none rounded border",y.id===r&&u.id===n?`${x.border500} ring-1 ${x.ring500} bg-white`:"border-stone-300 bg-white/25 hover:bg-white/50"),onClick:()=>{t(({location:p})=>p.with({shapeId:y.id,keyPointId:u.id}))},children:l(dr,{width:78,height:62,keyPointId:u.id,shapeId:y.id})},u.id)),l("button",{className:"h-16 w-20 flex-none rounded border border-stone-300 text-xl text-stone-400 hover:bg-white/50",onClick:()=>{const u=de.generate();e(({document:p,viewport:w})=>p.addKeyPoint(u,lr(p,w)),{lockstepLocation:p=>p.with({keyPointId:u,shapeId:y.id})})},children:"+"})]})},y.id)),l(B,{className:"sticky left-0",onClick:()=>{const y=pe.generate();e(({document:c})=>c.addShape(y),{lockstepLocation:c=>c.with({shapeId:y})})},children:"+ shape"})]})}const dr=M.memo(function({width:e,height:n,shapeId:r,keyPointId:o}){const s=E(({document:g})=>{const f=g.getShapeVersion(o,r);return f?g.getNormalizedCenterPointsForShapeVersion(f.id):null});if(!s||s.length<2)return null;let a=1/0,x=1/0,y=-1/0,c=-1/0;for(const{center:g,radius:f}of s)a=Math.min(a,g.x-f),y=Math.max(y,g.x+f),x=Math.min(x,g.y-f),c=Math.max(c,g.y+f);const u=y-a,p=c-x,w=e-4*2,m=n-4*2,d=Math.min(w/u,.8),S=Math.min(m/p,.8),b=Math.min(d,S);return l("svg",{viewBox:`0 0 ${e} ${n}`,style:{width:e,height:n},children:l("g",{transform:`translate(${4+Math.max(w-u*b,0)/2}, ${4+Math.max(m-p*b,0)/2}) scale(${b}) translate(${-a}, ${-x})`,children:l("path",{d:Ze(Qe(s)),className:"fill-stone-800"})})})}),pr={width:Xe},j=20,hr=l("svg",{viewBox:`0 0 ${j} ${j}`,className:"flex-none",style:{width:j,height:j},children:l("path",{className:"fill-stone-100",d:["M 0,0",`L ${j},0`,`L ${j},${j}`,`Q ${j},0 0,0`,"Z"].join(" ")})});function fr({topBarRight:t,topBarLeft:e,rightBar:n,bottomBarLeft:r,bottomBarRight:o}){return _("div",{className:"pointer-events-none absolute inset-0 flex flex-col items-stretch",children:[_("div",{className:"pointer-events-auto flex flex-none items-center justify-between gap-3 bg-stone-100 px-3 py-2",children:[l("h1",{className:"order-1 flex-1 font-bold tracking-wide text-stone-600",children:"splatapus"}),l("div",{className:"order-2 flex flex-1 items-center justify-center gap-2",children:e}),l("div",{className:"order-3 flex flex-1 items-center justify-end gap-2",children:t})]}),_("div",{className:"flex flex-auto items-start justify-end",children:[hr,l("div",{className:"pointer-events-auto flex h-full flex-col bg-stone-100",style:pr,children:n})]}),l("div",{className:"absolute bottom-0 left-0",children:r}),l("div",{className:"absolute bottom-0 right-0 transition-transform",style:{transform:`translateX(${-Xe}px)`},children:o})]})}const ft=bt({id:"doc.0_VcKaG8h9Zf8pyG",keyPoints:{"key.0_a3vKHuIcxpHnVg":{id:"key.0_a3vKHuIcxpHnVg",position:{x:84.4612113767582,y:-310.6259226617922}},"key.1_TYmFrn9Wh1QZ3t":{id:"key.1_TYmFrn9Wh1QZ3t",position:{x:76.77421647506128,y:82.8797180046771}},"key.2_8mSx0MUXiSEjNK":{id:"key.2_8mSx0MUXiSEjNK",position:{x:-290.00197453390416,y:88.34970510918276}},"key.3_RariJQz2eTMOkJ":{id:"key.3_RariJQz2eTMOkJ",position:{x:466.25676711635367,y:91.8418718809971}}},shapes:{"shp.0_n9ry1znj34Bp1k":{id:"shp.0_n9ry1znj34Bp1k"},"shp.1_ONCgL3fjUYIryN":{id:"shp.1_ONCgL3fjUYIryN"},"shp.2_Zwa9ObnrYgWogq":{id:"shp.2_Zwa9ObnrYgWogq"},"shp.3_mUCVyzbyAGCuIa":{id:"shp.3_mUCVyzbyAGCuIa"},"shp.4_SMMSTDAbn3tdXv":{id:"shp.4_SMMSTDAbn3tdXv"},"shp.5_pFzZ21ghrzLlt1":{id:"shp.5_pFzZ21ghrzLlt1"}},shapeVersions:{"shv.0_LwpIe0fFofKDNO":{id:"shv.0_LwpIe0fFofKDNO",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[{x:-41,y:-45},{x:-47,y:-41},{x:-49,y:-39},{x:-53,y:-34},{x:-57,y:-30},{x:-61,y:-25},{x:-64,y:-20},{x:-66,y:-16},{x:-69,y:-11},{x:-71,y:-6},{x:-73,y:-1},{x:-74,y:5},{x:-76,y:11},{x:-76,y:16},{x:-77,y:22},{x:-78,y:28},{x:-78,y:35},{x:-78,y:42},{x:-78,y:49},{x:-78,y:56},{x:-78,y:62},{x:-78,y:68},{x:-76,y:74},{x:-74,y:80},{x:-71,y:86},{x:-68,y:91},{x:-64,y:96},{x:-60,y:102},{x:-55,y:107},{x:-49,y:112},{x:-44,y:118},{x:-37,y:123},{x:-30,y:128},{x:-23,y:132},{x:-15,y:137},{x:-7,y:140},{x:2,y:144},{x:11,y:147},{x:20,y:150},{x:30,y:152},{x:39,y:152},{x:49,y:153},{x:59,y:153},{x:69,y:153},{x:78,y:153},{x:89,y:152},{x:99,y:149},{x:109,y:147},{x:120,y:143},{x:129,y:139},{x:138,y:134},{x:148,y:129},{x:156,y:123},{x:164,y:117},{x:172,y:110},{x:179,y:103},{x:187,y:96},{x:193,y:89},{x:198,y:83},{x:202,y:76},{x:206,y:69},{x:208,y:63},{x:210,y:58},{x:211,y:52},{x:212,y:46},{x:213,y:38},{x:213,y:30},{x:213,y:23},{x:213,y:17},{x:213,y:11},{x:213,y:5},{x:213,y:-3},{x:213,y:-11},{x:213,y:-18},{x:213,y:-23},{x:212,y:-28},{x:211,y:-32},{x:209,y:-36},{x:208,y:-40},{x:206,y:-42},{x:205,y:-44},{x:203,y:-46},{x:201,y:-47},{x:200,y:-48},{x:199,y:-48},{x:199,y:-50}]},"shv.1_SWgK9k5Y2kn7dj":{id:"shv.1_SWgK9k5Y2kn7dj",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[{x:-25,y:-43},{x:-25,y:-47},{x:-25,y:-49},{x:-24,y:-56},{x:-22,y:-65},{x:-19,y:-77},{x:-16,y:-90},{x:-14,y:-101},{x:-10,y:-113},{x:-8,y:-123},{x:-4,y:-131},{x:-2,y:-139},{x:1,y:-145},{x:3,y:-149},{x:4,y:-152},{x:6,y:-154},{x:7,y:-154},{x:8,y:-154},{x:10,y:-153},{x:12,y:-151},{x:15,y:-147},{x:18,y:-142},{x:21,y:-135},{x:24,y:-127},{x:27,y:-118},{x:29,y:-108},{x:30,y:-98},{x:30,y:-88},{x:31,y:-79},{x:32,y:-72},{x:32,y:-67},{x:33,y:-64},{x:33,y:-62},{x:34,y:-62},{x:34,y:-61},{x:34,y:-60},{x:35,y:-59}]},"shv.3_3ILI63YytH2Ite":{id:"shv.3_3ILI63YytH2Ite",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[{x:126,y:-69},{x:127,y:-75},{x:130,y:-84},{x:136,y:-96},{x:142,y:-108},{x:148,y:-118},{x:154,y:-128},{x:161,y:-137},{x:169,y:-145},{x:177,y:-152},{x:183,y:-158},{x:188,y:-162},{x:191,y:-164},{x:192,y:-164},{x:193,y:-164},{x:193,y:-163},{x:194,y:-158},{x:194,y:-152},{x:196,y:-144},{x:196,y:-135},{x:197,y:-125},{x:197,y:-114},{x:197,y:-103},{x:197,y:-92},{x:196,y:-83},{x:195,y:-74},{x:194,y:-67},{x:193,y:-62},{x:192,y:-60},{x:192,y:-58},{x:192,y:-57},{x:192,y:-55},{x:192,y:-50},{x:192,y:-48}]},"shv.4_dljDpCZ90LHjbP":{id:"shv.4_dljDpCZ90LHjbP",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[{x:41,y:-63},{x:46,y:-66},{x:51,y:-67},{x:57,y:-69},{x:65,y:-71},{x:72,y:-72},{x:80,y:-73},{x:89,y:-74},{x:99,y:-74},{x:109,y:-74},{x:115,y:-74},{x:120,y:-74},{x:124,y:-74},{x:127,y:-74},{x:129,y:-74},{x:130,y:-73},{x:130,y:-72}]},"shv.5_g5nKgDG7juS3Au":{id:"shv.5_g5nKgDG7juS3Au",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[{x:21,y:-10},{x:15,y:-10},{x:11,y:-10},{x:5,y:-7},{x:-2,y:-3},{x:-8,y:1},{x:-14,y:6},{x:-18,y:10},{x:-22,y:14},{x:-25,y:19},{x:-27,y:24},{x:-29,y:30},{x:-30,y:38},{x:-30,y:44},{x:-30,y:48},{x:-29,y:52},{x:-26,y:55},{x:-22,y:59},{x:-17,y:62},{x:-10,y:65},{x:-3,y:66},{x:4,y:67},{x:11,y:67},{x:17,y:67},{x:22,y:64},{x:26,y:59},{x:29,y:53},{x:32,y:47},{x:33,y:44},{x:33,y:41},{x:33,y:40},{x:33,y:39},{x:33,y:36},{x:33,y:22},{x:33,y:16},{x:33,y:13},{x:33,y:11},{x:32,y:10},{x:31,y:9},{x:29,y:8},{x:27,y:8},{x:25,y:7},{x:24,y:6},{x:23,y:6},{x:22,y:6},{x:22,y:5},{x:21,y:4},{x:20,y:4},{x:20,y:3},{x:19,y:3},{x:18,y:3},{x:17,y:3}]},"shv.6_fOyfl45j6IoVJD":{id:"shv.6_fOyfl45j6IoVJD",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[{x:151,y:-26},{x:145,y:-27},{x:138,y:-26},{x:127,y:-21},{x:116,y:-14},{x:106,y:-6},{x:98,y:3},{x:91,y:11},{x:87,y:20},{x:84,y:30},{x:83,y:39},{x:83,y:47},{x:86,y:53},{x:92,y:57},{x:100,y:59},{x:110,y:60},{x:121,y:60},{x:133,y:59},{x:144,y:56},{x:154,y:51},{x:163,y:45},{x:172,y:37},{x:177,y:30},{x:180,y:24},{x:182,y:18},{x:184,y:11},{x:184,y:4},{x:184,y:-6},{x:180,y:-13},{x:176,y:-19},{x:171,y:-23},{x:166,y:-25},{x:161,y:-27},{x:155,y:-27},{x:148,y:-27},{x:141,y:-27},{x:135,y:-26},{x:129,y:-23},{x:123,y:-18}]},"shv.7_MNXQuLFOxPhQSP":{id:"shv.7_MNXQuLFOxPhQSP",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[{x:-35,y:25},{x:-41,y:26},{x:-44,y:26},{x:-48,y:26},{x:-53,y:27},{x:-57,y:29},{x:-62,y:30},{x:-67,y:33},{x:-72,y:35},{x:-77,y:38},{x:-83,y:42},{x:-88,y:46},{x:-92,y:50},{x:-97,y:55},{x:-101,y:62},{x:-105,y:68},{x:-108,y:75},{x:-111,y:81},{x:-113,y:87},{x:-114,y:92},{x:-114,y:96},{x:-114,y:101},{x:-114,y:104},{x:-113,y:108},{x:-111,y:111},{x:-108,y:115},{x:-105,y:118},{x:-101,y:121},{x:-98,y:123},{x:-94,y:126},{x:-90,y:128},{x:-85,y:130},{x:-80,y:132},{x:-74,y:133},{x:-69,y:135},{x:-62,y:137},{x:-56,y:138},{x:-49,y:139},{x:-43,y:140},{x:-36,y:140},{x:-30,y:140},{x:-24,y:140},{x:-18,y:140},{x:-12,y:140},{x:-7,y:140},{x:-1,y:141},{x:4,y:142},{x:9,y:142},{x:14,y:143},{x:21,y:144},{x:27,y:145},{x:33,y:147},{x:40,y:147},{x:46,y:148},{x:52,y:148},{x:58,y:148},{x:64,y:148},{x:70,y:148},{x:77,y:149},{x:83,y:149},{x:89,y:149},{x:95,y:149},{x:101,y:149},{x:107,y:149},{x:114,y:149},{x:121,y:149},{x:128,y:149},{x:136,y:149},{x:144,y:148},{x:151,y:147},{x:158,y:147},{x:165,y:145},{x:172,y:144},{x:179,y:144},{x:186,y:143},{x:193,y:142},{x:200,y:140},{x:206,y:139},{x:213,y:137},{x:220,y:134},{x:225,y:132},{x:231,y:130},{x:237,y:127},{x:242,y:123},{x:249,y:119},{x:255,y:113},{x:262,y:108},{x:266,y:103},{x:270,y:99},{x:274,y:95},{x:276,y:92},{x:278,y:89},{x:279,y:86},{x:280,y:83},{x:281,y:80},{x:281,y:77},{x:281,y:75},{x:281,y:74},{x:281,y:72},{x:280,y:69},{x:279,y:65},{x:277,y:60},{x:275,y:56},{x:274,y:53},{x:272,y:50},{x:270,y:47},{x:267,y:43},{x:265,y:39},{x:262,y:35},{x:259,y:30},{x:256,y:27},{x:252,y:23},{x:250,y:21},{x:246,y:18},{x:242,y:16},{x:239,y:14},{x:235,y:11},{x:230,y:10},{x:227,y:8},{x:223,y:8},{x:221,y:7},{x:217,y:7},{x:213,y:6},{x:210,y:6},{x:206,y:6},{x:204,y:6},{x:202,y:6},{x:201,y:6},{x:200,y:6},{x:200,y:5}]},"shv.8_dqc9S1VROeclkw":{id:"shv.8_dqc9S1VROeclkw",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[{x:-20,y:20},{x:-23,y:16},{x:-23,y:13},{x:-25,y:10},{x:-26,y:7},{x:-29,y:4},{x:-32,y:1},{x:-35,y:-1},{x:-38,y:-4},{x:-39,y:-5},{x:-41,y:-6},{x:-43,y:-6},{x:-46,y:-8},{x:-49,y:-9},{x:-53,y:-9},{x:-56,y:-10},{x:-58,y:-10},{x:-59,y:-10},{x:-61,y:-11},{x:-62,y:-11},{x:-63,y:-11},{x:-64,y:-11},{x:-64,y:-12},{x:-64,y:-13},{x:-64,y:-14},{x:-64,y:-15},{x:-64,y:-16},{x:-63,y:-17},{x:-62,y:-18},{x:-61,y:-20},{x:-59,y:-22},{x:-56,y:-24},{x:-54,y:-26},{x:-52,y:-28},{x:-49,y:-29},{x:-46,y:-31},{x:-43,y:-32},{x:-39,y:-33},{x:-36,y:-33},{x:-32,y:-33},{x:-28,y:-33},{x:-24,y:-33},{x:-19,y:-33},{x:-15,y:-32},{x:-12,y:-31},{x:-9,y:-29},{x:-7,y:-28},{x:-5,y:-26},{x:-3,y:-24},{x:-2,y:-22},{x:0,y:-20},{x:2,y:-18},{x:3,y:-14},{x:5,y:-11},{x:7,y:-8},{x:7,y:-6},{x:9,y:-4},{x:9,y:-3},{x:11,y:-1},{x:12,y:0},{x:14,y:2},{x:15,y:4},{x:16,y:6},{x:16,y:8},{x:17,y:8},{x:17,y:9},{x:18,y:10},{x:18,y:11},{x:19,y:11},{x:19,y:12},{x:19,y:13},{x:19,y:14},{x:19,y:15},{x:20,y:16},{x:21,y:17}]},"shv.9_wkf9c4ZDBAwLRf":{id:"shv.9_wkf9c4ZDBAwLRf",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[{x:152,y:-11},{x:156,y:-17},{x:158,y:-21},{x:162,y:-25},{x:167,y:-31},{x:174,y:-36},{x:181,y:-42},{x:189,y:-48},{x:196,y:-54},{x:204,y:-59},{x:212,y:-62},{x:220,y:-63},{x:228,y:-63},{x:236,y:-63},{x:245,y:-63},{x:252,y:-63},{x:257,y:-62},{x:259,y:-61},{x:261,y:-60},{x:262,y:-60},{x:263,y:-59},{x:263,y:-58},{x:263,y:-57},{x:260,y:-55},{x:255,y:-52},{x:250,y:-48},{x:243,y:-43},{x:237,y:-38},{x:230,y:-33},{x:225,y:-27},{x:218,y:-20},{x:213,y:-13},{x:208,y:-6},{x:206,y:-2},{x:204,y:0},{x:204,y:1},{x:204,y:2}]},"shv.10_QVHVJVxyuxdpD":{id:"shv.10_QVHVJVxyuxdpD",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[{x:31,y:17},{x:33,y:16},{x:36,y:16},{x:47,y:11},{x:58,y:6},{x:72,y:1},{x:84,y:-1},{x:99,y:-4},{x:113,y:-6},{x:124,y:-6},{x:134,y:-7},{x:141,y:-8},{x:147,y:-8},{x:152,y:-8},{x:154,y:-8},{x:155,y:-7},{x:155,y:-6},{x:155,y:-4}]},"shv.12_5jxllLtpm93b7":{id:"shv.12_5jxllLtpm93b7",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[{x:19,y:55},{x:12,y:55},{x:9,y:55},{x:4,y:55},{x:-1,y:56},{x:-6,y:57},{x:-10,y:57},{x:-15,y:58},{x:-20,y:59},{x:-26,y:60},{x:-32,y:63},{x:-37,y:65},{x:-43,y:68},{x:-47,y:71},{x:-52,y:74},{x:-54,y:77},{x:-57,y:81},{x:-59,y:86},{x:-61,y:90},{x:-62,y:95},{x:-62,y:98},{x:-62,y:101},{x:-62,y:103},{x:-61,y:105},{x:-56,y:107},{x:-51,y:108},{x:-44,y:110},{x:-37,y:110},{x:-30,y:110},{x:-24,y:110},{x:-17,y:108},{x:-9,y:106},{x:-3,y:103},{x:4,y:100},{x:10,y:97},{x:16,y:94},{x:21,y:91},{x:25,y:88},{x:30,y:84},{x:33,y:81},{x:36,y:77},{x:37,y:75},{x:38,y:73},{x:38,y:72},{x:38,y:71},{x:38,y:70},{x:38,y:69},{x:37,y:69},{x:36,y:67},{x:35,y:66},{x:34,y:65},{x:32,y:61},{x:29,y:54},{x:26,y:51},{x:25,y:50},{x:24,y:50},{x:23,y:50},{x:22,y:50},{x:21,y:50},{x:20,y:51},{x:19,y:52},{x:17,y:54},{x:14,y:57},{x:13,y:59}]},"shv.14_GWIuG0AcQVcWv":{id:"shv.14_GWIuG0AcQVcWv",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[{x:221,y:50},{x:215,y:47},{x:211,y:47},{x:206,y:46},{x:200,y:46},{x:195,y:45},{x:191,y:45},{x:185,y:45},{x:179,y:45},{x:173,y:46},{x:166,y:50},{x:160,y:53},{x:155,y:57},{x:150,y:60},{x:148,y:64},{x:146,y:67},{x:145,y:71},{x:144,y:76},{x:144,y:81},{x:144,y:86},{x:144,y:89},{x:145,y:92},{x:148,y:94},{x:152,y:97},{x:158,y:99},{x:165,y:100},{x:173,y:101},{x:181,y:101},{x:189,y:101},{x:197,y:99},{x:205,y:96},{x:213,y:93},{x:221,y:90},{x:228,y:87},{x:234,y:84},{x:238,y:81},{x:241,y:80},{x:244,y:78},{x:247,y:76},{x:248,y:74},{x:248,y:73},{x:248,y:72},{x:248,y:70},{x:248,y:69},{x:248,y:68},{x:248,y:67},{x:246,y:66},{x:243,y:60},{x:240,y:57},{x:238,y:55},{x:237,y:54},{x:235,y:54},{x:233,y:53},{x:229,y:52},{x:224,y:52},{x:218,y:52},{x:214,y:52},{x:210,y:52},{x:204,y:52},{x:197,y:54}]},"shv.15_IegtY8uWpenHx":{id:"shv.15_IegtY8uWpenHx",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[{x:-137,y:13},{x:-143,y:8},{x:-144,y:8},{x:-146,y:8},{x:-148,y:7},{x:-150,y:6},{x:-152,y:6},{x:-155,y:5},{x:-158,y:4},{x:-161,y:3},{x:-165,y:2},{x:-169,y:1},{x:-173,y:1},{x:-176,y:1},{x:-180,y:1},{x:-183,y:1},{x:-186,y:1},{x:-189,y:1},{x:-192,y:1},{x:-195,y:1},{x:-196,y:1},{x:-198,y:3},{x:-200,y:5},{x:-202,y:10},{x:-204,y:15},{x:-206,y:20},{x:-207,y:24},{x:-208,y:28},{x:-209,y:31},{x:-209,y:35},{x:-209,y:38},{x:-209,y:40},{x:-209,y:43},{x:-209,y:46},{x:-207,y:49},{x:-205,y:52},{x:-204,y:56},{x:-202,y:59},{x:-200,y:63},{x:-199,y:67},{x:-197,y:70},{x:-195,y:72},{x:-194,y:74},{x:-193,y:76},{x:-190,y:77},{x:-188,y:80},{x:-186,y:82},{x:-183,y:84},{x:-179,y:87},{x:-175,y:90},{x:-171,y:93},{x:-166,y:96},{x:-160,y:99},{x:-155,y:102},{x:-149,y:105},{x:-143,y:108},{x:-137,y:110},{x:-131,y:113},{x:-125,y:116},{x:-119,y:120},{x:-112,y:123},{x:-106,y:125},{x:-100,y:127},{x:-94,y:129},{x:-88,y:132},{x:-82,y:134},{x:-76,y:135},{x:-70,y:137},{x:-64,y:139},{x:-58,y:141},{x:-52,y:142},{x:-45,y:144},{x:-38,y:145},{x:-31,y:146},{x:-23,y:147},{x:-16,y:147},{x:-8,y:147},{x:0,y:147},{x:8,y:147},{x:17,y:147},{x:25,y:147},{x:34,y:147},{x:42,y:147},{x:49,y:147},{x:56,y:146},{x:63,y:146},{x:71,y:145},{x:78,y:144},{x:85,y:143},{x:92,y:142},{x:99,y:142},{x:106,y:141},{x:113,y:140},{x:120,y:139},{x:127,y:138},{x:134,y:137},{x:141,y:137},{x:149,y:136},{x:156,y:135},{x:164,y:134},{x:172,y:132},{x:179,y:131},{x:187,y:130},{x:194,y:128},{x:201,y:126},{x:208,y:123},{x:214,y:121},{x:221,y:118},{x:226,y:114},{x:230,y:111},{x:235,y:108},{x:238,y:104},{x:241,y:99},{x:244,y:93},{x:247,y:89},{x:250,y:82},{x:252,y:75},{x:255,y:65},{x:257,y:55},{x:257,y:48},{x:257,y:45},{x:257,y:43},{x:257,y:42},{x:252,y:36},{x:249,y:32},{x:245,y:28},{x:241,y:26},{x:239,y:25},{x:235,y:24},{x:231,y:21},{x:225,y:18},{x:219,y:16},{x:215,y:13},{x:211,y:11},{x:209,y:10},{x:208,y:8},{x:208,y:7},{x:207,y:6},{x:206,y:6},{x:205,y:6},{x:204,y:6},{x:203,y:6},{x:202,y:6},{x:201,y:6},{x:199,y:6},{x:198,y:6},{x:196,y:6},{x:194,y:6},{x:191,y:5},{x:189,y:5},{x:187,y:4},{x:184,y:4},{x:180,y:3},{x:177,y:3},{x:172,y:2},{x:168,y:1},{x:164,y:1},{x:160,y:0},{x:155,y:0},{x:151,y:0},{x:147,y:-1},{x:143,y:-1},{x:139,y:-1},{x:136,y:-1},{x:132,y:-1},{x:128,y:-1},{x:123,y:-1},{x:119,y:-1},{x:114,y:-1},{x:110,y:-1},{x:106,y:-1},{x:102,y:-1},{x:99,y:0},{x:95,y:1},{x:92,y:1},{x:90,y:1},{x:89,y:1},{x:87,y:2},{x:86,y:2},{x:85,y:2},{x:84,y:2},{x:84,y:3},{x:83,y:3},{x:82,y:3},{x:82,y:4},{x:81,y:4},{x:80,y:4},{x:79,y:4},{x:78,y:4},{x:77,y:4},{x:77,y:5},{x:76,y:5},{x:75,y:5},{x:74,y:5},{x:73,y:6},{x:72,y:6},{x:70,y:6},{x:67,y:7},{x:65,y:7},{x:63,y:8},{x:61,y:8},{x:59,y:8},{x:57,y:9},{x:55,y:10},{x:53,y:10},{x:52,y:11},{x:50,y:11},{x:49,y:11},{x:48,y:11},{x:47,y:11},{x:47,y:12},{x:47,y:13}]},"shv.17_JPHh1b7aVM4a5":{id:"shv.17_JPHh1b7aVM4a5",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[{x:-130,y:1},{x:-135,y:-3},{x:-137,y:-4},{x:-140,y:-8},{x:-143,y:-11},{x:-147,y:-13},{x:-151,y:-15},{x:-155,y:-17},{x:-160,y:-19},{x:-165,y:-21},{x:-170,y:-23},{x:-175,y:-23},{x:-179,y:-23},{x:-183,y:-23},{x:-188,y:-23},{x:-191,y:-23},{x:-194,y:-22},{x:-197,y:-21},{x:-200,y:-20},{x:-201,y:-19},{x:-202,y:-19},{x:-203,y:-19},{x:-204,y:-19},{x:-204,y:-20},{x:-204,y:-21},{x:-204,y:-25},{x:-202,y:-30},{x:-198,y:-35},{x:-194,y:-40},{x:-190,y:-43},{x:-185,y:-46},{x:-181,y:-48},{x:-176,y:-49},{x:-171,y:-50},{x:-165,y:-52},{x:-159,y:-52},{x:-154,y:-54},{x:-149,y:-54},{x:-145,y:-54},{x:-139,y:-54},{x:-134,y:-53},{x:-130,y:-50},{x:-127,y:-48},{x:-124,y:-45},{x:-121,y:-41},{x:-119,y:-37},{x:-117,y:-32},{x:-115,y:-26},{x:-113,y:-19},{x:-112,y:-12},{x:-112,y:-6},{x:-112,y:-2},{x:-112,y:0},{x:-112,y:1},{x:-112,y:2},{x:-112,y:3},{x:-111,y:3},{x:-111,y:4},{x:-111,y:5}]},"shv.19_XdsJ3W4A719pc":{id:"shv.19_XdsJ3W4A719pc",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[{x:-31,y:2},{x:-33,y:-4},{x:-33,y:-7},{x:-34,y:-11},{x:-36,y:-14},{x:-38,y:-17},{x:-40,y:-22},{x:-43,y:-27},{x:-46,y:-32},{x:-48,y:-35},{x:-50,y:-38},{x:-52,y:-41},{x:-55,y:-44},{x:-59,y:-48},{x:-62,y:-52},{x:-66,y:-56},{x:-69,y:-58},{x:-72,y:-60},{x:-76,y:-61},{x:-79,y:-61},{x:-82,y:-61},{x:-85,y:-61},{x:-87,y:-61},{x:-88,y:-61},{x:-89,y:-61},{x:-90,y:-62},{x:-88,y:-62},{x:-87,y:-63},{x:-85,y:-63},{x:-83,y:-63},{x:-80,y:-63},{x:-76,y:-63},{x:-70,y:-63},{x:-64,y:-63},{x:-58,y:-63},{x:-52,y:-63},{x:-47,y:-62},{x:-42,y:-61},{x:-38,y:-59},{x:-34,y:-56},{x:-30,y:-53},{x:-27,y:-49},{x:-24,y:-45},{x:-21,y:-42},{x:-19,y:-39},{x:-17,y:-35},{x:-14,y:-31},{x:-10,y:-25},{x:-7,y:-19},{x:-3,y:-13},{x:0,y:-8},{x:3,y:-4},{x:5,y:-1},{x:7,y:2},{x:9,y:5},{x:12,y:9},{x:16,y:13},{x:19,y:17},{x:22,y:19},{x:24,y:21},{x:26,y:23},{x:27,y:23},{x:28,y:24},{x:28,y:25},{x:29,y:25},{x:29,y:26}]},"shv.20_QSK3n1l8MmGEZ":{id:"shv.20_QSK3n1l8MmGEZ",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[{x:-102,y:9},{x:-100,y:8},{x:-97,y:8},{x:-93,y:8},{x:-89,y:7},{x:-86,y:6},{x:-83,y:5},{x:-79,y:4},{x:-75,y:4},{x:-71,y:4},{x:-67,y:4},{x:-63,y:4},{x:-60,y:3},{x:-58,y:3},{x:-55,y:3},{x:-52,y:3},{x:-49,y:3},{x:-47,y:3},{x:-44,y:3},{x:-43,y:3},{x:-42,y:3}]},"shv.22_I2STbWZAXgo1B":{id:"shv.22_I2STbWZAXgo1B",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[{x:-110,y:42},{x:-115,y:40},{x:-118,y:40},{x:-122,y:40},{x:-126,y:38},{x:-130,y:36},{x:-134,y:34},{x:-138,y:32},{x:-141,y:31},{x:-144,y:30},{x:-147,y:29},{x:-151,y:28},{x:-154,y:27},{x:-158,y:26},{x:-162,y:26},{x:-165,y:26},{x:-168,y:26},{x:-170,y:27},{x:-171,y:29},{x:-172,y:32},{x:-173,y:34},{x:-174,y:37},{x:-174,y:39},{x:-174,y:41},{x:-174,y:43},{x:-174,y:45},{x:-174,y:47},{x:-172,y:49},{x:-169,y:52},{x:-165,y:56},{x:-160,y:60},{x:-155,y:64},{x:-149,y:68},{x:-143,y:72},{x:-137,y:75},{x:-132,y:78},{x:-125,y:81},{x:-119,y:83},{x:-112,y:85},{x:-107,y:86},{x:-101,y:86},{x:-96,y:86},{x:-92,y:86},{x:-88,y:84},{x:-85,y:80},{x:-83,y:77},{x:-82,y:74},{x:-82,y:72},{x:-82,y:71},{x:-82,y:69},{x:-82,y:67},{x:-83,y:63},{x:-86,y:60},{x:-87,y:57},{x:-88,y:55},{x:-90,y:51},{x:-93,y:44},{x:-96,y:37},{x:-100,y:32},{x:-102,y:29},{x:-103,y:28},{x:-105,y:28},{x:-106,y:28},{x:-107,y:28},{x:-108,y:28},{x:-108,y:29}]},"shv.23_wW18nQbpEd7gx":{id:"shv.23_wW18nQbpEd7gx",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[{x:4,y:40},{x:-2,y:38},{x:-5,y:38},{x:-9,y:38},{x:-14,y:37},{x:-18,y:37},{x:-24,y:37},{x:-28,y:37},{x:-32,y:37},{x:-35,y:38},{x:-38,y:39},{x:-40,y:41},{x:-42,y:43},{x:-42,y:45},{x:-43,y:46},{x:-43,y:47},{x:-43,y:50},{x:-43,y:54},{x:-41,y:59},{x:-38,y:64},{x:-35,y:68},{x:-32,y:72},{x:-29,y:74},{x:-25,y:77},{x:-22,y:79},{x:-18,y:79},{x:-13,y:80},{x:-8,y:80},{x:-3,y:80},{x:3,y:80},{x:9,y:79},{x:15,y:75},{x:21,y:72},{x:26,y:69},{x:31,y:66},{x:34,y:64},{x:36,y:61},{x:38,y:59},{x:38,y:58},{x:38,y:57},{x:37,y:56},{x:36,y:56},{x:34,y:55},{x:31,y:52},{x:26,y:49},{x:21,y:45},{x:16,y:42},{x:12,y:40},{x:9,y:38},{x:6,y:36},{x:3,y:35},{x:-1,y:35},{x:-4,y:34},{x:-7,y:34},{x:-10,y:33},{x:-12,y:33},{x:-13,y:33},{x:-21,y:38}]},"shv.25_bSftSx0IJxw7H":{id:"shv.25_bSftSx0IJxw7H",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[{x:110.49240292871617,y:19.52362771067062},{x:101.42737067012109,y:11.753600060446258},{x:100.13236606175036,y:11.753600060446258},{x:96.24735223663818,y:11.753600060446258},{x:89.77232919478455,y:10.458595452075532},{x:84.59231076130163,y:9.163590843704805},{x:75.52727850270655,y:9.163590843704805},{x:67.75725085248219,y:7.868586235334078},{x:58.6922185938871,y:7.868586235334078},{x:50.922190943662734,y:7.868586235334078},{x:43.15216329343838,y:7.868586235334078},{x:35.38213564321401,y:7.868586235334078},{x:27.612107992989653,y:7.868586235334078},{x:19.84208034276529,y:7.868586235334078},{x:13.367057300911656,y:7.868586235334078},{x:6.892034259058021,y:9.163590843704805},{x:.4170112172043865,y:9.163590843704805},{x:-6.058011824649248,y:11.753600060446258},{x:-12.533034866502883,y:14.343609277187712},{x:-17.71305329998579,y:15.63861388555844},{x:-22.893071733468698,y:19.52362771067062},{x:-29.368094775322334,y:22.113636927412074},{x:-34.54811320880524,y:24.703646144153527},{x:-41.02313625065887,y:29.883664577636434},{x:-47.49815929251251,y:33.76867840274862},{x:-51.38317311762469,y:37.653692227860795},{x:-55.268186942736875,y:40.24370144460225},{x:-56.5631915511076,y:41.53870605297298},{x:-57.858196159478325,y:42.83371066134371},{x:-59.15320076784905,y:44.128715269714434},{x:-59.15320076784905,y:46.71872448645588},{x:-60.44820537621978,y:50.603738311568065},{x:-61.74320998459051,y:55.78375674505097},{x:-63.03821459296123,y:60.96377517853388},{x:-64.33321920133196,y:67.43879822038751},{x:-64.33321920133196,y:73.91382126224116},{x:-64.33321920133196,y:80.38884430409479},{x:-64.33321920133196,y:86.86386734594842},{x:-61.74320998459051,y:92.04388577943133},{x:-59.15320076784905,y:95.92889960454352},{x:-55.268186942736875,y:99.81391342965568},{x:-51.38317311762469,y:102.40392264639715},{x:-47.49815929251251,y:106.28893647150933},{x:-42.318140859029604,y:108.87894568825078},{x:-35.843117817175965,y:111.46895490499223},{x:-29.368094775322334,y:112.76395951336296},{x:-21.598067125097973,y:115.35396873010441},{x:-15.123044083244336,y:116.64897333847514},{x:-7.353016433019975,y:116.64897333847514},{x:-.8779933911663405,y:117.94397794684586},{x:6.892034259058021,y:119.2389825552166},{x:15.95706651765311,y:120.53398716358733},{x:23.72709416787747,y:123.12399638032878},{x:34.08713103484329,y:123.12399638032878},{x:41.85715868506765,y:124.41900098869951},{x:50.922190943662734,y:125.71400559707023},{x:58.6922185938871,y:128.30401481381168},{x:67.75725085248219,y:129.5990194221824},{x:76.82228311107728,y:132.18902863892387},{x:87.1823199780431,y:133.4840332472946},{x:96.24735223663818,y:134.7790378556653},{x:106.60738910360399,y:136.07404246403604},{x:115.67242136219909,y:137.36904707240677},{x:124.73745362079417,y:138.6640516807775},{x:132.50748127101855,y:138.6640516807775},{x:140.27750892124288,y:139.95905628914824},{x:149.34254117983798,y:141.25406089751894},{x:157.11256883006234,y:142.54906550588967},{x:166.17760108865744,y:143.8440701142604},{x:175.24263334725254,y:145.13907472263114},{x:184.3076656058476,y:145.13907472263114},{x:192.07769325607197,y:146.43407933100187},{x:201.14272551466706,y:146.43407933100187},{x:210.20775777326216,y:146.43407933100187},{x:219.27279003185726,y:146.43407933100187},{x:228.33782229045232,y:146.43407933100187},{x:239.99286376578888,y:146.43407933100187},{x:250.35290063275468,y:143.8440701142604},{x:263.302946716462,y:141.25406089751894},{x:276.25299280016924,y:137.36904707240677},{x:289.2030388838765,y:133.4840332472946},{x:300.85808035921303,y:129.5990194221824},{x:312.51312183454957,y:125.71400559707023},{x:322.8731587015154,y:121.82899177195804},{x:333.2331955684812,y:117.94397794684586},{x:344.88823704381775,y:111.46895490499223},{x:355.24827391078355,y:104.9939318631386},{x:364.3133061693787,y:98.51890882128497},{x:372.083333819603,y:92.04388577943133},{x:379.8533614698274,y:86.86386734594842},{x:386.328384511681,y:80.38884430409479},{x:394.0984121619054,y:72.61881665387043},{x:401.86843981212974,y:66.1437936120168},{x:408.3434628539834,y:57.078761353421704},{x:412.22847667909554,y:50.603738311568065},{x:414.818485895837,y:46.71872448645588},{x:414.818485895837,y:44.128715269714434},{x:414.818485895837,y:42.83371066134371},{x:414.818485895837,y:41.53870605297298},{x:414.818485895837,y:40.24370144460225},{x:413.52348128746627,y:37.653692227860795},{x:410.9334720707248,y:36.35868761949007},{x:408.3434628539834,y:33.76867840274862},{x:405.75345363724193,y:29.883664577636434},{x:401.86843981212974,y:24.703646144153527},{x:397.98342598701754,y:19.52362771067062},{x:392.80340755353467,y:13.048604668816985},{x:388.9183937284225,y:9.163590843704805},{x:386.328384511681,y:6.5735816269633505},{x:382.4433706865688,y:2.68856780185117},{x:379.8533614698274,y:.098558585109716},{x:375.9683476447152,y:-2.491450631631738},{x:372.083333819603,y:-3.7864552400024647},{x:368.1983199944908,y:-6.376464456743919},{x:364.3133061693787,y:-7.671469065114645},{x:360.4282923442665,y:-8.966473673485373},{x:357.838283127525,y:-8.966473673485373},{x:352.65826469404215,y:-8.966473673485373},{x:348.77325086892995,y:-10.2614782818561},{x:343.593232435447,y:-10.2614782818561},{x:338.4132140019641,y:-10.2614782818561},{x:331.9381909601105,y:-10.2614782818561},{x:326.75817252662756,y:-10.2614782818561},{x:320.28314948477396,y:-10.2614782818561},{x:313.8081264429203,y:-10.2614782818561},{x:307.3331034010667,y:-10.2614782818561},{x:302.15308496758377,y:-10.2614782818561},{x:296.97306653410084,y:-10.2614782818561},{x:291.79304810061797,y:-10.2614782818561},{x:285.3180250587643,y:-10.2614782818561},{x:277.54799740853997,y:-10.2614782818561},{x:269.7779697583156,y:-8.966473673485373},{x:262.00794210809124,y:-7.671469065114645},{x:255.53291906623758,y:-6.376464456743919},{x:251.64790524112541,y:-5.081459848373192},{x:250.35290063275468,y:-3.7864552400024647},{x:249.05789602438395,y:-3.7864552400024647},{x:250.35290063275468,y:-2.491450631631738}]},"shv.26_FUFwushsNIoT8":{id:"shv.26_FUFwushsNIoT8",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[{x:116.9674259705698,y:15.63861388555844},{x:120.85243979568199,y:6.5735816269633505},{x:122.14744440405272,y:2.68856780185117},{x:124.73745362079417,y:.098558585109716},{x:128.62246744590635,y:-3.7864552400024647},{x:131.21247666264782,y:-7.671469065114645},{x:135.09749048775998,y:-12.851487498597553},{x:138.98250431287218,y:-16.736501323709735},{x:144.16252274635508,y:-21.916519757192642},{x:149.34254117983798,y:-25.801533582304824},{x:153.22755500495018,y:-29.686547407417002},{x:157.11256883006234,y:-33.571561232529184},{x:160.99758265517454,y:-36.16157044927064},{x:164.8825964802867,y:-38.75157966601209},{x:168.7676103053989,y:-41.34158888275355},{x:172.65262413051107,y:-42.63659349112427},{x:176.53763795562324,y:-43.931598099495},{x:179.1276471723647,y:-43.931598099495},{x:181.71765638910617,y:-43.931598099495},{x:183.0126609974769,y:-43.931598099495},{x:184.3076656058476,y:-45.22660270786573},{x:185.60267021421834,y:-45.22660270786573},{x:188.1926794309598,y:-46.521607316236455},{x:189.48768403933053,y:-46.521607316236455},{x:190.78268864770124,y:-46.521607316236455},{x:192.07769325607197,y:-46.521607316236455},{x:193.3726978644427,y:-46.521607316236455},{x:194.66770247281343,y:-46.521607316236455},{x:195.96270708118416,y:-45.22660270786573},{x:195.96270708118416,y:-43.931598099495},{x:195.96270708118416,y:-42.63659349112427},{x:195.96270708118416,y:-40.046584274382816},{x:195.96270708118416,y:-37.456575057641366},{x:194.66770247281343,y:-32.27655662415846},{x:193.3726978644427,y:-28.391542799046277},{x:189.48768403933053,y:-21.916519757192642},{x:185.60267021421834,y:-15.441496715339007},{x:181.71765638910617,y:-8.966473673485373},{x:177.83264256399397,y:-3.7864552400024647},{x:173.9476287388818,y:1.3935631934804429},{x:171.35761952214034,y:5.278577018592624},{x:170.0626149137696,y:6.5735816269633505},{x:168.7676103053989,y:7.868586235334078},{x:168.7676103053989,y:9.163590843704805},{x:168.7676103053989,y:10.458595452075532},{x:168.7676103053989,y:11.753600060446258},{x:168.7676103053989,y:13.048604668816985}]},"shv.28_mqL5cK4iYMnLO":{id:"shv.28_mqL5cK4iYMnLO",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[{x:241.2878683741596,y:-8.966473673485373},{x:238.69785915741815,y:-15.441496715339007},{x:238.69785915741815,y:-18.03150593208046},{x:238.69785915741815,y:-21.916519757192642},{x:241.2878683741596,y:-25.801533582304824},{x:242.58287298253032,y:-30.98155201578773},{x:245.17288219927178,y:-34.86656584089991},{x:247.76289141601325,y:-38.75157966601209},{x:251.64790524112541,y:-42.63659349112427},{x:256.8279236746083,y:-47.81661192460718},{x:264.5979513248327,y:-52.99663035809009},{x:271.0729743666863,y:-59.471653399943726},{x:277.54799740853997,y:-63.35666722505591},{x:284.0230204503936,y:-65.94667644179736},{x:290.49804349224723,y:-67.24168105016808},{x:298.26807114247157,y:-67.24168105016808},{x:306.03809879269596,y:-67.24168105016808},{x:313.8081264429203,y:-67.24168105016808},{x:321.5781540931447,y:-67.24168105016808},{x:328.0531771349983,y:-67.24168105016808},{x:333.2331955684812,y:-65.94667644179736},{x:335.8232047852227,y:-65.94667644179736},{x:337.1182093935934,y:-64.65167183342663},{x:338.4132140019641,y:-64.65167183342663},{x:335.8232047852227,y:-64.65167183342663},{x:333.2331955684812,y:-64.65167183342663},{x:325.46316791825683,y:-63.35666722505591},{x:317.6931402680325,y:-62.061662616685176},{x:311.21811722617883,y:-60.76665800831445},{x:303.4480895759545,y:-58.176648791572994},{x:294.38305731735943,y:-52.99663035809009},{x:286.61302966713504,y:-47.81661192460718},{x:277.54799740853997,y:-41.34158888275355},{x:271.0729743666863,y:-34.86656584089991},{x:265.89295593320344,y:-28.391542799046277},{x:262.00794210809124,y:-25.801533582304824},{x:260.7129374997205,y:-21.916519757192642},{x:259.4179328913498,y:-20.621515148821913},{x:258.12292828297905,y:-19.32651054045119},{x:258.12292828297905,y:-18.03150593208046},{x:258.12292828297905,y:-16.736501323709735},{x:258.12292828297905,y:-15.441496715339007},{x:258.12292828297905,y:-14.14649210696828},{x:258.12292828297905,y:-12.851487498597553},{x:258.12292828297905,y:-11.556482890226826},{x:258.12292828297905,y:-10.2614782818561},{x:258.12292828297905,y:-8.966473673485373},{x:259.4179328913498,y:-8.966473673485373},{x:259.4179328913498,y:-1.196446023261011}]},"shv.29_7s9cPPIlpJ9Np":{id:"shv.29_7s9cPPIlpJ9Np",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[{x:188.1926794309598,y:16.933618493929167},{x:192.07769325607197,y:10.458595452075532},{x:195.96270708118416,y:10.458595452075532},{x:202.4377301230378,y:9.163590843704805},{x:210.20775777326216,y:9.163590843704805},{x:217.97778542348652,y:7.868586235334078},{x:224.45280846534015,y:6.5735816269633505},{x:230.9278315071938,y:5.278577018592624},{x:236.1078499406767,y:2.68856780185117},{x:239.99286376578888,y:2.68856780185117},{x:242.58287298253032,y:1.3935631934804429},{x:243.87787759090105,y:1.3935631934804429},{x:245.17288219927178,y:1.3935631934804429},{x:246.46788680764251,y:1.3935631934804429}]},"shv.30_gZeoEkcUkLcml":{id:"shv.30_gZeoEkcUkLcml",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[{x:238.69785915741815,y:38.94869683623153},{x:232.22283611556452,y:41.53870605297298},{x:228.33782229045232,y:41.53870605297298},{x:225.7478130737109,y:45.42371987808516},{x:220.56779464022796,y:49.30873370319734},{x:216.6827808151158,y:54.48875213668025},{x:211.5027623816329,y:59.668770570163154},{x:206.32274394814996,y:66.1437936120168},{x:201.14272551466706,y:71.3238120454997},{x:198.5527162979256,y:76.50383047898261},{x:195.96270708118416,y:81.6838489124655},{x:194.66770247281343,y:84.27385812920697},{x:193.3726978644427,y:88.15887195431915},{x:193.3726978644427,y:89.45387656268987},{x:193.3726978644427,y:90.7488811710606},{x:193.3726978644427,y:93.33889038780205},{x:194.66770247281343,y:94.63389499617278},{x:198.5527162979256,y:95.92889960454352},{x:203.73273473140853,y:97.22390421291423},{x:208.91275316489143,y:98.51890882128497},{x:214.09277159837433,y:99.81391342965568},{x:220.56779464022796,y:99.81391342965568},{x:228.33782229045232,y:99.81391342965568},{x:237.40285454904742,y:97.22390421291423},{x:246.46788680764251,y:93.33889038780205},{x:256.8279236746083,y:88.15887195431915},{x:264.5979513248327,y:80.38884430409479},{x:272.36797897505704,y:72.61881665387043},{x:278.8430020169107,y:66.1437936120168},{x:282.72801584202284,y:60.96377517853388},{x:286.61302966713504,y:54.48875213668025},{x:287.90803427550577,y:49.30873370319734},{x:289.2030388838765,y:45.42371987808516},{x:289.2030388838765,y:44.128715269714434},{x:287.90803427550577,y:44.128715269714434},{x:285.3180250587643,y:44.128715269714434},{x:281.4330112336521,y:42.83371066134371},{x:276.25299280016924,y:42.83371066134371},{x:269.7779697583156,y:42.83371066134371},{x:262.00794210809124,y:42.83371066134371},{x:252.94290984949615,y:42.83371066134371},{x:245.17288219927178,y:42.83371066134371},{x:239.99286376578888,y:42.83371066134371},{x:237.40285454904742,y:42.83371066134371},{x:236.1078499406767,y:42.83371066134371},{x:236.1078499406767,y:44.128715269714434}]},"shv.32_Is4OGgrMoyylx":{id:"shv.32_Is4OGgrMoyylx",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[{x:377.26335225308594,y:20.81863231904135},{x:366.90331538612014,y:19.52362771067062},{x:364.3133061693787,y:19.52362771067062},{x:359.13328773589575,y:22.113636927412074},{x:352.65826469404215,y:27.29365536089498},{x:344.88823704381775,y:35.063683011119345},{x:337.1182093935934,y:44.128715269714434},{x:330.64318635173976,y:51.8987429199388},{x:326.75817252662756,y:59.668770570163154},{x:321.5781540931447,y:66.1437936120168},{x:320.28314948477396,y:72.61881665387043},{x:317.6931402680325,y:77.79883508735334},{x:317.6931402680325,y:80.38884430409479},{x:317.6931402680325,y:82.97885352083624},{x:318.9881448764032,y:84.27385812920697},{x:321.5781540931447,y:85.56886273757769},{x:326.75817252662756,y:85.56886273757769},{x:331.9381909601105,y:85.56886273757769},{x:339.7082186103348,y:84.27385812920697},{x:347.4782462605592,y:80.38884430409479},{x:355.24827391078355,y:76.50383047898261},{x:363.01830156100795,y:71.3238120454997},{x:370.7883292112323,y:67.43879822038751},{x:375.9683476447152,y:62.25877978690461},{x:381.14836607819814,y:57.078761353421704},{x:383.73837529493954,y:51.8987429199388},{x:387.62338912005174,y:46.71872448645588},{x:390.2133983367932,y:40.24370144460225},{x:392.80340755353467,y:35.063683011119345},{x:392.80340755353467,y:31.178669186007163},{x:392.80340755353467,y:28.58865996926571},{x:392.80340755353467,y:27.29365536089498},{x:390.2133983367932,y:27.29365536089498},{x:388.9183937284225,y:27.29365536089498},{x:387.62338912005174,y:27.29365536089498},{x:386.328384511681,y:27.29365536089498},{x:386.328384511681,y:28.58865996926571},{x:386.328384511681,y:31.178669186007163}]}}});function gr(){return _(ue,{children:[l(vr,{}),l(mr,{}),l(Pr,{}),l(wr,{})]})}function mr(){const{getContextForEvent:t}=R();return l(B,{onClick:()=>{const{document:e,location:n}=t(),r=encodeURIComponent(JSON.stringify(Nt({document:e,location:n}))),o=window.document.createElement("a");o.setAttribute("href",`data:text/json;charset=utf-8,${r}`),o.setAttribute("download","splatapus.json"),o.click()},children:"export"})}function vr(){const{updateDocument:t}=R();return l(B,{onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",n=>{var i;const r=(i=e.files)==null?void 0:i.item(0);if(!r)return;const o=new FileReader;o.addEventListener("load",()=>{const s=o.result;if(!s){alert("could not read file :(");return}k(typeof s=="string");try{const a=_t(JSON.parse(s));if(a.isError()){alert(`cannot read splat doc: ${a.error.message}`);return}const x=a.value;t(()=>$.deserialize(x.document),{lockstepLocation:y=>ce.deserialize(x.location,y.viewport.screenSize)})}catch(a){alert(`could not parse json: ${en(a)}`)}}),o.readAsText(r)}),e.click()},children:"import"})}function wr(){const{updateDocument:t}=R();return l(B,{onClick:()=>{const{document:e,location:n}=Vt(v.UNIT);t(()=>e,{lockstepLocation:n})},children:"reset"})}function Pr(){const{updateDocument:t}=R();return ft.isOk()?l(B,{onClick:()=>{const e=ft.unwrap(),n=$.deserialize(e);t(()=>n,{lockstepLocation:Ot(n,v.UNIT)})},children:"example"}):null}var jt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},gt=M.createContext&&M.createContext(jt),Z=globalThis&&globalThis.__assign||function(){return Z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Z.apply(this,arguments)},Sr=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Kt(t){return t&&t.map(function(e,n){return M.createElement(e.tag,Z({key:n},e.attr),Kt(e.child))})}function Zt(t){return function(e){return l(Ir,{...Z({attr:Z({},t.attr)},e),children:Kt(t.child)})}}function Ir(t){var e=function(n){var r=t.attr,o=t.size,i=t.title,s=Sr(t,["attr","size","title"]),a=o||n.size||"1em",x;return n.className&&(x=n.className),t.className&&(x=(x?x+" ":"")+t.className),_("svg",{...Z({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:x,style:Z(Z({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[i&&l("title",{children:i}),t.children]})};return gt!==void 0?l(gt.Consumer,{children:function(n){return e(n)}}):e(jt)}function kr(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"}}]})(t)}function br(t){return Zt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"}}]})(t)}function Er(){const t=E(({undoStack:i})=>V.canUndo(i)),e=E(({undoStack:i})=>V.canRedo(i)),{updateUndoStack:n}=R(),r=qe("undo",()=>({keyFrames:{transform:["rotate(0)","rotate(-360deg)"]},duration:300,easing:Ue.DEFAULT})),o=qe("redo",()=>({keyFrames:{transform:["rotate(0)","rotate(360deg)"]},duration:300,easing:Ue.DEFAULT}));return _("div",{className:"pointer-events-auto pb-2 pl-3",children:[l(B,{disabled:!t,className:N("transition-all duration-300",t?"pointer-events-auto ease-out-back":e?"pointer-events-none opacity-50":"pointer-events-none scale-0 opacity-0 ease-in-back"),onClick:()=>n((i,s)=>V.undo(s,i.vfx)),iconLeft:l("div",{className:"mt-[2px] h-3 w-3 transition-transform duration-300 ease-in-out",ref:r,children:l(br,{size:12})}),children:"undo"}),l(B,{disabled:!e,className:N("transition-all duration-300",e?"pointer-events-auto ease-out-back-md":"scale-0 opacity-0 ease-in-back-md"),onClick:()=>n((i,s)=>V.redo(s,i.vfx)),iconRight:l("div",{className:"mt-[2px] h-3 w-3 transition-transform duration-300 ease-in-out",ref:o,children:l(kr,{size:12})}),children:"redo"})]})}class Cr{constructor(e){this.value=e,this.event=new hn}get(){return this.value}set(e){const n=this.value;this.value=G(this.value,e),this.value!==n&&this.event.emit(this.value,n)}subscribe(e){return this.event.listen(e)}}function zr(t){return P.exports.useSyncExternalStore(P.exports.useCallback(e=>t.subscribe(e),[t]),()=>t.get())}function Tr(t){return P.exports.useCallback(e=>t.set(e),[t])}function Dr(t){return[zr(t),Tr(t)]}const Wt="splatapus.debugSettings",_r=W({shouldShowPoints:pn}),Nr={shouldShowPoints:!1};function Or(){const[t,e]=Dr(Jt),[n,r]=P.exports.useState(!1),[o,i]=P.exports.useState(null),s=Ut(o,24),a=P.exports.useRef(null);return P.exports.useEffect(()=>{const x=le(a.current);if(!n)return;const y=c=>{c.target instanceof Node&&!x.contains(c.target)&&r(!1)};return window.addEventListener("pointerdown",y),()=>{window.removeEventListener("pointerdown",y)}}),_("div",{className:"pointer-events-auto relative px-3 py-2",ref:a,children:[l(B,{onClick:()=>r(!n),children:"!"}),l("div",{className:N("absolute bottom-12 right-3 origin-bottom-right drop-shadow transition-all duration-200",n?"ease-out-back":"scale-75 opacity-0 ease-in-back"),"aria-hidden":!n,tabIndex:-1,children:_("div",{ref:i,className:N("flex  w-60 flex-col gap-3 bg-stone-100 p-3"),style:{clipPath:s},children:[l(mt,{label:"Show points",value:t.shouldShowPoints,onChange:x=>e({...t,shouldShowPoints:x})}),l(mt,{label:"Show points",value:t.shouldShowPoints,onChange:x=>e({...t,shouldShowPoints:x})})]})})]})}function mt({label:t,value:e,onChange:n}){return l(B,{children:t})}function Vr(){const t=Fe(Wt);try{return _r(JSON.parse(t)).unwrap()}catch{return Nr}}const Jt=new Cr(Vr());Jt.subscribe(t=>{Pt(Wt,JSON.stringify(t))});function Ar(){const t=v.UNIT;{const e=An("autosave",t);if(e.isOk())return A.initialize(e.value);console.error(`Error loading autosave: ${e.error}`)}return A.initialize(Vt(t))}function Lr(){const[t,e]=P.exports.useState(null),n=St(t,on);return l("div",{ref:e,className:"absolute inset-0 touch-none overflow-hidden",children:n&&l(qn,{size:n,initialize:Ar,children:l(Mr,{size:n})})})}function Mr({size:t}){const e=P.exports.useRef(null),{onKeyDown:n,onKeyUp:r,onWheel:o,onPointerDown:i,onPointerMove:s,onPointerUp:a,onPointerCancel:x}=R();return P.exports.useEffect(()=>{const y=le(e.current);return y.addEventListener("wheel",o,{passive:!1}),window.addEventListener("keydown",n),window.addEventListener("keyup",r),()=>{y.removeEventListener("wheel",o),window.removeEventListener("keydown",n),window.removeEventListener("keyup",r)}},[n,r,o]),_(ue,{children:[_("div",{className:"absolute inset-0",ref:e,onPointerDown:i,onPointerMove:s,onPointerUp:a,onPointerCancel:x,children:[l(xr,{}),l(L.Overlay,{})]}),l(fr,{topBarLeft:l(tr,{}),topBarRight:l(gr,{}),rightBar:l(ur,{}),bottomBarLeft:l(Er,{}),bottomBarRight:l(Or,{})}),!1,l(Rr,{size:t})]})}const Rr=M.memo(function({size:e}){const n=He("document"),r=He("location"),{updateViewport:o}=R();P.exports.useEffect(()=>{Mn("autosave",{document:n,location:r})},[n,r]);const i=r.viewport.screenSize;return P.exports.useLayoutEffect(()=>{i!==e&&o((s,a)=>a.with({screenSize:e}))},[e,o,i]),null}),Br=le(document.getElementById("root"));sn(Br).render(l(Lr,{}));
