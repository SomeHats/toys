import{R as c}from"./chunk_RingBuffer.DBvCcgdE.js";import{b as f,a as g}from"./chunk_assert.pxkjFBOg.js";import{c as l,a,b as p,R as h}from"./chunk_index.7f6X1YHT.js";const m=1;function C(r,n){const e=new WeakMap;return n.addInitializer(function(){e.set(this,l(String(n.name),()=>r.call(this)))}),function(){return f(e.get(this),"Assertion Error: computeds.get(this)").get()}}function w({get:r},n){return g(n.kind==="accessor",'Assertion Error: ctx.kind === "accessor"'),{get(){return r.call(this).get()},set(e){r.call(this).set(e)},init(e){return a(String(n.name),e)}}}function y(r,n){return function(...e){return p(()=>r.apply(this,e))}}function S(r,n,e){const t=_(r),s=a("delay",e.get()),o=new c;return n.listen(()=>{const i=t.get()*m;for(o.push({at:performance.now(),value:e.get()});;){const u=o.first();if(!u)break;if(u.at+i<performance.now())s.set(u.value),o.shift();else break}}),s}function _(r){const n=a("target",typeof r=="number"?a("signal",r):null),e={name:"signal",get(){const t=n.get();return t?t.get():r.get()},get lastChangedEpoch(){const t=n.get();return t?t.lastChangedEpoch:r.lastChangedEpoch},getDiffSince(){return h},__unsafe__getWithoutCapture(){const t=n.__unsafe__getWithoutCapture();return t?t.__unsafe__getWithoutCapture():r.__unsafe__getWithoutCapture()},set(t){const s=n.get();return s?s.set(t):n.set(a("signal",t)),t},update(t){return e.set(t(e.get()))}};return e}export{m as T,y as a,S as d,C as m,_ as n,w as r};
