import{t as H,m as x,E as j,i as Y,g as Z}from"./chunk_utils.CSiPn6yw.js";/* empty css                       */import{j as c,c as _}from"./chunk_client.CotzxIPX.js";import{a as G,b as V}from"./chunk_assert.pxkjFBOg.js";import{S as C,D as J}from"./chunk_DebugSvg.Bt0G2Qkn.js";import{T as N,d as L}from"./chunk_Ticker.CwZa1AHQ.js";import{i as K}from"./chunk_easings.DXpt33Pz.js";import{A as W}from"./chunk_AABB.CekZtYjv.js";import{V as u}from"./chunk_Vector2.BFoa__dl.js";import{S as B}from"./chunk_svgPathBuilder.tqI_yD_n.js";import"./chunk_Spring.CsiXWAK9.js";import{t as b}from"./chunk_index.BVMwOSmr.js";import{m as q}from"./chunk_mod.DboZ6E-5.js";import{r as w}from"./chunk_index.C5eOxiyT.js";import{c as Q,R as U}from"./chunk_index.j-hgoUDg.js";import"./chunk_DebugDraw.CrSpCKoE.js";import"./chunk_useResizeObserver.DnDEPOOq.js";import"./chunk_ResizeObserver.C8OzoCMD.js";import"./chunk_useMergedRefs.MPIvL6fk.js";import"./chunk_EventEmitter.BsO-_0un.js";import"./chunk_signia.CS1dw6KR.js";import"./chunk_RingBuffer.ClstRnzI.js";import"./chunk__commonjsHelpers.Cpj98o6Y.js";const D=1e-4,E=.001;function S(t,s,{scaleT:o=1,scaleXy:r=1}={}){const[e]=w.useState(()=>q.makeNoise3D(Math.random()*1e5));return e(t.x*E*r,t.y*E*r,s.elapsedMs*D*o)}function T(t,s,{scaleT:o=1,scaleXy:r=1}={}){const[e]=w.useState(()=>q.makeNoise4D(Math.random()*1e5));return i=>e(t.x*E*r,t.y*E*r,s.elapsedMs*D*o,i)}function tt(){const[t,s]=w.useState(u.ZERO),[o,r]=w.useState(()=>new N);return w.useEffect(()=>(o.start(),()=>{o.stop()}),[o]),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-stone-200",onPointerMove:e=>{e.isPrimary&&s(u.fromEvent(e))},children:c.jsx("svg",{className:"bg-stone-200 w-[min(80vw,80vh)] overflow-visible",viewBox:"0 0 100 100",children:c.jsxs("g",{className:"stroke-stone-600",children:[c.jsx("line",{x1:0,y1:100,x2:100,y2:100,strokeWidth:3}),c.jsx(et,{xy:t,t:o}),c.jsx("line",{x1:0,y1:103,x2:100,y2:103,className:"stroke-stone-200",strokeWidth:3})]})})})}const et=b(function({xy:s,t:o}){const e=T(s,o),i=H(7,h=>x(-1,1,.1,3,e(h))),d=100/i.reduce((h,m)=>h+m,0),a=[];let l=0;for(let h=0;h<i.length-1;h++){l+=i[h]*d;const m=h*100,g=x(-1,1,-200,200,e(m+1e3+l/20));a.push({x:l,height:g,width:x(-1,1,2,x(0,200,0,20,j(0,200,g)),e(m+l/20))})}return a.map((h,m)=>c.jsx(st,{tree:h,xy:s,t:o,baseY:100},m))});function st({tree:t,xy:s,t:o,baseY:r}){const e=j(5,100,x(-1,1,t.height*.1,Math.sqrt(t.height)*5,T(s,o,{scaleT:1.5})(t.height/10))),i=S(s,o,{scaleT:2}),n=S(s,o,{scaleT:2});if(t.height<0)return null;const d=c.jsx("line",{x1:t.x,y1:r,x2:t.x,y2:r-Math.min(e,t.height),strokeWidth:t.width,strokeLinecap:"round"});let a=null,l=null;if(e<t.height){const h=Math.sqrt(j(0,1,i)),m=Math.sqrt(j(0,1,n)),g=r-e;a=c.jsx("g",{transform:`translate(${t.x} ${g})`,children:c.jsx(A,{tree:{x:0,height:t.height-e,width:t.width},xy:s,t:o,lean:h})}),l=c.jsx("g",{transform:`translate(${t.x} ${g}) scale(-1 1)`,children:c.jsx(A,{tree:{x:0,height:t.height-e,width:t.width},xy:s,t:o,lean:m})})}return c.jsxs(c.Fragment,{children:[d,a,l]})}function A({tree:t,xy:s,t:o,lean:r}){const e=x(-1,1,20,60,S(s,o)),i=L(e),n=x(-1,1,5,10,S(s,o)),d=new u(n,0),a=n*i,l=j(0,1,Y(0,a,t.height)),h=u.ZERO.rotateAround(d,i*l),m=new B().moveTo(0,t.width/2).arcTo(n,n,0,!1,!0,h);return c.jsx("path",{d:m.toString(),className:"stroke-stone-600",fill:"none",strokeWidth:1})}const v=W.fromLeftTopWidthHeight(0,0,100,100),y=W.fromLeftTopRightBottom(-1,-1,1,1),ot=[new u(1,1),new u(1,-1),new u(-1,-1),new u(-1,1)],nt=Math.sqrt(3)/2,P=10,$=P*nt,z=new u(P,$),rt=b(function(){const[s,o]=w.useState(u.ZERO),r=s.mapRange(v,y).clamp(y),[e]=w.useState(()=>new N);w.useEffect(()=>(e.start(),()=>{e.stop()}),[e]);const i=T(s,e,{scaleT:10}),n=T(s,e,{scaleT:10}),d=[];for(let a=0;a<v.height/$;a++)for(let l=0;l<v.width/P;l++){const h=new u(i(l/8),n(a/8)).scale(3).clamp(y);d.push(c.jsx(it,{weights:at(h),size:5,strokeWeight:1,originIdx:new u(l,a),spacing:z},`${l}-${a}`))}return c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-stone-200",children:c.jsxs(C,{className:"bg-stone-200 w-[min(80vw,80vh)] overflow-visible",viewBox:v,onPointerMove:a=>o(a),children:[c.jsx(J,{position:r.mapRange(y,v)}),d]})})});function it({weights:t,size:s,strokeWeight:o,originIdx:r}){G(t.length===M.length,"Assertion Error: weights.length === structureFlavours.length");const e={weight:0,origin:new u(0,0),lines:[f(0,0,0,0),f(0,0,0,0),f(0,0,0,0),f(0,0,0,0)]};for(let n=0;n<t.length;n++){const d=M[n],a=t[n];e.weight+=a*d.weight*o,e.origin=e.origin.add(d.origin(r,z).scale(a)),e.lines.forEach((l,h)=>{lt(l,d.lines[h],a*d.weight*s)})}console.log(e);const i=new B;return e.lines.forEach(n=>{i.moveTo(e.origin.add(n.start)),i.bezierCurveTo(e.origin.add(n.c1),e.origin.add(n.c2),e.origin.add(n.end))}),c.jsx("path",{d:i.toString(),fill:"none",stroke:"black",strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:e.weight})}function at(t){const s=ot.map(e=>K(Z(x(0,2,1,0,e.distanceTo(t))))),o=s.reduce((e,i)=>e+i,0);return s.map(e=>e/o)}const ct=(t,s)=>t.mul(s),R=(t,s)=>{const o=t.y%2===0?-s.x/4:s.x/4;return t.mul(s).add(o,0)},k={dashes:()=>({weight:1,origin:R,lines:[f(0,-.5,0,0),f(0,0,0,.5),f(0,-.5,0,0),f(0,0,0,.5)]}),separatedPeaks:()=>({weight:1,origin:ct,lines:[f(-.2,-(.5-.2),-.5,0),f(-.5,0,-(1-.2),.5-.2),f(.2,-(.5-.2),.5,0),f(.5,0,1-.2,.5-.2)]}),ohs:()=>({weight:1,origin:R,lines:[p(0,-.5,-.5,0,0,0),p(-.5,0,0,.5,0,0),p(0,-.5,.5,0,0,0),p(.5,0,0,.5,0,0)]}),yous:()=>{const t=new u(0,-.25),s=t.add(0,.5),o=s.rotateAround(t,L(45)),r=s.rotateAround(t,L(90));return{weight:1,origin:R,lines:[p(s.x,s.y,o.x,o.y,t.x,t.y),p(o.x,o.y,r.x,r.y,t.x,t.y),p(-s.x,s.y,-o.x,o.y,t.x,t.y),p(-o.x,o.y,-r.x,r.y,t.x,t.y)]}}},M=[k.yous(),k.ohs(),k.dashes(),k.separatedPeaks()];function f(t,s,o,r){const e=new u(t,s),i=new u(o,r),n=e.lerp(i,.5);return{start:e,end:i,c1:n,c2:n}}function p(t,s,o,r,e,i){const n=t-e,d=s-i,a=o-e,l=r-i,h=n*n+d*d,m=h+n*a+d*l,g=4/3*(Math.sqrt(2*h*m)-m)/(n*l-d*a),F=e+n-g*d,I=i+d+g*n,O=e+a+g*l,X=i+l-g*a;return{start:new u(t,s),end:new u(o,r),c1:new u(F,I),c2:new u(O,X)}}function lt(t,s,o){t.start=t.start.add(s.start.scale(o)),t.end=t.end.add(s.end.scale(o)),t.c1=t.c1.add(s.c1.scale(o)),t.c2=t.c2.add(s.c2.scale(o))}const ht=Q([{path:"/patterns",element:c.jsx(rt,{})},{path:"*",element:c.jsx(tt,{})}]),dt=V(document.getElementById("root"),'Assertion Error: document.getElementById("root")');_(dt).render(c.jsx(U,{router:ht}));
