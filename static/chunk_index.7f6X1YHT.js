var qn=Object.defineProperty;var Yn=(e,t,r)=>t in e?qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var w=(e,t,r)=>Yn(e,typeof t!="symbol"?t+"":t,r);import{R as qe,r as qr}from"./chunk_index.C5eOxiyT.js";import{c as W,g as ke}from"./chunk__commonjsHelpers.Cpj98o6Y.js";const Yr="__TLDRAW_LIBRARY_VERSIONS__";function Vn(){if(globalThis[Yr])return globalThis[Yr];const e={versions:[],didWarn:!1,scheduledNotice:null};return Object.defineProperty(globalThis,Yr,{value:e,writable:!1,configurable:!1,enumerable:!1}),e}function kr(e,t,r){if(!e||!t||!r)throw new Error("Missing name/version/module system in built version of tldraw library");const a=Vn();if(a.versions.push({name:e,version:t,modules:r}),!a.scheduledNotice)try{a.scheduledNotice=setTimeout(()=>{a.scheduledNotice=null,un(a)},100)}catch{un(a)}}function un(e){if(!e.versions.length||e.didWarn)return;const t=e.versions.sort((h,_)=>fn(h.version,_.version)),r=t[t.length-1].version,a=new Set,c=new Map;for(const h of t){if(c.has(h.name)){a.delete(h.name),Vr(c,h.name,new Set).add(h.version);continue}h.version===r?a.add(h.name):(a.delete(h.name),Vr(c,h.name,new Set).add(h.version))}if(c.size>0){const h=[`${It("[tldraw]",["bold","bgRed","textWhite"])} ${It("You have multiple versions of tldraw libraries installed. This can lead to bugs and unexpected behavior.",["textRed","bold"])}`,"",`The latest version you have installed is ${It(`v${r}`,["bold","textBlue"])}. The following libraries are on the latest version:`,...Array.from(a,_=>`  • ✅ ${It(_,["bold"])}`),"","The following libraries are not on the latest version, or have multiple versions installed:",...Array.from(c,([_,b])=>{const A=Array.from(b).sort(fn).map(E=>It(`v${E}`,E===r?["textGreen"]:["textRed"]));return`  • ❌ ${It(_,["bold"])} (${A.join(", ")})`})];console.log(h.join(`
`)),e.didWarn=!0;return}const f=new Map;for(const h of t)Vr(f,h.name,{version:h.version,modules:[]}).modules.push(h.modules);const d=new Map;for(const[h,_]of f)_.modules.length>1&&d.set(h,_);if(d.size>0){const h=[`${It("[tldraw]",["bold","bgRed","textWhite"])} ${It("You have multiple instances of some tldraw libraries active. This can lead to bugs and unexpected behavior. ",["textRed","bold"])}`,"","This usually means that your bundler is misconfigured, and is importing the same library multiple times - usually once as an ES Module, and once as a CommonJS module.","","The following libraries have been imported multiple times:",...Array.from(d,([_,b])=>{const A=b.modules.map((E,x)=>E==="esm"?`      ${x+1}. ES Modules`:`      ${x+1}. CommonJS`).join(`
`);return`  • ❌ ${It(_,["bold"])} v${b.version}: 
${A}`}),"","You should configure your bundler to only import one version of each library."];console.log(h.join(`
`)),e.didWarn=!0;return}}function fn(e,t){const r=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/),a=t.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/);return!r||!a?e.localeCompare(t):r[1]!==a[1]?Number(r[1])-Number(a[1]):r[2]!==a[2]?Number(r[2])-Number(a[2]):r[3]!==a[3]?Number(r[3])-Number(a[3]):r[4]&&a[4]?r[4].localeCompare(a[4]):r[4]?1:a[4]?-1:0}const Kn={bold:"1",textBlue:"94",textRed:"31",textGreen:"32",bgRed:"41",textWhite:"97"};function It(e,t=[]){return`\x1B[${t.map(r=>Kn[r]).join(";")}m${e}\x1B[m`}function Vr(e,t,r){return e.has(t)?e.get(t):(e.set(t,r),r)}var Ye={exports:{}};Ye.exports;(function(e,t){var r=200,a="__lodash_hash_undefined__",c=1,f=2,d=9007199254740991,h="[object Arguments]",_="[object Array]",b="[object AsyncFunction]",A="[object Boolean]",E="[object Date]",x="[object Error]",q="[object Function]",k="[object GeneratorFunction]",et="[object Map]",B="[object Number]",rt="[object Null]",K="[object Object]",J="[object Promise]",Lt="[object Proxy]",ut="[object RegExp]",v="[object Set]",G="[object String]",nt="[object Symbol]",Vt="[object Undefined]",ie="[object WeakMap]",ve="[object ArrayBuffer]",Kt="[object DataView]",nr="[object Float32Array]",ir="[object Float64Array]",ar="[object Int8Array]",sr="[object Int16Array]",or="[object Int32Array]",cr="[object Uint8Array]",ur="[object Uint8ClampedArray]",fr="[object Uint16Array]",C="[object Uint32Array]",Te=/[\\^$.*+?()[\]{}|]/g,lr=/^\[object .+?Constructor\]$/,_t=/^(?:0|[1-9]\d*)$/,S={};S[nr]=S[ir]=S[ar]=S[sr]=S[or]=S[cr]=S[ur]=S[fr]=S[C]=!0,S[h]=S[_]=S[ve]=S[A]=S[Kt]=S[E]=S[x]=S[q]=S[et]=S[B]=S[K]=S[ut]=S[v]=S[G]=S[ie]=!1;var ae=typeof W=="object"&&W&&W.Object===Object&&W,hr=typeof self=="object"&&self&&self.Object===Object&&self,it=ae||hr||Function("return this")(),se=t&&!t.nodeType&&t,oe=se&&!0&&e&&!e.nodeType&&e,Ae=oe&&oe.exports===se,ce=Ae&&ae.process,Se=function(){try{return ce&&ce.binding&&ce.binding("util")}catch{}}(),Ce=Se&&Se.isTypedArray;function ue(n,s){for(var u=-1,g=n==null?0:n.length,O=0,m=[];++u<g;){var L=n[u];s(L,u,n)&&(m[O++]=L)}return m}function dr(n,s){for(var u=-1,g=s.length,O=n.length;++u<g;)n[O+u]=s[u];return n}function gr(n,s){for(var u=-1,g=n==null?0:n.length;++u<g;)if(s(n[u],u,n))return!0;return!1}function pr(n,s){for(var u=-1,g=Array(n);++u<n;)g[u]=s(u);return g}function _r(n){return function(s){return n(s)}}function yr(n,s){return n.has(s)}function Jt(n,s){return n==null?void 0:n[s]}function fe(n){var s=-1,u=Array(n.size);return n.forEach(function(g,O){u[++s]=[O,g]}),u}function xe(n,s){return function(u){return n(s(u))}}function Oe(n){var s=-1,u=Array(n.size);return n.forEach(function(g){u[++s]=g}),u}var ft=Array.prototype,Gt=Function.prototype,Zt=Object.prototype,Xt=it["__core-js_shared__"],le=Gt.toString,at=Zt.hasOwnProperty,Re=function(){var n=/[^.]+$/.exec(Xt&&Xt.keys&&Xt.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Ie=Zt.toString,he=RegExp("^"+le.call(at).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dt=Ae?it.Buffer:void 0,jt=it.Symbol,Qt=it.Uint8Array,kt=Zt.propertyIsEnumerable,Ft=ft.splice,wt=jt?jt.toStringTag:void 0,Pe=Object.getOwnPropertySymbols,mr=Dt?Dt.isBuffer:void 0,br=xe(Object.keys,Object),de=xt(it,"DataView"),Ut=xt(it,"Map"),zt=xt(it,"Promise"),lt=xt(it,"Set"),ge=xt(it,"WeakMap"),Ht=xt(Object,"create"),wr=p(de),Er=p(Ut),vr=p(zt),ht=p(lt),Tr=p(ge),Le=jt?jt.prototype:void 0,pe=Le?Le.valueOf:void 0;function Et(n){var s=-1,u=n==null?0:n.length;for(this.clear();++s<u;){var g=n[s];this.set(g[0],g[1])}}function Ar(){this.__data__=Ht?Ht(null):{},this.size=0}function vt(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s}function Sr(n){var s=this.__data__;if(Ht){var u=s[n];return u===a?void 0:u}return at.call(s,n)?s[n]:void 0}function Cr(n){var s=this.__data__;return Ht?s[n]!==void 0:at.call(s,n)}function xr(n,s){var u=this.__data__;return this.size+=this.has(n)?0:1,u[n]=Ht&&s===void 0?a:s,this}Et.prototype.clear=Ar,Et.prototype.delete=vt,Et.prototype.get=Sr,Et.prototype.has=Cr,Et.prototype.set=xr;function dt(n){var s=-1,u=n==null?0:n.length;for(this.clear();++s<u;){var g=n[s];this.set(g[0],g[1])}}function Or(){this.__data__=[],this.size=0}function te(n){var s=this.__data__,u=St(s,n);if(u<0)return!1;var g=s.length-1;return u==g?s.pop():Ft.call(s,u,1),--this.size,!0}function Rr(n){var s=this.__data__,u=St(s,n);return u<0?void 0:s[u][1]}function Ir(n){return St(this.__data__,n)>-1}function yt(n,s){var u=this.__data__,g=St(u,n);return g<0?(++this.size,u.push([n,s])):u[g][1]=s,this}dt.prototype.clear=Or,dt.prototype.delete=te,dt.prototype.get=Rr,dt.prototype.has=Ir,dt.prototype.set=yt;function Tt(n){var s=-1,u=n==null?0:n.length;for(this.clear();++s<u;){var g=n[s];this.set(g[0],g[1])}}function Pr(){this.size=0,this.__data__={hash:new Et,map:new(Ut||dt),string:new Et}}function Lr(n){var s=ee(this,n).delete(n);return this.size-=s?1:0,s}function Dr(n){return ee(this,n).get(n)}function jr(n){return ee(this,n).has(n)}function Ur(n,s){var u=ee(this,n),g=u.size;return u.set(n,s),this.size+=u.size==g?0:1,this}Tt.prototype.clear=Pr,Tt.prototype.delete=Lr,Tt.prototype.get=Dr,Tt.prototype.has=jr,Tt.prototype.set=Ur;function At(n){var s=-1,u=n==null?0:n.length;for(this.__data__=new Tt;++s<u;)this.add(n[s])}function Mr(n){return this.__data__.set(n,a),this}function De(n){return this.__data__.has(n)}At.prototype.add=At.prototype.push=Mr,At.prototype.has=De;function mt(n){var s=this.__data__=new dt(n);this.size=s.size}function $r(){this.__data__=new dt,this.size=0}function Nr(n){var s=this.__data__,u=s.delete(n);return this.size=s.size,u}function Br(n){return this.__data__.get(n)}function je(n){return this.__data__.has(n)}function Gr(n,s){var u=this.__data__;if(u instanceof dt){var g=u.__data__;if(!Ut||g.length<r-1)return g.push([n,s]),this.size=++u.size,this;u=this.__data__=new Tt(g)}return u.set(n,s),this.size=u.size,this}mt.prototype.clear=$r,mt.prototype.delete=Nr,mt.prototype.get=Br,mt.prototype.has=je,mt.prototype.set=Gr;function Fr(n,s){var u=D(n),g=!u&&y(n),O=!u&&!g&&j(n),m=!u&&!g&&!O&&V(n),L=u||g||O||m,$=L?pr(n.length,String):[],N=$.length;for(var P in n)at.call(n,P)&&!(L&&(P=="length"||O&&(P=="offset"||P=="parent")||m&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||Wr(P,N)))&&$.push(P);return $}function St(n,s){for(var u=n.length;u--;)if(R(n[u][0],s))return u;return-1}function Mt(n,s,u){var g=s(n);return D(n)?g:dr(g,u(n))}function Z(n){return n==null?n===void 0?Vt:rt:wt&&wt in Object(n)?Fe(n):l(n)}function Ue(n){return M(n)&&Z(n)==h}function Me(n,s,u,g,O){return n===s?!0:n==null||s==null||!M(n)&&!M(s)?n!==n&&s!==s:zr(n,s,u,g,Me,O)}function zr(n,s,u,g,O,m){var L=D(n),$=D(s),N=L?_:st(n),P=$?_:st(s);N=N==h?K:N,P=P==h?K:P;var tt=N==K,pt=P==K,H=N==P;if(H&&j(n)){if(!j(s))return!1;L=!0,tt=!1}if(H&&!tt)return m||(m=new mt),L||V(n)?Ne(n,s,u,g,O,m):_e(n,s,N,u,g,O,m);if(!(u&c)){var ot=tt&&at.call(n,"__wrapped__"),ct=pt&&at.call(s,"__wrapped__");if(ot||ct){var $t=ot?n.value():n,Rt=ct?s.value():s;return m||(m=new mt),O($t,Rt,u,g,m)}}return H?(m||(m=new mt),Be(n,s,u,g,O,m)):!1}function Hr(n){if(!U(n)||i(n))return!1;var s=Y(n)?he:lr;return s.test(p(n))}function Ct(n){return M(n)&&X(n.length)&&!!S[Z(n)]}function $e(n){if(!o(n))return br(n);var s=[];for(var u in Object(n))at.call(n,u)&&u!="constructor"&&s.push(u);return s}function Ne(n,s,u,g,O,m){var L=u&c,$=n.length,N=s.length;if($!=N&&!(L&&N>$))return!1;var P=m.get(n);if(P&&m.get(s))return P==s;var tt=-1,pt=!0,H=u&f?new At:void 0;for(m.set(n,s),m.set(s,n);++tt<$;){var ot=n[tt],ct=s[tt];if(g)var $t=L?g(ct,ot,tt,s,n,m):g(ot,ct,tt,n,s,m);if($t!==void 0){if($t)continue;pt=!1;break}if(H){if(!gr(s,function(Rt,Wt){if(!yr(H,Wt)&&(ot===Rt||O(ot,Rt,u,g,m)))return H.push(Wt)})){pt=!1;break}}else if(!(ot===ct||O(ot,ct,u,g,m))){pt=!1;break}}return m.delete(n),m.delete(s),pt}function _e(n,s,u,g,O,m,L){switch(u){case Kt:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case ve:return!(n.byteLength!=s.byteLength||!m(new Qt(n),new Qt(s)));case A:case E:case B:return R(+n,+s);case x:return n.name==s.name&&n.message==s.message;case ut:case G:return n==s+"";case et:var $=fe;case v:var N=g&c;if($||($=Oe),n.size!=s.size&&!N)return!1;var P=L.get(n);if(P)return P==s;g|=f,L.set(n,s);var tt=Ne($(n),$(s),g,O,m,L);return L.delete(n),tt;case nt:if(pe)return pe.call(n)==pe.call(s)}return!1}function Be(n,s,u,g,O,m){var L=u&c,$=Ge(n),N=$.length,P=Ge(s),tt=P.length;if(N!=tt&&!L)return!1;for(var pt=N;pt--;){var H=$[pt];if(!(L?H in s:at.call(s,H)))return!1}var ot=m.get(n);if(ot&&m.get(s))return ot==s;var ct=!0;m.set(n,s),m.set(s,n);for(var $t=L;++pt<N;){H=$[pt];var Rt=n[H],Wt=s[H];if(g)var cn=L?g(Wt,Rt,H,s,n,m):g(Rt,Wt,H,n,s,m);if(!(cn===void 0?Rt===Wt||O(Rt,Wt,u,g,m):cn)){ct=!1;break}$t||($t=H=="constructor")}if(ct&&!$t){var He=n.constructor,We=s.constructor;He!=We&&"constructor"in n&&"constructor"in s&&!(typeof He=="function"&&He instanceof He&&typeof We=="function"&&We instanceof We)&&(ct=!1)}return m.delete(n),m.delete(s),ct}function Ge(n){return Mt(n,bt,ye)}function ee(n,s){var u=n.__data__;return ze(s)?u[typeof s=="string"?"string":"hash"]:u.map}function xt(n,s){var u=Jt(n,s);return Hr(u)?u:void 0}function Fe(n){var s=at.call(n,wt),u=n[wt];try{n[wt]=void 0;var g=!0}catch{}var O=Ie.call(n);return g&&(s?n[wt]=u:delete n[wt]),O}var ye=Pe?function(n){return n==null?[]:(n=Object(n),ue(Pe(n),function(s){return kt.call(n,s)}))}:gt,st=Z;(de&&st(new de(new ArrayBuffer(1)))!=Kt||Ut&&st(new Ut)!=et||zt&&st(zt.resolve())!=J||lt&&st(new lt)!=v||ge&&st(new ge)!=ie)&&(st=function(n){var s=Z(n),u=s==K?n.constructor:void 0,g=u?p(u):"";if(g)switch(g){case wr:return Kt;case Er:return et;case vr:return J;case ht:return v;case Tr:return ie}return s});function Wr(n,s){return s=s??d,!!s&&(typeof n=="number"||_t.test(n))&&n>-1&&n%1==0&&n<s}function ze(n){var s=typeof n;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?n!=="__proto__":n===null}function i(n){return!!Re&&Re in n}function o(n){var s=n&&n.constructor,u=typeof s=="function"&&s.prototype||Zt;return n===u}function l(n){return Ie.call(n)}function p(n){if(n!=null){try{return le.call(n)}catch{}try{return n+""}catch{}}return""}function R(n,s){return n===s||n!==n&&s!==s}var y=Ue(function(){return arguments}())?Ue:function(n){return M(n)&&at.call(n,"callee")&&!kt.call(n,"callee")},D=Array.isArray;function F(n){return n!=null&&X(n.length)&&!Y(n)}var j=mr||Ot;function z(n,s){return Me(n,s)}function Y(n){if(!U(n))return!1;var s=Z(n);return s==q||s==k||s==b||s==Lt}function X(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=d}function U(n){var s=typeof n;return n!=null&&(s=="object"||s=="function")}function M(n){return n!=null&&typeof n=="object"}var V=Ce?_r(Ce):Ct;function bt(n){return F(n)?Fr(n):$e(n)}function gt(){return[]}function Ot(){return!1}e.exports=z})(Ye,Ye.exports);var Jn=Ye.exports;const Va=ke(Jn);var Ve={exports:{}};Ve.exports;(function(e,t){var r=200,a="__lodash_hash_undefined__",c=1,f=2,d=9007199254740991,h="[object Arguments]",_="[object Array]",b="[object Boolean]",A="[object Date]",E="[object Error]",x="[object Function]",q="[object GeneratorFunction]",k="[object Map]",et="[object Number]",B="[object Object]",rt="[object Promise]",K="[object RegExp]",J="[object Set]",Lt="[object String]",ut="[object Symbol]",v="[object WeakMap]",G="[object ArrayBuffer]",nt="[object DataView]",Vt="[object Float32Array]",ie="[object Float64Array]",ve="[object Int8Array]",Kt="[object Int16Array]",nr="[object Int32Array]",ir="[object Uint8Array]",ar="[object Uint8ClampedArray]",sr="[object Uint16Array]",or="[object Uint32Array]",cr=/[\\^$.*+?()[\]{}|]/g,ur=/^\[object .+?Constructor\]$/,fr=/^(?:0|[1-9]\d*)$/,C={};C[Vt]=C[ie]=C[ve]=C[Kt]=C[nr]=C[ir]=C[ar]=C[sr]=C[or]=!0,C[h]=C[_]=C[G]=C[b]=C[nt]=C[A]=C[E]=C[x]=C[k]=C[et]=C[B]=C[K]=C[J]=C[Lt]=C[v]=!1;var Te=typeof W=="object"&&W&&W.Object===Object&&W,lr=typeof self=="object"&&self&&self.Object===Object&&self,_t=Te||lr||Function("return this")(),S=t&&!t.nodeType&&t,ae=S&&!0&&e&&!e.nodeType&&e,hr=ae&&ae.exports===S,it=hr&&Te.process,se=function(){try{return it&&it.binding("util")}catch{}}(),oe=se&&se.isTypedArray;function Ae(i,o){for(var l=-1,p=i?i.length:0;++l<p;)if(o(i[l],l,i))return!0;return!1}function ce(i,o){for(var l=-1,p=Array(i);++l<i;)p[l]=o(l);return p}function Se(i){return function(o){return i(o)}}function Ce(i,o){return i==null?void 0:i[o]}function ue(i){var o=!1;if(i!=null&&typeof i.toString!="function")try{o=!!(i+"")}catch{}return o}function dr(i){var o=-1,l=Array(i.size);return i.forEach(function(p,R){l[++o]=[R,p]}),l}function gr(i,o){return function(l){return i(o(l))}}function pr(i){var o=-1,l=Array(i.size);return i.forEach(function(p){l[++o]=p}),l}var _r=Array.prototype,yr=Function.prototype,Jt=Object.prototype,fe=_t["__core-js_shared__"],xe=function(){var i=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),Oe=yr.toString,ft=Jt.hasOwnProperty,Gt=Jt.toString,Zt=RegExp("^"+Oe.call(ft).replace(cr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xt=_t.Symbol,le=_t.Uint8Array,at=Jt.propertyIsEnumerable,Re=_r.splice,Ie=gr(Object.keys,Object),he=Mt(_t,"DataView"),Dt=Mt(_t,"Map"),jt=Mt(_t,"Promise"),Qt=Mt(_t,"Set"),kt=Mt(_t,"WeakMap"),Ft=Mt(Object,"create"),wt=Ct(he),Pe=Ct(Dt),mr=Ct(jt),br=Ct(Qt),de=Ct(kt),Ut=Xt?Xt.prototype:void 0,zt=Ut?Ut.valueOf:void 0;function lt(i){var o=-1,l=i?i.length:0;for(this.clear();++o<l;){var p=i[o];this.set(p[0],p[1])}}function ge(){this.__data__=Ft?Ft(null):{}}function Ht(i){return this.has(i)&&delete this.__data__[i]}function wr(i){var o=this.__data__;if(Ft){var l=o[i];return l===a?void 0:l}return ft.call(o,i)?o[i]:void 0}function Er(i){var o=this.__data__;return Ft?o[i]!==void 0:ft.call(o,i)}function vr(i,o){var l=this.__data__;return l[i]=Ft&&o===void 0?a:o,this}lt.prototype.clear=ge,lt.prototype.delete=Ht,lt.prototype.get=wr,lt.prototype.has=Er,lt.prototype.set=vr;function ht(i){var o=-1,l=i?i.length:0;for(this.clear();++o<l;){var p=i[o];this.set(p[0],p[1])}}function Tr(){this.__data__=[]}function Le(i){var o=this.__data__,l=At(o,i);if(l<0)return!1;var p=o.length-1;return l==p?o.pop():Re.call(o,l,1),!0}function pe(i){var o=this.__data__,l=At(o,i);return l<0?void 0:o[l][1]}function Et(i){return At(this.__data__,i)>-1}function Ar(i,o){var l=this.__data__,p=At(l,i);return p<0?l.push([i,o]):l[p][1]=o,this}ht.prototype.clear=Tr,ht.prototype.delete=Le,ht.prototype.get=pe,ht.prototype.has=Et,ht.prototype.set=Ar;function vt(i){var o=-1,l=i?i.length:0;for(this.clear();++o<l;){var p=i[o];this.set(p[0],p[1])}}function Sr(){this.__data__={hash:new lt,map:new(Dt||ht),string:new lt}}function Cr(i){return St(this,i).delete(i)}function xr(i){return St(this,i).get(i)}function dt(i){return St(this,i).has(i)}function Or(i,o){return St(this,i).set(i,o),this}vt.prototype.clear=Sr,vt.prototype.delete=Cr,vt.prototype.get=xr,vt.prototype.has=dt,vt.prototype.set=Or;function te(i){var o=-1,l=i?i.length:0;for(this.__data__=new vt;++o<l;)this.add(i[o])}function Rr(i){return this.__data__.set(i,a),this}function Ir(i){return this.__data__.has(i)}te.prototype.add=te.prototype.push=Rr,te.prototype.has=Ir;function yt(i){this.__data__=new ht(i)}function Tt(){this.__data__=new ht}function Pr(i){return this.__data__.delete(i)}function Lr(i){return this.__data__.get(i)}function Dr(i){return this.__data__.has(i)}function jr(i,o){var l=this.__data__;if(l instanceof ht){var p=l.__data__;if(!Dt||p.length<r-1)return p.push([i,o]),this;l=this.__data__=new vt(p)}return l.set(i,o),this}yt.prototype.clear=Tt,yt.prototype.delete=Pr,yt.prototype.get=Lr,yt.prototype.has=Dr,yt.prototype.set=jr;function Ur(i,o){var l=_e(i)||Ne(i)?ce(i.length,String):[],p=l.length,R=!!p;for(var y in i)ft.call(i,y)&&!(R&&(y=="length"||Ue(y,p)))&&l.push(y);return l}function At(i,o){for(var l=i.length;l--;)if($e(i[l][0],o))return l;return-1}function Mr(i){return Gt.call(i)}function De(i,o,l,p,R){return i===o?!0:i==null||o==null||!ye(i)&&!st(o)?i!==i&&o!==o:mt(i,o,De,l,p,R)}function mt(i,o,l,p,R,y){var D=_e(i),F=_e(o),j=_,z=_;D||(j=Z(i),j=j==h?B:j),F||(z=Z(o),z=z==h?B:z);var Y=j==B&&!ue(i),X=z==B&&!ue(o),U=j==z;if(U&&!Y)return y||(y=new yt),D||Wr(i)?je(i,o,l,p,R,y):Gr(i,o,j,l,p,R,y);if(!(R&f)){var M=Y&&ft.call(i,"__wrapped__"),V=X&&ft.call(o,"__wrapped__");if(M||V){var bt=M?i.value():i,gt=V?o.value():o;return y||(y=new yt),l(bt,gt,p,R,y)}}return U?(y||(y=new yt),Fr(i,o,l,p,R,y)):!1}function $r(i){if(!ye(i)||zr(i))return!1;var o=xt(i)||ue(i)?Zt:ur;return o.test(Ct(i))}function Nr(i){return st(i)&&Fe(i.length)&&!!C[Gt.call(i)]}function Br(i){if(!Hr(i))return Ie(i);var o=[];for(var l in Object(i))ft.call(i,l)&&l!="constructor"&&o.push(l);return o}function je(i,o,l,p,R,y){var D=R&f,F=i.length,j=o.length;if(F!=j&&!(D&&j>F))return!1;var z=y.get(i);if(z&&y.get(o))return z==o;var Y=-1,X=!0,U=R&c?new te:void 0;for(y.set(i,o),y.set(o,i);++Y<F;){var M=i[Y],V=o[Y];if(p)var bt=D?p(V,M,Y,o,i,y):p(M,V,Y,i,o,y);if(bt!==void 0){if(bt)continue;X=!1;break}if(U){if(!Ae(o,function(gt,Ot){if(!U.has(Ot)&&(M===gt||l(M,gt,p,R,y)))return U.add(Ot)})){X=!1;break}}else if(!(M===V||l(M,V,p,R,y))){X=!1;break}}return y.delete(i),y.delete(o),X}function Gr(i,o,l,p,R,y,D){switch(l){case nt:if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case G:return!(i.byteLength!=o.byteLength||!p(new le(i),new le(o)));case b:case A:case et:return $e(+i,+o);case E:return i.name==o.name&&i.message==o.message;case K:case Lt:return i==o+"";case k:var F=dr;case J:var j=y&f;if(F||(F=pr),i.size!=o.size&&!j)return!1;var z=D.get(i);if(z)return z==o;y|=c,D.set(i,o);var Y=je(F(i),F(o),p,R,y,D);return D.delete(i),Y;case ut:if(zt)return zt.call(i)==zt.call(o)}return!1}function Fr(i,o,l,p,R,y){var D=R&f,F=ze(i),j=F.length,z=ze(o),Y=z.length;if(j!=Y&&!D)return!1;for(var X=j;X--;){var U=F[X];if(!(D?U in o:ft.call(o,U)))return!1}var M=y.get(i);if(M&&y.get(o))return M==o;var V=!0;y.set(i,o),y.set(o,i);for(var bt=D;++X<j;){U=F[X];var gt=i[U],Ot=o[U];if(p)var n=D?p(Ot,gt,U,o,i,y):p(gt,Ot,U,i,o,y);if(!(n===void 0?gt===Ot||l(gt,Ot,p,R,y):n)){V=!1;break}bt||(bt=U=="constructor")}if(V&&!bt){var s=i.constructor,u=o.constructor;s!=u&&"constructor"in i&&"constructor"in o&&!(typeof s=="function"&&s instanceof s&&typeof u=="function"&&u instanceof u)&&(V=!1)}return y.delete(i),y.delete(o),V}function St(i,o){var l=i.__data__;return Me(o)?l[typeof o=="string"?"string":"hash"]:l.map}function Mt(i,o){var l=Ce(i,o);return $r(l)?l:void 0}var Z=Mr;(he&&Z(new he(new ArrayBuffer(1)))!=nt||Dt&&Z(new Dt)!=k||jt&&Z(jt.resolve())!=rt||Qt&&Z(new Qt)!=J||kt&&Z(new kt)!=v)&&(Z=function(i){var o=Gt.call(i),l=o==B?i.constructor:void 0,p=l?Ct(l):void 0;if(p)switch(p){case wt:return nt;case Pe:return k;case mr:return rt;case br:return J;case de:return v}return o});function Ue(i,o){return o=o??d,!!o&&(typeof i=="number"||fr.test(i))&&i>-1&&i%1==0&&i<o}function Me(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null}function zr(i){return!!xe&&xe in i}function Hr(i){var o=i&&i.constructor,l=typeof o=="function"&&o.prototype||Jt;return i===l}function Ct(i){if(i!=null){try{return Oe.call(i)}catch{}try{return i+""}catch{}}return""}function $e(i,o){return i===o||i!==i&&o!==o}function Ne(i){return Ge(i)&&ft.call(i,"callee")&&(!at.call(i,"callee")||Gt.call(i)==h)}var _e=Array.isArray;function Be(i){return i!=null&&Fe(i.length)&&!xt(i)}function Ge(i){return st(i)&&Be(i)}function ee(i,o,l){l=typeof l=="function"?l:void 0;var p=l?l(i,o):void 0;return p===void 0?De(i,o,l):!!p}function xt(i){var o=ye(i)?Gt.call(i):"";return o==x||o==q}function Fe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=d}function ye(i){var o=typeof i;return!!i&&(o=="object"||o=="function")}function st(i){return!!i&&typeof i=="object"}var Wr=oe?Se(oe):Nr;function ze(i){return Be(i)?Ur(i):Br(i)}e.exports=ee})(Ve,Ve.exports);var Zn=Ve.exports;const Ka=ke(Zn);var En="Expected a function",ln=NaN,Xn="[object Symbol]",Qn=/^\s+|\s+$/g,kn=/^[-+]0x[0-9a-f]+$/i,ti=/^0b[01]+$/i,ei=/^0o[0-7]+$/i,ri=parseInt,ni=typeof W=="object"&&W&&W.Object===Object&&W,ii=typeof self=="object"&&self&&self.Object===Object&&self,ai=ni||ii||Function("return this")(),si=Object.prototype,oi=si.toString,ci=Math.max,ui=Math.min,Kr=function(){return ai.Date.now()};function fi(e,t,r){var a,c,f,d,h,_,b=0,A=!1,E=!1,x=!0;if(typeof e!="function")throw new TypeError(En);t=hn(t)||0,Ke(r)&&(A=!!r.leading,E="maxWait"in r,f=E?ci(hn(r.maxWait)||0,t):f,x="trailing"in r?!!r.trailing:x);function q(v){var G=a,nt=c;return a=c=void 0,b=v,d=e.apply(nt,G),d}function k(v){return b=v,h=setTimeout(rt,t),A?q(v):d}function et(v){var G=v-_,nt=v-b,Vt=t-G;return E?ui(Vt,f-nt):Vt}function B(v){var G=v-_,nt=v-b;return _===void 0||G>=t||G<0||E&&nt>=f}function rt(){var v=Kr();if(B(v))return K(v);h=setTimeout(rt,et(v))}function K(v){return h=void 0,x&&a?q(v):(a=c=void 0,d)}function J(){h!==void 0&&clearTimeout(h),b=0,a=_=c=h=void 0}function Lt(){return h===void 0?d:K(Kr())}function ut(){var v=Kr(),G=B(v);if(a=arguments,c=this,_=v,G){if(h===void 0)return k(_);if(E)return h=setTimeout(rt,t),q(_)}return h===void 0&&(h=setTimeout(rt,t)),d}return ut.cancel=J,ut.flush=Lt,ut}function li(e,t,r){var a=!0,c=!0;if(typeof e!="function")throw new TypeError(En);return Ke(r)&&(a="leading"in r?!!r.leading:a,c="trailing"in r?!!r.trailing:c),fi(e,t,{leading:a,maxWait:t,trailing:c})}function Ke(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function hi(e){return!!e&&typeof e=="object"}function di(e){return typeof e=="symbol"||hi(e)&&oi.call(e)==Xn}function hn(e){if(typeof e=="number")return e;if(di(e))return ln;if(Ke(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ke(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Qn,"");var r=ti.test(e);return r||ei.test(e)?ri(e.slice(2),r?2:8):kn.test(e)?ln:+e}var gi=li;const Ja=ke(gi);var pi=200,tn="__lodash_hash_undefined__",_i=1/0,yi="[object Function]",mi="[object GeneratorFunction]",bi=/[\\^$.*+?()[\]{}|]/g,wi=/^\[object .+?Constructor\]$/,Ei=typeof W=="object"&&W&&W.Object===Object&&W,vi=typeof self=="object"&&self&&self.Object===Object&&self,en=Ei||vi||Function("return this")();function Ti(e,t){var r=e?e.length:0;return!!r&&Si(e,t,0)>-1}function Ai(e,t,r,a){for(var c=e.length,f=r+-1;++f<c;)if(t(e[f],f,e))return f;return-1}function Si(e,t,r){if(t!==t)return Ai(e,Ci,r);for(var a=r-1,c=e.length;++a<c;)if(e[a]===t)return a;return-1}function Ci(e){return e!==e}function xi(e,t){return e.has(t)}function Oi(e,t){return e==null?void 0:e[t]}function Ri(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function vn(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var Ii=Array.prototype,Pi=Function.prototype,Tn=Object.prototype,Jr=en["__core-js_shared__"],dn=function(){var e=/[^.]+$/.exec(Jr&&Jr.keys&&Jr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),An=Pi.toString,rn=Tn.hasOwnProperty,Li=Tn.toString,Di=RegExp("^"+An.call(rn).replace(bi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ji=Ii.splice,Ui=nn(en,"Map"),Zr=nn(en,"Set"),we=nn(Object,"create");function Yt(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Mi(){this.__data__=we?we(null):{}}function $i(e){return this.has(e)&&delete this.__data__[e]}function Ni(e){var t=this.__data__;if(we){var r=t[e];return r===tn?void 0:r}return rn.call(t,e)?t[e]:void 0}function Bi(e){var t=this.__data__;return we?t[e]!==void 0:rn.call(t,e)}function Gi(e,t){var r=this.__data__;return r[e]=we&&t===void 0?tn:t,this}Yt.prototype.clear=Mi;Yt.prototype.delete=$i;Yt.prototype.get=Ni;Yt.prototype.has=Bi;Yt.prototype.set=Gi;function re(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Fi(){this.__data__=[]}function zi(e){var t=this.__data__,r=tr(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():ji.call(t,r,1),!0}function Hi(e){var t=this.__data__,r=tr(t,e);return r<0?void 0:t[r][1]}function Wi(e){return tr(this.__data__,e)>-1}function qi(e,t){var r=this.__data__,a=tr(r,e);return a<0?r.push([e,t]):r[a][1]=t,this}re.prototype.clear=Fi;re.prototype.delete=zi;re.prototype.get=Hi;re.prototype.has=Wi;re.prototype.set=qi;function ne(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Yi(){this.__data__={hash:new Yt,map:new(Ui||re),string:new Yt}}function Vi(e){return er(this,e).delete(e)}function Ki(e){return er(this,e).get(e)}function Ji(e){return er(this,e).has(e)}function Zi(e,t){return er(this,e).set(e,t),this}ne.prototype.clear=Yi;ne.prototype.delete=Vi;ne.prototype.get=Ki;ne.prototype.has=Ji;ne.prototype.set=Zi;function Je(e){var t=-1,r=e?e.length:0;for(this.__data__=new ne;++t<r;)this.add(e[t])}function Xi(e){return this.__data__.set(e,tn),this}function Qi(e){return this.__data__.has(e)}Je.prototype.add=Je.prototype.push=Xi;Je.prototype.has=Qi;function tr(e,t){for(var r=e.length;r--;)if(sa(e[r][0],t))return r;return-1}function ki(e){if(!Sn(e)||na(e))return!1;var t=oa(e)||Ri(e)?Di:wi;return t.test(ia(e))}function ta(e,t,r){var a=-1,c=Ti,f=e.length,d=!0,h=[],_=h;if(f>=pi){var b=ea(e);if(b)return vn(b);d=!1,c=xi,_=new Je}else _=h;t:for(;++a<f;){var A=e[a],E=A;if(A=A!==0?A:0,d&&E===E){for(var x=_.length;x--;)if(_[x]===E)continue t;h.push(A)}else c(_,E,r)||(_!==h&&_.push(E),h.push(A))}return h}var ea=Zr&&1/vn(new Zr([,-0]))[1]==_i?function(e){return new Zr(e)}:ca;function er(e,t){var r=e.__data__;return ra(t)?r[typeof t=="string"?"string":"hash"]:r.map}function nn(e,t){var r=Oi(e,t);return ki(r)?r:void 0}function ra(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function na(e){return!!dn&&dn in e}function ia(e){if(e!=null){try{return An.call(e)}catch{}try{return e+""}catch{}}return""}function aa(e){return e&&e.length?ta(e):[]}function sa(e,t){return e===t||e!==e&&t!==t}function oa(e){var t=Sn(e)?Li.call(e):"";return t==yi||t==mi}function Sn(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ca(){}var ua=aa;const Za=ke(ua);function Cn(e){const t=(...r)=>{try{return e(...r)}catch(a){throw a instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(a,t),a}};return t}const Xa=()=>{},Qa={ok(e){return{ok:!0,value:e}},err(e){return{ok:!1,error:e}}};function ka(e,t){const r=t&&e&&typeof e=="object"&&t in e?e[t]:e;throw new Error(`Unknown switch case ${r}`)}const fa=Cn((e,t)=>{if(!e)throw new Error(t||"Assertion Error")}),ts=Cn((e,t)=>{if(e==null)throw new Error(t??"value must be defined");return e});function la(){let e,t;const r=new Promise((a,c)=>{e=a,t=c});return Object.assign(r,{resolve:e,reject:t})}function es(e){return new Promise(t=>setTimeout(t,e))}async function rs(e,t){return window.fetch(e,{referrerPolicy:"strict-origin-when-cross-origin",...t})}const ha=(e,t)=>{const r=new window.Image(e,t);return r.referrerPolicy="strict-origin-when-cross-origin",r};/*!
 * MIT License: https://github.com/vHeemstra/is-apng/blob/main/license
 * Copyright (c) Philip van Heemstra
 */function da(e){const t=new Uint8Array(e);if(!t||!(typeof Buffer<"u"&&Buffer.isBuffer(t)||t instanceof Uint8Array)||t.length<16||!(t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&t[4]===13&&t[5]===10&&t[6]===26&&t[7]===10))return!1;function a(f,d,h,_,b=1024){if(!d)return-1;d=new RegExp(d,"g");const A=d.source.length,E=new TextDecoder,x=f.length;if(typeof _>"u"&&(_=x),h>=x||_<=0||h>=_)return-1;f=f.subarray(h,_);let q=-1,k=0,et=0,B="";t:for(;k<f.length;){const rt=k+b,K=f.subarray(k,rt),J=E.decode(K,{stream:!0}),Lt=B+J;let ut,v=-1;for(;(ut=d.exec(Lt))!==null;){v=ut.index-B.length,q=et+v;break t}k=rt,et+=J.length;const G=v>-1?v+A:J.length-A;B=J.slice(G)}return q>=0&&(q+=h>=0?h:x+h),q}const c=a(t,"IDAT",12);return c>=12?a(t,"acTL",8,c)>=8:!1}const ga=e=>new Uint8Array(e)[3]===44;/*!
 * MIT License
 * Modified code originally from <https://github.com/qzb/is-animated>
 * Copyright (c) 2016 Józef Sokołowski <j.k.sokolowski@gmail.com>
 */function gn(e,t){let r=0;for(;e[t+r];)r+=e[t+r]+1;return r+1}function pa(e){return new TextDecoder("ascii").decode(e.slice(0,3))==="GIF"}function _a(e){const t=new Uint8Array(e);let r,a,c=0,f=0;if(!pa(e))return!1;for(r=t[10]&128,a=t[10]&7,c+=6,c+=7,c+=r?3*Math.pow(2,a+1):0;f<2&&c<t.length;)switch(t[c]){case 44:f+=1,r=t[c+9]&128,a=t[c+9]&7,c+=10,c+=r?3*Math.pow(2,a+1):0,c+=gn(t,c+1)+1;break;case 33:c+=2,c+=gn(t,c);break;case 59:c=t.length;break;default:c=t.length;break}return f>1}/*!
 * MIT License: https://github.com/alexgorbatchev/crc/blob/master/LICENSE
 * Copyright: 2014 Alex Gorbatchev
 * Code: crc32, https://github.com/alexgorbatchev/crc/blob/master/src/calculators/crc32.ts
 */let Xr=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(Xr=new Int32Array(Xr));const ya=(e,t)=>{let r=~~t^-1;for(let a=0;a<e.length;a++)r=Xr[(r^e[a])&255]^r>>>8;return r^-1},pn=4,_n=4;class Pt{static isPng(t,r){return t.getUint8(r+0)===137&&t.getUint8(r+1)===80&&t.getUint8(r+2)===78&&t.getUint8(r+3)===71&&t.getUint8(r+4)===13&&t.getUint8(r+5)===10&&t.getUint8(r+6)===26&&t.getUint8(r+7)===10}static getChunkType(t,r){return[String.fromCharCode(t.getUint8(r)),String.fromCharCode(t.getUint8(r+1)),String.fromCharCode(t.getUint8(r+2)),String.fromCharCode(t.getUint8(r+3))].join("")}static readChunks(t,r=0){const a={};if(!Pt.isPng(t,r))throw new Error("Not a PNG");for(r+=8;r<=t.buffer.byteLength;){const c=r,f=t.getInt32(r);r+=4;const d=Pt.getChunkType(t,r);if(d==="IDAT"&&a[d]){r+=f+pn+_n;continue}if(d==="IEND")break;a[d]={start:c,dataOffset:r+4,size:f},r+=f+pn+_n}return a}static parsePhys(t,r){return{ppux:t.getUint32(r),ppuy:t.getUint32(r+4),unit:t.getUint8(r+4)}}static findChunk(t,r){return Pt.readChunks(t)[r]}static setPhysChunk(t,r=1,a){let c=46,f=0;const d=Pt.findChunk(t,"pHYs");d&&(c=d.start,f=d.size);const h=Pt.findChunk(t,"IDAT");h&&(c=h.start,f=0);const _=new ArrayBuffer(21),b=new DataView(_);b.setUint32(0,9),b.setUint8(4,112),b.setUint8(5,72),b.setUint8(6,89),b.setUint8(7,115);const A=2835.5;b.setInt32(8,A*r),b.setInt32(12,A*r),b.setInt8(16,1);const E=new Uint8Array(_.slice(4,17));b.setInt32(17,ya(E));const x=t.buffer.slice(0,c),q=t.buffer.slice(c+f);return new Blob([x,_,q],a)}}/*!
 * MIT License: https://github.com/sindresorhus/is-webp/blob/main/license
 * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)
 */function ma(e){return!e||e.length<12?!1:e[8]===87&&e[9]===69&&e[10]===66&&e[11]===80}function ba(e){const t=new Uint8Array(e);return!ma(t)||!t||t.length<21?!1:(t[20]>>1&1)===1}const xn=Object.freeze(["image/svg+xml"]),On=Object.freeze(["image/jpeg","image/png","image/webp"]),Rn=Object.freeze(["image/gif","image/apng","image/avif"]),In=Object.freeze([...On,...xn,...Rn]),wa=Object.freeze(["video/mp4","video/webm","video/quicktime"]),Ea=Object.freeze([...In,...wa]);Ea.join(",");class me{static loadVideo(t){return new Promise((r,a)=>{const c=document.createElement("video");c.onloadeddata=()=>r(c),c.onerror=f=>{console.error(f),a(new Error("Could not load video"))},c.crossOrigin="anonymous",c.src=t})}static async getVideoFrameAsDataUrl(t,r=0){const a=la();let c=!1;const f=()=>{if(!c)if(t.readyState>=t.HAVE_METADATA)c=!0,t.currentTime=r;else return;if(t.readyState>=t.HAVE_CURRENT_DATA){const h=document.createElement("canvas");h.width=t.videoWidth,h.height=t.videoHeight;const _=h.getContext("2d");if(!_)throw new Error("Could not get 2d context");_.drawImage(t,0,0),a.resolve(h.toDataURL())}},d=h=>{console.error(h),a.reject(new Error("Could not get video frame"))};t.addEventListener("loadedmetadata",f),t.addEventListener("loadeddata",f),t.addEventListener("canplay",f),t.addEventListener("seeked",f),t.addEventListener("error",d),t.addEventListener("stalled",d),f();try{return await a}finally{t.removeEventListener("loadedmetadata",f),t.removeEventListener("loadeddata",f),t.removeEventListener("canplay",f),t.removeEventListener("seeked",f),t.removeEventListener("error",d),t.removeEventListener("stalled",d)}}static getImageAndDimensions(t){return new Promise((r,a)=>{const c=ha();c.onload=()=>{let f;c.naturalWidth?f={w:c.naturalWidth,h:c.naturalHeight}:(document.body.appendChild(c),f={w:c.clientWidth,h:c.clientHeight},document.body.removeChild(c)),r({...f,image:c})},c.onerror=f=>{console.error(f),a(new Error("Could not load image"))},c.crossOrigin="anonymous",c.referrerPolicy="strict-origin-when-cross-origin",c.style.visibility="hidden",c.style.position="absolute",c.style.opacity="0",c.style.zIndex="-9999",c.src=t})}static async getVideoSize(t){return me.usingObjectURL(t,async r=>{const a=await me.loadVideo(r);return{w:a.videoWidth,h:a.videoHeight}})}static async getImageSize(t){const{w:r,h:a}=await me.usingObjectURL(t,me.getImageAndDimensions);try{if(t.type==="image/png"){const c=new DataView(await t.arrayBuffer());if(Pt.isPng(c,0)){const f=Pt.findChunk(c,"pHYs");if(f){const d=Pt.parsePhys(c,f.dataOffset);if(d.unit===0&&d.ppux===d.ppuy){const _=Math.max(d.ppux/2834.645669291339,1);return{w:Math.round(r/_),h:Math.round(a/_)}}}}}}catch(c){return console.error(c),{w:r,h:a}}return{w:r,h:a}}static async isAnimated(t){return t.type==="image/gif"?_a(await t.arrayBuffer()):t.type==="image/avif"?ga(await t.arrayBuffer()):t.type==="image/webp"?ba(await t.arrayBuffer()):t.type==="image/apng"?da(await t.arrayBuffer()):!1}static isAnimatedImageType(t){return Rn.includes(t||"")}static isStaticImageType(t){return On.includes(t||"")}static isVectorImageType(t){return xn.includes(t||"")}static isImageType(t){return In.includes(t||"")}static async usingObjectURL(t,r){const a=URL.createObjectURL(t);try{return await r(a)}finally{URL.revokeObjectURL(a)}}}function ns(e){return e!==void 0}function va(){return typeof globalThis<"u"&&globalThis.structuredClone?[globalThis.structuredClone,!0]:typeof global<"u"&&global.structuredClone?[global.structuredClone,!0]:typeof window<"u"&&window.structuredClone?[window.structuredClone,!0]:[e=>e&&JSON.parse(JSON.stringify(e)),!1]}const Pn=va(),Ta=Pn[0];Pn[1];const is=Object.getPrototypeOf(Ta({}));kr("@tldraw/utils","3.15.0","esm");function Ln(e){return e&&typeof e=="object"&&"parents"in e}function Dn(e){for(let t=0,r=e.parents.length;t<r;t++)if(e.parents[t].__unsafe__getWithoutCapture(!0),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}function Ze(e,t){if(e.children.remove(t)&&e.children.isEmpty&&Ln(e))for(let r=0,a=e.parents.length;r<a;r++)Ze(e.parents[r],e)}function an(e,t){if(e.children.add(t)&&Ln(e))for(let r=0,a=e.parents.length;r<a;r++)an(e.parents[r],e)}function jn(e,t){return e===t||Object.is(e,t)||!!(e&&t&&typeof e.equals=="function"&&e.equals(t))}function Bt(e,t){const r=Symbol.for(`com.tldraw.state/${e}`),a=globalThis;return a[r]??(a[r]=t()),a[r]}const Un=Bt("empty_array",()=>Object.freeze([])),yn=8;class Xe{constructor(){w(this,"arraySize",0);w(this,"array",Array(yn));w(this,"set",null)}get isEmpty(){if(this.array)return this.arraySize===0;if(this.set)return this.set.size===0;throw new Error("no set or array")}add(t){if(this.array)return this.array.indexOf(t)!==-1?!1:this.arraySize<yn?(this.array[this.arraySize]=t,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(t),!0);if(this.set)return this.set.has(t)?!1:(this.set.add(t),!0);throw new Error("no set or array")}remove(t){if(this.array){const r=this.array.indexOf(t);return r===-1?!1:(this.array[r]=void 0,this.arraySize--,r!==this.arraySize&&(this.array[r]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return this.set.has(t)?(this.set.delete(t),!0):!1;throw new Error("no set or array")}visit(t){if(this.array){for(let r=0;r<this.arraySize;r++){const a=this.array[r];typeof a<"u"&&t(a)}return}if(this.set){this.set.forEach(t);return}throw new Error("no set or array")}*[Symbol.iterator](){if(this.array)for(let t=0;t<this.arraySize;t++){const r=this.array[t];typeof r<"u"&&(yield r)}else if(this.set)yield*this.set;else throw new Error("no set or array")}has(t){return this.array?this.array.indexOf(t)!==-1:this.set.has(t)}clear(){this.set?this.set.clear():(this.arraySize=0,this.array=[])}size(){return this.set?this.set.size:this.arraySize}}const qt=Symbol.for("com.tldraw.state/RESET_VALUE");class Mn{constructor(t){w(this,"index",0);w(this,"buffer");this.capacity=t,this.buffer=new Array(t)}pushEntry(t,r,a){if(a!==void 0){if(a===qt){this.clear();return}this.buffer[this.index]=[t,r,a],this.index=(this.index+1)%this.capacity}}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(t){const{index:r,capacity:a,buffer:c}=this;for(let f=0;f<a;f++){const d=(r-1+a-f)%a,h=c[d];if(!h)return qt;const[_,b]=h;if(f===0&&t>=b)return[];if(_<=t&&t<b){const A=f+1,E=new Array(A);for(let x=0;x<A;x++)E[x]=c[(d+x)%a][2];return E}}return qt}}const Nt=-1;class Aa{constructor(t,r,a){w(this,"_isActivelyListening",!1);w(this,"lastTraversedEpoch",Nt);w(this,"lastReactedEpoch",Nt);w(this,"_scheduleCount",0);w(this,"__debug_ancestor_epochs__",null);w(this,"parentSet",new Xe);w(this,"parentEpochs",[]);w(this,"parents",[]);w(this,"_scheduleEffect");w(this,"maybeExecute",()=>{this._isActivelyListening&&this.execute()});this.name=t,this.runEffect=r,this._scheduleEffect=a==null?void 0:a.scheduleEffect}get isActivelyListening(){return this._isActivelyListening}get scheduleCount(){return this._scheduleCount}maybeScheduleEffect(){if(this._isActivelyListening&&this.lastReactedEpoch!==Q()){if(this.parents.length&&!Dn(this)){this.lastReactedEpoch=Q();return}this.scheduleEffect()}}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}attach(){this._isActivelyListening=!0;for(let t=0,r=this.parents.length;t<r;t++)an(this.parents[t],this)}detach(){this._isActivelyListening=!1;for(let t=0,r=this.parents.length;t<r;t++)Ze(this.parents[t],this)}execute(){try{Gn(this);const t=Q(),r=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=t,r}finally{Fn()}}}const rr=Bt("EffectScheduler",()=>Aa);function as(e,t,r){const a=new rr(e,t,r);return a.attach(),a.scheduleEffect(),()=>{a.detach()}}function ss(e,t,r){const a=new rr(e,t,r);return{scheduler:a,start:c=>{const f=(c==null?void 0:c.force)??!1;a.attach(),f?a.scheduleEffect():a.maybeScheduleEffect()},stop:()=>{a.detach()}}}class Sa{constructor(t,r){w(this,"asyncProcessCount",0);w(this,"initialAtomValues",new Map);this.parent=t,this.isSync=r}get isRoot(){return this.parent===null}commit(){if(T.globalIsReacting)for(const t of this.initialAtomValues.keys())Nn(t);else this.isRoot?$n(this.initialAtomValues.keys()):this.initialAtomValues.forEach((t,r)=>{this.parent.initialAtomValues.has(r)||this.parent.initialAtomValues.set(r,t)})}abort(){T.globalEpoch++,this.initialAtomValues.forEach((t,r)=>{var a;r.set(t),(a=r.historyBuffer)==null||a.clear()}),this.commit()}}const T=Bt("transactions",()=>({globalEpoch:Nt+1,globalIsReacting:!1,currentTransaction:null,cleanupReactors:null,reactionEpoch:Nt+1}));function Ca(){return T.reactionEpoch}function Q(){return T.globalEpoch}function xa(){return T.globalIsReacting}function sn(e,t){t.lastTraversedEpoch!==T.globalEpoch&&(t.lastTraversedEpoch=T.globalEpoch,t instanceof rr?e.add(t):t.children.visit(r=>sn(e,r)))}function $n(e){var r;if(T.globalIsReacting)throw new Error("flushChanges cannot be called during a reaction");const t=T.currentTransaction;try{T.currentTransaction=null,T.globalIsReacting=!0,T.reactionEpoch=T.globalEpoch;const a=new Set;for(const f of e)f.children.visit(d=>sn(a,d));for(const f of a)f.maybeScheduleEffect();let c=0;for(;(r=T.cleanupReactors)!=null&&r.size;){if(c++>1e3)throw new Error("Reaction update depth limit exceeded");const f=T.cleanupReactors;T.cleanupReactors=null;for(const d of f)d.maybeScheduleEffect()}}finally{T.cleanupReactors=null,T.globalIsReacting=!1,T.currentTransaction=t}}function Oa(e,t){T.currentTransaction?T.currentTransaction.initialAtomValues.has(e)||T.currentTransaction.initialAtomValues.set(e,t):T.globalIsReacting?Nn(e):$n([e])}function Nn(e){const t=T.cleanupReactors??(T.cleanupReactors=new Set);e.children.visit(r=>sn(t,r))}function Ra(){T.globalEpoch++}function Ia(e){const t=new Sa(T.currentTransaction,!0);T.currentTransaction=t;try{let r,a=!1;try{r=e(()=>a=!0)}catch(c){throw t.abort(),c}if(T.currentTransaction!==t)throw new Error("Transaction boundaries overlap");return a?t.abort():t.commit(),r}finally{T.currentTransaction=t.parent}}function os(e){return T.currentTransaction?e():Ia(e)}let mn=!1;function Pa(){mn||(mn=!0,console.warn(`Using \`@computed\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \`@computed\` as a decorator for methods.

// Before
@computed
get foo() {
	return 'foo'
}

// After
@computed
getFoo() {
	return 'foo'
}
`))}const be=Symbol.for("com.tldraw.state/UNINITIALIZED");function cs(e){return e===be}const Qr=Bt("WithDiff",()=>class{constructor(t,r){this.value=t,this.diff=r}});function fs(e,t){return new Qr(e,t)}class La{constructor(t,r,a){w(this,"lastChangedEpoch",Nt);w(this,"lastTraversedEpoch",Nt);w(this,"__debug_ancestor_epochs__",null);w(this,"lastCheckedEpoch",Nt);w(this,"parentSet",new Xe);w(this,"parents",[]);w(this,"parentEpochs",[]);w(this,"children",new Xe);w(this,"historyBuffer");w(this,"state",be);w(this,"error",null);w(this,"computeDiff");w(this,"isEqual");this.name=t,this.derive=r,a!=null&&a.historyLength&&(this.historyBuffer=new Mn(a.historyLength)),this.computeDiff=a==null?void 0:a.computeDiff,this.isEqual=(a==null?void 0:a.isEqual)??jn}get isActivelyListening(){return!this.children.isEmpty}__unsafe__getWithoutCapture(t){var c;const r=this.lastChangedEpoch===Nt,a=Q();if(!r&&(this.lastCheckedEpoch===a||this.isActivelyListening&&xa()&&this.lastTraversedEpoch<Ca()||!Dn(this)))if(this.lastCheckedEpoch=a,this.error){if(t)return this.state;throw this.error.thrownValue}else return this.state;try{Gn(this);const f=this.derive(this.state,this.lastCheckedEpoch),d=f instanceof Qr?f.value:f,h=this.state===be;if(h||!this.isEqual(d,this.state)){if(this.historyBuffer&&!h){const _=f instanceof Qr?f.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,Q(),_??((c=this.computeDiff)==null?void 0:c.call(this,this.state,d,this.lastCheckedEpoch,Q()))??qt)}this.lastChangedEpoch=Q(),this.state=d}return this.error=null,this.lastCheckedEpoch=Q(),this.state}catch(f){if(this.state!==be&&(this.state=be,this.lastChangedEpoch=Q()),this.lastCheckedEpoch=Q(),this.historyBuffer&&this.historyBuffer.clear(),this.error={thrownValue:f},!t)throw f;return this.state}finally{Fn()}}get(){try{return this.__unsafe__getWithoutCapture()}finally{Qe(this)}}getDiffSince(t){var r;return this.__unsafe__getWithoutCapture(!0),Qe(this),t>=this.lastChangedEpoch?Un:((r=this.historyBuffer)==null?void 0:r.getChangesSince(t))??qt}}const Ee=Bt("Computed",()=>La);function Da(e={},t,r,a){const c=a.value,f=Symbol.for("__@tldraw/state__computed__"+r);return a.value=function(){let d=this[f];return d||(d=new Ee(r,c.bind(this),e),Object.defineProperty(this,f,{enumerable:!1,configurable:!1,writable:!1,value:d})),d.get()},a.value[Bn]=!0,a}function ja(e={},t,r,a){const c=a.get,f=Symbol.for("__@tldraw/state__computed__"+r);return a.get=function(){let d=this[f];return d||(d=new Ee(r,c.bind(this),e),Object.defineProperty(this,f,{enumerable:!1,configurable:!1,writable:!1,value:d})),d.get()},a}function Ua(e,t,r){fa(r.kind==="method","@computed can only be used on methods");const a=Symbol.for("__@tldraw/state__computed__"+String(r.name)),c=function(){let f=this[a];return f||(f=new Ee(String(r.name),t.bind(this),e),Object.defineProperty(this,a,{enumerable:!1,configurable:!1,writable:!1,value:f})),f.get()};return c[Bn]=!0,c}function bn(e={},t){if(t.length===2){const[r,a]=t;return Ua(e,r,a)}else{const[r,a,c]=t;return c.get?(Pa(),ja(e,r,a,c)):Da(e,r,a,c)}}const Bn="@@__isComputedMethod__@@";function ls(){if(arguments.length===1){const e=arguments[0];return(...t)=>bn(e,t)}else return typeof arguments[0]=="string"?new Ee(arguments[0],arguments[1],arguments[2]):bn(void 0,arguments)}function on(e){return e&&e instanceof Ee}class Ma{constructor(t,r){w(this,"offset",0);w(this,"maybeRemoved");this.below=t,this.child=r}}const I=Bt("capture",()=>({stack:null}));function hs(e){const t=I.stack;I.stack=null;try{return e()}finally{I.stack=t}}function Gn(e){if(I.stack=new Ma(I.stack,e),e.__debug_ancestor_epochs__){const t=e.__debug_ancestor_epochs__;e.__debug_ancestor_epochs__=null;for(const r of e.parents)r.__unsafe__getWithoutCapture(!0);$a(e,t)}e.parentSet.clear()}function Fn(){const e=I.stack;if(I.stack=e.below,e.offset<e.child.parents.length){for(let t=e.offset;t<e.child.parents.length;t++){const r=e.child.parents[t];e.child.parentSet.has(r)||Ze(r,e.child)}e.child.parents.length=e.offset,e.child.parentEpochs.length=e.offset}if(e.maybeRemoved)for(let t=0;t<e.maybeRemoved.length;t++){const r=e.maybeRemoved[t];e.child.parentSet.has(r)||Ze(r,e.child)}e.child.__debug_ancestor_epochs__&&zn(e.child,e.child.__debug_ancestor_epochs__)}function Qe(e){if(I.stack){if(I.stack.child.parentSet.has(e))return;if(I.stack.child.parentSet.add(e),I.stack.child.isActivelyListening&&an(e,I.stack.child),I.stack.offset<I.stack.child.parents.length){const r=I.stack.child.parents[I.stack.offset];r!==e&&(I.stack.maybeRemoved?I.stack.maybeRemoved.push(r):I.stack.maybeRemoved=[r])}I.stack.child.parents[I.stack.offset]=e,I.stack.child.parentEpochs[I.stack.offset]=e.lastChangedEpoch,I.stack.offset++}}function zn(e,t){for(let r=0;r<e.parents.length;r++){const a=e.parents[r],c=e.parentEpochs[r];t.set(a,c),on(a)&&zn(a,t)}return t}function Hn(e,t){const r={};for(let a=0;a<e.parents.length;a++){const c=e.parents[a];if(!t.has(c))continue;const f=t.get(c);c.lastChangedEpoch!==f&&(on(c)?r[c.name]=Hn(c,t):r[c.name]=null)}return r}function $a(e,t){const r=Hn(e,t);if(Object.keys(r).length===0){console.log(`Effect(${e.name}) was executed manually.`);return}let a=on(e)?`Computed(${e.name}) is recomputing because:`:`Effect(${e.name}) is executing because:`;function c(f,d){const h=`
`+" ".repeat(d)+"↳ ";for(const[_,b]of Object.entries(f))b?(a+=`${h}Computed(${_}) changed`,c(b,d+2)):a+=`${h}Atom(${_}) changed`}c(r,1),console.log(a)}class Na{constructor(t,r,a){w(this,"isEqual");w(this,"computeDiff");w(this,"lastChangedEpoch",Q());w(this,"children",new Xe);w(this,"historyBuffer");this.name=t,this.current=r,this.isEqual=(a==null?void 0:a.isEqual)??null,a&&(a.historyLength&&(this.historyBuffer=new Mn(a.historyLength)),this.computeDiff=a.computeDiff)}__unsafe__getWithoutCapture(t){return this.current}get(){return Qe(this),this.current}set(t,r){var c,f;if(((c=this.isEqual)==null?void 0:c.call(this,this.current,t))??jn(this.current,t))return this.current;Ra(),this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,Q(),r??((f=this.computeDiff)==null?void 0:f.call(this,this.current,t,this.lastChangedEpoch,Q()))??qt),this.lastChangedEpoch=Q();const a=this.current;return this.current=t,Oa(this,a),t}update(t){return this.set(t(this.current))}getDiffSince(t){var r;return Qe(this),t>=this.lastChangedEpoch?Un:((r=this.historyBuffer)==null?void 0:r.getChangesSince(t))??qt}}const Ba=Bt("Atom",()=>Na);function ds(e,t,r){return new Ba(e,t,r)}const Wn=1,Ga=Bt("apiVersion",()=>Wn);if(Ga!==Wn)throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");kr("@tldraw/state","3.15.0","esm");function Fa(e,t,r=[]){const a=qe.useRef(t);a.current=t;const[c,f,d]=qe.useMemo(()=>{let h=null;const _=E=>(h=E,()=>{h=null}),b=new rr(`useStateTracking(${e})`,()=>{var E;return(E=a.current)==null?void 0:E.call(a)},{scheduleEffect(){h==null||h()}});return[b,_,()=>b.scheduleCount]},[e,...r]);return qe.useSyncExternalStore(f,d,d),qe.useEffect(()=>(c.attach(),c.maybeScheduleEffect(),()=>{c.detach()}),[c]),c.execute()}const wn={apply(e,t,r){return Fa(e.displayName??e.name??"tracked(???)",()=>e.apply(t,r))}},za=Symbol.for("react.memo"),Ha=Symbol.for("react.forward_ref");function gs(e){let t=null;const r=e.$$typeof;return r===za&&(e=e.type,t=e.compare),r===Ha?qr.memo(qr.forwardRef(new Proxy(e.render,wn))):qr.memo(new Proxy(e,wn),t)}kr("@tldraw/state-react","3.15.0","esm");export{rr as E,ha as I,me as M,Pt as P,qt as R,is as S,be as U,Za as _,ds as a,os as b,ls as c,fa as d,Un as e,rs as f,ka as g,kr as h,cs as i,ts as j,Va as k,es as l,hs as m,Xa as n,Qa as o,la as p,Ja as q,as as r,Ta as s,gs as t,Fa as u,ns as v,fs as w,Ka as x,ss as y};
