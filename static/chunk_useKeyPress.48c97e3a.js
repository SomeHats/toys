import{r}from"./chunk_index.9ef61b8f.js";import{u}from"./chunk_client.eaa7f0af.js";import{a as c,I as i}from"./chunk_assert.0ed02936.js";const o=Symbol();function y(n){return i?n.metaKey:n.ctrlKey}function a(n,t){var s,l,d;const e=typeof t=="string"?{key:t}:t;return n.key.toLowerCase()===e.key.toLowerCase()&&(e.command===o||((s=e.command)!=null?s:!1)===y(n))&&(e.shift===o||((l=e.shift)!=null?l:!1)===n.shiftKey)&&(e.alt===o||((d=e.alt)!=null?d:!1)===n.altKey)}function k(n,t){return a(n,t)&&n.repeat===!1}function f(n){const t=r.exports.useContext(h),e=u(n);r.exports.useEffect(()=>t.onKeyDown(e),[e,t])}function p(n){const t=r.exports.useContext(h),e=u(n);r.exports.useEffect(()=>t.onKeyUp(e),[e,t])}function D(n){const[t,e]=r.exports.useState(!1);return f(s=>(console.log(s.key),a(s,n)?(e(!0),!0):!1)),p(s=>a(s,n)?(e(!1),!0):!1),t}class m{constructor(){this.handlers=new Set,this.handleKeyDown=t=>{for(const{type:e,callback:s}of this.handlers)if(e==="down"&&s(t))return},this.handleKeyUp=t=>{for(const{type:e,callback:s}of this.handlers)if(e==="up"&&s(t))return},document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}destroy(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}onKeyDown(t){const e={type:"down",callback:t};return this.handlers.add(e),()=>{c(this.handlers.delete(e),"handler has already been deleted")}}onKeyUp(t){const e={type:"up",callback:t};return this.handlers.add(e),()=>{c(this.handlers.delete(e),"handler has already been deleted")}}}const h=r.exports.createContext(new m);export{o as A,k as a,a as m,D as u};
