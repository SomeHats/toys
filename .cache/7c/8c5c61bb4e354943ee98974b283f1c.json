{"id":"IAYE","dependencies":[{"name":"/home/runner/work/toys/toys/tsconfig.json","includedInParent":true,"mtime":1594853935979},{"name":"/home/runner/work/toys/toys/package.json","includedInParent":true,"mtime":1594853935975},{"name":"../lib/assert","loc":{"line":4,"column":23},"parent":"/home/runner/work/toys/toys/src/network/PathFinder.ts","resolved":"/home/runner/work/toys/toys/src/lib/assert.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"../lib/assert\"),t={getNextRoad:function(r,o){var n=new Set(r.getAllReachableNodes());n.add(r),e.assert(n.has(o),\"destination must be reachable\");var a=new Map,s=new Map;for(a.set(r,0);n.size;){var u=t._nodeWithShortestDistance(n,a),i=u.node,d=u.cost;if(n.delete(i),i===o)return t._nextRoadFromRoute(s,r,o);t._updateNeighbours(i,a,d,s)}throw new Error(\"unreachable i hope\")},_nodeWithShortestDistance:function(t,r){var o=1/0,n=null;return t.forEach(function(e){var t=r.get(e);null!=t&&t<=o&&(o=t,n=e)}),e.assert(n,\"node must be found\"),{node:n,cost:o}},_updateNeighbours:function(e,t,r,o){e.outgoingConnections.forEach(function(e){var n=e.to,a=t.get(n),s=r+e.expectedTimeFromStartToEnd;(null==a||s<=a)&&(t.set(n,s),o.set(n,e))})},_nextRoadFromRoute:function(t,r,o){for(var n=o;t.has(n);){var a=t.get(n);if(e.assert(a,\"road must exist\"),(n=a.from)===r)return a}throw new Error(\"prev road must be found\")}};exports.default=t;"},"sourceMaps":{"js":{"mappings":[{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":0}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":13}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":20}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":35}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":43}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":56}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":57}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":64}},{"source":"network/PathFinder.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":68}},{"source":"network/PathFinder.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":72}},{"source":"network/PathFinder.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":74}},{"source":"network/PathFinder.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":82}},{"source":"network/PathFinder.ts","name":null,"original":{"line":6,"column":6},"generated":{"line":1,"column":99}},{"source":"network/PathFinder.ts","name":null,"original":{"line":6,"column":19},"generated":{"line":1,"column":101}},{"source":"network/PathFinder.ts","name":null,"original":{"line":7,"column":2},"generated":{"line":1,"column":102}},{"source":"network/PathFinder.ts","name":null,"original":{"line":7,"column":2},"generated":{"line":1,"column":114}},{"source":"network/PathFinder.ts","name":null,"original":{"line":7,"column":14},"generated":{"line":1,"column":123}},{"source":"network/PathFinder.ts","name":null,"original":{"line":7,"column":40},"generated":{"line":1,"column":125}},{"source":"network/PathFinder.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":128}},{"source":"network/PathFinder.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":132}},{"source":"network/PathFinder.ts","name":null,"original":{"line":8,"column":27},"generated":{"line":1,"column":134}},{"source":"network/PathFinder.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":1,"column":138}},{"source":"network/PathFinder.ts","name":null,"original":{"line":8,"column":35},"generated":{"line":1,"column":142}},{"source":"network/PathFinder.ts","name":null,"original":{"line":8,"column":47},"generated":{"line":1,"column":144}},{"source":"network/PathFinder.ts","name":null,"original":{"line":9,"column":4},"generated":{"line":1,"column":168}},{"source":"network/PathFinder.ts","name":null,"original":{"line":9,"column":19},"generated":{"line":1,"column":170}},{"source":"network/PathFinder.ts","name":null,"original":{"line":9,"column":23},"generated":{"line":1,"column":174}},{"source":"network/PathFinder.ts","name":null,"original":{"line":10,"column":4},"generated":{"line":1,"column":177}},{"source":"network/PathFinder.ts","name":null,"original":{"line":10,"column":4},"generated":{"line":1,"column":179}},{"source":"network/PathFinder.ts","name":null,"original":{"line":11,"column":6},"generated":{"line":1,"column":186}},{"source":"network/PathFinder.ts","name":null,"original":{"line":11,"column":21},"generated":{"line":1,"column":188}},{"source":"network/PathFinder.ts","name":null,"original":{"line":11,"column":25},"generated":{"line":1,"column":192}},{"source":"network/PathFinder.ts","name":null,"original":{"line":12,"column":6},"generated":{"line":1,"column":195}},{"source":"network/PathFinder.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":228}},{"source":"network/PathFinder.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":232}},{"source":"network/PathFinder.ts","name":null,"original":{"line":14,"column":22},"generated":{"line":1,"column":234}},{"source":"network/PathFinder.ts","name":null,"original":{"line":14,"column":26},"generated":{"line":1,"column":238}},{"source":"network/PathFinder.ts","name":null,"original":{"line":15,"column":10},"generated":{"line":1,"column":242}},{"source":"network/PathFinder.ts","name":null,"original":{"line":15,"column":22},"generated":{"line":1,"column":244}},{"source":"network/PathFinder.ts","name":null,"original":{"line":15,"column":26},"generated":{"line":1,"column":248}},{"source":"network/PathFinder.ts","name":null,"original":{"line":19,"column":11},"generated":{"line":1,"column":252}},{"source":"network/PathFinder.ts","name":null,"original":{"line":17,"column":4},"generated":{"line":1,"column":256}},{"source":"network/PathFinder.ts","name":null,"original":{"line":17,"column":14},"generated":{"line":1,"column":258}},{"source":"network/PathFinder.ts","name":null,"original":{"line":17,"column":18},"generated":{"line":1,"column":262}},{"source":"network/PathFinder.ts","name":null,"original":{"line":17,"column":31},"generated":{"line":1,"column":264}},{"source":"network/PathFinder.ts","name":null,"original":{"line":19,"column":11},"generated":{"line":1,"column":267}},{"source":"network/PathFinder.ts","name":null,"original":{"line":19,"column":26},"generated":{"line":1,"column":269}},{"source":"network/PathFinder.ts","name":null,"original":{"line":19,"column":32},"generated":{"line":1,"column":275}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":12},"generated":{"line":1,"column":276}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":12},"generated":{"line":1,"column":280}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":29},"generated":{"line":1,"column":282}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":40},"generated":{"line":1,"column":284}},{"source":"network/PathFinder.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":310}},{"source":"network/PathFinder.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":312}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":14},"generated":{"line":1,"column":315}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":1,"column":317}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":1,"column":319}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":20},"generated":{"line":1,"column":324}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":24},"generated":{"line":1,"column":326}},{"source":"network/PathFinder.ts","name":null,"original":{"line":20,"column":24},"generated":{"line":1,"column":328}},{"source":"network/PathFinder.ts","name":null,"original":{"line":26,"column":10},"generated":{"line":1,"column":333}},{"source":"network/PathFinder.ts","name":null,"original":{"line":24,"column":6},"generated":{"line":1,"column":336}},{"source":"network/PathFinder.ts","name":null,"original":{"line":24,"column":21},"generated":{"line":1,"column":338}},{"source":"network/PathFinder.ts","name":null,"original":{"line":24,"column":28},"generated":{"line":1,"column":345}},{"source":"network/PathFinder.ts","name":null,"original":{"line":26,"column":10},"generated":{"line":1,"column":348}},{"source":"network/PathFinder.ts","name":null,"original":{"line":26,"column":19},"generated":{"line":1,"column":352}},{"source":"network/PathFinder.ts","name":null,"original":{"line":27,"column":15},"generated":{"line":1,"column":354}},{"source":"network/PathFinder.ts","name":null,"original":{"line":27,"column":15},"generated":{"line":1,"column":361}},{"source":"network/PathFinder.ts","name":null,"original":{"line":27,"column":26},"generated":{"line":1,"column":363}},{"source":"network/PathFinder.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":1,"column":382}},{"source":"network/PathFinder.ts","name":null,"original":{"line":29,"column":10},"generated":{"line":1,"column":384}},{"source":"network/PathFinder.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":1,"column":386}},{"source":"network/PathFinder.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":1,"column":389}},{"source":"network/PathFinder.ts","name":null,"original":{"line":34,"column":17},"generated":{"line":1,"column":391}},{"source":"network/PathFinder.ts","name":null,"original":{"line":34,"column":35},"generated":{"line":1,"column":409}},{"source":"network/PathFinder.ts","name":null,"original":{"line":34,"column":41},"generated":{"line":1,"column":411}},{"source":"network/PathFinder.ts","name":null,"original":{"line":34,"column":52},"generated":{"line":1,"column":413}},{"source":"network/PathFinder.ts","name":null,"original":{"line":34,"column":58},"generated":{"line":1,"column":415}},{"source":"network/PathFinder.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":418}},{"source":"network/PathFinder.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":424}},{"source":"network/PathFinder.ts","name":null,"original":{"line":37,"column":14},"generated":{"line":1,"column":428}},{"source":"network/PathFinder.ts","name":null,"original":{"line":37,"column":20},"generated":{"line":1,"column":434}},{"source":"network/PathFinder.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":1,"column":457}},{"source":"network/PathFinder.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":1,"column":483}},{"source":"network/PathFinder.ts","name":null,"original":{"line":41,"column":4},"generated":{"line":1,"column":492}},{"source":"network/PathFinder.ts","name":null,"original":{"line":42,"column":4},"generated":{"line":1,"column":494}},{"source":"network/PathFinder.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":497}},{"source":"network/PathFinder.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":501}},{"source":"network/PathFinder.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":1,"column":503}},{"source":"network/PathFinder.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":1,"column":505}},{"source":"network/PathFinder.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":507}},{"source":"network/PathFinder.ts","name":null,"original":{"line":45,"column":19},"generated":{"line":1,"column":509}},{"source":"network/PathFinder.ts","name":null,"original":{"line":56,"column":11},"generated":{"line":1,"column":514}},{"source":"network/PathFinder.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":1,"column":521}},{"source":"network/PathFinder.ts","name":null,"original":{"line":47,"column":10},"generated":{"line":1,"column":523}},{"source":"network/PathFinder.ts","name":null,"original":{"line":47,"column":18},"generated":{"line":1,"column":531}},{"source":"network/PathFinder.ts","name":null,"original":{"line":47,"column":18},"generated":{"line":1,"column":540}},{"source":"network/PathFinder.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":543}},{"source":"network/PathFinder.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":547}},{"source":"network/PathFinder.ts","name":null,"original":{"line":48,"column":19},"generated":{"line":1,"column":549}},{"source":"network/PathFinder.ts","name":null,"original":{"line":48,"column":25},"generated":{"line":1,"column":551}},{"source":"network/PathFinder.ts","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":555}},{"source":"network/PathFinder.ts","name":null,"original":{"line":49,"column":18},"generated":{"line":1,"column":558}},{"source":"network/PathFinder.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":564}},{"source":"network/PathFinder.ts","name":null,"original":{"line":49,"column":26},"generated":{"line":1,"column":567}},{"source":"network/PathFinder.ts","name":null,"original":{"line":49,"column":34},"generated":{"line":1,"column":570}},{"source":"network/PathFinder.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":574}},{"source":"network/PathFinder.ts","name":null,"original":{"line":50,"column":19},"generated":{"line":1,"column":576}},{"source":"network/PathFinder.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":578}},{"source":"network/PathFinder.ts","name":null,"original":{"line":51,"column":19},"generated":{"line":1,"column":580}},{"source":"network/PathFinder.ts","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":585}},{"source":"network/PathFinder.ts","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":587}},{"source":"network/PathFinder.ts","name":null,"original":{"line":55,"column":11},"generated":{"line":1,"column":594}},{"source":"network/PathFinder.ts","name":null,"original":{"line":55,"column":21},"generated":{"line":1,"column":596}},{"source":"network/PathFinder.ts","name":null,"original":{"line":56,"column":11},"generated":{"line":1,"column":618}},{"source":"network/PathFinder.ts","name":null,"original":{"line":56,"column":13},"generated":{"line":1,"column":619}},{"source":"network/PathFinder.ts","name":null,"original":{"line":56,"column":19},"generated":{"line":1,"column":624}},{"source":"network/PathFinder.ts","name":null,"original":{"line":56,"column":29},"generated":{"line":1,"column":626}},{"source":"network/PathFinder.ts","name":null,"original":{"line":56,"column":35},"generated":{"line":1,"column":631}},{"source":"network/PathFinder.ts","name":null,"original":{"line":58,"column":2},"generated":{"line":1,"column":635}},{"source":"network/PathFinder.ts","name":null,"original":{"line":58,"column":2},"generated":{"line":1,"column":653}},{"source":"network/PathFinder.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":1,"column":662}},{"source":"network/PathFinder.ts","name":null,"original":{"line":60,"column":4},"generated":{"line":1,"column":664}},{"source":"network/PathFinder.ts","name":null,"original":{"line":61,"column":4},"generated":{"line":1,"column":666}},{"source":"network/PathFinder.ts","name":null,"original":{"line":62,"column":4},"generated":{"line":1,"column":668}},{"source":"network/PathFinder.ts","name":null,"original":{"line":64,"column":4},"generated":{"line":1,"column":671}},{"source":"network/PathFinder.ts","name":null,"original":{"line":64,"column":9},"generated":{"line":1,"column":673}},{"source":"network/PathFinder.ts","name":null,"original":{"line":64,"column":29},"generated":{"line":1,"column":693}},{"source":"network/PathFinder.ts","name":null,"original":{"line":64,"column":37},"generated":{"line":1,"column":701}},{"source":"network/PathFinder.ts","name":null,"original":{"line":64,"column":37},"generated":{"line":1,"column":710}},{"source":"network/PathFinder.ts","name":null,"original":{"line":65,"column":12},"generated":{"line":1,"column":713}},{"source":"network/PathFinder.ts","name":null,"original":{"line":65,"column":12},"generated":{"line":1,"column":717}},{"source":"network/PathFinder.ts","name":null,"original":{"line":65,"column":23},"generated":{"line":1,"column":719}},{"source":"network/PathFinder.ts","name":null,"original":{"line":65,"column":28},"generated":{"line":1,"column":721}},{"source":"network/PathFinder.ts","name":null,"original":{"line":66,"column":12},"generated":{"line":1,"column":724}},{"source":"network/PathFinder.ts","name":null,"original":{"line":66,"column":27},"generated":{"line":1,"column":726}},{"source":"network/PathFinder.ts","name":null,"original":{"line":66,"column":37},"generated":{"line":1,"column":728}},{"source":"network/PathFinder.ts","name":null,"original":{"line":66,"column":41},"generated":{"line":1,"column":732}},{"source":"network/PathFinder.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":1,"column":735}},{"source":"network/PathFinder.ts","name":null,"original":{"line":67,"column":30},"generated":{"line":1,"column":737}},{"source":"network/PathFinder.ts","name":null,"original":{"line":67,"column":37},"generated":{"line":1,"column":739}},{"source":"network/PathFinder.ts","name":null,"original":{"line":67,"column":42},"generated":{"line":1,"column":741}},{"source":"network/PathFinder.ts","name":null,"original":{"line":68,"column":26},"generated":{"line":1,"column":769}},{"source":"network/PathFinder.ts","name":null,"original":{"line":68,"column":10},"generated":{"line":1,"column":775}},{"source":"network/PathFinder.ts","name":null,"original":{"line":68,"column":34},"generated":{"line":1,"column":778}},{"source":"network/PathFinder.ts","name":null,"original":{"line":68,"column":53},"generated":{"line":1,"column":781}},{"source":"network/PathFinder.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":786}},{"source":"network/PathFinder.ts","name":null,"original":{"line":69,"column":18},"generated":{"line":1,"column":788}},{"source":"network/PathFinder.ts","name":null,"original":{"line":69,"column":22},"generated":{"line":1,"column":792}},{"source":"network/PathFinder.ts","name":null,"original":{"line":69,"column":32},"generated":{"line":1,"column":794}},{"source":"network/PathFinder.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":797}},{"source":"network/PathFinder.ts","name":null,"original":{"line":70,"column":18},"generated":{"line":1,"column":799}},{"source":"network/PathFinder.ts","name":null,"original":{"line":70,"column":22},"generated":{"line":1,"column":803}},{"source":"network/PathFinder.ts","name":null,"original":{"line":70,"column":32},"generated":{"line":1,"column":805}},{"source":"network/PathFinder.ts","name":null,"original":{"line":74,"column":2},"generated":{"line":1,"column":812}},{"source":"network/PathFinder.ts","name":null,"original":{"line":74,"column":2},"generated":{"line":1,"column":831}},{"source":"network/PathFinder.ts","name":null,"original":{"line":75,"column":4},"generated":{"line":1,"column":840}},{"source":"network/PathFinder.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":842}},{"source":"network/PathFinder.ts","name":null,"original":{"line":77,"column":4},"generated":{"line":1,"column":844}},{"source":"network/PathFinder.ts","name":null,"original":{"line":80,"column":11},"generated":{"line":1,"column":847}},{"source":"network/PathFinder.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":851}},{"source":"network/PathFinder.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":855}},{"source":"network/PathFinder.ts","name":null,"original":{"line":79,"column":15},"generated":{"line":1,"column":857}},{"source":"network/PathFinder.ts","name":null,"original":{"line":80,"column":11},"generated":{"line":1,"column":859}},{"source":"network/PathFinder.ts","name":null,"original":{"line":80,"column":21},"generated":{"line":1,"column":861}},{"source":"network/PathFinder.ts","name":null,"original":{"line":80,"column":25},"generated":{"line":1,"column":865}},{"source":"network/PathFinder.ts","name":null,"original":{"line":80,"column":32},"generated":{"line":1,"column":869}},{"source":"network/PathFinder.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":1,"column":870}},{"source":"network/PathFinder.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":1,"column":874}},{"source":"network/PathFinder.ts","name":null,"original":{"line":81,"column":19},"generated":{"line":1,"column":876}},{"source":"network/PathFinder.ts","name":null,"original":{"line":81,"column":29},"generated":{"line":1,"column":878}},{"source":"network/PathFinder.ts","name":null,"original":{"line":81,"column":33},"generated":{"line":1,"column":882}},{"source":"network/PathFinder.ts","name":null,"original":{"line":84,"column":10},"generated":{"line":1,"column":885}},{"source":"network/PathFinder.ts","name":null,"original":{"line":82,"column":6},"generated":{"line":1,"column":888}},{"source":"network/PathFinder.ts","name":null,"original":{"line":82,"column":6},"generated":{"line":1,"column":890}},{"source":"network/PathFinder.ts","name":null,"original":{"line":82,"column":13},"generated":{"line":1,"column":897}},{"source":"network/PathFinder.ts","name":null,"original":{"line":82,"column":19},"generated":{"line":1,"column":899}},{"source":"network/PathFinder.ts","name":null,"original":{"line":83,"column":6},"generated":{"line":1,"column":919}},{"source":"network/PathFinder.ts","name":null,"original":{"line":83,"column":13},"generated":{"line":1,"column":921}},{"source":"network/PathFinder.ts","name":null,"original":{"line":83,"column":18},"generated":{"line":1,"column":923}},{"source":"network/PathFinder.ts","name":null,"original":{"line":84,"column":19},"generated":{"line":1,"column":931}},{"source":"network/PathFinder.ts","name":null,"original":{"line":84,"column":26},"generated":{"line":1,"column":933}},{"source":"network/PathFinder.ts","name":null,"original":{"line":84,"column":33},"generated":{"line":1,"column":940}},{"source":"network/PathFinder.ts","name":null,"original":{"line":87,"column":10},"generated":{"line":1,"column":942}},{"source":"network/PathFinder.ts","name":null,"original":{"line":87,"column":10},"generated":{"line":1,"column":948}},{"source":"network/PathFinder.ts","name":null,"original":{"line":87,"column":14},"generated":{"line":1,"column":952}},{"source":"network/PathFinder.ts","name":null,"original":{"line":87,"column":20},"generated":{"line":1,"column":958}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":987}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":0},"generated":{"line":1,"column":995}},{"source":"network/PathFinder.ts","name":null,"original":{"line":91,"column":15},"generated":{"line":1,"column":1003}}],"sources":{"network/PathFinder.ts":"// @flow\nimport { assert } from '../lib/assert';\nimport Road from './Road';\nimport { NetworkNode } from './networkNodes/NetworkNode';\n\nconst PathFinder = {\n  getNextRoad(initialNode: NetworkNode, destinationNode: NetworkNode): Road {\n    const remainingNodes = new Set(initialNode.getAllReachableNodes());\n    remainingNodes.add(initialNode);\n    assert(\n      remainingNodes.has(destinationNode),\n      'destination must be reachable',\n    );\n    const bestCosts = new Map();\n    const prevRoads = new Map();\n\n    bestCosts.set(initialNode, 0);\n\n    while (remainingNodes.size) {\n      const { node, cost } = PathFinder._nodeWithShortestDistance(\n        remainingNodes,\n        bestCosts,\n      );\n      remainingNodes.delete(node);\n\n      if (node === destinationNode) {\n        return PathFinder._nextRoadFromRoute(\n          prevRoads,\n          initialNode,\n          destinationNode,\n        );\n      }\n\n      PathFinder._updateNeighbours(node, bestCosts, cost, prevRoads);\n    }\n\n    throw new Error('unreachable i hope');\n  },\n\n  _nodeWithShortestDistance(\n    nodes: Set<NetworkNode>,\n    costs: Map<NetworkNode, number>,\n  ): { node: NetworkNode; cost: number } {\n    let bestCost = Infinity;\n    let bestNode = null;\n\n    nodes.forEach(node => {\n      const cost = costs.get(node);\n      if (cost != null && cost <= bestCost) {\n        bestCost = cost;\n        bestNode = node;\n      }\n    });\n\n    assert(bestNode, 'node must be found');\n    return { node: bestNode, cost: bestCost };\n  },\n  _updateNeighbours(\n    node: NetworkNode,\n    bestCosts: Map<NetworkNode, number>,\n    cost: number,\n    prevRoads: Map<NetworkNode, Road>,\n  ) {\n    node.outgoingConnections.forEach(road => {\n      const nextNode = road.to;\n      const nextNodeCost = bestCosts.get(nextNode);\n      const altNextNodeCost = cost + road.expectedTimeFromStartToEnd;\n      if (nextNodeCost == null || altNextNodeCost <= nextNodeCost) {\n        bestCosts.set(nextNode, altNextNodeCost);\n        prevRoads.set(nextNode, road);\n      }\n    });\n  },\n  _nextRoadFromRoute(\n    prevRoads: Map<NetworkNode, Road>,\n    start: NetworkNode,\n    finish: NetworkNode,\n  ): Road {\n    let node = finish;\n    while (prevRoads.has(node)) {\n      const road = prevRoads.get(node);\n      assert(road, 'road must exist');\n      node = road.from;\n      if (node === start) return road;\n    }\n\n    throw new Error('prev road must be found');\n  },\n};\n\nexport default PathFinder;\n"},"lineCount":null}},"error":null,"hash":"fdecb932107034ab05b31a5321d453d5","cacheData":{"env":{}}}