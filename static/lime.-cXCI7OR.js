var _e=(p,s,l)=>{if(!s.has(p))throw TypeError("Cannot "+l)};var N=(p,s,l)=>(_e(p,s,"read from private field"),l?l.call(p):s.get(p)),V=(p,s,l)=>{if(s.has(p))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(p):s.set(p,l)},$=(p,s,l,h)=>(_e(p,s,"write to private field"),h?h.call(p,l):s.set(p,l),l);import{f as at,q as ut,a as He,b as J,u as re,j as lt,l as xe,v as De,i as se,g as ft}from"./chunk_utils.H-tu124z.js";/* empty css                       */import{j as M,c as dt}from"./chunk_client.5RwYu7VI.js";import{a as ht,s as pt}from"./chunk_useResizeObserver.o4ZmQAol.js";import{g as vt,s as gt}from"./chunk_storage.jZ4mp_DT.js";import{r as F,m as L,c as ge,S as yt,a as mt,b as W}from"./chunk_StoreSchema.IwebE68C.js";import{a as oe,R as wt,c as bt,t as G}from"./chunk_track.c7N0SHA_.js";import{r as ne}from"./chunk_index.Tw3qZeYI.js";import{E as St}from"./chunk_EventEmitter.lFuS8-S7.js";import{i as Pt}from"./chunk_easings.oeMDsrpW.js";import{V as B,S as O,R as je,a as It}from"./chunk_Vector2.KSidYDSo.js";import{g as Ue,a as Xe,b as Ze}from"./chunk_perfectFreehand.rqJWOcgJ.js";import{B as ke}from"./chunk_Button.3zUKvJkI.js";import{c as Et}from"./chunk_index.f10NbkGF.js";import"./chunk_ResizeObserver.-NVrOerG.js";import"./chunk__commonjsHelpers.5-cIlDoe.js";import"./chunk_theme.6peXtGe0.js";var ze,Me,Ae;function _t(){function p(r,n){return function(a){(function(f,e){if(f.v)throw new Error("attempted to call "+e+" after decoration was finished")})(n,"addInitializer"),h(a,"An initializer"),r.push(a)}}function s(r,n){if(!r(n))throw new TypeError("Attempted to access private element on non-instance")}function l(r,n,a,f,e,m,d,S,w){var o;switch(e){case 1:o="accessor";break;case 2:o="method";break;case 3:o="getter";break;case 4:o="setter";break;default:o="field"}var i,t,g={kind:o,name:d?"#"+n:n,static:m,private:d},c={v:!1};if(e!==0&&(g.addInitializer=p(f,c)),d||e!==0&&e!==2)if(e===2)i=function(u){return s(w,u),a.value};else{var v=e===0||e===1;(v||e===3)&&(i=d?function(u){return s(w,u),a.get.call(u)}:function(u){return a.get.call(u)}),(v||e===4)&&(t=d?function(u,b){s(w,u),a.set.call(u,b)}:function(u,b){a.set.call(u,b)})}else i=function(u){return u[n]},e===0&&(t=function(u,b){u[n]=b});var y=d?w.bind():function(u){return n in u};g.access=i&&t?{get:i,set:t,has:y}:i?{get:i,has:y}:{set:t,has:y};try{return r(S,g)}finally{c.v=!0}}function h(r,n){if(typeof r!="function")throw new TypeError(n+" must be a function")}function I(r,n){var a=typeof n;if(r===1){if(a!=="object"||n===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");n.get!==void 0&&h(n.get,"accessor.get"),n.set!==void 0&&h(n.set,"accessor.set"),n.init!==void 0&&h(n.init,"accessor.init")}else if(a!=="function"){var f;throw f=r===0?"field":r===10?"class":"method",new TypeError(f+" decorators must return a function or void 0")}}function z(r){return function(n){r(this,n)}}function k(r,n,a,f,e,m,d,S,w){var o,i,t,g,c,v,y,u=a[0];if(d?o=e===0||e===1?{get:(g=a[3],function(){return g(this)}),set:z(a[4])}:e===3?{get:a[3]}:e===4?{set:a[3]}:{value:a[3]}:e!==0&&(o=Object.getOwnPropertyDescriptor(n,f)),e===1?t={get:o.get,set:o.set}:e===2?t=o.value:e===3?t=o.get:e===4&&(t=o.set),typeof u=="function")(c=l(u,f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?i=c:e===1?(i=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c);else for(var b=u.length-1;b>=0;b--){var E;(c=l(u[b],f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?E=c:e===1?(E=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c,E!==void 0&&(i===void 0?i=E:typeof i=="function"?i=[i,E]:i.push(E)))}if(e===0||e===1){if(i===void 0)i=function(_,P){return P};else if(typeof i!="function"){var x=i;i=function(_,P){for(var T=P,C=0;C<x.length;C++)T=x[C].call(_,T);return T}}else{var A=i;i=function(_,P){return A.call(_,P)}}r.push(i)}e!==0&&(e===1?(o.get=t.get,o.set=t.set):e===2?o.value=t:e===3?o.get=t:e===4&&(o.set=t),d?e===1?(r.push(function(_,P){return t.get.call(_,P)}),r.push(function(_,P){return t.set.call(_,P)})):e===2?r.push(t):r.push(function(_,P){return t.call(_,P)}):Object.defineProperty(n,f,o))}function j(r,n,a){for(var f,e,m,d=[],S=new Map,w=new Map,o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i)){var t,g,c=i[1],v=i[2],y=i.length>3,u=c>=5,b=a;if(u?(t=r,(c-=5)!==0&&(g=e=e||[]),y&&!m&&(m=function(A){return xt(A)===r}),b=m):(t=r.prototype,c!==0&&(g=f=f||[])),c!==0&&!y){var E=u?w:S,x=E.get(v)||0;if(x===!0||x===3&&c!==4||x===4&&c!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);!x&&c>2?E.set(v,c):E.set(v,!0)}k(d,t,i,v,c,u,y,g,b)}}return D(d,f),D(d,e),d}function D(r,n){n&&r.push(function(a){for(var f=0;f<n.length;f++)n[f].call(a);return a})}return function(r,n,a,f){return{e:j(r,n,f),get c(){return function(e,m){if(m.length>0){for(var d=[],S=e,w=e.name,o=m.length-1;o>=0;o--){var i={v:!1};try{var t=m[o](S,{kind:"class",name:w,addInitializer:p(d,i)})}finally{i.v=!0}t!==void 0&&(I(10,t),S=t)}return[S,function(){for(var g=0;g<d.length;g++)d[g].call(S)}]}}(r,a)}}}}function qe(p,s,l,h){return(qe=_t())(p,s,l,h)}function xt(p){if(Object(p)!==p)throw TypeError("right-hand side of 'in' should be an object, got "+(p!==null?typeof p:"null"));return p}function ce(p){const s=oe("target",typeof p=="number"?oe("signal",p):null),l={name:"signal",get value(){return s.value?s.value.value:p.value},get lastChangedEpoch(){return s.value?s.value.lastChangedEpoch:p.lastChangedEpoch},getDiffSince(){return wt},__unsafe__getWithoutCapture(){const h=s.__unsafe__getWithoutCapture();return h?h.__unsafe__getWithoutCapture():p.__unsafe__getWithoutCapture()},set(h){const I=s.value;return I?I.set(h):s.set(oe("signal",h)),h},update(h){return l.set(h(l.value))}};return l}var H,U;const we=class we{constructor(s){V(this,H,void 0);V(this,U,void 0);$(this,H,(Ae(this),ze(this))),$(this,U,Me(this,0)),console.log("create spring"),this._target=ce(s.target),this._tension=ce(s.tension??230),this._friction=ce(s.friction??22),this.value=this._target.__unsafe__getWithoutCapture(),this.ticker=s.ticker,this.destroy=this.ticker.listen(({deltaMs:l})=>{this.tick(l)})}get value(){return N(this,H)}set value(s){$(this,H,s)}get velocity(){return N(this,U)}set velocity(s){$(this,U,s)}get target(){return this._target.value}set target(s){this._target.set(s)}get tension(){return this._tension.value}set tension(s){this._tension.set(s)}get friction(){return this._friction.value}set friction(s){this._friction.set(s)}tick(s){const l=s/1e4,{target:h,tension:I,friction:z,value:k,velocity:j}=this;let D=k,r=j;const n=j,a=I*(h-D)-z*j;D=k+n*l*.5,r=j+a*l*.5;const f=r,e=I*(h-D)-z*r;D=k+f*l*.5,r=j+e*l*.5;const m=r,d=I*(h-D)-z*r;D=k+m*l,r=j+d*l;const S=r,w=I*(h-D)-z*r,o=1/6*(n+2*(f+m)+S),i=1/6*(a+2*(e+d)+w);Math.abs(o)<1e-6?this.value=this.target:this.value+=o*l,Math.abs(i)<1e-6?this.velocity=0:this.velocity+=i*l}};H=new WeakMap,U=new WeakMap,[ze,Me,Ae]=qe(we,[[F,1,"value"],[F,1,"velocity"]],[]).e;let ue=we;var Te,Ce,Oe;function Dt(){function p(r,n){return function(a){(function(f,e){if(f.v)throw new Error("attempted to call "+e+" after decoration was finished")})(n,"addInitializer"),h(a,"An initializer"),r.push(a)}}function s(r,n){if(!r(n))throw new TypeError("Attempted to access private element on non-instance")}function l(r,n,a,f,e,m,d,S,w){var o;switch(e){case 1:o="accessor";break;case 2:o="method";break;case 3:o="getter";break;case 4:o="setter";break;default:o="field"}var i,t,g={kind:o,name:d?"#"+n:n,static:m,private:d},c={v:!1};if(e!==0&&(g.addInitializer=p(f,c)),d||e!==0&&e!==2)if(e===2)i=function(u){return s(w,u),a.value};else{var v=e===0||e===1;(v||e===3)&&(i=d?function(u){return s(w,u),a.get.call(u)}:function(u){return a.get.call(u)}),(v||e===4)&&(t=d?function(u,b){s(w,u),a.set.call(u,b)}:function(u,b){a.set.call(u,b)})}else i=function(u){return u[n]},e===0&&(t=function(u,b){u[n]=b});var y=d?w.bind():function(u){return n in u};g.access=i&&t?{get:i,set:t,has:y}:i?{get:i,has:y}:{set:t,has:y};try{return r(S,g)}finally{c.v=!0}}function h(r,n){if(typeof r!="function")throw new TypeError(n+" must be a function")}function I(r,n){var a=typeof n;if(r===1){if(a!=="object"||n===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");n.get!==void 0&&h(n.get,"accessor.get"),n.set!==void 0&&h(n.set,"accessor.set"),n.init!==void 0&&h(n.init,"accessor.init")}else if(a!=="function"){var f;throw f=r===0?"field":r===10?"class":"method",new TypeError(f+" decorators must return a function or void 0")}}function z(r){return function(n){r(this,n)}}function k(r,n,a,f,e,m,d,S,w){var o,i,t,g,c,v,y,u=a[0];if(d?o=e===0||e===1?{get:(g=a[3],function(){return g(this)}),set:z(a[4])}:e===3?{get:a[3]}:e===4?{set:a[3]}:{value:a[3]}:e!==0&&(o=Object.getOwnPropertyDescriptor(n,f)),e===1?t={get:o.get,set:o.set}:e===2?t=o.value:e===3?t=o.get:e===4&&(t=o.set),typeof u=="function")(c=l(u,f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?i=c:e===1?(i=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c);else for(var b=u.length-1;b>=0;b--){var E;(c=l(u[b],f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?E=c:e===1?(E=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c,E!==void 0&&(i===void 0?i=E:typeof i=="function"?i=[i,E]:i.push(E)))}if(e===0||e===1){if(i===void 0)i=function(_,P){return P};else if(typeof i!="function"){var x=i;i=function(_,P){for(var T=P,C=0;C<x.length;C++)T=x[C].call(_,T);return T}}else{var A=i;i=function(_,P){return A.call(_,P)}}r.push(i)}e!==0&&(e===1?(o.get=t.get,o.set=t.set):e===2?o.value=t:e===3?o.get=t:e===4&&(o.set=t),d?e===1?(r.push(function(_,P){return t.get.call(_,P)}),r.push(function(_,P){return t.set.call(_,P)})):e===2?r.push(t):r.push(function(_,P){return t.call(_,P)}):Object.defineProperty(n,f,o))}function j(r,n,a){for(var f,e,m,d=[],S=new Map,w=new Map,o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i)){var t,g,c=i[1],v=i[2],y=i.length>3,u=c>=5,b=a;if(u?(t=r,(c-=5)!==0&&(g=e=e||[]),y&&!m&&(m=function(A){return jt(A)===r}),b=m):(t=r.prototype,c!==0&&(g=f=f||[])),c!==0&&!y){var E=u?w:S,x=E.get(v)||0;if(x===!0||x===3&&c!==4||x===4&&c!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);!x&&c>2?E.set(v,c):E.set(v,!0)}k(d,t,i,v,c,u,y,g,b)}}return D(d,f),D(d,e),d}function D(r,n){n&&r.push(function(a){for(var f=0;f<n.length;f++)n[f].call(a);return a})}return function(r,n,a,f){return{e:j(r,n,f),get c(){return function(e,m){if(m.length>0){for(var d=[],S=e,w=e.name,o=m.length-1;o>=0;o--){var i={v:!1};try{var t=m[o](S,{kind:"class",name:w,addInitializer:p(d,i)})}finally{i.v=!0}t!==void 0&&(I(10,t),S=t)}return[S,function(){for(var g=0;g<d.length;g++)d[g].call(S)}]}}(r,a)}}}}function Ge(p,s,l,h){return(Ge=Dt())(p,s,l,h)}function jt(p){if(Object(p)!==p)throw TypeError("right-hand side of 'in' should be an object, got "+(p!==null?typeof p:"null"));return p}var X,Z;const be=class be{constructor(){V(this,X,void 0);V(this,Z,void 0);this.event=new St,$(this,X,(Oe(this),Te(this,0))),$(this,Z,Ce(this,1e3/60)),this._stop=null}get elapsedMs(){return N(this,X)}set elapsedMs(s){$(this,X,s)}get deltaMs(){return N(this,Z)}set deltaMs(s){$(this,Z,s)}start(){if(this._stop)return this;let s=null;return this._stop=at(l=>{if(s!==null){const h=l-s;this.elapsedMs+=h,this.deltaMs=h,this.event.emit(this)}s=l}),this}stop(){var s;return(s=this._stop)==null||s.call(this),this._stop=null,this}listen(s){return this.event.listen(s)}};X=new WeakMap,Z=new WeakMap,[Te,Ce,Oe]=Ge(be,[[F,1,"elapsedMs"],[F,1,"deltaMs"]],[]).e;let le=be;function kt(p,s,l,h,I){const z=p.lerp(s,I),k=s.lerp(l,I),j=l.lerp(h,I),D=z.lerp(k,I),r=k.lerp(j,I);return D.lerp(r,I)}var Re,$e;function zt(){function p(r,n){return function(a){(function(f,e){if(f.v)throw new Error("attempted to call "+e+" after decoration was finished")})(n,"addInitializer"),h(a,"An initializer"),r.push(a)}}function s(r,n){if(!r(n))throw new TypeError("Attempted to access private element on non-instance")}function l(r,n,a,f,e,m,d,S,w){var o;switch(e){case 1:o="accessor";break;case 2:o="method";break;case 3:o="getter";break;case 4:o="setter";break;default:o="field"}var i,t,g={kind:o,name:d?"#"+n:n,static:m,private:d},c={v:!1};if(e!==0&&(g.addInitializer=p(f,c)),d||e!==0&&e!==2)if(e===2)i=function(u){return s(w,u),a.value};else{var v=e===0||e===1;(v||e===3)&&(i=d?function(u){return s(w,u),a.get.call(u)}:function(u){return a.get.call(u)}),(v||e===4)&&(t=d?function(u,b){s(w,u),a.set.call(u,b)}:function(u,b){a.set.call(u,b)})}else i=function(u){return u[n]},e===0&&(t=function(u,b){u[n]=b});var y=d?w.bind():function(u){return n in u};g.access=i&&t?{get:i,set:t,has:y}:i?{get:i,has:y}:{set:t,has:y};try{return r(S,g)}finally{c.v=!0}}function h(r,n){if(typeof r!="function")throw new TypeError(n+" must be a function")}function I(r,n){var a=typeof n;if(r===1){if(a!=="object"||n===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");n.get!==void 0&&h(n.get,"accessor.get"),n.set!==void 0&&h(n.set,"accessor.set"),n.init!==void 0&&h(n.init,"accessor.init")}else if(a!=="function"){var f;throw f=r===0?"field":r===10?"class":"method",new TypeError(f+" decorators must return a function or void 0")}}function z(r){return function(n){r(this,n)}}function k(r,n,a,f,e,m,d,S,w){var o,i,t,g,c,v,y,u=a[0];if(d?o=e===0||e===1?{get:(g=a[3],function(){return g(this)}),set:z(a[4])}:e===3?{get:a[3]}:e===4?{set:a[3]}:{value:a[3]}:e!==0&&(o=Object.getOwnPropertyDescriptor(n,f)),e===1?t={get:o.get,set:o.set}:e===2?t=o.value:e===3?t=o.get:e===4&&(t=o.set),typeof u=="function")(c=l(u,f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?i=c:e===1?(i=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c);else for(var b=u.length-1;b>=0;b--){var E;(c=l(u[b],f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?E=c:e===1?(E=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c,E!==void 0&&(i===void 0?i=E:typeof i=="function"?i=[i,E]:i.push(E)))}if(e===0||e===1){if(i===void 0)i=function(_,P){return P};else if(typeof i!="function"){var x=i;i=function(_,P){for(var T=P,C=0;C<x.length;C++)T=x[C].call(_,T);return T}}else{var A=i;i=function(_,P){return A.call(_,P)}}r.push(i)}e!==0&&(e===1?(o.get=t.get,o.set=t.set):e===2?o.value=t:e===3?o.get=t:e===4&&(o.set=t),d?e===1?(r.push(function(_,P){return t.get.call(_,P)}),r.push(function(_,P){return t.set.call(_,P)})):e===2?r.push(t):r.push(function(_,P){return t.call(_,P)}):Object.defineProperty(n,f,o))}function j(r,n,a){for(var f,e,m,d=[],S=new Map,w=new Map,o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i)){var t,g,c=i[1],v=i[2],y=i.length>3,u=c>=5,b=a;if(u?(t=r,(c-=5)!==0&&(g=e=e||[]),y&&!m&&(m=function(A){return Mt(A)===r}),b=m):(t=r.prototype,c!==0&&(g=f=f||[])),c!==0&&!y){var E=u?w:S,x=E.get(v)||0;if(x===!0||x===3&&c!==4||x===4&&c!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);!x&&c>2?E.set(v,c):E.set(v,!0)}k(d,t,i,v,c,u,y,g,b)}}return D(d,f),D(d,e),d}function D(r,n){n&&r.push(function(a){for(var f=0;f<n.length;f++)n[f].call(a);return a})}return function(r,n,a,f){return{e:j(r,n,f),get c(){return function(e,m){if(m.length>0){for(var d=[],S=e,w=e.name,o=m.length-1;o>=0;o--){var i={v:!1};try{var t=m[o](S,{kind:"class",name:w,addInitializer:p(d,i)})}finally{i.v=!0}t!==void 0&&(I(10,t),S=t)}return[S,function(){for(var g=0;g<d.length;g++)d[g].call(S)}]}}(r,a)}}}}function Je(p,s,l,h){return(Je=zt())(p,s,l,h)}function Mt(p){if(Object(p)!==p)throw TypeError("right-hand side of 'in' should be an object, got "+(p!==null?typeof p:"null"));return p}var Q;const Se=class Se{constructor(s){V(this,Q,($e(this),Re(this,B.ZERO)));this.lime=s}get screenPointer(){return N(this,Q)}set screenPointer(s){$(this,Q,s)}get scenePointer(){return this.lime.viewport.screenToSlide(this.screenPointer)}updateFromEvent(s){this.screenPointer=B.fromEvent(s)}};Q=new WeakMap,[Re,$e]=Je(Se,[[F,1,"screenPointer"],[L,3,"scenePointer"]],[]).e;let fe=Se;const Ke=1080,At=Ke/(16/9),R=new B(Ke,At),ae=new B(32,32),Tt=200,ie={size:16,thinning:.5,smoothing:.5,last:!0};var Le,Ne;function Ct(){function p(r,n){return function(a){(function(f,e){if(f.v)throw new Error("attempted to call "+e+" after decoration was finished")})(n,"addInitializer"),h(a,"An initializer"),r.push(a)}}function s(r,n){if(!r(n))throw new TypeError("Attempted to access private element on non-instance")}function l(r,n,a,f,e,m,d,S,w){var o;switch(e){case 1:o="accessor";break;case 2:o="method";break;case 3:o="getter";break;case 4:o="setter";break;default:o="field"}var i,t,g={kind:o,name:d?"#"+n:n,static:m,private:d},c={v:!1};if(e!==0&&(g.addInitializer=p(f,c)),d||e!==0&&e!==2)if(e===2)i=function(u){return s(w,u),a.value};else{var v=e===0||e===1;(v||e===3)&&(i=d?function(u){return s(w,u),a.get.call(u)}:function(u){return a.get.call(u)}),(v||e===4)&&(t=d?function(u,b){s(w,u),a.set.call(u,b)}:function(u,b){a.set.call(u,b)})}else i=function(u){return u[n]},e===0&&(t=function(u,b){u[n]=b});var y=d?w.bind():function(u){return n in u};g.access=i&&t?{get:i,set:t,has:y}:i?{get:i,has:y}:{set:t,has:y};try{return r(S,g)}finally{c.v=!0}}function h(r,n){if(typeof r!="function")throw new TypeError(n+" must be a function")}function I(r,n){var a=typeof n;if(r===1){if(a!=="object"||n===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");n.get!==void 0&&h(n.get,"accessor.get"),n.set!==void 0&&h(n.set,"accessor.set"),n.init!==void 0&&h(n.init,"accessor.init")}else if(a!=="function"){var f;throw f=r===0?"field":r===10?"class":"method",new TypeError(f+" decorators must return a function or void 0")}}function z(r){return function(n){r(this,n)}}function k(r,n,a,f,e,m,d,S,w){var o,i,t,g,c,v,y,u=a[0];if(d?o=e===0||e===1?{get:(g=a[3],function(){return g(this)}),set:z(a[4])}:e===3?{get:a[3]}:e===4?{set:a[3]}:{value:a[3]}:e!==0&&(o=Object.getOwnPropertyDescriptor(n,f)),e===1?t={get:o.get,set:o.set}:e===2?t=o.value:e===3?t=o.get:e===4&&(t=o.set),typeof u=="function")(c=l(u,f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?i=c:e===1?(i=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c);else for(var b=u.length-1;b>=0;b--){var E;(c=l(u[b],f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?E=c:e===1?(E=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c,E!==void 0&&(i===void 0?i=E:typeof i=="function"?i=[i,E]:i.push(E)))}if(e===0||e===1){if(i===void 0)i=function(_,P){return P};else if(typeof i!="function"){var x=i;i=function(_,P){for(var T=P,C=0;C<x.length;C++)T=x[C].call(_,T);return T}}else{var A=i;i=function(_,P){return A.call(_,P)}}r.push(i)}e!==0&&(e===1?(o.get=t.get,o.set=t.set):e===2?o.value=t:e===3?o.get=t:e===4&&(o.set=t),d?e===1?(r.push(function(_,P){return t.get.call(_,P)}),r.push(function(_,P){return t.set.call(_,P)})):e===2?r.push(t):r.push(function(_,P){return t.call(_,P)}):Object.defineProperty(n,f,o))}function j(r,n,a){for(var f,e,m,d=[],S=new Map,w=new Map,o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i)){var t,g,c=i[1],v=i[2],y=i.length>3,u=c>=5,b=a;if(u?(t=r,(c-=5)!==0&&(g=e=e||[]),y&&!m&&(m=function(A){return Ot(A)===r}),b=m):(t=r.prototype,c!==0&&(g=f=f||[])),c!==0&&!y){var E=u?w:S,x=E.get(v)||0;if(x===!0||x===3&&c!==4||x===4&&c!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);!x&&c>2?E.set(v,c):E.set(v,!0)}k(d,t,i,v,c,u,y,g,b)}}return D(d,f),D(d,e),d}function D(r,n){n&&r.push(function(a){for(var f=0;f<n.length;f++)n[f].call(a);return a})}return function(r,n,a,f){return{e:j(r,n,f),get c(){return function(e,m){if(m.length>0){for(var d=[],S=e,w=e.name,o=m.length-1;o>=0;o--){var i={v:!1};try{var t=m[o](S,{kind:"class",name:w,addInitializer:p(d,i)})}finally{i.v=!0}t!==void 0&&(I(10,t),S=t)}return[S,function(){for(var g=0;g<d.length;g++)d[g].call(S)}]}}(r,a)}}}}function Qe(p,s,l,h){return(Qe=Ct())(p,s,l,h)}function Ot(p){if(Object(p)!==p)throw TypeError("right-hand side of 'in' should be an object, got "+(p!==null?typeof p:"null"));return p}class Ye{constructor(s){this.parent=s,this.lime=s.lime}toDebugString(){return this.child?`${this.name}.${this.child.toDebugString()}`:this.name}}var q;const Pe=class Pe{constructor(s){V(this,q,void 0);this.lime=s,$(this,q,(Ne(this),Le(this,new et(this)))),this.onPointerDown=l=>{var h,I;(I=(h=this.child).onPointerDown)==null||I.call(h,l)},this.onPointerMove=l=>{var h,I;(I=(h=this.child).onPointerMove)==null||I.call(h,l)},this.onPointerUp=l=>{var h,I;(I=(h=this.child).onPointerUp)==null||I.call(h,l)}}get child(){return N(this,q)}set child(s){$(this,q,s)}toDebugString(){return`lime.${this.child.toDebugString()}`}};q=new WeakMap,[Le,Ne]=Qe(Pe,[[F,1,"child"]],[]).e;let de=Pe;class et extends Ye{constructor(){super(...arguments),this.name="idle"}onPointerDown(s){const l=this.lime.session.slideId;this.lime.updateSlide(l,h=>({...h,rawPoints:[this.lime.inputs.scenePointer]})),this.parent.child=new Rt(this.parent,l)}}class Rt extends Ye{constructor(s,l){super(s),this.slideId=l,this.name="drawing"}onPointerMove(s){this.lime.updateSlide(this.slideId,l=>({...l,rawPoints:[...l.rawPoints,this.lime.inputs.scenePointer]}))}onPointerUp(s){this.parent.child=new et(this.parent)}}function K(p){const s=new RegExp(`^${p}\\:([a-zA-Z0-9_-]+)$`),l=h=>s.test(h)?je.ok(h):je.error(new It(`Expected ${p}:*, got ${h}`,[]));return O.string.transform(l,l,ut)}const tt=O.object({typeName:O.value("doc"),id:K("doc"),slideIds:O.arrayOf(K("slide"))}),ye=ge("doc",{scope:"document",validator:tt.asValidator()}),ee=ye.createId("doc"),nt=O.object({typeName:O.value("slide"),id:K("slide"),rawPoints:O.arrayOf(B.schema)}),he=ge("slide",{scope:"document",validator:nt.asValidator()}).withDefaultProperties(()=>({rawPoints:[]})),it=O.object({typeName:O.value("session"),id:K("session"),slideId:K("slide"),tweenBezierControl:O.number,speed:O.number}),me=ge("session",{scope:"session",validator:it.asValidator()}).withDefaultProperties(()=>({tweenBezierControl:.4,speed:650})),te=me.createId("session"),$t=O.union("typeName",{doc:tt,slide:nt,session:it}),Ve=O.objectMap(O.string,$t),Lt=mt.create({doc:ye,slide:he,session:me});class Nt extends yt{constructor(s){super({schema:Lt,props:{},initialData:s})}insert(s){He(!this.get(s.id),"Assertion Error: !this.get(record.id)"),this.put([s])}}var Be,Fe;function Vt(){function p(r,n){return function(a){(function(f,e){if(f.v)throw new Error("attempted to call "+e+" after decoration was finished")})(n,"addInitializer"),h(a,"An initializer"),r.push(a)}}function s(r,n){if(!r(n))throw new TypeError("Attempted to access private element on non-instance")}function l(r,n,a,f,e,m,d,S,w){var o;switch(e){case 1:o="accessor";break;case 2:o="method";break;case 3:o="getter";break;case 4:o="setter";break;default:o="field"}var i,t,g={kind:o,name:d?"#"+n:n,static:m,private:d},c={v:!1};if(e!==0&&(g.addInitializer=p(f,c)),d||e!==0&&e!==2)if(e===2)i=function(u){return s(w,u),a.value};else{var v=e===0||e===1;(v||e===3)&&(i=d?function(u){return s(w,u),a.get.call(u)}:function(u){return a.get.call(u)}),(v||e===4)&&(t=d?function(u,b){s(w,u),a.set.call(u,b)}:function(u,b){a.set.call(u,b)})}else i=function(u){return u[n]},e===0&&(t=function(u,b){u[n]=b});var y=d?w.bind():function(u){return n in u};g.access=i&&t?{get:i,set:t,has:y}:i?{get:i,has:y}:{set:t,has:y};try{return r(S,g)}finally{c.v=!0}}function h(r,n){if(typeof r!="function")throw new TypeError(n+" must be a function")}function I(r,n){var a=typeof n;if(r===1){if(a!=="object"||n===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");n.get!==void 0&&h(n.get,"accessor.get"),n.set!==void 0&&h(n.set,"accessor.set"),n.init!==void 0&&h(n.init,"accessor.init")}else if(a!=="function"){var f;throw f=r===0?"field":r===10?"class":"method",new TypeError(f+" decorators must return a function or void 0")}}function z(r){return function(n){r(this,n)}}function k(r,n,a,f,e,m,d,S,w){var o,i,t,g,c,v,y,u=a[0];if(d?o=e===0||e===1?{get:(g=a[3],function(){return g(this)}),set:z(a[4])}:e===3?{get:a[3]}:e===4?{set:a[3]}:{value:a[3]}:e!==0&&(o=Object.getOwnPropertyDescriptor(n,f)),e===1?t={get:o.get,set:o.set}:e===2?t=o.value:e===3?t=o.get:e===4&&(t=o.set),typeof u=="function")(c=l(u,f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?i=c:e===1?(i=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c);else for(var b=u.length-1;b>=0;b--){var E;(c=l(u[b],f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?E=c:e===1?(E=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c,E!==void 0&&(i===void 0?i=E:typeof i=="function"?i=[i,E]:i.push(E)))}if(e===0||e===1){if(i===void 0)i=function(_,P){return P};else if(typeof i!="function"){var x=i;i=function(_,P){for(var T=P,C=0;C<x.length;C++)T=x[C].call(_,T);return T}}else{var A=i;i=function(_,P){return A.call(_,P)}}r.push(i)}e!==0&&(e===1?(o.get=t.get,o.set=t.set):e===2?o.value=t:e===3?o.get=t:e===4&&(o.set=t),d?e===1?(r.push(function(_,P){return t.get.call(_,P)}),r.push(function(_,P){return t.set.call(_,P)})):e===2?r.push(t):r.push(function(_,P){return t.call(_,P)}):Object.defineProperty(n,f,o))}function j(r,n,a){for(var f,e,m,d=[],S=new Map,w=new Map,o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i)){var t,g,c=i[1],v=i[2],y=i.length>3,u=c>=5,b=a;if(u?(t=r,(c-=5)!==0&&(g=e=e||[]),y&&!m&&(m=function(A){return Bt(A)===r}),b=m):(t=r.prototype,c!==0&&(g=f=f||[])),c!==0&&!y){var E=u?w:S,x=E.get(v)||0;if(x===!0||x===3&&c!==4||x===4&&c!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);!x&&c>2?E.set(v,c):E.set(v,!0)}k(d,t,i,v,c,u,y,g,b)}}return D(d,f),D(d,e),d}function D(r,n){n&&r.push(function(a){for(var f=0;f<n.length;f++)n[f].call(a);return a})}return function(r,n,a,f){return{e:j(r,n,f),get c(){return function(e,m){if(m.length>0){for(var d=[],S=e,w=e.name,o=m.length-1;o>=0;o--){var i={v:!1};try{var t=m[o](S,{kind:"class",name:w,addInitializer:p(d,i)})}finally{i.v=!0}t!==void 0&&(I(10,t),S=t)}return[S,function(){for(var g=0;g<d.length;g++)d[g].call(S)}]}}(r,a)}}}}function rt(p,s,l,h){return(rt=Vt())(p,s,l,h)}function Bt(p){if(Object(p)!==p)throw TypeError("right-hand side of 'in' should be an object, got "+(p!==null?typeof p:"null"));return p}var Y;const Ie=class Ie{constructor(){V(this,Y,(Fe(this),Be(this,B.ZERO)))}get screenSize(){return N(this,Y)}set screenSize(s){$(this,Y,s)}get canvasOffset(){return new B(Tt,0)}get canvasSize(){return this.screenSize.sub(this.canvasOffset)}get availableCanvasSize(){return this.canvasSize.sub(ae.mul(2))}get scaleFactor(){return Math.min(this.availableCanvasSize.x/R.x,this.availableCanvasSize.y/R.y)}get slideSize(){return R.scale(this.scaleFactor)}get slideOffset(){return new B(Math.max(ae.x,(this.canvasSize.x-this.slideSize.x)/2),Math.max(ae.y,(this.canvasSize.y-this.slideSize.y)/2))}screenToSlide(s){return s.sub(this.canvasOffset).sub(this.slideOffset).div(this.scaleFactor)}slideToScreen(s){return s.mul(this.scaleFactor).add(this.slideOffset).add(this.canvasOffset)}};Y=new WeakMap,[Be,Fe]=rt(Ie,[[F,1,"screenSize"],[L,3,"canvasOffset"],[L,3,"canvasSize"],[L,3,"availableCanvasSize"],[L,3,"scaleFactor"],[L,3,"slideSize"],[L,3,"slideOffset"]],[]).e;let pe=Ie;var We;function Ft(){function p(r,n){return function(a){(function(f,e){if(f.v)throw new Error("attempted to call "+e+" after decoration was finished")})(n,"addInitializer"),h(a,"An initializer"),r.push(a)}}function s(r,n){if(!r(n))throw new TypeError("Attempted to access private element on non-instance")}function l(r,n,a,f,e,m,d,S,w){var o;switch(e){case 1:o="accessor";break;case 2:o="method";break;case 3:o="getter";break;case 4:o="setter";break;default:o="field"}var i,t,g={kind:o,name:d?"#"+n:n,static:m,private:d},c={v:!1};if(e!==0&&(g.addInitializer=p(f,c)),d||e!==0&&e!==2)if(e===2)i=function(u){return s(w,u),a.value};else{var v=e===0||e===1;(v||e===3)&&(i=d?function(u){return s(w,u),a.get.call(u)}:function(u){return a.get.call(u)}),(v||e===4)&&(t=d?function(u,b){s(w,u),a.set.call(u,b)}:function(u,b){a.set.call(u,b)})}else i=function(u){return u[n]},e===0&&(t=function(u,b){u[n]=b});var y=d?w.bind():function(u){return n in u};g.access=i&&t?{get:i,set:t,has:y}:i?{get:i,has:y}:{set:t,has:y};try{return r(S,g)}finally{c.v=!0}}function h(r,n){if(typeof r!="function")throw new TypeError(n+" must be a function")}function I(r,n){var a=typeof n;if(r===1){if(a!=="object"||n===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");n.get!==void 0&&h(n.get,"accessor.get"),n.set!==void 0&&h(n.set,"accessor.set"),n.init!==void 0&&h(n.init,"accessor.init")}else if(a!=="function"){var f;throw f=r===0?"field":r===10?"class":"method",new TypeError(f+" decorators must return a function or void 0")}}function z(r){return function(n){r(this,n)}}function k(r,n,a,f,e,m,d,S,w){var o,i,t,g,c,v,y,u=a[0];if(d?o=e===0||e===1?{get:(g=a[3],function(){return g(this)}),set:z(a[4])}:e===3?{get:a[3]}:e===4?{set:a[3]}:{value:a[3]}:e!==0&&(o=Object.getOwnPropertyDescriptor(n,f)),e===1?t={get:o.get,set:o.set}:e===2?t=o.value:e===3?t=o.get:e===4&&(t=o.set),typeof u=="function")(c=l(u,f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?i=c:e===1?(i=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c);else for(var b=u.length-1;b>=0;b--){var E;(c=l(u[b],f,o,S,e,m,d,t,w))!==void 0&&(I(e,c),e===0?E=c:e===1?(E=c.init,v=c.get||t.get,y=c.set||t.set,t={get:v,set:y}):t=c,E!==void 0&&(i===void 0?i=E:typeof i=="function"?i=[i,E]:i.push(E)))}if(e===0||e===1){if(i===void 0)i=function(_,P){return P};else if(typeof i!="function"){var x=i;i=function(_,P){for(var T=P,C=0;C<x.length;C++)T=x[C].call(_,T);return T}}else{var A=i;i=function(_,P){return A.call(_,P)}}r.push(i)}e!==0&&(e===1?(o.get=t.get,o.set=t.set):e===2?o.value=t:e===3?o.get=t:e===4&&(o.set=t),d?e===1?(r.push(function(_,P){return t.get.call(_,P)}),r.push(function(_,P){return t.set.call(_,P)})):e===2?r.push(t):r.push(function(_,P){return t.call(_,P)}):Object.defineProperty(n,f,o))}function j(r,n,a){for(var f,e,m,d=[],S=new Map,w=new Map,o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i)){var t,g,c=i[1],v=i[2],y=i.length>3,u=c>=5,b=a;if(u?(t=r,(c-=5)!==0&&(g=e=e||[]),y&&!m&&(m=function(A){return Wt(A)===r}),b=m):(t=r.prototype,c!==0&&(g=f=f||[])),c!==0&&!y){var E=u?w:S,x=E.get(v)||0;if(x===!0||x===3&&c!==4||x===4&&c!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);!x&&c>2?E.set(v,c):E.set(v,!0)}k(d,t,i,v,c,u,y,g,b)}}return D(d,f),D(d,e),d}function D(r,n){n&&r.push(function(a){for(var f=0;f<n.length;f++)n[f].call(a);return a})}return function(r,n,a,f){return{e:j(r,n,f),get c(){return function(e,m){if(m.length>0){for(var d=[],S=e,w=e.name,o=m.length-1;o>=0;o--){var i={v:!1};try{var t=m[o](S,{kind:"class",name:w,addInitializer:p(d,i)})}finally{i.v=!0}t!==void 0&&(I(10,t),S=t)}return[S,function(){for(var g=0;g<d.length;g++)d[g].call(S)}]}}(r,a)}}}}function st(p,s,l,h){return(st=Ft())(p,s,l,h)}function Wt(p){if(Object(p)!==p)throw TypeError("right-hand side of 'in' should be an object, got "+(p!==null?typeof p:"null"));return p}const Ee=class Ee{constructor(s){this.store=s,this.state=new de(this),this.viewport=new pe,this.inputs=new fe(this),this.ticker=new le,We(this),this.ensureStoreIsReady()}ensureStoreIsReady(){const s=this.store.query.records("slide").value;if(!s.length){const l=he.create({});this.store.put([l]),s.push(l)}this.store.get(ee)||this.store.put([ye.create({id:ee,slideIds:s.map(l=>l.id)})]),this.store.get(te)||this.store.put([me.create({id:te,slideId:s[0].id})])}get document(){return J(this.store.get(ee),"Assertion Error: this.store.get(LIME_DOC_ID)")}updateDocument(s){this.store.update(ee,l=>re(l,s))}get session(){return J(this.store.get(te),"Assertion Error: this.store.get(SESSION_ID)")}updateSession(s){this.store.update(te,l=>re(l,s))}getSlide(s){return J(this.store.get(s),"Assertion Error: this.store.get(slideId)")}getSlideIndex(s){const l=this.document.slideIds.indexOf(s);return He(l!==-1,"Assertion Error: slideIndex !== -1"),l}getSlideByIndex(s){const{slideIds:l}=this.document;return this.getSlide(l[lt(0,l.length,s)])}updateSlide(s,l){this.store.update(s,h=>re(h,l))}get _slideStrokePointsCache(){return this.store.createComputedCache("slideStrokePoints",s=>Ue(s.rawPoints,ie))}getSlideStrokePoints(s){return J(this._slideStrokePointsCache.get(s),"Assertion Error: this._slideStrokePointsCache.get(slideId)")}get playheadSpring(){return new ue({target:bt("playheadTarget",()=>this.getSlideIndex(this.session.slideId)),ticker:this.ticker,tension:100,friction:25})}get playhead(){return this.playheadSpring.value}get animationStepCache(){return this.store.createComputedCache("animationSteps",s=>{const{tweenBezierControl:l,speed:h}=this.session,I=this.getSlideByIndex(this.getSlideIndex(s.id)+1),z=s.rawPoints,k=I.rawPoints,j=this.getSlideStrokePoints(s.id),D=this.getSlideStrokePoints(I.id);if(!z.length||!D.length)return null;const r=j[j.length-1],n=D[0],a=r.point.distanceTo(n.point),f=r.point,e=r.point.sub(r.vector.scale(a*l)),m=n.point.add(n.vector.scale(a*l)),d=n.point,S=[];for(let v=0;v<a;v+=h/60){const y=se(0,a,v),u=kt(f,e,m,d,y);S.push(u)}const w=[0],o=[];let i=0,t=null;for(const v of z){if(t){const y=v.distanceTo(t);i+=y,w.push(i)}t=v,o.push(v)}const g=i;for(const v of S){if(t){const y=v.distanceTo(t);i+=y,w.push(i)}t=v,o.push(v)}const c=i-g;for(const v of k){if(t){const y=v.distanceTo(t);i+=y,w.push(i)}t=v,o.push(v)}return{allPoints:o,runningLengths:w,initialWindowStart:0,initialWindowEnd:g,finalWindowStart:g+c,finalWindowEnd:i}})}getPlayheadPoints(){const{playhead:s}=this,l=this.getSlideByIndex(Math.floor(s)),h=this.animationStepCache.get(l.id);if(!h)return l.rawPoints;const I=Pt(s-Math.floor(s)),z=xe(h.initialWindowStart,h.finalWindowStart,I),k=xe(h.initialWindowEnd,h.finalWindowEnd,I),j=De(h.runningLengths,z),D=De(h.runningLengths,k,j),r=Math.min(j+1,h.allPoints.length),n=Math.min(D+1,h.allPoints.length),a=Math.max(D-1,0),f=h.allPoints[j].lerp(h.allPoints[r],se(h.runningLengths[j],h.runningLengths[r],z)),e=h.allPoints[D].lerp(h.allPoints[n],se(h.runningLengths[D],h.runningLengths[n],k));return[f,...h.allPoints.slice(r,a),e]}clearDocument(){this.store.clear(),this.ensureStoreIsReady()}newSlide(){const s=he.create({});this.store.insert(s),this.updateDocument(l=>({...l,slideIds:[...l.slideIds,s.id]})),this.updateSession(l=>({...l,slideId:s.id}))}changeSlide(s){const l=this.getSlide(s);this.updateSession(h=>({...h,slideId:l.id}))}onPointerDown(s){this.inputs.updateFromEvent(s),this.state.onPointerDown(s)}onPointerMove(s){this.inputs.updateFromEvent(s),this.state.onPointerMove(s)}onPointerUp(s){this.inputs.updateFromEvent(s),this.state.onPointerUp(s)}};[We]=st(Ee,[[L,3,"document"],[L,3,"session"],[L,3,"_slideStrokePointsCache"],[L,3,"playheadSpring"],[L,3,"animationStepCache"],[W,2,"clearDocument"],[W,2,"newSlide"],[W,2,"changeSlide"],[W,2,"onPointerDown"],[W,2,"onPointerMove"],[W,2,"onPointerUp"]],[]).e;let ve=Ee;function Ht(){const[p,s]=ne.useState(null),l=ht(p,pt),[h,I]=ne.useState(null);return ne.useEffect(()=>{const z=vt("lime.doc",Ve,()=>({})),k=new Nt(z),j=new ve(k);j.ticker.start(),I(j);const D=ft(1e3,()=>{gt("lime.doc",Ve,k.serialize("all"))}),r=k.listen(()=>{D()});return()=>{r(),D.cancel(),j.ticker.stop()}},[]),M.jsx("div",{ref:s,className:"absolute inset-0 touch-none select-none overflow-hidden",children:l&&h&&M.jsx(Ut,{size:l,lime:h})})}const Ut=G(function({size:s,lime:l}){return ne.useEffect(()=>{l.viewport.screenSize=s},[s,l]),M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"absolute top-0 left-0 h-full w-[200px] bg-stone-50 flex p-4 gap-4 flex-col overflow-auto shadow-lg",children:[l.state.toDebugString(),l.document.slideIds.map(h=>M.jsx(Xt,{lime:l,slideId:h,isActive:l.session.slideId===h},h)),M.jsx(ke,{className:"flex-none",onClick:()=>l.newSlide(),children:"+"}),M.jsx(ke,{onClick:()=>l.clearDocument(),className:"mt-auto flex-none",children:"reset"})]}),M.jsx(Zt,{lime:l}),M.jsxs("div",{className:"absolute top-0 left-[200px] flex gap-4",children:[M.jsxs("label",{className:"gap-2 flex",children:["slop",M.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:l.session.tweenBezierControl,onChange:h=>l.updateSession(I=>({...I,tweenBezierControl:h.currentTarget.valueAsNumber}))}),l.session.tweenBezierControl]}),M.jsxs("label",{className:"gap-2 flex",children:["speed",M.jsx("input",{type:"range",min:"100",max:"2000",step:"1",value:l.session.speed,onChange:h=>l.updateSession(I=>({...I,speed:h.currentTarget.valueAsNumber}))}),l.session.speed]})]})]})}),Xt=G(function({lime:s,slideId:l,isActive:h}){return M.jsx("div",{className:Et("w-full aspect-video ring-1 rounded relative ring-stone-200 flex-none ",h&&"ring-blue-500 ring-2"),onClick:()=>s.changeSlide(l),children:M.jsx("div",{className:"absolute inset-0 rounded overflow-hidden",children:M.jsx(ot,{scale:168/R.x,children:M.jsx(ct,{lime:s,slideId:l})})})})}),Zt=G(function({lime:s}){const{canvasSize:l,canvasOffset:h,slideSize:I,slideOffset:z,scaleFactor:k}=s.viewport,{slideId:j}=s.session;return s.document.slideIds[(s.document.slideIds.indexOf(j)+1)%s.document.slideIds.length],M.jsx("div",{className:"absolute bg-stone-100",style:{width:l.x,height:l.y,left:h.x,top:h.y},onPointerDown:D=>s.onPointerDown(D.nativeEvent),onPointerMove:D=>s.onPointerMove(D.nativeEvent),onPointerUp:D=>s.onPointerUp(D.nativeEvent),children:M.jsx("div",{className:"absolute rounded-lg shadow-md overflow-hidden",style:{width:I.x,height:I.y,left:z.x,top:z.y},children:M.jsx(ot,{scale:k,children:s.state.child.name==="drawing"?M.jsx(ct,{lime:s,slideId:s.session.slideId}):M.jsx(qt,{lime:s})})})})}),ot=G(function({scale:s,children:l}){return M.jsx("div",{style:{width:R.x,height:R.y,transform:`scale(${s})`},className:"absolute origin-top-left bg-white overflow-hidden",children:l})}),ct=G(function({lime:s,slideId:l}){const h=s.getSlideStrokePoints(l);if(!h.length)return null;const I=Xe(h,ie);return M.jsx("svg",{className:"absolute inset-0",viewBox:`0 0 ${R.x} ${R.y}`,width:R.x,height:R.y,children:M.jsx("path",{d:Ze(I),className:"fill-stone-600"})})}),qt=G(function({lime:s}){const l=s.getPlayheadPoints(),h=Ue(l,ie),I=Xe(h,ie);return M.jsx("svg",{className:"absolute inset-0",viewBox:`0 0 ${R.x} ${R.y}`,width:R.x,height:R.y,children:M.jsx("path",{d:Ze(I),className:"fill-stone-600"})})}),Gt=J(document.getElementById("root"),'Assertion Error: document.getElementById("root")');dt(Gt).render(M.jsx(Ht,{}));
