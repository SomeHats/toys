parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"N6d1":[function(require,module,exports) {
"use strict";var r=this&&this.__awaiter||function(r,t,n,e){return new(n||(n=Promise))(function(o,i){function u(r){try{f(e.next(r))}catch(t){i(t)}}function a(r){try{f(e.throw(r))}catch(t){i(t)}}function f(r){var t;r.done?o(r.value):(t=r.value,t instanceof n?t:new n(function(r){r(t)})).then(u,a)}f((e=e.apply(r,t||[])).next())})},t=this&&this.__generator||function(r,t){var n,e,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,e&&(o=2&i[0]?e.return:i[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,i[1])).done)return o;switch(e=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,e=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(r,u)}catch(a){i=[6,a],e=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},n=this&&this.__values||function(r){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&r[t],e=0;if(n)return n.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},e=this&&this.__read||function(r,t){var n="function"==typeof Symbol&&r[Symbol.iterator];if(!n)return r;var e,o,i=n.call(r),u=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)u.push(e.value)}catch(a){o={error:a}}finally{try{e&&!e.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};function o(r,t){for(var n=[],e=0;e<r;e++)n.push(t(e));return n}function i(r,t,n){return(t-r)*n+r}function u(r,t,n){return(n-r)/(t-r)}function a(r,t,n){return Math.min(t,Math.max(r,n))}function f(r,t,n){var e=t-r;for(n-=r;n<0;)n+=e;return r+(n%=e)}function c(r,t,n,e,o){return i(n,e,u(r,t,o))}function l(r,t){return"number"==typeof t?i(r,t,Math.random()):i(0,r,Math.random())}function s(r,t){return Math.floor(l(r,t))}function p(r,t){return l(r-t,r+t)}function h(r,t){return p(r,r*t)}function y(r){return r[Math.floor(l(r.length))]}function x(r){return r.reduce(function(r,t){return r.concat(t)},[])}function m(r){return Array.from(new Set(r))}function v(r,t){var e,o,i=new Set(r),u=new Set;try{for(var a=n(t),f=a.next();!f.done;f=a.next()){var c=f.value;i.has(c)&&u.add(c)}}catch(l){e={error:l}}finally{try{f&&!f.done&&(o=a.return)&&o.call(a)}finally{if(e)throw e.error}}return Array.from(u)}function d(){return"rgb("+Math.floor(l(256))+","+Math.floor(l(256))+","+Math.floor(l(256))+")"}function b(r,t){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}function w(){return new Promise(function(r){window.requestAnimationFrame(function(){return r()})})}function M(r){return new Promise(function(t){return setTimeout(function(){return t()},r)})}function g(n){return r(this,void 0,void 0,function(){return t(this,function(r){switch(r.label){case 0:return[4,w()];case 1:return r.sent(),n(),[3,0];case 2:return[2]}})})}function S(r){var t,o,i={};try{for(var u=n(r),a=u.next();!a.done;a=u.next()){var f=e(a.value,2),c=f[0],l=f[1];i[c]=l}}catch(s){t={error:s}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(t)throw t.error}}return i}function _(r){return r.filter(function(r){return null!=r})}function A(r){return f(-Math.PI,Math.PI,r)}function P(r,t,n){return Math.max(r,Math.min(t,n))}function k(r){for(var t,n=r.slice(),o=n.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));t=e([n[i],n[o]],2),n[o]=t[0],n[i]=t[1]}return n}function I(r){return void 0===r&&(r=""),""+r+Math.random().toString(36).slice(1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.times=o,exports.lerp=i,exports.invLerp=u,exports.constrain=a,exports.constrainWrapped=f,exports.mapRange=c,exports.random=l,exports.randomInt=s,exports.varyAbsolute=p,exports.varyRelative=h,exports.sample=y,exports.flatten=x,exports.uniq=m,exports.intersection=v,exports.randomColor=d,exports.removeFromArray=b,exports.frame=w,exports.wait=M,exports.frameLoop=g,exports.fromEntries=S,exports.compact=_,exports.normalizeAngle=A,exports.clamp=P,exports.shuffle=k,exports.getId=I;
},{}],"qFdD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../utils"),e=function(){function e(t,e){this.x=t,this.y=e}return e.fromPolar=function(t,n){return new e(n*Math.cos(t),n*Math.sin(t))},e.average=function(t){return t.reduce(function(t,e){return t.add(e)},e.ZERO).div(t.length)},e.prototype.toString=function(){return"Vector2("+this.x+", "+this.y+")"},Object.defineProperty(e.prototype,"magnitudeSquared",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.sqrt(this.magnitudeSquared)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return Math.atan2(this.y,this.x)},enumerable:!0,configurable:!0}),e.prototype.isInPolygon=function(t){for(var e=this.x,n=this.y,r=!1,o=0,i=t.length-1;o<t.length;i=o++){var u=t[o],h=u.x,s=u.y,a=t[i],y=a.x,p=a.y;s>n!=p>n&&e<(y-h)*(n-s)/(p-s)+h&&(r=!r)}return r},e.prototype.equals=function(t){return this===t||this.x===t.x&&this.y===t.y},e.prototype.distanceTo=function(t){var e=t.x,n=t.y,r=e-this.x,o=n-this.y;return Math.sqrt(r*r+o*o)},e.prototype.angleTo=function(t){return t.sub(this).angle},e.prototype.angleBetween=function(e){return t.normalizeAngle(Math.atan2(e.y,e.x)-Math.atan2(this.y,this.x))},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.div=function(t){return new e(this.x/t,this.y/t)},e.prototype.scale=function(t){return new e(this.x*t,this.y*t)},e.prototype.negate=function(){return this.scale(-1)},e.prototype.add=function(t){var n=t.x,r=t.y;return new e(this.x+n,this.y+r)},e.prototype.sub=function(t){var n=t.x,r=t.y;return new e(this.x-n,this.y-r)},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e.prototype.ceil=function(){return new e(Math.ceil(this.x),Math.ceil(this.y))},e.prototype.round=function(){return new e(Math.round(this.x),Math.round(this.y))},e.prototype.withMagnitude=function(t){return e.fromPolar(this.angle,t)},e.prototype.withAngle=function(t){return e.fromPolar(t,this.magnitude)},e.prototype.rotate=function(t){return this.withAngle(this.angle+t)},e.prototype.lerp=function(n,r){return new e(t.lerp(this.x,n.x,r),t.lerp(this.y,n.y,r))},e.ZERO=new e(0,0),e}();exports.default=e;
},{"../utils":"N6d1"}],"dFS9":[function(require,module,exports) {
"use strict";var t=this&&this.__values||function(t){var o="function"==typeof Symbol&&Symbol.iterator,i=o&&t[o],e=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=o(require("./geom/Vector2")),e="magenta",r=new i.default(5,0),n=3,s=.5,l=.75*Math.PI,h=5,a=function(){function o(t){this.ctx=t}return o.prototype.clear=function(t){t||this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.applyFillOptions({fill:t}),this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},o.prototype.beginPath=function(){this.ctx.beginPath()},o.prototype.moveTo=function(t){var o=t.x,i=t.y;this.ctx.moveTo(o,i)},o.prototype.lineTo=function(t){var o=t.x,i=t.y;this.ctx.lineTo(o,i)},o.prototype.arc=function(t,o,i,e,r){var n=t.x,s=t.y;this.ctx.arc(n,s,o,i,e,r)},o.prototype.arcTo=function(t,o,i){this.ctx.arcTo(t.x,t.y,o.x,o.y,i)},o.prototype.applyStrokeOptions=function(t){var o=t.strokeWidth,i=void 0===o?1:o,e=t.stroke,r=void 0===e?void 0:e,n=t.strokeCap,s=void 0===n?"butt":n,l=t.strokeDash,h=void 0===l?[]:l,a=t.strokeDashOffset,p=void 0===a?0:a;r&&(this.ctx.lineWidth=i,this.ctx.strokeStyle=r,this.ctx.lineCap=s,this.ctx.setLineDash(h),this.ctx.lineDashOffset=p)},o.prototype.stroke=function(t){t.stroke&&(this.applyStrokeOptions(t),this.ctx.stroke())},o.prototype.applyFillOptions=function(t){var o=t.fill,i=void 0===o?void 0:o;i&&(this.ctx.fillStyle=i)},o.prototype.fill=function(t){t.fill&&(this.applyFillOptions(t),this.ctx.fill())},o.prototype.applyStrokeAndFillOptions=function(t){this.applyFillOptions(t),this.applyStrokeOptions(t)},o.prototype.strokeAndFill=function(t){this.fill(t),this.stroke(t)},o.prototype.getDebugStrokeOptions=function(t){return void 0===t&&(t=e),{stroke:t,strokeWidth:s}},o.prototype.debugStroke=function(t){void 0===t&&(t=e),this.stroke(this.getDebugStrokeOptions(t))},o.prototype.fillText=function(t,o,i){void 0===i&&(i={}),this.applyFillOptions(i),this.ctx.fillText(t,o.x,o.y)},o.prototype.circle=function(t,o,i){this.beginPath(),this.arc(t,o,0,2*Math.PI),this.strokeAndFill(i)},o.prototype.debugLabel=function(t,o,i){t&&(this.applyFillOptions({fill:i}),this.fillText(t,o.add(r)))},o.prototype.debugPointX=function(t,o){var i=void 0===o?{}:o,r=i.color,l=void 0===r?e:r,h=i.label,a=void 0===h?void 0:h;this.debugLabel(a,t,l),this.beginPath(),this.ctx.moveTo(t.x-n,t.y-n),this.ctx.lineTo(t.x+n,t.y+n),this.ctx.moveTo(t.x+n,t.y-n),this.ctx.lineTo(t.x-n,t.y+n),this.stroke({strokeWidth:s,stroke:l})},o.prototype.debugPointO=function(t,o){var i=void 0===o?{}:o,r=i.color,l=void 0===r?e:r,h=i.label,a=void 0===h?void 0:h;this.debugLabel(a,t,l),this.circle(t,n,{strokeWidth:s,stroke:l})},o.prototype.debugArrow=function(t,o,r){var n=void 0===r?{}:r,a=n.color,p=void 0===a?e:a,c=n.label,d=void 0===c?void 0:c;this.debugLabel(d,i.default.average([t,o]),p),this.ctx.beginPath(),this.moveTo(t),this.lineTo(o);var u=o.sub(t),v=u.rotate(-l).withMagnitude(h).add(o),f=u.rotate(+l).withMagnitude(h).add(o);this.moveTo(v),this.lineTo(o),this.lineTo(f),this.stroke({strokeWidth:s,stroke:p})},o.prototype.debugVectorAtPoint=function(t,o,i){this.debugArrow(o,o.add(t),i)},o.prototype.polygon=function(o,i){var e,r;void 0===i&&(i={}),this.beginPath(),this.moveTo(o[o.length-1]);try{for(var n=t(o),s=n.next();!s.done;s=n.next()){var l=s.value;this.lineTo(l)}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}this.strokeAndFill(i)},o.prototype.debugPolygon=function(t,o){var i=void 0===o?{}:o,r=i.color,n=void 0===r?e:r,s=i.label,l=void 0===s?void 0:s;this.debugLabel(l,t[0],n),this.polygon(t,this.getDebugStrokeOptions(n))},o}();exports.DebugDraw=a;
},{"./geom/Vector2":"qFdD"}],"ciXR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../lib/DebugCanvas");exports.canvasEl=document.createElement("canvas"),exports.ctx=exports.canvasEl.getContext("2d"),exports.width=document.body.clientWidth,exports.height=document.body.clientHeight,exports.scale=window.devicePixelRatio,exports.canvasEl.width=exports.width*exports.scale,exports.canvasEl.height=exports.height*exports.scale,exports.canvasEl.style.width=exports.width+"px",exports.canvasEl.style.height=exports.height+"px",exports.ctx.scale(exports.scale,exports.scale),exports.canvas=new e.DebugDraw(exports.ctx),document.body.appendChild(exports.canvasEl);
},{"../lib/DebugCanvas":"dFS9"}],"amab":[function(require,module,exports) {
"use strict";var i=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(exports,"__esModule",{value:!0});var o=i(require("../lib/geom/Vector2")),e=require("../lib/utils");function t(i,t,n){for(var l,r,d,u,v,a,s,p,f,g,h,c,_=i*Math.sqrt(3)/2,b=[],m=[],I=0;I*_<n+_;I++){var M=[];b.push(M);var q=[];m.push(q);for(var x=0;x*i<t+i;x++){var w=I%2==0?-i/2:0,y=new o.default(x*i+w,I*_);if(M.push(y),0!==I&&0!==x)if(I%2==0){var P={id:e.getId("triangle"),points:[y,b[I][x-1],b[I-1][x-1]]},j={id:e.getId("triangle"),points:[y,b[I-1][x-1],b[I-1][x]]};q.push(P,j)}else if(b[I-1][x+1]){P={id:e.getId("triangle"),points:[y,b[I][x-1],b[I-1][x]]},j={id:e.getId("triangle"),points:[y,b[I-1][x+1],b[I-1][x]]};q.push(P,j)}}}var D=new Map;for(I=0;I<m.length;I++){var O=function(i){var t=m[I][i],n=o.default.average(t.points),_=e.compact(i%2==0?I%2==0?[null===(l=m[I])||void 0===l?void 0:l[i-1],null===(r=m[I])||void 0===r?void 0:r[i+1],null===(d=m[I+1])||void 0===d?void 0:d[i-1]]:[null===(u=m[I])||void 0===u?void 0:u[i-1],null===(v=m[I])||void 0===v?void 0:v[i+1],null===(a=m[I+1])||void 0===a?void 0:a[i+1]]:I%2==0?[null===(s=m[I])||void 0===s?void 0:s[i-1],null===(p=m[I])||void 0===p?void 0:p[i+1],null===(f=m[I-1])||void 0===f?void 0:f[i-1]]:[null===(g=m[I])||void 0===g?void 0:g[i-1],null===(h=m[I])||void 0===h?void 0:h[i+1],null===(c=m[I-1])||void 0===c?void 0:c[i+1]]),b=t;b.center=n,b.neighbours=_.map(function(i){return{triangle:i,sharedPoints:e.intersection(t.points,i.points)}}),b.ix=i,b.iy=I,D.set(b.id,b)};for(x=0;x<m[I].length;x++)O(x)}return D}exports.default=t;
},{"../lib/geom/Vector2":"qFdD","../lib/utils":"N6d1"}],"vkvk":[function(require,module,exports) {
"use strict";function r(r,e){if(!r)throw new Error(e||"Assertion Error")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=r;
},{}],"xRMf":[function(require,module,exports) {
"use strict";var r,e,t=this&&this.__read||function(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var n,a,i=t.call(r),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o},n=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(t(arguments[e]));return r},a=this&&this.__values||function(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./canvas"),l=require("../lib/utils"),u=i(require("../lib/createTriangleGrid")),s=require("../lib/assert"),c=15,f=Math.PI*c/6,h=u.default(c,o.width,o.height),v=new Set,d=function(){for(var r=[],e=l.sample(n(h.values()).filter(function(r){return!v.has(r)})),t=(n(h.values()),0);t<40;t++){r.push(e),v.add(e);var a=e.neighbours.map(function(r){return r.triangle}).filter(function(r){return!v.has(r)});if(!a.length)break;e=l.sample(a)}return{triangles:r}},y=[],b=o.width/c*(o.height/c)*.01;console.log({snakeCount:b});for(var p=0;p<b;p++)y.push(d());o.canvas.clear("black");try{for(var g=a(y),_=g.next();!_.done;_=g.next()){var m=_.value.triangles;o.canvas.beginPath();for(var w=0;w<m.length;w++){var k=m[w],S=m[w-1],x=m[w+1];S?x?o.canvas.arcTo(k.center,x.center,c/2-.5):(s.assert(S),o.canvas.lineTo(k.center)):o.canvas.moveTo(k.center)}o.canvas.stroke({strokeWidth:c/3-.5,stroke:"white",strokeCap:"round"})}}catch(T){r={error:T}}finally{try{_&&!_.done&&(e=g.return)&&e.call(g)}finally{if(r)throw r.error}}
},{"./canvas":"ciXR","../lib/utils":"N6d1","../lib/createTriangleGrid":"amab","../lib/assert":"vkvk"}]},{},["xRMf"], null)
//# sourceMappingURL=https://alex.dytry.ch/toys/main.9afee477.js.map