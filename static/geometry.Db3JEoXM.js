var Y=n=>{throw TypeError(n)};var ee=(n,e,t)=>e.has(n)||Y("Cannot "+t);var L=(n,e,t)=>(ee(n,e,"read from private field"),t?t.call(n):e.get(n)),$=(n,e,t)=>e.has(n)?Y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),A=(n,e,t,c)=>(ee(n,e,"write to private field"),c?c.call(n,t):e.set(n,t),t);import{d as pe,g as me}from"./chunk_utils.CSiPn6yw.js";/* empty css                       */import{j as d,c as ge}from"./chunk_client.CotzxIPX.js";import{S as de}from"./chunk_svgPathBuilder.tqI_yD_n.js";import{C as te}from"./chunk_Circle.DdRZmdDC.js";import{V as R}from"./chunk_Vector2.BFoa__dl.js";import{u as ve}from"./chunk_useGestureDetector.Drc08ScY.js";import{r as Z}from"./chunk_signia.CiYxQewG.js";import{t as k}from"./chunk_theme.DQE7OmCU.js";import{t as J}from"./chunk_index.X4Vi_3QD.js";import{r as S}from"./chunk_index.C5eOxiyT.js";import{a as xe}from"./chunk_easings.DXpt33Pz.js";import{D as ye}from"./chunk_guides.DxAroGe8.js";import{a as be,b as we}from"./chunk_useResizeObserver.DnDEPOOq.js";import{B as je}from"./chunk_Button.KyMowPGE.js";import{c as Te}from"./chunk_index.ZX3Pv0I0.js";import{a as ke}from"./chunk_Ticker.CEO2j8_2.js";import{b as Ee}from"./chunk_assert.pxkjFBOg.js";import{c as Pe,R as Ce}from"./chunk_index.j-hgoUDg.js";import"./chunk_AABB.CekZtYjv.js";import"./chunk_Line2.BnGSeyu4.js";import"./chunk_RingBuffer.ClstRnzI.js";import"./chunk__commonjsHelpers.Cpj98o6Y.js";import"./chunk_ResizeObserver.C8OzoCMD.js";import"./chunk_useMergedRefs.MPIvL6fk.js";import"./chunk_EventEmitter.BsO-_0un.js";const fe={x(n,e=5){return new de().moveTo(n.add(e,e)).lineTo(n.add(-e,-e)).moveTo(n.add(-e,e)).lineTo(n.add(e,-e)).toString()}};let re,ne,ie,ce,oe,se;function De(){function n(l,s){return function(u){(function(a,r){if(a.v)throw Error("attempted to call addInitializer after decoration was finished")})(s),c(u,"An initializer"),l.push(u)}}function e(l,s){if(!l(s))throw new TypeError("Attempted to access private element on non-instance")}function t(l,s,u,a,r,m,h,T,v){var i;switch(r){case 1:i="accessor";break;case 2:i="method";break;case 3:i="getter";break;case 4:i="setter";break;default:i="field"}var o,b,f={kind:i,name:h?"#"+s:Se(s),static:m,private:h},j={v:!1};if(r!==0&&(f.addInitializer=n(a,j)),h||r!==0&&r!==2)if(r===2)o=function(g){return e(v,g),u.value};else{var x=r===0||r===1;(x||r===3)&&(o=h?function(g){return e(v,g),u.get.call(g)}:function(g){return u.get.call(g)}),(x||r===4)&&(b=h?function(g,E){e(v,g),u.set.call(g,E)}:function(g,E){u.set.call(g,E)})}else o=function(g){return g[s]},r===0&&(b=function(g,E){g[s]=E});var P=h?v.bind():function(g){return s in g};f.access=o&&b?{get:o,set:b,has:P}:o?{get:o,has:P}:{set:b,has:P};try{return l(T,f)}finally{j.v=!0}}function c(l,s){if(typeof l!="function")throw new TypeError(s+" must be a function")}function p(l,s){var u=typeof s;if(l===1){if(u!=="object"||s===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");s.get!==void 0&&c(s.get,"accessor.get"),s.set!==void 0&&c(s.set,"accessor.set"),s.init!==void 0&&c(s.init,"accessor.init")}else if(u!=="function")throw new TypeError((l===0?"field":l===10?"class":"method")+" decorators must return a function or void 0")}function y(l){return function(s){l(this,s)}}function w(l,s,u,a,r,m,h,T,v){var i,o,b,f,j,x,P,g,E=u[0];if(h?(r===0||r===1?(i={get:(j=u[3],function(){return j(this)}),set:y(u[4])},b="get"):r===3?(i={get:u[3]},b="get"):r===4?(i={set:u[3]},b="set"):i={value:u[3]},r!==0&&(r===1&&ae(i.set,"#"+a,"set"),ae(i[b||"value"],"#"+a,b))):r!==0&&(i=Object.getOwnPropertyDescriptor(s,a)),r===1?f={get:i.get,set:i.set}:r===2?f=i.value:r===3?f=i.get:r===4&&(f=i.set),typeof E=="function")(x=t(E,a,i,T,r,m,h,f,v))!==void 0&&(p(r,x),r===0?o=x:r===1?(o=x.init,P=x.get||f.get,g=x.set||f.set,f={get:P,set:g}):f=x);else for(var B=E.length-1;B>=0;B--){var C;(x=t(E[B],a,i,T,r,m,h,f,v))!==void 0&&(p(r,x),r===0?C=x:r===1?(C=x.init,P=x.get||f.get,g=x.set||f.set,f={get:P,set:g}):f=x,C!==void 0&&(o===void 0?o=C:typeof o=="function"?o=[o,C]:o.push(C)))}if(r===0||r===1){if(o===void 0)o=function(_,D){return D};else if(typeof o!="function"){var H=o;o=function(_,D){for(var Q=D,U=0;U<H.length;U++)Q=H[U].call(_,Q);return Q}}else{var he=o;o=function(_,D){return he.call(_,D)}}l.push(o)}r!==0&&(r===1?(i.get=f.get,i.set=f.set):r===2?i.value=f:r===3?i.get=f:r===4&&(i.set=f),h?r===1?(l.push(function(_,D){return f.get.call(_,D)}),l.push(function(_,D){return f.set.call(_,D)})):r===2?l.push(f):l.push(function(_,D){return f.call(_,D)}):Object.defineProperty(s,a,i))}function M(l,s,u){for(var a,r,m,h=[],T=new Map,v=new Map,i=0;i<s.length;i++){var o=s[i];if(Array.isArray(o)){var b,f,j=o[1],x=o[2],P=o.length>3,g=j>=5,E=u;if(g?(b=l,(j-=5)!=0&&(f=r=r||[]),P&&!m&&(m=function(H){return _e(H)===l}),E=m):(b=l.prototype,j!==0&&(f=a=a||[])),j!==0&&!P){var B=g?v:T,C=B.get(x)||0;if(C===!0||C===3&&j!==4||C===4&&j!==3)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+x);!C&&j>2?B.set(x,j):B.set(x,!0)}w(h,b,o,x,j,g,P,f,E)}}return O(h,a),O(h,r),h}function O(l,s){s&&l.push(function(u){for(var a=0;a<s.length;a++)s[a].call(u);return u})}return function(l,s,u,a){return{e:M(l,s,a),get c(){return function(r,m){if(m.length>0){for(var h=[],T=r,v=r.name,i=m.length-1;i>=0;i--){var o={v:!1};try{var b=m[i](T,{kind:"class",name:v,addInitializer:n(h,o)})}finally{o.v=!0}b!==void 0&&(p(10,b),T=b)}return[T,function(){for(var f=0;f<h.length;f++)h[f].call(T)}]}}(l,u)}}}}function X(n,e,t,c){return(X=De())(n,e,t,c)}function Se(n){var e=Me(n,"string");return typeof e=="symbol"?e:e+""}function Me(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var c=t.call(n,e);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function ae(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function _e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}const K=10;var I,W;const V=class V{constructor({x:e=0,y:t=0,r:c=100,color:p=k.fuchsia500}={}){$(this,I);$(this,W);A(this,I,(re(this),ne(this))),A(this,W,ie(this)),this.gestures={onDragStart:y=>{const w=R.fromEvent(y);if(this.getDistanceToCenter(w)<this.getDistanceToEdge(w)){const l=w.sub(this.circle.center);return{couldBeTap:!1,pointerCapture:!0,onCancel:()=>{},onMove:s=>{this.circle=new te(R.fromEvent(s).sub(l),this.circle.radius)},onEnd:()=>{}}}const M=w.sub(this.circle.center),O=M.withMagnitude(this.circle.radius).sub(M);return{couldBeTap:!1,pointerCapture:!0,onCancel:()=>{},onMove:l=>{this.circle=this.circle.withRadius(R.fromEvent(l).add(O).distanceTo(this.circle.center))},onEnd:()=>{}}}},this.circle=te.create(e,t,c),this.color=p}get circle(){return L(this,I)}set circle(e){A(this,I,e)}get color(){return L(this,W)}set color(e){A(this,W,e)}getDistanceToEdge(e){return Math.abs(this.circle.center.distanceTo(e)-this.circle.radius)}getDistanceToCenter(e){return this.circle.center.distanceTo(e)}distanceTo(e){return Math.min(this.getDistanceToCenter(e),this.getDistanceToEdge(e))}render(e){return d.jsx(V.Component,{geo:this,...e})}};I=new WeakMap,W=new WeakMap,[ne,ie,re]=X(V,[[Z,1,"circle"],[Z,1,"color"]],[]).e,V.Component=J(function({geo:t,isHovered:c,cursor:p}){const y=t.getDistanceToCenter(p)<t.getDistanceToEdge(p);return d.jsxs(d.Fragment,{children:[c&&y&&d.jsx("circle",{cx:t.circle.center.x,cy:t.circle.center.y,r:K,fill:k.sky400,opacity:.5}),c&&!y&&d.jsx("circle",{cx:t.circle.center.x,cy:t.circle.center.y,r:t.circle.radius,fill:"none",strokeWidth:K,stroke:k.sky400,opacity:.5}),d.jsx("circle",{cx:t.circle.center.x,cy:t.circle.center.y,r:2,fill:t.color}),d.jsx("circle",{cx:t.circle.center.x,cy:t.circle.center.y,r:t.circle.radius,fill:"none",stroke:t.color,strokeWidth:3})]})});let z=V;var F,N;const q=class q{constructor({x:e=0,y:t=0,color:c=k.fuchsia500}={}){$(this,F);$(this,N);A(this,F,(ce(this),oe(this))),A(this,N,se(this)),this.gestures={onDragStart:p=>{const w=R.fromEvent(p).sub(this.point);return{couldBeTap:!1,pointerCapture:!0,onCancel:()=>{},onMove:M=>{this.point=R.fromEvent(M).sub(w)},onEnd:()=>{}}}},this.point=new R(e,t),this.color=c}get point(){return L(this,F)}set point(e){A(this,F,e)}get color(){return L(this,N)}set color(e){A(this,N,e)}distanceTo(e){return this.point.distanceTo(e)}render(e){return d.jsx(q.Component,{geo:this,...e})}};F=new WeakMap,N=new WeakMap,[oe,se,ce]=X(q,[[Z,1,"point"],[Z,1,"color"]],[]).e,q.Component=J(function({geo:t,isHovered:c}){return d.jsxs(d.Fragment,{children:[c&&d.jsx("circle",{cx:t.point.x,cy:t.point.y,r:K,fill:k.sky400,opacity:.5}),d.jsx("path",{d:fe.x(t.point),strokeWidth:3,stroke:t.color})]})});let le=q;const Re=J(function({size:e,shapes:t,below:c,above:p}){const y=S.useRef(null),[w,M]=S.useState(R.ZERO),[O,l]=S.useState(null),[s,u]=S.useState(R.ZERO);S.useLayoutEffect(()=>{if(!y.current)return;const v=y.current.getBoundingClientRect(),i=new R(v.left,v.top);M(o=>o.equals(i)?o:i)}),S.useEffect(()=>{const v=i=>{const o=R.fromEvent(i);u(b=>b.equals(o)?b:o)};return window.addEventListener("pointermove",v),()=>window.removeEventListener("pointermove",v)},[]);let a=null,r=1/0;for(const[v,i]of Object.entries(t)){const o=i.distanceTo(s);o<r&&(r=o,a=v)}const m=a&&r<K?t[a]:null,{isGestureInProgress:h,events:T}=ve({onDragStart:v=>m!=null&&m.gestures.onDragStart?(l(m),m.gestures.onDragStart(v)):null});return S.useEffect(()=>{h||l(null)}),d.jsx("svg",{ref:y,width:e.x,height:e.y,viewBox:`${w.x} ${w.y} ${e.x} ${e.y}`,...T,children:d.jsxs("g",{strokeLinecap:"round",strokeLinejoin:"round",children:[c,Object.entries(t).map(([v,i])=>d.jsx(S.Fragment,{children:i.render({isHovered:h?O===i:m===i,isGestureInProgress:h&&O===i,cursor:s})},v)),p]})})}),Oe="Circle goops",Ae=J(function({size:e}){const[t]=S.useState({a:new z({x:400,y:400,r:100,color:k.fuchsia300}),b:new z({x:600,y:600,r:50,color:k.fuchsia300})}),{a:c,b:p}=t,y=p.circle.center.sub(c.circle.center),w=c.circle.center.add(y.withMagnitude(c.circle.radius)),M=p.circle.center.sub(y.withMagnitude(p.circle.radius)),O=y.magnitude()+c.circle.radius+p.circle.radius,l=y.magnitude()**2/(c.circle.radius+p.circle.radius)/Math.PI,u=pe(O,l,xe(me((y.magnitude()-(c.circle.radius+p.circle.radius))/((c.circle.radius+p.circle.radius)*1)))),a=c.circle.withRadius(u+c.circle.radius).intersectWithCircle(p.circle.withRadius(u+p.circle.radius)),r=(()=>{if(!a||a.length!==2)return null;const m={center:a[0],startPoint:c.circle.center.sub(a[0]).withMagnitude(u).add(a[0]),endPoint:p.circle.center.sub(a[0]).withMagnitude(u).add(a[0])},h={center:a[1],startPoint:c.circle.center.sub(a[1]).withMagnitude(u).add(a[1]),endPoint:p.circle.center.sub(a[1]).withMagnitude(u).add(a[1])};return new de().moveTo(m.startPoint).counterClockwiseArcTo(m.center,m.endPoint).clockwiseArcTo(p.circle.center,h.endPoint).counterClockwiseArcTo(h.center,h.startPoint).clockwiseArcTo(c.circle.center,m.startPoint).toString()})();return d.jsx(Re,{shapes:t,size:e,above:r&&d.jsx("path",{d:r,stroke:k.fuchsia500,strokeWidth:3,fill:"none"}),below:d.jsxs(d.Fragment,{children:[d.jsx(ye,{from:w,to:M}),d.jsx("circle",{cx:c.circle.center.x,cy:c.circle.center.y,r:u+c.circle.radius,fill:"none",strokeWidth:2,strokeDasharray:"0 4",stroke:k.purple300}),d.jsx("circle",{cx:p.circle.center.x,cy:p.circle.center.y,r:u+p.circle.radius,fill:"none",strokeWidth:2,strokeDasharray:"0 4",stroke:k.purple300}),a==null?void 0:a.map((m,h)=>d.jsxs(S.Fragment,{children:[d.jsx("path",{d:fe.x(m),strokeWidth:2,stroke:h===0?k.amber500:k.green500},h),d.jsx("circle",{cx:m.x,cy:m.y,r:u,fill:"none",strokeWidth:2,stroke:h===0?k.amber300:k.green300,strokeDasharray:"0 4"})]},h))]})})}),Be=Object.freeze(Object.defineProperty({__proto__:null,default:Ae,name:Oe},Symbol.toStringTag,{value:"Module"}));function ue({entries:n,current:e}){const[t,c]=S.useState(null),p=be(t,we);return d.jsxs("div",{className:"absolute inset-0 flex bg-stone-100 p-3 gap-3",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("h1",{className:"font-bold tracking-wide text-stone-600 text-center",children:"geometries"}),d.jsx("div",{children:n.map(y=>{const w=y.id===e.id;return d.jsx(je,{href:`#/${y.id}`,className:Te(w&&"pointer-events-none bg-gradient-to-br from-fuchsia-500 to-violet-500 !text-white"),children:y.name},y.id)})})]}),d.jsx("div",{className:"relative flex-auto touch-none bg-white rounded-lg",ref:c,children:p&&d.jsx(e.component,{size:p})})]})}const Ie=Object.assign({"./experiments/circle-goops.tsx":Be}),G=Object.entries(Ie).map(([n,e])=>{const t=n.slice(14,-4);return{id:t,component:e.default,name:e.name||t}});console.log(G);const We=Pe([...G.map(n=>({path:`/${n.id}`,element:d.jsx(ue,{entries:G,current:n})})),{path:"*",element:d.jsx(ue,{entries:G,current:G[0]})}]),Fe=Ee(document.getElementById("root"),'Assertion Error: document.getElementById("root")');ge(Fe).render(d.jsx(ke,{children:d.jsx(Ce,{router:We})}));
