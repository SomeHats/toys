var an=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var F=(e,t,n)=>(an(e,t,"read from private field"),n?n.call(e):t.get(e)),fe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},he=(e,t,n,r)=>(an(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{t as me,s as Ir,O as Bt,k as Er,h as ln,g as En,a as A,P as ge,b as We,l as kn,f as Ve,Q as un,F as kr,E as kt,H as Cn,c as R,R as Oe,r as cn,S as Cr}from"./chunk_assert.7b44d50d.js";/* empty css                       */import{r as y,s as ft,a as Tr,R as C}from"./chunk_index.f8703814.js";import{e as Ct,d as et,u as Ut,b as B,m as Or,a as Tn,f as Dr,g as Tt,s as Nr,c as zr}from"./chunk_theme.ed3a9568.js";import{b as Lr,R as Ot,P as $r,d as Ar,c as de,V as E,a as Mr,e as ht,f as Fr,g as _r,p as Rr,h as Vr}from"./chunk_Vector2.d99b02af.js";import{A as On}from"./chunk_AABB.eaf75ebd.js";import{j as p,c as j,F as le,a as V}from"./chunk_jsx-runtime.f048a94d.js";import{E as Br}from"./chunk_EventEmitter.98e574a6.js";import"./chunk__commonjsHelpers.a57272ec.js";const jt=300,Ur=30,jr=500,Hr=10,Be={size:16,streamline:.5,smoothing:.5,thinning:.5,simulatePressure:!0,easing:e=>e,start:{},end:{},last:!1},Kr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("");class at{constructor(t,n=16){this.randomLength=n,this.debugIdCounter=0,this.prefix=t,this.Id=`${t}.SAMPLE`;const r=new RegExp(`^${this.prefix}\\.([a-zA-Z0-9_]+)$`);this.parse=Lr(Ar,o=>r.test(o)?Ot.ok(o):Ot.error(new $r(`Expected ${this.prefix}.*, got ${o}`,[])))}generate(){const t=me(this.randomLength,()=>Ir(Kr)).join("");return`${this.prefix}.${t}`}}const Me=new at("key"),Wr=de({id:Me.parse,position:E.parse}),Fe=new at("shp"),qr=de({id:Fe.parse}),Ht=new at("shv"),Zr=de({id:Ht.parse,keyPointId:Me.parse,shapeId:Fe.parse,rawPoints:Mr(E.parse)}),Dn=new at("doc"),Nn=de({id:Dn.parse,keyPoints:ht(Me.parse,Wr),shapes:ht(Fe.parse,qr),shapeVersions:ht(Ht.parse,Zr)});function Jr(){return{id:Dn.generate(),keyPoints:{},shapes:{},shapeVersions:{}}}class ne{static fromArray(t){return new ne(Bt(t.map(n=>[n.id,n])))}constructor(t){this.data=t}count(){return Er(this.data).length}has(t){return ln(this.data,t)}getIfExists(t){return En(this.data,t)}get(t){const n=this.getIfExists(t);return A(n!=null,`Item with id ${t} not found`),n}insert(t){return new ne({...this.data,[t.id]:t})}update(t,n){const r=this.get(t),o=ge(r,n);return A(r.id===o.id),this.insert(o)}delete(t){const{[t]:n,...r}=this.data;return new ne(r)}*[Symbol.iterator](){for(const t in this.data)ln(this.data,t)&&(yield We(this.data[t]))}toJSON(){return this.data}}var ye,Se,Ne;const it=class{constructor(t,n,r,o){fe(this,ye,void 0);fe(this,Se,void 0);fe(this,Ne,void 0);this.index=t,he(this,ye,n),he(this,Se,r),he(this,Ne,o)}static build(t,n,r,o){const i=new Map;for(const s of t){const a=n(s);A(!i.has(a)),i.set(a,r(s))}return new it(i,n,r,o)}withIndex(t){return new it(t,F(this,ye),F(this,Se),F(this,Ne))}lookup(t){return this.index.get(F(this,Ne).call(this,t))}insert(t){const n=F(this,ye).call(this,t);A(!this.index.has(n),`key ${n} already exists in index`);const r=new Map(this.index);return r.set(n,F(this,Se).call(this,t)),this.withIndex(r)}remove(t){const n=F(this,ye).call(this,t);A(this.index.has(n),`key ${n} does not exist in index`);const r=new Map(this.index);return r.delete(n),this.withIndex(r)}update(t){const n=F(this,ye).call(this,t);A(this.index.has(n),`key ${n} does not exist in index`);const r=new Map(this.index);return r.set(n,F(this,Se).call(this,t)),this.withIndex(r)}toJSON(){return Bt(this.index)}};let Dt=it;ye=new WeakMap,Se=new WeakMap,Ne=new WeakMap;const Gr=new Set;var be,Ie,ze;const st=class{constructor(t,n,r,o){fe(this,be,void 0);fe(this,Ie,void 0);fe(this,ze,void 0);this.index=t,he(this,be,n),he(this,Ie,r),he(this,ze,o)}static build(t,n,r,o){const i=new Map;for(const s of t){const a=n(s);let u=i.get(a);u||(u=new Set,i.set(a,u)),u.add(r(s))}return new st(i,n,r,o)}withIndex(t){return new st(t,F(this,be),F(this,Ie),F(this,ze))}lookup(t){var n;return(n=this.index.get(F(this,ze).call(this,t)))!=null?n:Gr}insert(t){const n=F(this,be).call(this,t),r=F(this,Ie).call(this,t),o=this.index.get(n);let i;o?(A(!o.has(r),"already exists"),i=new Set(o)):i=new Set,i.add(r);const s=new Map(this.index);return s.set(n,i),this.withIndex(s)}remove(t){const n=F(this,be).call(this,t),r=F(this,Ie).call(this,t),o=this.index.get(n);A(o&&o.has(r),"value does not exist"),new Set(o).delete(r);const s=new Map(this.index);return s.delete(n),this.withIndex(s)}update(t,n){return this.remove(t).insert(n)}toJSON(){return Bt(this.index)}};let tt=st;be=new WeakMap,Ie=new WeakMap,ze=new WeakMap;const{min:ke,PI:Ts}=Math,yn=.275;function zn(e,t={}){const{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:s=v=>v,start:a={},end:u={}}=t,{easing:l=v=>v*(2-v)}=a,{easing:c=v=>--v*v*v+1}=u;if(e.length===0||n<=0)return[];const x=e[e.length-1].runningLength,h=a.taper===!1?0:a.taper===!0?Math.max(n,x):a.taper,m=u.taper===!1?0:u.taper===!0?Math.max(n,x):u.taper,d=Math.pow(n*r,2),f=[];let g=e.slice(0,10).reduce((v,I)=>{let z=I.pressure;if(i){const N=ke(1,I.distance/n),L=ke(1,1-N);z=ke(1,v+(L-v)*(N*yn))}return(v+z)/2},e[0].pressure),b=xn(n,o,e[e.length-1].pressure,s),w=e[0].point,S=w;for(let v=0;v<e.length;v++){let{pressure:I}=e[v];const{point:z,distance:N,runningLength:L}=e[v];if(v<e.length-1&&x-L<3)continue;if(o){if(i){const D=ke(1,N/n),U=ke(1,1-D);I=ke(1,g+(U-g)*(D*yn))}b=xn(n,o,I,s)}else b=n/2;const P=L<h?l(L/h):1,T=x-L<m?c((x-L)/m):1;if(b=Math.max(.01,b*Math.min(P,T)),v===e.length-1){f.push({center:z,radius:b});continue}S=z,(v<=1||w.distanceToSq(S)>d)&&(f.push({center:z,radius:b}),w=S),g=I}return f}function Ln(e,t={}){var h,m;const{streamline:n=.5,size:r=16,last:o=!1}=t;if(e.length===0)return[];const i=.15+(1-n)*.85;let s=e.map(d=>({point:E.fromVectorLike(d),pressure:d.pressure}));if(s.length===2){const d=s[1];s=s.slice(0,-1);for(let f=1;f<5;f++)s.push({point:s[0].point.lerp(d.point,f/4),pressure:d.pressure})}s.length===1&&s.push({point:s[0].point.add(E.UNIT),pressure:s[0].pressure});const a=[{point:s[0].point,pressure:s[0].pressure!=null&&s[0].pressure>=0?s[0].pressure:.25,vector:E.UNIT,distance:0,runningLength:0}];let u=!1,l=0,c=a[0];const x=s.length-1;for(let d=1;d<s.length;d++){const f=s[d],g=o&&d===x?f.point:c.point.lerp(f.point,i);if(c.point.equals(g))continue;const b=g.distanceTo(c.point);if(l+=b,d<x&&!u){if(l<r)continue;u=!0}c={point:g,pressure:f.pressure!=null&&f.pressure>=0?f.pressure:.5,vector:c.point.sub(g).normalize(),distance:b,runningLength:l},a.push(c)}return a[0].vector=(m=(h=a[1])==null?void 0:h.vector)!=null?m:E.ZERO,a}function xn(e,t,n,r=o=>o){return e*r(.5-t*(.5-n))}function Nt(e){if(!e.length)return"";const t=["M",e[0].x,e[0].y,"Q"];for(let n=0;n<e.length;n++){const r=e[n],o=e[(n+1)%e.length],i=r.add(o).scale(.5);t.push(r.x,r.y,i.x,i.y)}return t.push("Z"),t.join(" ")}function $n(e,t){const n=[e[0]];if(e.length===0)return[];let r=t,o=e[0],i=e[0].center;for(let s=1;s<e.length;s++){const a=e[s],u=e[Math.min(s+1,e.length-1)],l=a.center.add(u.center).scale(.5),c=a.center.distanceTo(o.center),x=i,h=a.center,m=l;let d=0;for(;c-d>=r;){const f=(r+d)/c;n.push({center:x.lerp(h,f).lerp(h.lerp(m,f),f),radius:kn(o.radius,a.radius,f)}),d+=r,r=t}r-=c-d,o=a,i=l}return n.push(e[e.length-1]),n}function vt(e){var i,s;const t=Array.from(e);if(t.length===0)return{versions:new ne({})};const n=[];let r=0;for(const a of t){const u=Ln(a.rawPoints),l=(s=(i=u[u.length-1])==null?void 0:i.runningLength)!=null?s:0;n.push({id:a.id,strokePoints:u,length:l}),l>r&&(r=l)}const o=Math.floor(r/Be.size);return{versions:ne.fromArray(n.map(({strokePoints:a,length:u,id:l})=>({id:l,length:u,normalizedCenterPoints:$n(zn(a,Be),u/o)})))}}function pe(){}pe.prototype={diff:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.callback;typeof r=="function"&&(o=r,r={}),this.options=r;var i=this;function s(f){return o?(setTimeout(function(){o(void 0,f)},0),!0):f}t=this.castInput(t),n=this.castInput(n),t=this.removeEmpty(this.tokenize(t)),n=this.removeEmpty(this.tokenize(n));var a=n.length,u=t.length,l=1,c=a+u;r.maxEditLength&&(c=Math.min(c,r.maxEditLength));var x=[{newPos:-1,components:[]}],h=this.extractCommon(x[0],n,t,0);if(x[0].newPos+1>=a&&h+1>=u)return s([{value:this.join(n),count:n.length}]);function m(){for(var f=-1*l;f<=l;f+=2){var g=void 0,b=x[f-1],w=x[f+1],S=(w?w.newPos:0)-f;b&&(x[f-1]=void 0);var v=b&&b.newPos+1<a,I=w&&0<=S&&S<u;if(!v&&!I){x[f]=void 0;continue}if(!v||I&&b.newPos<w.newPos?(g=Yr(w),i.pushComponent(g.components,void 0,!0)):(g=b,g.newPos++,i.pushComponent(g.components,!0,void 0)),S=i.extractCommon(g,n,t,f),g.newPos+1>=a&&S+1>=u)return s(Qr(i,g.components,n,t,i.useLongestToken));x[f]=g}l++}if(o)(function f(){setTimeout(function(){if(l>c)return o();m()||f()},0)})();else for(;l<=c;){var d=m();if(d)return d}},pushComponent:function(t,n,r){var o=t[t.length-1];o&&o.added===n&&o.removed===r?t[t.length-1]={count:o.count+1,added:n,removed:r}:t.push({count:1,added:n,removed:r})},extractCommon:function(t,n,r,o){for(var i=n.length,s=r.length,a=t.newPos,u=a-o,l=0;a+1<i&&u+1<s&&this.equals(n[a+1],r[u+1]);)a++,u++,l++;return l&&t.components.push({count:l}),t.newPos=a,u},equals:function(t,n){return this.options.comparator?this.options.comparator(t,n):t===n||this.options.ignoreCase&&t.toLowerCase()===n.toLowerCase()},removeEmpty:function(t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(t[r]);return n},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function Qr(e,t,n,r,o){for(var i=0,s=t.length,a=0,u=0;i<s;i++){var l=t[i];if(l.removed){if(l.value=e.join(r.slice(u,u+l.count)),u+=l.count,i&&t[i-1].added){var x=t[i-1];t[i-1]=t[i],t[i]=x}}else{if(!l.added&&o){var c=n.slice(a,a+l.count);c=c.map(function(m,d){var f=r[u+d];return f.length>m.length?f:m}),l.value=e.join(c)}else l.value=e.join(n.slice(a,a+l.count));a+=l.count,l.added||(u+=l.count)}}var h=t[s-1];return s>1&&typeof h.value=="string"&&(h.added||h.removed)&&e.equals("",h.value)&&(t[s-2].value+=h.value,t.pop()),t}function Yr(e){return{newPos:e.newPos,components:e.components.slice(0)}}var dn=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,pn=/\S/,An=new pe;An.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!pn.test(e)&&!pn.test(t)};An.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&dn.test(t[n])&&dn.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var Mn=new pe;Mn.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t};var Xr=new pe;Xr.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var eo=new pe;eo.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Ye(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ye=function(t){return typeof t}:Ye=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(e)}var to=Object.prototype.toString,Le=new pe;Le.useLongestToken=!0;Le.tokenize=Mn.tokenize;Le.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,o=r===void 0?function(i,s){return typeof s>"u"?n:s}:r;return typeof e=="string"?e:JSON.stringify(zt(e,null,null,o),o,"  ")};Le.equals=function(e,t){return pe.prototype.equals.call(Le,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function no(e,t,n){return Le.diff(e,t,n)}function zt(e,t,n,r,o){t=t||[],n=n||[],r&&(e=r(o,e));var i;for(i=0;i<t.length;i+=1)if(t[i]===e)return n[i];var s;if(to.call(e)==="[object Array]"){for(t.push(e),s=new Array(e.length),n.push(s),i=0;i<e.length;i+=1)s[i]=zt(e[i],t,n,r,o);return t.pop(),n.pop(),s}if(e&&e.toJSON&&(e=e.toJSON()),Ye(e)==="object"&&e!==null){t.push(e),s={},n.push(s);var a=[],u;for(u in e)e.hasOwnProperty(u)&&a.push(u);for(a.sort(),i=0;i<a.length;i+=1)u=a[i],s[u]=zt(e[u],t,n,r,u);t.pop(),n.pop()}else s=e;return s}var Lt=new pe;Lt.tokenize=function(e){return e.slice()};Lt.join=Lt.removeEmpty=function(e){return e};class ee{constructor(t,n=0,r=!0){if(this.data=t,this.version=n,!r)return;const o=this.serialize(),i=ee.deserialize(o,this.version);if(!Ct(this,i)){console.log({actual:this,expected:i});const s=JSON.stringify(this,null,2),a=JSON.stringify(i,null,2);for(const u of no(s,a))console.log("CHANGE",u);Ve(`Mismatch after update:
Actual:
${JSON.stringify(this,null,2)}

Expected:
${JSON.stringify(i,null,2)}`)}}static create(){return ee.deserialize(Jr())}static deserialize(t,n=0){const r=new ne(t.shapeVersions);return new ee({id:t.id,keyPoints:new ne(t.keyPoints),shapes:new ne(t.shapes),shapeVersions:r,shapeVersionLookup:Dt.build(r,o=>`${o.shapeId}/${o.keyPointId}`,o=>o.id,([o,i])=>`${o}/${i}`),shapeVersionIdsByShape:tt.build(r,o=>o.shapeId,o=>o.id,un),shapeVersionIdsByKeyPoint:tt.build(r,o=>o.keyPointId,o=>o.id,un),normalizedShapeVersions:vt(Array.from(r)).versions},n,!1)}with(t){return new ee({...this.data,...t},this.version+1)}serialize(){return{id:this.data.id,keyPoints:this.data.keyPoints.data,shapes:this.data.shapes.data,shapeVersions:this.data.shapeVersions.data}}get shapes(){return this.data.shapes}get keyPoints(){return this.data.keyPoints}get shapeVersions(){return this.data.shapeVersions}getShapeVersion(t,n){const r=this.data.shapeVersionLookup.lookup([n,t]);return r?this.shapeVersions.get(r):null}getNormalizedCenterPointsForShapeVersion(t){return this.data.normalizedShapeVersions.get(t).normalizedCenterPoints}*iterateShapeVersionsForShape(t){for(const n of this.data.shapeVersionIdsByShape.lookup(t))yield this.shapeVersions.get(n)}addShape(t){console.log("doc.addShape",t);const n=this.shapes.insert({id:t});return this.with({shapes:n})}addKeyPoint(t,n){console.log("doc.addKeyPoint",t);const r=this.keyPoints.insert({id:t,position:n});return this.with({keyPoints:r})}updateKeypoint(t,n){return this.with({keyPoints:this.keyPoints.update(t,n)})}replacePointsForVersion(t,n,r){const o=this.getShapeVersion(t,n);if(o){const a=this.shapeVersions.insert({...o,rawPoints:r});return this.with({shapeVersions:a,normalizedShapeVersions:vt(a).versions})}const i={id:Ht.generate(),keyPointId:t,shapeId:n,rawPoints:r},s=this.shapeVersions.insert(i);return this.with({shapeVersions:s,normalizedShapeVersions:vt(s).versions,shapeVersionLookup:this.data.shapeVersionLookup.insert(i),shapeVersionIdsByShape:this.data.shapeVersionIdsByShape.insert(i),shapeVersionIdsByKeyPoint:this.data.shapeVersionIdsByKeyPoint.insert(i)})}}var O=(e=>(e.Draw="draw",e.Rig="rig",e.Play="play",e))(O||{});const ro=Fr(O);var Kt=(e=>(e.Pan="quickPan",e))(Kt||{});const oo=de({pan:_r,zoom:Rr});class De{static default(t){return new De({pan:E.ZERO,zoom:1,screenSize:t,isSidebarOpen:!0})}static deserialize({pan:t,zoom:n},r){return new De({pan:E.deserialize(t),zoom:n,screenSize:r,isSidebarOpen:!1})}constructor({pan:t,zoom:n,screenSize:r,isSidebarOpen:o}){this.pan=t,this.zoom=n,this.screenSize=r,this.isSidebarOpen=o}with(t){var n,r,o,i;return new De({pan:(n=t.pan)!=null?n:this.pan,zoom:(r=t.zoom)!=null?r:this.zoom,screenSize:(o=t.screenSize)!=null?o:this.screenSize,isSidebarOpen:(i=t.isSidebarOpen)!=null?i:this.isSidebarOpen})}serialize(){return{pan:this.pan.serialize(),zoom:this.zoom}}canvasScreenSize(){return this.isSidebarOpen?this.screenSize.sub(new E(jt,0)):this.screenSize}handleWheelEvent(t){t.preventDefault(),t.stopImmediatePropagation();const{deltaX:n,deltaY:r}=t;if(t.ctrlKey){const o=E.fromEvent(t),{pan:i,zoom:s}=this,a=Math.exp(-r/100)*s,u=o.add(i).scale(a/s).sub(o);return this.with({pan:u,zoom:a})}else return this.with({pan:this.pan.add(new E(n,r))})}origin(){return this.pan.sub(this.canvasScreenSize().scale(.5*this.zoom))}visibleSceneBounds(){return new On(this.origin(),this.canvasScreenSize())}screenToScene(t){return t.add(this.origin()).scale(1/this.zoom)}sceneToScreen(t){return t.scale(this.zoom).sub(this.origin())}eventSceneCoords(t){return this.screenToScene(E.fromEvent(t))}getSceneTransform(){const t=this.origin();return`translate(${-t.x}px, ${-t.y}px) scale(${this.zoom}) `}}const io=de({keyPointId:Me.parse,shapeId:Fe.parse,viewport:oo,tool:ro});class $e{static deserialize(t,n){return new $e({keyPointId:t.keyPointId,shapeId:t.shapeId,viewport:De.deserialize(t.viewport,n),tool:t.tool})}constructor({keyPointId:t,shapeId:n,viewport:r,tool:o}){this.keyPointId=t,this.shapeId=n,this.viewport=r,this.tool=o}serialize(){return{keyPointId:this.keyPointId,shapeId:this.shapeId,viewport:this.viewport.serialize(),tool:this.tool}}with(t){var n,r,o,i;return new $e({keyPointId:(n=t.keyPointId)!=null?n:this.keyPointId,shapeId:(r=t.shapeId)!=null?r:this.shapeId,viewport:(o=t.viewport)!=null?o:this.viewport,tool:(i=t.tool)!=null?i:this.tool})}}const Fn=de({document:Nn,location:io});function _n(e){return{document:e.document.serialize(),location:e.location.serialize()}}function so(e,t){return{document:ee.deserialize(e.document),location:$e.deserialize(e.location,t)}}function ao(e,t){return kt(`splatapus.${e}`)?Fn(kt(`splatapus.${e}`)).mapErr(r=>r.toString()).map(r=>so(r,t)):Ot.error("No saved data found")}function lo(e,t){window.splatSerializedDoc=t,Cn(`splatapus.${e}`,_n(t))}const uo=kr(jr,lo);function Rn(e,t){const n=[...e.keyPoints][0].id,r=[...e.shapes][0].id;return new $e({keyPointId:n,shapeId:r,viewport:De.default(t),tool:O.Draw})}function Vn(e){const t=Me.generate(),n=Fe.generate(),r=ee.create().addKeyPoint(t,E.ZERO).addShape(n).replacePointsForVersion(t,n,[]);return{document:r,location:Rn(r,e)}}const fn={initialize(){return{state:"idle"}},onPointerEvent(e,t){switch(e.eventType){case"down":switch(t.state){case"idle":return{pan:{state:"oneFingerDown",pointerA:{id:e.event.pointerId,startScreenPosition:E.fromEvent(e.event),currentScreenPosition:E.fromEvent(e.event),startEvent:e.event}},passthroughContext:e};case"oneFingerDown":return{pan:{state:"bothFingersDown",pointerA:t.pointerA,pointerB:{id:e.event.pointerId,startScreenPosition:E.fromEvent(e.event),currentScreenPosition:E.fromEvent(e.event),startEvent:e.event},initialPan:e.viewport.pan,initialZoom:e.viewport.zoom},passthroughContext:{...e,eventType:"cancel",event:t.pointerA.startEvent}};case"bothFingersDown":return{pan:t,passthroughContext:e};default:throw R(t)}case"move":switch(t.state){case"idle":return{pan:t,passthroughContext:e};case"oneFingerDown":return t.pointerA.id===e.event.pointerId?{pan:{...t,pointerA:{...t.pointerA,currentScreenPosition:E.fromEvent(e.event)}},passthroughContext:e}:{pan:t,passthroughContext:e};case"bothFingersDown":if(e.event.pointerId===t.pointerA.id||e.event.pointerId===t.pointerB.id){const n=e.event.pointerId===t.pointerA.id?E.fromEvent(e.event):t.pointerA.currentScreenPosition,r=e.event.pointerId===t.pointerB.id?E.fromEvent(e.event):t.pointerB.currentScreenPosition,o=t.pointerA.startScreenPosition.distanceTo(t.pointerB.startScreenPosition),s=n.distanceTo(r)/o,a=t.pointerA.startScreenPosition.lerp(t.pointerB.startScreenPosition,.5),u=n.lerp(r,.5);return e.updateViewport(l=>{const c=a.add(t.initialPan).scale(s).sub(u);return l.with({zoom:t.initialZoom*s,pan:c})}),{pan:{...t,pointerA:{...t.pointerA,currentScreenPosition:n},pointerB:{...t.pointerB,currentScreenPosition:r}},passthroughContext:null}}return{pan:t,passthroughContext:e};default:throw R(t)}case"up":case"cancel":switch(t.state){case"idle":return{pan:t,passthroughContext:e};case"oneFingerDown":return e.event.pointerId===t.pointerA.id?{pan:{state:"idle"},passthroughContext:e}:{pan:t,passthroughContext:e};case"bothFingersDown":return e.event.pointerId===t.pointerA.id||e.event.pointerId===t.pointerB.id?{pan:{state:"idle"},passthroughContext:null}:{pan:t,passthroughContext:e};default:throw R(t)}default:R(e.eventType)}}};function co(e){return null}function lt(){return function(t){return{getCanvasClassName:n=>"",getPreviewPosition:n=>null,Overlay:co,...t}}}function Wt(e){const t={initialize:n=>({state:"idle",childState:n}),isIdle:n=>n.state==="idle",getState:n=>n.childState,onPointerEvent:(n,r,o)=>{switch(n.eventType){case"down":switch(r.state){case"idle":{const i=e.onDragStart(n,r.childState,o);return i?(n.event.preventDefault(),e.onTap?{state:"dragUnconfirmed",pointerId:n.event.pointerId,startPosition:E.fromEvent(n.event),childState:i,startArg:o}:{state:"dragConfirmed",pointerId:n.event.pointerId,childState:i,startArg:o}):r}case"dragUnconfirmed":case"dragConfirmed":return r;default:throw R(r)}case"move":switch(r.state){case"idle":return r;case"dragUnconfirmed":{if(r.pointerId!==n.event.pointerId)return r;const i=e.onDragMove(n,r.childState);return r.startPosition.distanceTo(E.fromEvent(n.event))>=Hr?{state:"dragConfirmed",pointerId:r.pointerId,childState:i,startArg:r.startArg}:Object.is(r.childState,i)?r:{...r,childState:i}}case"dragConfirmed":{if(r.pointerId!==n.event.pointerId)return r;const i=e.onDragMove(n,r.childState);return Object.is(r.childState,i)?r:{...r,childState:i}}default:throw R(r)}case"up":switch(r.state){case"idle":return r;case"dragUnconfirmed":{if(r.pointerId!==n.event.pointerId)return r;let i=e.onDragCancel(n,r.childState);return i=e.onTap?e.onTap(n,i,r.startArg):i,{state:"idle",childState:i}}case"dragConfirmed":{if(r.pointerId!==n.event.pointerId)return r;const i=e.onDragEnd(n,r.childState);return{state:"idle",childState:i}}default:throw R(r)}case"cancel":switch(r.state){case"idle":return r;case"dragUnconfirmed":case"dragConfirmed":{if(r.pointerId!==n.event.pointerId)return r;const i=e.onDragCancel(n,r.childState);return{state:"idle",childState:i}}default:throw R(r)}default:R(n.eventType)}},createOnPointerEvent:n=>(r,o,i)=>Oe(o,n,s=>t.onPointerEvent(r,s,i))};return t}const _e=Wt({onDragStart:({event:e,viewport:t})=>({state:"drawing",points:[t.eventSceneCoords(e)]}),onDragMove:({event:e,viewport:t},n)=>({state:"drawing",points:[...n.points,t.eventSceneCoords(e)]}),onDragEnd:({updateDocument:e,location:t},n)=>(e(r=>{const o=r.shapes.get(t.shapeId);return r.replacePointsForVersion(t.keyPointId,o.id,n.points)}),{state:"idle"}),onDragCancel:(e,t)=>({state:"idle"})}),je=lt()({initialize:()=>({type:O.Draw,gesture:_e.initialize({state:"idle"})}),isIdle:e=>_e.isIdle(e.gesture),getDebugProperties:e=>{const t=_e.getState(e.gesture);switch(t.state){case"idle":return{_:"idle"};case"drawing":return{_:"drawing",points:String(t.points.length)};default:R(t)}},getState:e=>_e.getState(e.gesture),onPointerEvent:_e.createOnPointerEvent("gesture")}),Xe=Symbol(),yo=Symbol(),Bn=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?y.exports.useEffect:y.exports.useLayoutEffect,xo=ft.exports.unstable_runWithPriority?e=>ft.exports.unstable_runWithPriority(ft.exports.unstable_NormalPriority,e):e=>e(),po=e=>e;function Un(e){const t=y.exports.createContext({[Xe]:{v:{current:e},n:{current:-1},l:new Set,u:r=>r()}});var n;return t[yo]=t.Provider,t.Provider=(n=t.Provider,({value:r,children:o})=>{const i=y.exports.useRef(r),s=y.exports.useRef(0),[a,u]=y.exports.useState(null);a&&(a(r),u(null));const l=y.exports.useRef();if(!l.current){const c=new Set,x=(h,m)=>{Tr.exports.unstable_batchedUpdates(()=>{s.current+=1;const d={n:s.current};m!=null&&m.suspense&&(d.n*=-1,d.p=new Promise(f=>{u(()=>g=>{d.v=g,delete d.p,f(g)})})),c.forEach(f=>f(d)),h()})};l.current={[Xe]:{v:i,n:s,l:c,u:x}}}return Bn(()=>{i.current=r,s.current+=1,xo(()=>{l.current[Xe].l.forEach(c=>{c({n:s.current,v:r})})})},[r]),y.exports.createElement(n,{value:l.current},o)}),delete t.Consumer,t}function jn(e,t){const n=y.exports.useContext(e)[Xe],{v:{current:r},n:{current:o},l:i}=n,s=t(r),[a,u]=y.exports.useReducer((l,c)=>{if(!c)return[r,s];if("p"in c)throw c.p;if(c.n===o)return Object.is(l[1],s)?l:[r,s];try{if("v"in c){if(Object.is(l[0],c.v))return l;const x=t(c.v);return Object.is(l[1],x)?l:[c.v,x]}}catch{}return[...l]},[r,s]);return Object.is(a[1],s)||u(),Bn(()=>(i.add(u),()=>{i.delete(u)}),[i]),a[1]}function fo(e){return jn(e,po)}const Hn={interpolated:(e,t)=>({type:"interpolated",scenePosition:e,selectedShapeId:t}),keyPointId:(e,t)=>({type:"keyPointId",keyPointId:e,selectedShapeId:t}),toDebugString:e=>{switch(e.type){case"interpolated":return et(e.type,{_:e.scenePosition.toString(2),shape:e.selectedShapeId});case"keyPointId":return et(e.type,{_:e.keyPointId,shape:e.selectedShapeId});default:R(e)}}},K={initialize:e=>({undoStates:[],redoStates:[],pendingOp:null,current:{...e,options:{}}}),canUndo:e=>e.undoStates.length>0,canRedo:e=>{var t,n;return((n=(t=e.redoStates)==null?void 0:t.length)!=null?n:0)>0},beginOperation:e=>{const t=Math.random();return A(e.pendingOp==null,"pending op already in progress"),{undoStack:{...e,pendingOp:{txId:t,initialDoc:e.current.document,initialOptions:e.current.options},current:{...e.current,options:{}}},txId:t}},updateOperation:(e,t,n)=>{var r;return A(((r=e.pendingOp)==null?void 0:r.txId)===t,"pending op mismatch"),{...e,current:{...e.current,document:ge(e.current.document,n)}}},revertOperation:(e,t)=>{var n;return A(((n=e.pendingOp)==null?void 0:n.txId)===t,"Pending op mismatch"),{...e,pendingOp:null,current:{document:e.pendingOp.initialDoc,location:e.current.location,options:e.pendingOp.initialOptions}}},commitOperation:(e,t,n={})=>{var i;A(((i=e.pendingOp)==null?void 0:i.txId)===t,"Pending op mismatch");const r=[{document:e.pendingOp.initialDoc,location:e.current.location,options:e.pendingOp.initialOptions},...e.undoStates];for(;r.length>Ur;)r.pop();const o={...e.current,options:n};return n.lockstepLocation&&(o.location=ge(o.location,n.lockstepLocation)),{...e,current:o,pendingOp:null,undoStates:r,redoStates:null}},updateDocument:(e,t,n)=>{let r;return{undoStack:e,txId:r}=K.beginOperation(e),e=K.updateOperation(e,r,t),K.commitOperation(e,r,n)},undo:(e,t)=>{var i;if(A(e.pendingOp==null,"Pending op in progress"),e.undoStates.length==0)return e;t.triggerAnimation("undo");const[n,...r]=e.undoStates;if(!Ct(n.location,e.current.location)&&!e.current.options.lockstepLocation)return{...e,current:{...e.current,location:n.location}};const o=[e.current,...(i=e.redoStates)!=null?i:[]];return{...e,current:n,undoStates:r,redoStates:o}},redo:(e,t)=>{if(A(e.pendingOp==null,"pending op in progress"),!e.redoStates||e.redoStates.length==0)return e;t.triggerAnimation("redo");const[n,...r]=e.redoStates;if(!Ct(n.location,e.current.location)&&!n.options.lockstepLocation)return{...e,current:{...e.current,location:n.location}};const o=[e.current,...e.undoStates];return{...e,current:n.options.lockstepLocation?{...n,location:ge(e.current.location,n.options.lockstepLocation)}:n,undoStates:o,redoStates:r.length===0?null:r}},updateLocation:(e,t)=>({...e,current:{...e.current,location:ge(e.current.location,t)}})};let ho=1;const nt={initialize:()=>({activeAnimations:{}}),triggerAnimation:(e,t)=>({activeAnimations:{...e.activeAnimations,[t]:ho++}}),getActiveAnimationId:(e,t)=>{var n;return(n=En(e.activeAnimations,t))!=null?n:null},acknowledgeAnimation:(e,t,n)=>{const{[t]:r,...o}=e.activeAnimations;return r!==n?e:{activeAnimations:o}}};class vo{constructor(t){this.updateVfx=t}triggerAnimation(t){this.updateVfx(n=>nt.triggerAnimation(n,t))}}function $t(e,t){const n=y.exports.useRef(null),r=$(s=>nt.getActiveAnimationId(s.vfx,e)),{updateVfx:o}=Q(),i=Ut(t);return y.exports.useEffect(()=>{const s=n.current;if(!s||!r)return;const a=i(),u=s.animate(a.keyFrames,a);return u.addEventListener("finish",()=>{o((l,c)=>nt.acknowledgeAnimation(c,e,r))}),u.play(),()=>{u.cancel()}},[r,i,e,o]),n}const H={initialize:e=>({undoStack:K.initialize(e),interaction:W.initialize(O.Draw),vfx:nt.initialize()}),updateUndoStack:(e,t)=>Oe(e,"undoStack",t),updateLocation:(e,t)=>H.updateUndoStack(e,n=>K.updateLocation(n,t)),updateDocument:(e,t,n)=>H.updateUndoStack(e,r=>K.updateDocument(r,t,n)),updateViewport:(e,t)=>H.updateLocation(e,n=>n.with({viewport:ge(n.viewport,t)})),updateInteraction:(e,t)=>Oe(e,"interaction",t),updateVfx:(e,t)=>Oe(e,"vfx",t),afterUpdate:(e,t)=>{const n=W.isSidebarOpen(e.interaction);return n!==e.undoStack.current.location.viewport.isSidebarOpen&&(e=H.updateViewport(e,r=>r.with({isSidebarOpen:n}))),e}};function Kn(e,t){const n=r=>t(o=>H.updateVfx(o,r));return{update:t,updateUndoStack:r=>t(o=>H.updateUndoStack(o,r)),updateLocation:r=>t(o=>H.updateLocation(o,r)),updateDocument:(r,o)=>t(i=>H.updateDocument(i,r,o)),updateViewport:r=>t(o=>H.updateViewport(o,r)),updateInteraction:r=>t(o=>H.updateInteraction(o,r)),updateVfx:n,vfx:new vo(n),document:e.undoStack.current.document,location:e.undoStack.current.location,viewport:e.undoStack.current.location.viewport,state:e}}function mo(e,t){const n=[];let r=!1;function o(s){A(!r),n.push(s)}t(Kn(e,o));const i=e;for(let s=0;s<n.length;s++)e=n[s](e);return e=H.afterUpdate(e,i),e!==i&&console.log("STATE CHANGED"),r=!0,e}function go(e,t){const[n,r]=y.exports.useReducer(mo,null,e),o=Ut(()=>n),i=y.exports.useCallback(h=>{const m=w=>{h(()=>{r(w)})},d=w=>m(S=>S.updateInteraction(v=>w(S,v))),f=w=>m(S=>S.updateViewport(v=>w(S,v))),g=w=>S=>d((v,I)=>W.onPointerEvent({...v,event:S,eventType:w},I));return{getContextForEvent:()=>Kn(o(),w=>{m(S=>w(S.state))}),updateUndoStack:w=>m(S=>S.updateUndoStack(v=>w(S,v))),updateLocation:w=>m(S=>S.updateLocation(v=>w(S,v))),updateDocument:(w,S)=>m(v=>v.updateDocument(I=>w(v,I),S)),updateViewport:f,updateInteraction:d,updateVfx:w=>m(S=>S.updateVfx(v=>w(S,v))),onPointerDown:g("down"),onPointerMove:g("move"),onPointerUp:g("up"),onPointerCancel:g("cancel"),onKeyDown:w=>d((S,v)=>W.onKeyDown({...S,event:w},v)),onKeyUp:w=>d((S,v)=>W.onKeyUp({...S,event:w},v)),onWheel:w=>f((S,v)=>v.handleWheelEvent(w))}},[o]),s=n.undoStack.current.document,a=n.undoStack.current.location,{keyPointId:u,shapeId:l}=n.undoStack.current.location,c=W.getPreviewPosition(n.interaction,l),x=y.exports.useMemo(()=>c!=null?c:Hn.keyPointId(u,l),[c,u,l]);return y.exports.useMemo(()=>({events:i,document:s,location:a,undoStack:n.undoStack,interaction:n.interaction,previewPosition:x,vfx:n.vfx}),[s,i,a,x,n.interaction,n.undoStack,n.vfx])}const Wn=Un(null),qn=Un(null);function wo({initialize:e,size:t,children:n}){const r=go(e);return p(Wn.Provider,{value:r,children:p(Po,{events:r.events,children:n})})}const Po=C.memo(function({events:t,children:n}){const r=y.exports.useMemo(()=>t(o=>o()),[t]);return p(qn.Provider,{value:r,children:n})});function $(e){return jn(Wn,t=>(A(t),e(t)))}function At(e){return $(t=>t[e])}function Q(){return We(fo(qn))}function So({position:e,children:t,className:n,style:r,...o}){return p("div",{className:j("absolute top-0 left-0",n),style:{transform:`translate(${e.x}px, ${e.y}px)`,...r},...o,children:t})}function bo({position:e,screenOffset:t=E.ZERO,...n}){const r=$(o=>o.location.viewport);return p(So,{position:r.sceneToScreen(e).add(t),...n})}const Je=Wt({onTap:({updateLocation:e},t,n)=>(n&&e(r=>r.with({keyPointId:n})),t),onDragStart:({updateLocation:e,viewport:t,event:n},r,o)=>o?(e(i=>i.with({keyPointId:o})),{state:"moving",keyPointId:o,delta:E.ZERO,startingPosition:t.eventSceneCoords(n)}):null,onDragMove:({viewport:e,event:t},n)=>({...n,delta:e.eventSceneCoords(t).sub(n.startingPosition)}),onDragEnd:({event:e,viewport:t,updateDocument:n},r)=>{const o=t.eventSceneCoords(e).sub(r.startingPosition);return n(i=>i.updateKeypoint(r.keyPointId,s=>({...s,position:s.position.add(o)}))),{state:"idle"}},onDragCancel:()=>({state:"idle"})}),He=lt()({initialize:()=>({type:O.Rig,gesture:Je.initialize({state:"idle"}),previewPosition:null}),isIdle:e=>!0,getDebugProperties:e=>{const t=Je.getState(e.gesture);switch(t.state){case"idle":return{_:t.state};case"moving":return{_:t.state,keyPointId:t.keyPointId,delta:t.delta.toString(2)}}},onPointerEvent:Je.createOnPointerEvent("gesture"),Overlay:({tool:e,onUpdateTool:t})=>{const n=Je.getState(e.gesture),r=$(i=>i.document.keyPoints),o=$(i=>i.location.keyPointId);return p(le,{children:Array.from(r,(i,s)=>{const a=n.state==="moving"&&n.keyPointId===i.id?i.position.add(n.delta):i.position;return p(bo,{position:a,className:j("-mt-4 -ml-4 flex h-8 w-8 cursor-move items-center justify-center rounded-full"),onPointerDown:u=>{t((l,c)=>He.onPointerEvent({...l,event:u,eventType:"down"},c,i.id))},children:p("div",{className:j("flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold shadow-md",i.id===o?"bg-gradient-to-br from-cyan-400 to-blue-400 text-white":"border border-stone-200 bg-white text-stone-400"),children:s+1})},i.id)})})}}),Ge=Wt({onDragStart:({event:e,location:t})=>({state:"active",initialPan:t.viewport.pan,previousScreenPoint:E.fromEvent(e)}),onDragMove:({event:e,updateViewport:t},n)=>{const r=E.fromEvent(e);return t(o=>o.with({pan:o.pan.add(n.previousScreenPoint.sub(r).scale(o.zoom))})),{...n,previousScreenPoint:r}},onDragEnd:()=>({state:"idle"}),onDragCancel:({updateViewport:e},t)=>(e(n=>n.with({pan:t.initialPan})),{state:"idle"})}),Ce=lt()({initialize:()=>({type:Kt.Pan,gesture:Ge.initialize({state:"idle"})}),getDebugProperties:e=>{const t=Ge.getState(e.gesture);switch(t.state){case"idle":return{_:t.state};case"active":return{_:t.state,initialPan:t.initialPan.toString(2),previousScreenPoint:t.previousScreenPoint.toString(0)}}},isIdle:e=>Ge.isIdle(e.gesture),getCanvasClassName:e=>Ce.isIdle(e)?"cursor-grab":"cursor-grabbing",onPointerEvent:Ge.createOnPointerEvent("gesture")}),rt=lt()({initialize:()=>({type:O.Play,previewPosition:null}),isIdle:e=>!0,getDebugProperties:e=>{var t,n;return{_:(n=(t=e.previewPosition)==null?void 0:t.toString(2))!=null?n:null}},getPreviewPosition:(e,t)=>e.previewPosition?Hn.interpolated(e.previewPosition,t):null,onPointerEvent:({event:e,eventType:t,viewport:n},r)=>{switch(t){case"move":case"down":return e.isPrimary?{...r,previewPosition:n.eventSceneCoords(e)}:r;case"cancel":case"up":return r;default:R(t)}}}),Io={[O.Draw]:je,[O.Rig]:He,[O.Play]:rt,[Kt.Pan]:Ce};function Re(e){return Io[e]}const X={initialize:e=>Re(e).initialize(),initializeForKeyDown:({event:e})=>B(e,"d")?je.initialize():B(e,"r")?He.initialize():B(e,"p")?rt.initialize():null,isIdle:e=>Re(e.type).isIdle(e),getCanvasClassName:e=>Re(e.type).getCanvasClassName(e),getPreviewPosition:(e,t)=>Re(e.type).getPreviewPosition(e,t),toDebugString:e=>et(e.type,Re(e.type).getDebugProperties(e)),onPointerEvent:(e,t)=>{switch(t.type){case O.Draw:return je.onPointerEvent(e,t);case O.Rig:return He.onPointerEvent(e,t);case O.Play:return rt.onPointerEvent(e,t);default:R(t)}}},W={initialize:e=>({multiTouchPan:fn.initialize(),quickPanTool:null,selectedTool:X.initialize(e)}),toDebugString:e=>e.quickPanTool?et(e.quickPanTool.type,Ce.getDebugProperties(e.quickPanTool)):X.toDebugString(e.selectedTool),getCanvasClassName:e=>e.quickPanTool?Ce.getCanvasClassName(e.quickPanTool):X.getCanvasClassName(e.selectedTool),getPreviewPosition:(e,t)=>X.getPreviewPosition(e.selectedTool,t),isSidebarOpen:e=>e.selectedTool.type!==O.Play,updateSelectedTool:(e,t)=>Oe(e,"selectedTool",t),updateQuickPanTool:(e,t)=>Oe(e,"quickPanTool",t),requestSetSelectedTool:(e,t)=>e.quickPanTool||!X.isIdle(e.selectedTool)?e:{...e,selectedTool:X.initialize(t)},onKeyDown:(e,t)=>{if(X.isIdle(t.selectedTool)){if(!t.quickPanTool&&B(e.event," "))return{...t,quickPanTool:Ce.initialize()};const r=X.initializeForKeyDown(e);if(r&&!t.quickPanTool)return e.vfx.triggerAnimation(r.type),{...t,selectedTool:r};if(B(e.event,{key:"z",command:!0}))return e.updateUndoStack(o=>K.undo(o,e.vfx)),t;if(B(e.event,{key:"z",command:!0,shift:!0}))return e.updateUndoStack(o=>K.redo(o,e.vfx)),t}if(B(e.event,{key:"0",command:!0}))return e.updateViewport(r=>r.with({pan:E.ZERO,zoom:1})),t;const n=r=>{var i;const o=(i=[...e.document.keyPoints][r])==null?void 0:i.id;o&&e.updateLocation(s=>s.with({keyPointId:o}))};return B(e.event,"1")&&n(0),B(e.event,"2")&&n(1),B(e.event,"3")&&n(2),B(e.event,"4")&&n(3),B(e.event,"5")&&n(4),B(e.event,"6")&&n(5),B(e.event,"7")&&n(6),B(e.event,"8")&&n(7),B(e.event,"9")&&n(8),t},onKeyUp:(e,t)=>t.quickPanTool&&Or(e.event," ")?{...t,quickPanTool:null}:t,onPointerEvent:(e,t)=>{const{pan:n,passthroughContext:r}=fn.onPointerEvent(e,t.multiTouchPan);return n!==t.multiTouchPan&&(t={...t,multiTouchPan:n}),r?t.quickPanTool?W.updateQuickPanTool(t,o=>Ce.onPointerEvent(r,We(o))):W.updateSelectedTool(t,o=>X.onPointerEvent(r,o)):t},Overlay:C.memo(function(){const{updateInteraction:t}=Q(),n=Ut(o=>t((i,s)=>W.updateSelectedTool(s,a=>(A(a.type===s.selectedTool.type),o(i,a))))),r=$(({interaction:o})=>o.selectedTool);switch(r.type){case O.Draw:return p(je.Overlay,{tool:r,onUpdateTool:n});case O.Rig:return p(He.Overlay,{tool:r,onUpdateTool:n});case O.Play:return p(rt.Overlay,{tool:r,onUpdateTool:n});default:R(r)}})},Zn={[O.Draw]:{gradient500:"from-fuchsia-500 to-violet-500",border500:"border-purple-500",ring500:"ring-purple-500"},[O.Rig]:{gradient500:"from-cyan-500 to-blue-500",border500:"border-sky-500",ring500:"ring-sky-500"},[O.Play]:{gradient500:"from-lime-500 to-emerald-500",border500:"border-green-500",ring500:"ring-green-500"}};function Eo(){const e=$(t=>t.interaction.selectedTool.type);return Zn[e]}function hn(e,t){!e||(typeof e=="function"?e(t):e.current=t)}function ko(e,t){return y.exports.useCallback(n=>{hn(e,n),hn(t,n)},[e,t])}function Jn(e,t=1/0){var r;const n=(r=Tn(e,Dr))!=null?r:E.ZERO;return y.exports.useMemo(()=>{if(!n)return"none";const o=Math.min(n.x*.5,n.y*.5,t);return`path('${[`M 0,${o}`,`Q 0,0 ${o},0`,`T ${n.x-o},0`,`Q ${n.x},0 ${n.x},${o}`,`T ${n.x},${n.y-o}`,`Q ${n.x},${n.y} ${n.x-o},${n.y}`,`T ${o},${n.y}`,`Q 0,${n.y} 0,${n.y-o}`,"Z"].join(" ")}')`},[n,t])}const oe=y.exports.forwardRef(function({children:t,className:n,iconLeft:r,iconRight:o,...i},s){return V(Gn,{className:j(n,"justify-center gap-2 px-4 py-1"),ref:s,...i,children:[r,p(Co,{children:t}),o]})});function Co({children:e}){return p("span",{className:"inline-block transition-transform duration-200 ease-out-back-md group-hover:scale-110 group-active:scale-95",children:e})}const Gn=y.exports.forwardRef(function({className:t,style:n,...r},o){const[i,s]=y.exports.useState(null),a=Jn(i);return p("button",{ref:ko(s,o),className:j("group inline-flex items-center rounded text-center font-bold tracking-wide text-stone-400 hover:bg-stone-300/25 hover:text-stone-500 focus:outline-none focus-visible:text-stone-600",t),style:{...n,clipPath:a},...r})});function To({children:e,actionName:t,...n}){const r=$t(t,()=>({keyFrames:{transform:["scale(1)","scale(0.8)","scale(1)"]},duration:300,easing:Tt.outBackMd}));return p(oe,{...n,children:p("span",{className:"inline-block",ref:r,children:e})})}const Oo=C.memo(function(){return V(le,{children:[p(mt,{toolType:O.Draw,children:"draw"}),p(mt,{toolType:O.Rig,children:"rig"}),p(mt,{toolType:O.Play,children:"play"})]})}),mt=function({toolType:t,children:n}){const r=$(s=>s.interaction.selectedTool.type),{updateInteraction:o}=Q(),i=r===t;return p(To,{actionName:t,onClick:()=>o((s,a)=>(s.vfx.triggerAnimation(t),W.requestSetSelectedTool(a,t))),className:j(i&&`pointer-events-none bg-gradient-to-br ${Zn[t].gradient500} !text-white`),disabled:i,children:n})};class Ue{static distance(t,n){let r=0;for(let o=0;o<t.length;o++)r+=Math.pow(t[o]-n[o],2);return Math.sqrt(r)}static kernel(t,n){const r=Ue.distance(t,n);return r===0?0:Math.pow(r,2)*Math.log(r)}constructor(t,n){t.length===0&&Ve("bad centers array :/"),t.every(l=>l.length===t[0].length)||Ve("centers must have same dimensions :/"),this.centers=t;const r=n.slice(),o=[],i=[];for(let l=0;l<t.length;l++){const c=[],x=[1];for(let h=0;h<t[l].length;h++)x.push(t[l][h]);for(let h=0;h<t.length;h++)c.push(Ue.kernel(t[l],t[h]));i.push(x),o.push(c.concat(x))}const a=_.transpose(i).map(l=>{for(let c=l.length;c<o[0].length;c++)l.push(0);return l});for(let l=0;l<a.length;l++)o.push(a[l]),r.push(0);const u=this.solve(r,o);u||Ve("rbf failed to compile with given centers./nCenters must be unique :/"),this.ws=u}solve(t,n){const r=_.inverse(n);return r?_.multiplyVector(r,t):null}getValue(t){A(this.ws);let n=0,r=0;for(r=0;r<this.centers.length;r++)n+=Number(this.ws[r])*Ue.kernel(t,this.centers[r]);for(n+=Number(this.ws[this.centers.length]),r=0;r<t.length;r++)n+=t[r]*Number(this.ws[this.centers.length+(r+1)]);return n}}const _={create(e){return e.map(t=>t.slice())},fromVector(e){return e.map(t=>[t])},identity(e){return me(e,t=>me(e,n=>t===n?1:0))},col(e,t){return e.map(n=>n[t-1])},clone(e){return e.slice()},canMultiplyFromLeft(e,t){return e[0].length===t.length},multiplyMatrix(e,t){if(!_.canMultiplyFromLeft(e,t))return null;const n=e[0].length;return me(e.length,r=>me(t[0].length,o=>{let i=0;for(let s=0;s<n;s++)i+=e[r][s]*t[s][o];return i}))},multiplyVector(e,t){return _.multiplyMatrix(e,_.fromVector(t))},transpose(e){return me(e[0].length,t=>me(e.length,n=>e[n][t]))},isSquare(e){return e.length===e[0].length},toRightTriangular(e){const t=_.clone(e),n=e.length,r=e[0].length;for(let o=0;o<n;o++){if(t[o][o]===0){for(let i=o+1;i<n;i++)if(t[i][o]!==0){const s=[];for(let a=0;a<r;a++)s.push(t[o][a]+t[i][a]);t[o]=s;break}}if(t[o][o]!==0)for(let i=o+1;i<n;i++){const s=t[i][o]/t[o][o],a=[];for(let u=0;u<r;u++)a.push(u<=o?0:t[i][u]-t[o][u]*s);t[i]=a}}return t},determinant(e){if(!_.isSquare(e))return null;const t=_.toRightTriangular(e);let n=t[0][0];for(let r=1;r<t.length;r++)n=n*t[r][r];return n},isSingular(e){return _.isSquare(e)&&_.determinant(e)===0},augment(e,t){const n=_.clone(e),r=n[0].length;A(n.length===t.length);for(let o=0;o<n.length;o++)for(let i=0;i<t[0].length;i++)n[o][r+i]=t[o][i];return n},inverse(e){if(!_.isSquare(e)||_.isSingular(e))return null;const t=e.length,n=[],r=_.toRightTriangular(_.augment(e,_.identity(t))),o=r[0].length;let i=e.length;for(;i--;){const s=[];n[i]=[];const a=r[i][i];for(let l=0;l<o;l++){const c=r[i][l]/a;s.push(c),l>=t&&n[i].push(c)}r[i]=s;let u=i;for(;u--;){const l=[];for(let c=0;c<o;c++)l.push(r[u][c]-r[i][c]*r[u][i]);r[u]=l}}return n}};class Do{interpolate(t){Ve("cannot interpolate none")}}class No{constructor(t){this.value=t}interpolate(t){return this.value}}class zo{constructor(t,n,r,o){this.centerA=t,this.centerB=n,this.valueA=r,this.valueB=o}interpolate(t){const n=this.centerB.sub(this.centerA),o=t.sub(this.centerA).dot(n)/n.dot(n);return kn(this.valueA,this.valueB,o)}}class Lo extends Ue{constructor(t,n){super(t.map(({x:r,y:o})=>[r,o]),n)}interpolate(t){return this.getValue([t.x,t.y])}}class gt{constructor(t,n){switch(A(t.length===n.length),t.length){case 0:this.interpolator=new Do;break;case 1:this.interpolator=new No(n[0]);break;case 2:this.interpolator=new zo(t[0],t[1],n[0],n[1]);break;default:this.interpolator=new Lo(t,n)}}interpolate(t){return this.interpolator.interpolate(t)}}class $o{constructor(){this.cache=new Map}getCenterPointsAtPosition(t,n,r){switch(r.type){case"keyPointId":{const o=t.getShapeVersion(r.keyPointId,n);if(!o){const i=t.keyPoints.get(r.keyPointId);return this.getCenterPointsAtInterpolatedPosition(t,n,i.position)}return t.getNormalizedCenterPointsForShapeVersion(o.id)}case"interpolated":return this.getCenterPointsAtInterpolatedPosition(t,n,r.scenePosition);default:R(r)}}getCenterPointsAtInterpolatedPosition(t,n,r){const o=t.shapes.get(n),i=new Set(t.iterateShapeVersionsForShape(n));if(!i.size)return[];const s=new Set;for(const l of i)s.add(t.keyPoints.get(l.keyPointId));const a=this.getCacheEntry(o,i,s);let u;return a?u=a.interpolators:(u=this.calculateInterpolators(t,i),this.cache.set(o,{versions:i,keyPoints:s,interpolators:u})),u.map(({x:l,y:c,r:x})=>({center:new E(l.interpolate(r),c.interpolate(r)),radius:x.interpolate(r)}))}calculateInterpolators(t,n){console.time("calculatInterpolators");const r=Array.from(n,a=>({normalizedCenterPoints:t.getNormalizedCenterPointsForShapeVersion(a.id),version:a,keyPoint:t.keyPoints.get(a.keyPointId)})),o=r.map(({keyPoint:a})=>a.position),i=Math.min(...r.map(({normalizedCenterPoints:a})=>a.length)),s=[];for(let a=0;a<i;a++){const u=r.map(({normalizedCenterPoints:x})=>x[a].center.x),l=r.map(({normalizedCenterPoints:x})=>x[a].center.y),c=r.map(({normalizedCenterPoints:x})=>x[a].radius);s.push({x:new gt(o,u),y:new gt(o,l),r:new gt(o,c)})}return console.timeEnd("calculatInterpolators"),s}getCacheEntry(t,n,r){const o=this.cache.get(t);if(!o||n.size!==o.versions.size||r.size!==o.keyPoints.size)return null;for(const i of n)if(!o.versions.has(i))return null;for(const i of r)if(!o.keyPoints.has(i))return null;return o}}const Ao=new $o;function Mt(e){const t=[],n=[];if(e.length===0)return[];if(e.length===1){const x=[];for(let h=0;h<12;h++)x.push(e[0].center.add(E.fromPolar(h*Math.PI/6,e[0].radius)));return x}const r=e[0],i=e[1].center.sub(r.center).normalize(),s=i.perpendicular().scale(r.radius);t.push(r.center.sub(i.scale(r.radius))),t.push(r.center.sub(s)),n.push(r.center.add(s));for(let x=1;x<e.length-1;x++){const h=e[x-1],m=e[x],g=e[x+1].center.sub(h.center).normalize().perpendicular().scale(m.radius);t.push(m.center.sub(g)),n.push(m.center.add(g))}const a=e[e.length-2],u=e[e.length-1],l=u.center.sub(a.center).normalize(),c=l.perpendicular().scale(u.radius);return t.push(u.center.sub(c)),t.push(u.center.add(l.scale(u.radius))),n.push(u.center.add(c)),t.concat(n.reverse())}class Mo{constructor(t){this.value=t,this.event=new Br}get(){return this.value}set(t){const n=this.value;this.value=ge(this.value,t),this.value!==n&&this.event.emit(this.value,n)}subscribe(t){return this.event.listen(t)}}function Qn(e){return y.exports.useSyncExternalStore(y.exports.useCallback(t=>e.subscribe(t),[e]),()=>e.get())}function Fo(e){return y.exports.useCallback(t=>e.set(t),[e])}function _o(e){return[Qn(e),Fo(e)]}const Yn=typeof window>"u"||typeof document>"u";let ie=Yn?y.exports.useEffect:y.exports.useLayoutEffect;function re(e){let t=y.exports.useRef(e);return ie(()=>{t.current=e},[e]),t}function Ro(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function ut(){let e=[],t=[],n={enqueue(r){t.push(r)},addEventListener(r,o,i,s){return r.addEventListener(o,i,s),n.add(()=>r.removeEventListener(o,i,s))},requestAnimationFrame(...r){let o=requestAnimationFrame(...r);return n.add(()=>cancelAnimationFrame(o))},nextFrame(...r){return n.requestAnimationFrame(()=>n.requestAnimationFrame(...r))},setTimeout(...r){let o=setTimeout(...r);return n.add(()=>clearTimeout(o))},microTask(...r){let o={current:!0};return Ro(()=>{o.current&&r[0]()}),n.add(()=>{o.current=!1})},add(r){return e.push(r),()=>{let o=e.indexOf(r);if(o>=0){let[i]=e.splice(o,1);i()}}},dispose(){for(let r of e.splice(0))r()},async workQueue(){for(let r of t.splice(0))await r()}};return n}function Xn(){let[e]=y.exports.useState(ut);return y.exports.useEffect(()=>()=>e.dispose(),[e]),e}let k=function(e){let t=re(e);return C.useCallback((...n)=>t.current(...n),[t])},wt={serverHandoffComplete:!1};function qt(){let[e,t]=y.exports.useState(wt.serverHandoffComplete);return y.exports.useEffect(()=>{e!==!0&&t(!0)},[e]),y.exports.useEffect(()=>{wt.serverHandoffComplete===!1&&(wt.serverHandoffComplete=!0)},[]),e}var vn;let Vo=0;function mn(){return++Vo}let se=(vn=C.useId)!=null?vn:function(){let e=qt(),[t,n]=C.useState(e?mn:null);return ie(()=>{t===null&&n(mn())},[t]),t!=null?""+t:void 0};function M(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,M),r}function Zt(e){return Yn?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Ft=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var we=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(we||{}),Bo=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Bo||{}),Uo=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Uo||{});function er(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ft))}var Jt=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Jt||{});function tr(e,t=0){var n;return e===((n=Zt(e))==null?void 0:n.body)?!1:M(t,{[0](){return e.matches(Ft)},[1](){let r=e;for(;r!==null;){if(r.matches(Ft))return!0;r=r.parentElement}return!1}})}let jo=["textarea","input"].join(",");function Ho(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,jo))!=null?n:!1}function Ko(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let s=o.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Te(e,t,n=!0,r=null){let o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,i=Array.isArray(e)?n?Ko(e):e:er(e);r=r!=null?r:o.activeElement;let s=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,i.indexOf(r))-1;if(t&4)return Math.max(0,i.indexOf(r))+1;if(t&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},l=0,c=i.length,x;do{if(l>=c||l+c<=0)return 0;let h=a+l;if(t&16)h=(h+c)%c;else{if(h<0)return 3;if(h>=c)return 1}x=i[h],x==null||x.focus(u),l+=s}while(x!==o.activeElement);return t&6&&Ho(x)&&x.select(),x.hasAttribute("tabindex")||x.setAttribute("tabindex","0"),2}function Pt(e,t,n){let r=re(t);y.exports.useEffect(()=>{function o(i){r.current(i)}return document.addEventListener(e,o,n),()=>document.removeEventListener(e,o,n)},[e,n])}function Wo(e,t,n=!0){let r=y.exports.useRef(!1);y.exports.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function o(s,a){if(!r.current||s.defaultPrevented)return;let u=function c(x){return typeof x=="function"?c(x()):Array.isArray(x)||x instanceof Set?x:[x]}(e),l=a(s);if(l!==null&&!!l.ownerDocument.documentElement.contains(l)){for(let c of u){if(c===null)continue;let x=c instanceof HTMLElement?c:c.current;if(x!=null&&x.contains(l))return}return!tr(l,Jt.Loose)&&l.tabIndex!==-1&&s.preventDefault(),t(s,l)}}let i=y.exports.useRef(null);Pt("mousedown",s=>{r.current&&(i.current=s.target)},!0),Pt("click",s=>{!i.current||(o(s,()=>i.current),i.current=null)},!0),Pt("blur",s=>o(s,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function gn(e){var t;if(e.type)return e.type;let n=(t=e.as)!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function nr(e,t){let[n,r]=y.exports.useState(()=>gn(e));return ie(()=>{r(gn(e))},[e.type,e.as]),ie(()=>{n||!t.current||t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&r("button")},[n,t]),n}let rr=Symbol();function qo(e,t=!0){return Object.assign(e,{[rr]:t})}function G(...e){let t=y.exports.useRef(e);y.exports.useEffect(()=>{t.current=e},[e]);let n=k(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||(r==null?void 0:r[rr]))?void 0:n}var Ae=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ae||{}),te=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(te||{});function q({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:s}){let a=or(t,e);if(i)return Qe(a,n,r,s);let u=o!=null?o:0;if(u&2){let{static:l=!1,...c}=a;if(l)return Qe(c,n,r,s)}if(u&1){let{unmount:l=!0,...c}=a;return M(l?0:1,{[0](){return null},[1](){return Qe({...c,hidden:!0,style:{display:"none"}},n,r,s)}})}return Qe(a,n,r,s)}function Qe(e,t={},n,r){let{as:o=n,children:i,refName:s="ref",...a}=St(e,["unmount","static"]),u=e.ref!==void 0?{[s]:e.ref}:{},l=typeof i=="function"?i(t):i;a.className&&typeof a.className=="function"&&(a.className=a.className(t));let c={};if(t){let x=!1,h=[];for(let[m,d]of Object.entries(t))typeof d=="boolean"&&(x=!0),d===!0&&h.push(m);x&&(c["data-headlessui-state"]=h.join(" "))}if(o===y.exports.Fragment&&Object.keys(_t(a)).length>0){if(!y.exports.isValidElement(l)||Array.isArray(l)&&l.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(a).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`));return y.exports.cloneElement(l,Object.assign({},or(l.props,_t(St(a,["ref"]))),c,u,Zo(l.ref,u.ref)))}return y.exports.createElement(o,Object.assign({},St(a,["ref"]),o!==y.exports.Fragment&&u,o!==y.exports.Fragment&&c),l)}function Zo(...e){return{ref:e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}}function or(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](o,...i){let s=n[r];for(let a of s){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;a(o,...i)}}});return t}function Z(e){var t;return Object.assign(y.exports.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function _t(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function St(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Gt(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&Jo(n)?!1:r}function Jo(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function Go(e){var t;let n=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(n){for(let r of n.elements)if(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image"){r.click();return}}}let Qo="div";var Ke=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ke||{});let ot=Z(function(e,t){let{features:n=1,...r}=e,o={ref:t,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return q({ourProps:o,theirProps:r,slot:{},defaultTag:Qo,name:"Hidden"})}),Qt=y.exports.createContext(null);Qt.displayName="OpenClosedContext";var ae=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ae||{});function ct(){return y.exports.useContext(Qt)}function ir({value:e,children:t}){return C.createElement(Qt.Provider,{value:e},t)}var Y=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Y||{});function Yo(e,t,n){let[r,o]=y.exports.useState(n),i=e!==void 0;return[i?e:r,k(s=>(i||o(s),t==null?void 0:t(s)))]}function Xo(e,t,n){let r=re(t);y.exports.useEffect(()=>{function o(i){r.current(i)}return window.addEventListener(e,o,n),()=>window.removeEventListener(e,o,n)},[e,n])}var Pe=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Pe||{});function sr(){let e=y.exports.useRef(0);return Xo("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function ar(){let e=y.exports.useRef(!1);return ie(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Yt(...e){return y.exports.useMemo(()=>Zt(...e),[...e])}function ei(e,t,n,r){let o=re(n);y.exports.useEffect(()=>{e=e!=null?e:window;function i(s){o.current(s)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}let lr=y.exports.createContext(null);function ur(){let e=y.exports.useContext(lr);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ur),t}return e}function ti(){let[e,t]=y.exports.useState([]);return[e.length>0?e.join(" "):void 0,y.exports.useMemo(()=>function(n){let r=k(i=>(t(s=>[...s,i]),()=>t(s=>{let a=s.slice(),u=a.indexOf(i);return u!==-1&&a.splice(u,1),a}))),o=y.exports.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return C.createElement(lr.Provider,{value:o},n.children)},[t])]}let ni="p",ri=Z(function(e,t){let n=ur(),r=`headlessui-description-${se()}`,o=G(t);ie(()=>n.register(r),[r,n.register]);let i=e,s={ref:o,...n.props,id:r};return q({ourProps:s,theirProps:i,slot:n.slot||{},defaultTag:ni,name:n.name||"Description"})});var oi=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(oi||{}),ii=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(ii||{});let si={[0]:e=>({...e,popoverState:M(e.popoverState,{[0]:1,[1]:0})}),[1](e){return e.popoverState===1?e:{...e,popoverState:1}},[2](e,t){return e.button===t.button?e:{...e,button:t.button}},[3](e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},[4](e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},[5](e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},Xt=y.exports.createContext(null);Xt.displayName="PopoverContext";function yt(e){let t=y.exports.useContext(Xt);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,yt),n}return t}let en=y.exports.createContext(null);en.displayName="PopoverAPIContext";function tn(e){let t=y.exports.useContext(en);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,tn),n}return t}let nn=y.exports.createContext(null);nn.displayName="PopoverGroupContext";function cr(){return y.exports.useContext(nn)}let rn=y.exports.createContext(null);rn.displayName="PopoverPanelContext";function ai(){return y.exports.useContext(rn)}function li(e,t){return M(t.type,si,e,t)}let ui="div",ci=Z(function(e,t){var n;let r=`headlessui-popover-button-${se()}`,o=`headlessui-popover-panel-${se()}`,i=y.exports.useRef(null),s=G(t,qo(P=>{i.current=P})),a=y.exports.useReducer(li,{popoverState:1,button:null,buttonId:r,panel:null,panelId:o,beforePanelSentinel:y.exports.createRef(),afterPanelSentinel:y.exports.createRef()}),[{popoverState:u,button:l,panel:c,beforePanelSentinel:x,afterPanelSentinel:h},m]=a,d=Yt((n=i.current)!=null?n:l);y.exports.useEffect(()=>m({type:3,buttonId:r}),[r,m]),y.exports.useEffect(()=>m({type:5,panelId:o}),[o,m]);let f=y.exports.useMemo(()=>{if(!l||!c)return!1;for(let P of document.querySelectorAll("body > *"))if(Number(P==null?void 0:P.contains(l))^Number(P==null?void 0:P.contains(c)))return!0;return!1},[l,c]),g=y.exports.useMemo(()=>({buttonId:r,panelId:o,close:()=>m({type:1})}),[r,o,m]),b=cr(),w=b==null?void 0:b.registerPopover,S=k(()=>{var P;return(P=b==null?void 0:b.isFocusWithinPopoverGroup())!=null?P:(d==null?void 0:d.activeElement)&&((l==null?void 0:l.contains(d.activeElement))||(c==null?void 0:c.contains(d.activeElement)))});y.exports.useEffect(()=>w==null?void 0:w(g),[w,g]),ei(d==null?void 0:d.defaultView,"focus",P=>{var T,D,U,J;u===0&&(S()||!l||!c||(D=(T=x.current)==null?void 0:T.contains)!=null&&D.call(T,P.target)||(J=(U=h.current)==null?void 0:U.contains)!=null&&J.call(U,P.target)||m({type:1}))},!0),Wo([l,c],(P,T)=>{m({type:1}),tr(T,Jt.Loose)||(P.preventDefault(),l==null||l.focus())},u===0);let v=k(P=>{m({type:1});let T=(()=>P?P instanceof HTMLElement?P:"current"in P&&P.current instanceof HTMLElement?P.current:l:l)();T==null||T.focus()}),I=y.exports.useMemo(()=>({close:v,isPortalled:f}),[v,f]),z=y.exports.useMemo(()=>({open:u===0,close:v}),[u,v]),N=e,L={ref:s};return C.createElement(Xt.Provider,{value:a},C.createElement(en.Provider,{value:I},C.createElement(ir,{value:M(u,{[0]:ae.Open,[1]:ae.Closed})},q({ourProps:L,theirProps:N,slot:z,defaultTag:ui,name:"Popover"}))))}),yi="button",xi=Z(function(e,t){let[n,r]=yt("Popover.Button"),{isPortalled:o}=tn("Popover.Button"),i=y.exports.useRef(null),s=`headlessui-focus-sentinel-${se()}`,a=cr(),u=a==null?void 0:a.closeOthers,l=ai(),c=l===null?!1:l===n.panelId,x=G(i,t,c?null:P=>r({type:2,button:P})),h=G(i,t),m=Yt(i),d=k(P=>{var T,D,U;if(c){if(n.popoverState===1)return;switch(P.key){case Y.Space:case Y.Enter:P.preventDefault(),(D=(T=P.target).click)==null||D.call(T),r({type:1}),(U=n.button)==null||U.focus();break}}else switch(P.key){case Y.Space:case Y.Enter:P.preventDefault(),P.stopPropagation(),n.popoverState===1&&(u==null||u(n.buttonId)),r({type:0});break;case Y.Escape:if(n.popoverState!==0)return u==null?void 0:u(n.buttonId);if(!i.current||(m==null?void 0:m.activeElement)&&!i.current.contains(m.activeElement))return;P.preventDefault(),P.stopPropagation(),r({type:1});break}}),f=k(P=>{c||P.key===Y.Space&&P.preventDefault()}),g=k(P=>{var T,D;Gt(P.currentTarget)||e.disabled||(c?(r({type:1}),(T=n.button)==null||T.focus()):(P.preventDefault(),P.stopPropagation(),n.popoverState===1&&(u==null||u(n.buttonId)),r({type:0}),(D=n.button)==null||D.focus()))}),b=k(P=>{P.preventDefault(),P.stopPropagation()}),w=n.popoverState===0,S=y.exports.useMemo(()=>({open:w}),[w]),v=nr(e,i),I=e,z=c?{ref:h,type:v,onKeyDown:d,onClick:g}:{ref:x,id:n.buttonId,type:v,"aria-expanded":e.disabled?void 0:n.popoverState===0,"aria-controls":n.panel?n.panelId:void 0,onKeyDown:d,onKeyUp:f,onClick:g,onMouseDown:b},N=sr(),L=k(()=>{let P=n.panel;if(!P)return;function T(){M(N.current,{[Pe.Forwards]:()=>Te(P,we.First),[Pe.Backwards]:()=>Te(P,we.Last)})}T()});return V(le,{children:[q({ourProps:z,theirProps:I,slot:S,defaultTag:yi,name:"Popover.Button"}),w&&!c&&o&&p(ot,{id:s,features:Ke.Focusable,as:"button",type:"button",onFocus:L})]})}),di="div",pi=Ae.RenderStrategy|Ae.Static,fi=Z(function(e,t){let[{popoverState:n},r]=yt("Popover.Overlay"),o=G(t),i=`headlessui-popover-overlay-${se()}`,s=ct(),a=(()=>s!==null?s===ae.Open:n===0)(),u=k(c=>{if(Gt(c.currentTarget))return c.preventDefault();r({type:1})}),l=y.exports.useMemo(()=>({open:n===0}),[n]);return q({ourProps:{ref:o,id:i,"aria-hidden":!0,onClick:u},theirProps:e,slot:l,defaultTag:di,features:pi,visible:a,name:"Popover.Overlay"})}),hi="div",vi=Ae.RenderStrategy|Ae.Static,mi=Z(function(e,t){let{focus:n=!1,...r}=e,[o,i]=yt("Popover.Panel"),{close:s,isPortalled:a}=tn("Popover.Panel"),u=`headlessui-focus-sentinel-before-${se()}`,l=`headlessui-focus-sentinel-after-${se()}`,c=y.exports.useRef(null),x=G(c,t,I=>{i({type:4,panel:I})}),h=Yt(c),m=ct(),d=(()=>m!==null?m===ae.Open:o.popoverState===0)(),f=k(I=>{var z;switch(I.key){case Y.Escape:if(o.popoverState!==0||!c.current||(h==null?void 0:h.activeElement)&&!c.current.contains(h.activeElement))return;I.preventDefault(),I.stopPropagation(),i({type:1}),(z=o.button)==null||z.focus();break}});y.exports.useEffect(()=>{var I;e.static||o.popoverState===1&&((I=e.unmount)!=null?I:!0)&&i({type:4,panel:null})},[o.popoverState,e.unmount,e.static,i]),y.exports.useEffect(()=>{if(!n||o.popoverState!==0||!c.current)return;let I=h==null?void 0:h.activeElement;c.current.contains(I)||Te(c.current,we.First)},[n,c,o.popoverState]);let g=y.exports.useMemo(()=>({open:o.popoverState===0,close:s}),[o,s]),b={ref:x,id:o.panelId,onKeyDown:f,onBlur:n&&o.popoverState===0?I=>{var z,N,L,P,T;let D=I.relatedTarget;!D||!c.current||(z=c.current)!=null&&z.contains(D)||(i({type:1}),(((L=(N=o.beforePanelSentinel.current)==null?void 0:N.contains)==null?void 0:L.call(N,D))||((T=(P=o.afterPanelSentinel.current)==null?void 0:P.contains)==null?void 0:T.call(P,D)))&&D.focus({preventScroll:!0}))}:void 0,tabIndex:-1},w=sr(),S=k(()=>{let I=c.current;if(!I)return;function z(){M(w.current,{[Pe.Forwards]:()=>{Te(I,we.First)},[Pe.Backwards]:()=>{var N;(N=o.button)==null||N.focus({preventScroll:!0})}})}z()}),v=k(()=>{let I=c.current;if(!I)return;function z(){M(w.current,{[Pe.Forwards]:()=>{var N,L,P;if(!o.button)return;let T=er(),D=T.indexOf(o.button),U=T.slice(0,D+1),J=[...T.slice(D+1),...U];for(let Ee of J.slice())if(((L=(N=Ee==null?void 0:Ee.id)==null?void 0:N.startsWith)==null?void 0:L.call(N,"headlessui-focus-sentinel-"))||((P=o.panel)==null?void 0:P.contains(Ee))){let qe=J.indexOf(Ee);qe!==-1&&J.splice(qe,1)}Te(J,we.First,!1)},[Pe.Backwards]:()=>Te(I,we.Last)})}z()});return C.createElement(rn.Provider,{value:o.panelId},d&&a&&p(ot,{id:u,ref:o.beforePanelSentinel,features:Ke.Focusable,as:"button",type:"button",onFocus:S}),q({ourProps:b,theirProps:r,slot:g,defaultTag:hi,features:vi,visible:d,name:"Popover.Panel"}),d&&a&&p(ot,{id:l,ref:o.afterPanelSentinel,features:Ke.Focusable,as:"button",type:"button",onFocus:v}))}),gi="div",wi=Z(function(e,t){let n=y.exports.useRef(null),r=G(n,t),[o,i]=y.exports.useState([]),s=k(d=>{i(f=>{let g=f.indexOf(d);if(g!==-1){let b=f.slice();return b.splice(g,1),b}return f})}),a=k(d=>(i(f=>[...f,d]),()=>s(d))),u=k(()=>{var d;let f=Zt(n);if(!f)return!1;let g=f.activeElement;return(d=n.current)!=null&&d.contains(g)?!0:o.some(b=>{var w,S;return((w=f.getElementById(b.buttonId))==null?void 0:w.contains(g))||((S=f.getElementById(b.panelId))==null?void 0:S.contains(g))})}),l=k(d=>{for(let f of o)f.buttonId!==d&&f.close()}),c=y.exports.useMemo(()=>({registerPopover:a,unregisterPopover:s,isFocusWithinPopoverGroup:u,closeOthers:l}),[a,s,u,l]),x=y.exports.useMemo(()=>({}),[]),h=e,m={ref:r};return C.createElement(nn.Provider,{value:c},q({ourProps:m,theirProps:h,slot:x,defaultTag:gi,name:"Popover.Group"}))}),bt=Object.assign(ci,{Button:xi,Overlay:fi,Panel:mi,Group:wi}),yr=y.exports.createContext(null);function xr(){let e=y.exports.useContext(yr);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,xr),t}return e}function Pi(){let[e,t]=y.exports.useState([]);return[e.length>0?e.join(" "):void 0,y.exports.useMemo(()=>function(n){let r=k(i=>(t(s=>[...s,i]),()=>t(s=>{let a=s.slice(),u=a.indexOf(i);return u!==-1&&a.splice(u,1),a}))),o=y.exports.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return C.createElement(yr.Provider,{value:o},n.children)},[t])]}let Si="label",bi=Z(function(e,t){let{passive:n=!1,...r}=e,o=xr(),i=`headlessui-label-${se()}`,s=G(t);ie(()=>o.register(i),[i,o.register]);let a={ref:s,...o.props,id:i};return n&&("onClick"in a&&delete a.onClick,"onClick"in r&&delete r.onClick),q({ourProps:a,theirProps:r,slot:o.slot||{},defaultTag:Si,name:o.name||"Label"})}),on=y.exports.createContext(null);on.displayName="GroupContext";let Ii=y.exports.Fragment;function Ei(e){let[t,n]=y.exports.useState(null),[r,o]=Pi(),[i,s]=ti(),a=y.exports.useMemo(()=>({switch:t,setSwitch:n,labelledby:r,describedby:i}),[t,n,r,i]),u={},l=e;return C.createElement(s,{name:"Switch.Description"},C.createElement(o,{name:"Switch.Label",props:{onClick(){!t||(t.click(),t.focus({preventScroll:!0}))}}},C.createElement(on.Provider,{value:a},q({ourProps:u,theirProps:l,defaultTag:Ii,name:"Switch.Group"}))))}let ki="button",Ci=Z(function(e,t){let{checked:n,defaultChecked:r=!1,onChange:o,name:i,value:s,...a}=e,u=`headlessui-switch-${se()}`,l=y.exports.useContext(on),c=y.exports.useRef(null),x=G(c,t,l===null?null:l.setSwitch),[h,m]=Yo(n,o,r),d=k(()=>m==null?void 0:m(!h)),f=k(v=>{if(Gt(v.currentTarget))return v.preventDefault();v.preventDefault(),d()}),g=k(v=>{v.key===Y.Space?(v.preventDefault(),d()):v.key===Y.Enter&&Go(v.currentTarget)}),b=k(v=>v.preventDefault()),w=y.exports.useMemo(()=>({checked:h}),[h]),S={id:u,ref:x,role:"switch",type:nr(e,c),tabIndex:0,"aria-checked":h,"aria-labelledby":l==null?void 0:l.labelledby,"aria-describedby":l==null?void 0:l.describedby,onClick:f,onKeyUp:g,onKeyPress:b};return V(le,{children:[i!=null&&h&&C.createElement(ot,{features:Ke.Hidden,..._t({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:h,name:i,value:s})}),q({ourProps:S,theirProps:a,slot:w,defaultTag:ki,name:"Switch"})]})}),Ti=Object.assign(Ci,{Group:Ei,Label:bi,Description:ri});function Oi(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function It(e,...t){e&&t.length>0&&e.classList.add(...t)}function Et(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Rt=(e=>(e.Ended="ended",e.Cancelled="cancelled",e))(Rt||{});function Di(e,t){let n=ut();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:o}=getComputedStyle(e),[i,s]=[r,o].map(a=>{let[u=0]=a.split(",").filter(Boolean).map(l=>l.includes("ms")?parseFloat(l):parseFloat(l)*1e3).sort((l,c)=>c-l);return u});if(i+s!==0){let a=[];a.push(n.addEventListener(e,"transitionrun",u=>{u.target===u.currentTarget&&(a.splice(0).forEach(l=>l()),a.push(n.addEventListener(e,"transitionend",l=>{l.target===l.currentTarget&&(t("ended"),a.splice(0).forEach(c=>c()))}),n.addEventListener(e,"transitioncancel",l=>{l.target===l.currentTarget&&(t("cancelled"),a.splice(0).forEach(c=>c()))})))}))}else t("ended");return n.add(()=>t("cancelled")),n.dispose}function Ni(e,t,n,r){let o=n?"enter":"leave",i=ut(),s=r!==void 0?Oi(r):()=>{};o==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let a=M(o,{enter:()=>t.enter,leave:()=>t.leave}),u=M(o,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),l=M(o,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Et(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),It(e,...a,...l),i.nextFrame(()=>{Et(e,...l),It(e,...u),Di(e,c=>(c==="ended"&&(Et(e,...a),It(e,...t.entered)),s(c)))}),i.dispose}function zi({container:e,direction:t,classes:n,onStart:r,onStop:o}){let i=ar(),s=Xn(),a=re(t);ie(()=>{let u=ut();s.add(u.dispose);let l=e.current;if(!!l&&a.current!=="idle"&&!!i.current)return u.dispose(),r.current(a.current),u.add(Ni(l,n.current,a.current==="enter",c=>{u.dispose(),M(c,{[Rt.Ended](){o.current(a.current)},[Rt.Cancelled]:()=>{}})})),u.dispose},[t])}function ve(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let xt=y.exports.createContext(null);xt.displayName="TransitionContext";var Li=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Li||{});function $i(){let e=y.exports.useContext(xt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Ai(){let e=y.exports.useContext(dt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let dt=y.exports.createContext(null);dt.displayName="NestingContext";function pt(e){return"children"in e?pt(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function dr(e,t){let n=re(e),r=y.exports.useRef([]),o=ar(),i=Xn(),s=k((m,d=te.Hidden)=>{let f=r.current.findIndex(({el:g})=>g===m);f!==-1&&(M(d,{[te.Unmount](){r.current.splice(f,1)},[te.Hidden](){r.current[f].state="hidden"}}),i.microTask(()=>{var g;!pt(r)&&o.current&&((g=n.current)==null||g.call(n))}))}),a=k(m=>{let d=r.current.find(({el:f})=>f===m);return d?d.state!=="visible"&&(d.state="visible"):r.current.push({el:m,state:"visible"}),()=>s(m,te.Unmount)}),u=y.exports.useRef([]),l=y.exports.useRef(Promise.resolve()),c=y.exports.useRef({enter:[],leave:[],idle:[]}),x=k((m,d,f)=>{u.current.splice(0),t&&(t.chains.current[d]=t.chains.current[d].filter(([g])=>g!==m)),t==null||t.chains.current[d].push([m,new Promise(g=>{u.current.push(g)})]),t==null||t.chains.current[d].push([m,new Promise(g=>{Promise.all(c.current[d].map(([b,w])=>w)).then(()=>g())})]),d==="enter"?l.current=l.current.then(()=>t==null?void 0:t.wait.current).then(()=>f(d)):f(d)}),h=k((m,d,f)=>{Promise.all(c.current[d].splice(0).map(([g,b])=>b)).then(()=>{var g;(g=u.current.shift())==null||g()}).then(()=>f(d))});return y.exports.useMemo(()=>({children:r,register:a,unregister:s,onStart:x,onStop:h,wait:l,chains:c}),[a,s,r,x,h,c,l])}function Mi(){}let Fi=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function wn(e){var t;let n={};for(let r of Fi)n[r]=(t=e[r])!=null?t:Mi;return n}function _i(e){let t=y.exports.useRef(wn(e));return y.exports.useEffect(()=>{t.current=wn(e)},[e]),t}let Ri="div",pr=Ae.RenderStrategy,fr=Z(function(e,t){let{beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:i,enter:s,enterFrom:a,enterTo:u,entered:l,leave:c,leaveFrom:x,leaveTo:h,...m}=e,d=y.exports.useRef(null),f=G(d,t),g=m.unmount?te.Unmount:te.Hidden,{show:b,appear:w,initial:S}=$i(),[v,I]=y.exports.useState(b?"visible":"hidden"),z=Ai(),{register:N,unregister:L}=z,P=y.exports.useRef(null);y.exports.useEffect(()=>N(d),[N,d]),y.exports.useEffect(()=>{if(g===te.Hidden&&!!d.current){if(b&&v!=="visible"){I("visible");return}return M(v,{hidden:()=>L(d),visible:()=>N(d)})}},[v,d,N,L,b,g]);let T=re({enter:ve(s),enterFrom:ve(a),enterTo:ve(u),entered:ve(l),leave:ve(c),leaveFrom:ve(x),leaveTo:ve(h)}),D=_i({beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:i}),U=qt();y.exports.useEffect(()=>{if(U&&v==="visible"&&d.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[d,v,U]);let J=S&&!w,Ee=(()=>!U||J||P.current===b?"idle":b?"enter":"leave")(),qe=k(ue=>M(ue,{enter:()=>D.current.beforeEnter(),leave:()=>D.current.beforeLeave(),idle:()=>{}})),Pr=k(ue=>M(ue,{enter:()=>D.current.afterEnter(),leave:()=>D.current.afterLeave(),idle:()=>{}})),Ze=dr(()=>{I("hidden"),L(d)},z);zi({container:d,classes:T,direction:Ee,onStart:re(ue=>{Ze.onStart(d,ue,qe)}),onStop:re(ue=>{Ze.onStop(d,ue,Pr),ue==="leave"&&!pt(Ze)&&(I("hidden"),L(d))})}),y.exports.useEffect(()=>{!J||(g===te.Hidden?P.current=null:P.current=b)},[b,J,v]);let Sr=m,br={ref:f};return p(dt.Provider,{value:Ze,children:p(ir,{value:M(v,{visible:ae.Open,hidden:ae.Closed}),children:q({ourProps:br,theirProps:Sr,defaultTag:Ri,features:pr,visible:v==="visible",name:"Transition.Child"})})})}),Vt=Z(function(e,t){let{show:n,appear:r=!1,unmount:o,...i}=e,s=y.exports.useRef(null),a=G(s,t);qt();let u=ct();if(n===void 0&&u!==null&&(n=M(u,{[ae.Open]:!0,[ae.Closed]:!1})),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[l,c]=y.exports.useState(n?"visible":"hidden"),x=dr(()=>{c("hidden")}),[h,m]=y.exports.useState(!0),d=y.exports.useRef([n]);ie(()=>{h!==!1&&d.current[d.current.length-1]!==n&&(d.current.push(n),m(!1))},[d,n]);let f=y.exports.useMemo(()=>({show:n,appear:r,initial:h}),[n,r,h]);y.exports.useEffect(()=>{if(n)c("visible");else if(!pt(x))c("hidden");else{let b=s.current;if(!b)return;let w=b.getBoundingClientRect();w.x===0&&w.y===0&&w.width===0&&w.height===0&&c("hidden")}},[n,x]);let g={unmount:o};return p(dt.Provider,{value:x,children:p(xt.Provider,{value:f,children:q({ourProps:{...g,as:y.exports.Fragment,children:C.createElement(fr,{ref:a,...g,...i})},theirProps:{},defaultTag:y.exports.Fragment,features:pr,visible:l==="visible",name:"Transition"})})})}),Vi=Z(function(e,t){let n=y.exports.useContext(xt)!==null,r=ct()!==null;return p(le,{children:!n&&r?C.createElement(Vt,{ref:t,...e}):C.createElement(fr,{ref:t,...e})})}),hr=Object.assign(Vt,{Child:Vi,Root:Vt});const vr="splatapus.debugSettings",Bi=de({shouldShowPoints:Vr}),Ui={shouldShowPoints:!1};function ji(){const[e,t]=_o(sn),[n,r]=y.exports.useState(null),o=Jn(n,16);return V(bt,{className:"pointer-events-auto relative px-3 py-2 opacity-0 hover:opacity-100 ui-open:opacity-100",children:[p(bt.Button,{as:oe,children:"!"}),p(hr,{className:"absolute bottom-12 right-3 origin-bottom-right",enter:"transition duration-200 ease-out-back",enterFrom:"opacity-0 scale-75",enterTo:"opacity-100",leave:"transition duration-300 ease-in-back",leaveFrom:"opacity-100",leaveTo:"opacity-0 scale-75",children:p(bt.Panel,{ref:r,className:j("flex  w-60 flex-col gap-3 bg-stone-100 p-3"),style:{clipPath:o},children:p(Hi,{label:"Show points",value:e.shouldShowPoints,onChange:i=>t({...e,shouldShowPoints:i})})})})]})}function Hi({label:e,value:t,onChange:n}){return V(Ti,{checked:t,onChange:n,as:Gn,className:"justify-between py-1 pl-3 pr-1",children:[p("span",{children:e}),p("div",{className:"relative inline-flex h-6 w-10 rounded-full bg-stone-200 transition ui-checked:bg-green-400",children:p("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 rounded-full bg-white transition ui-checked:translate-x-4"})})]})}function Ki(){const e=kt(vr);try{return Bi(JSON.parse(e)).unwrap()}catch{return Ui}}const sn=new Mo(Ki());sn.subscribe(e=>{Cn(vr,JSON.stringify(e))});function Wi(e){return Qn(sn).shouldShowPoints}const qi=C.memo(function({shapeId:t}){const n=Wi(),r=$(({previewPosition:s,interaction:a})=>{if(s.selectedShapeId===t)switch(a.selectedTool.type){case O.Draw:{const u=je.getState(a.selectedTool);switch(u.state){case"drawing":return $n(zn(Ln(u.points,Be),Be),Be.size);case"idle":return null;default:throw R(u)}}case O.Rig:case O.Play:return null;default:throw R(a.selectedTool)}return null}),o=$(({document:s,previewPosition:a})=>Ao.getCenterPointsAtPosition(s,t,a)),i=$(({previewPosition:s})=>s.selectedShapeId===t);return V(le,{children:[p("path",{d:Nt(Mt(o)),className:j(r?"fill-stone-300":i?"fill-stone-800":"fill-stone-600")}),r&&p("path",{d:Nt(Mt(r)),className:j(i?"fill-stone-800":"fill-stone-600")}),n&&(r||o).map((s,a)=>p("circle",{cx:s.center.x,cy:s.center.y,r:s.radius,className:"fill-transparent stroke-cyan-400"},a))]})});function Zi(e){const t=y.exports.useRef(e);return y.exports.useEffect(()=>{t.current=e},[e]),t.current}const Ji=C.memo(function(){const t=$(a=>a.location.viewport),n=$(a=>W.getCanvasClassName(a.interaction)),r=$(a=>a.location.viewport.isSidebarOpen),o=Zi(r),[i,s]=y.exports.useState(!1);return y.exports.useLayoutEffect(()=>{s(!0);const a=setTimeout(()=>s(!1),400);return()=>clearTimeout(a)},[r]),console.log({isTransitioning:i,isSidebarOpen:r,prevIsSidebarOpen:o}),p("svg",{viewBox:`0 0 ${t.screenSize.x} ${t.screenSize.y}`,className:j("absolute top-0 left-0",n),children:p("g",{style:{transform:t.getSceneTransform()},className:j((i||r!==o)&&"transition-transform"),children:p(Gi,{})})})}),Gi=C.memo(function(){const t=At("document");return p(le,{children:Array.from(t.shapes,n=>p(qi,{shapeId:n.id},n.id))})});function Qi(e,t){const n=t.visibleSceneBounds(),r=On.fromLeftTopRightBottom(n.left+n.width/10,n.top+n.height/10,n.right-n.width/10,n.bottom-n.height/10),o=Array.from(e.keyPoints,u=>u.position),s=(Math.min(n.width,n.height)/10)**2;let a=r.getCenter();for(let u=0;u<500;u++){if(o.every(l=>l.distanceToSq(a)>s))return a;a=new E(cn(r.left,r.right),cn(r.top,r.bottom))}return a}const Pn=84,Sn=80;function Yi(){const{updateLocation:e,updateDocument:t}=Q(),n=$(l=>l.location.keyPointId),r=$(l=>l.location.shapeId),o=Array.from($(l=>l.document.keyPoints)),i=Array.from($(l=>l.document.shapes)),s=Array.from(o).findIndex(l=>n===l.id),a=Array.from(i).findIndex(l=>r===l.id),u=Eo();return V("div",{className:"relative flex h-0 flex-auto flex-col gap-4 overflow-auto p-5 [-webkit-overflow-scrolling:touch]",children:[p("div",{className:"absolute top-5 left-5 z-0 w-20 rounded bg-stone-200 ring-2 ring-stone-200 transition-transform",style:{height:-16+Sn*i.length,transform:`translateX(${s*Pn}px)`}}),p("div",{className:"absolute top-5 z-0 h-16 rounded bg-stone-200 ring-2 ring-stone-200 transition-transform",style:{width:-4+Pn*(o.length+1),transform:`translateY(${a*Sn}px)`}}),i.map((l,c)=>p("div",{className:"relative flex w-max flex-col gap-2",children:V("div",{className:"flex gap-1",children:[o.map(x=>p("button",{className:j("overflow-none h-16 w-20 flex-none rounded border",l.id===r&&x.id===n?`${u.border500} ring-1 ${u.ring500} bg-white`:"border-stone-300 bg-white/25 hover:bg-white/50"),onClick:()=>{e(({location:h})=>h.with({shapeId:l.id,keyPointId:x.id}))},children:p(Xi,{width:78,height:62,keyPointId:x.id,shapeId:l.id})},x.id)),p("button",{className:"h-16 w-20 flex-none rounded border border-stone-300 text-xl text-stone-400 hover:bg-white/50",onClick:()=>{const x=Me.generate();t(({document:h,viewport:m})=>h.addKeyPoint(x,Qi(h,m)),{lockstepLocation:h=>h.with({keyPointId:x,shapeId:l.id})})},children:"+"})]})},l.id)),p(oe,{className:"sticky left-0",onClick:()=>{const l=Fe.generate();t(({document:c})=>c.addShape(l),{lockstepLocation:c=>c.with({shapeId:l})})},children:"+ shape"})]})}const Xi=C.memo(function({width:t,height:n,shapeId:r,keyPointId:o}){const s=$(({document:w})=>{const S=w.getShapeVersion(o,r);return S?w.getNormalizedCenterPointsForShapeVersion(S.id):null});if(!s||s.length<2)return null;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(const{center:w,radius:S}of s)a=Math.min(a,w.x-S),l=Math.max(l,w.x+S),u=Math.min(u,w.y-S),c=Math.max(c,w.y+S);const x=l-a,h=c-u,m=t-4*2,d=n-4*2,f=Math.min(m/x,.8),g=Math.min(d/h,.8),b=Math.min(f,g);return p("svg",{viewBox:`0 0 ${t} ${n}`,style:{width:t,height:n},children:p("g",{transform:`translate(${4+Math.max(m-x*b,0)/2}, ${4+Math.max(d-h*b,0)/2}) scale(${b}) translate(${-a}, ${-u})`,children:p("path",{d:Nt(Mt(s)),className:"fill-stone-800"})})})}),es={width:jt},ce=20,ts=p("svg",{viewBox:`0 0 ${ce} ${ce}`,className:"flex-none",style:{width:ce,height:ce},children:p("path",{className:"fill-stone-100",d:["M 0,0",`L ${ce},0`,`L ${ce},${ce}`,`Q ${ce},0 0,0`,"Z"].join(" ")})});function ns({topBarRight:e,topBarLeft:t,rightBar:n,bottomBarLeft:r,bottomBarRight:o}){const i=$(({location:s})=>s.viewport.isSidebarOpen);return V("div",{className:"pointer-events-none absolute inset-0 flex flex-col items-stretch",children:[V("div",{className:"pointer-events-auto flex flex-none items-center justify-between gap-3 bg-stone-100 px-3 py-2",children:[p("h1",{className:"order-1 flex-1 font-bold tracking-wide text-stone-600",children:"splatapus"}),p("div",{className:"order-2 flex flex-1 items-center justify-center gap-2",children:t}),p("div",{className:"order-3 flex flex-1 items-center justify-end gap-2",children:e})]}),V(hr,{className:"flex flex-auto items-start justify-end",show:i,enter:"transition",enterFrom:"translate-x-80",enterTo:"translate-x-0",leave:"transition",leaveFrom:"translate-0",leaveTo:"translate-x-80",children:[ts,p("div",{className:"pointer-events-auto flex h-full flex-col bg-stone-100",style:es,children:n})]}),p("div",{className:"absolute bottom-0 left-0",children:r}),p("div",{className:"absolute bottom-0 right-0 transition-transform",style:{transform:`translateX(${-jt}px)`},children:o})]})}const bn=Nn({id:"doc.0_VcKaG8h9Zf8pyG",keyPoints:{"key.0_a3vKHuIcxpHnVg":{id:"key.0_a3vKHuIcxpHnVg",position:{x:84.4612113767582,y:-310.6259226617922}},"key.1_TYmFrn9Wh1QZ3t":{id:"key.1_TYmFrn9Wh1QZ3t",position:{x:76.77421647506128,y:82.8797180046771}},"key.2_8mSx0MUXiSEjNK":{id:"key.2_8mSx0MUXiSEjNK",position:{x:-290.00197453390416,y:88.34970510918276}},"key.3_RariJQz2eTMOkJ":{id:"key.3_RariJQz2eTMOkJ",position:{x:466.25676711635367,y:91.8418718809971}}},shapes:{"shp.0_n9ry1znj34Bp1k":{id:"shp.0_n9ry1znj34Bp1k"},"shp.1_ONCgL3fjUYIryN":{id:"shp.1_ONCgL3fjUYIryN"},"shp.2_Zwa9ObnrYgWogq":{id:"shp.2_Zwa9ObnrYgWogq"},"shp.3_mUCVyzbyAGCuIa":{id:"shp.3_mUCVyzbyAGCuIa"},"shp.4_SMMSTDAbn3tdXv":{id:"shp.4_SMMSTDAbn3tdXv"},"shp.5_pFzZ21ghrzLlt1":{id:"shp.5_pFzZ21ghrzLlt1"}},shapeVersions:{"shv.0_LwpIe0fFofKDNO":{id:"shv.0_LwpIe0fFofKDNO",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[{x:-41,y:-45},{x:-47,y:-41},{x:-49,y:-39},{x:-53,y:-34},{x:-57,y:-30},{x:-61,y:-25},{x:-64,y:-20},{x:-66,y:-16},{x:-69,y:-11},{x:-71,y:-6},{x:-73,y:-1},{x:-74,y:5},{x:-76,y:11},{x:-76,y:16},{x:-77,y:22},{x:-78,y:28},{x:-78,y:35},{x:-78,y:42},{x:-78,y:49},{x:-78,y:56},{x:-78,y:62},{x:-78,y:68},{x:-76,y:74},{x:-74,y:80},{x:-71,y:86},{x:-68,y:91},{x:-64,y:96},{x:-60,y:102},{x:-55,y:107},{x:-49,y:112},{x:-44,y:118},{x:-37,y:123},{x:-30,y:128},{x:-23,y:132},{x:-15,y:137},{x:-7,y:140},{x:2,y:144},{x:11,y:147},{x:20,y:150},{x:30,y:152},{x:39,y:152},{x:49,y:153},{x:59,y:153},{x:69,y:153},{x:78,y:153},{x:89,y:152},{x:99,y:149},{x:109,y:147},{x:120,y:143},{x:129,y:139},{x:138,y:134},{x:148,y:129},{x:156,y:123},{x:164,y:117},{x:172,y:110},{x:179,y:103},{x:187,y:96},{x:193,y:89},{x:198,y:83},{x:202,y:76},{x:206,y:69},{x:208,y:63},{x:210,y:58},{x:211,y:52},{x:212,y:46},{x:213,y:38},{x:213,y:30},{x:213,y:23},{x:213,y:17},{x:213,y:11},{x:213,y:5},{x:213,y:-3},{x:213,y:-11},{x:213,y:-18},{x:213,y:-23},{x:212,y:-28},{x:211,y:-32},{x:209,y:-36},{x:208,y:-40},{x:206,y:-42},{x:205,y:-44},{x:203,y:-46},{x:201,y:-47},{x:200,y:-48},{x:199,y:-48},{x:199,y:-50}]},"shv.1_SWgK9k5Y2kn7dj":{id:"shv.1_SWgK9k5Y2kn7dj",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[{x:-25,y:-43},{x:-25,y:-47},{x:-25,y:-49},{x:-24,y:-56},{x:-22,y:-65},{x:-19,y:-77},{x:-16,y:-90},{x:-14,y:-101},{x:-10,y:-113},{x:-8,y:-123},{x:-4,y:-131},{x:-2,y:-139},{x:1,y:-145},{x:3,y:-149},{x:4,y:-152},{x:6,y:-154},{x:7,y:-154},{x:8,y:-154},{x:10,y:-153},{x:12,y:-151},{x:15,y:-147},{x:18,y:-142},{x:21,y:-135},{x:24,y:-127},{x:27,y:-118},{x:29,y:-108},{x:30,y:-98},{x:30,y:-88},{x:31,y:-79},{x:32,y:-72},{x:32,y:-67},{x:33,y:-64},{x:33,y:-62},{x:34,y:-62},{x:34,y:-61},{x:34,y:-60},{x:35,y:-59}]},"shv.3_3ILI63YytH2Ite":{id:"shv.3_3ILI63YytH2Ite",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[{x:126,y:-69},{x:127,y:-75},{x:130,y:-84},{x:136,y:-96},{x:142,y:-108},{x:148,y:-118},{x:154,y:-128},{x:161,y:-137},{x:169,y:-145},{x:177,y:-152},{x:183,y:-158},{x:188,y:-162},{x:191,y:-164},{x:192,y:-164},{x:193,y:-164},{x:193,y:-163},{x:194,y:-158},{x:194,y:-152},{x:196,y:-144},{x:196,y:-135},{x:197,y:-125},{x:197,y:-114},{x:197,y:-103},{x:197,y:-92},{x:196,y:-83},{x:195,y:-74},{x:194,y:-67},{x:193,y:-62},{x:192,y:-60},{x:192,y:-58},{x:192,y:-57},{x:192,y:-55},{x:192,y:-50},{x:192,y:-48}]},"shv.4_dljDpCZ90LHjbP":{id:"shv.4_dljDpCZ90LHjbP",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[{x:41,y:-63},{x:46,y:-66},{x:51,y:-67},{x:57,y:-69},{x:65,y:-71},{x:72,y:-72},{x:80,y:-73},{x:89,y:-74},{x:99,y:-74},{x:109,y:-74},{x:115,y:-74},{x:120,y:-74},{x:124,y:-74},{x:127,y:-74},{x:129,y:-74},{x:130,y:-73},{x:130,y:-72}]},"shv.5_g5nKgDG7juS3Au":{id:"shv.5_g5nKgDG7juS3Au",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[{x:21,y:-10},{x:15,y:-10},{x:11,y:-10},{x:5,y:-7},{x:-2,y:-3},{x:-8,y:1},{x:-14,y:6},{x:-18,y:10},{x:-22,y:14},{x:-25,y:19},{x:-27,y:24},{x:-29,y:30},{x:-30,y:38},{x:-30,y:44},{x:-30,y:48},{x:-29,y:52},{x:-26,y:55},{x:-22,y:59},{x:-17,y:62},{x:-10,y:65},{x:-3,y:66},{x:4,y:67},{x:11,y:67},{x:17,y:67},{x:22,y:64},{x:26,y:59},{x:29,y:53},{x:32,y:47},{x:33,y:44},{x:33,y:41},{x:33,y:40},{x:33,y:39},{x:33,y:36},{x:33,y:22},{x:33,y:16},{x:33,y:13},{x:33,y:11},{x:32,y:10},{x:31,y:9},{x:29,y:8},{x:27,y:8},{x:25,y:7},{x:24,y:6},{x:23,y:6},{x:22,y:6},{x:22,y:5},{x:21,y:4},{x:20,y:4},{x:20,y:3},{x:19,y:3},{x:18,y:3},{x:17,y:3}]},"shv.6_fOyfl45j6IoVJD":{id:"shv.6_fOyfl45j6IoVJD",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[{x:151,y:-26},{x:145,y:-27},{x:138,y:-26},{x:127,y:-21},{x:116,y:-14},{x:106,y:-6},{x:98,y:3},{x:91,y:11},{x:87,y:20},{x:84,y:30},{x:83,y:39},{x:83,y:47},{x:86,y:53},{x:92,y:57},{x:100,y:59},{x:110,y:60},{x:121,y:60},{x:133,y:59},{x:144,y:56},{x:154,y:51},{x:163,y:45},{x:172,y:37},{x:177,y:30},{x:180,y:24},{x:182,y:18},{x:184,y:11},{x:184,y:4},{x:184,y:-6},{x:180,y:-13},{x:176,y:-19},{x:171,y:-23},{x:166,y:-25},{x:161,y:-27},{x:155,y:-27},{x:148,y:-27},{x:141,y:-27},{x:135,y:-26},{x:129,y:-23},{x:123,y:-18}]},"shv.7_MNXQuLFOxPhQSP":{id:"shv.7_MNXQuLFOxPhQSP",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[{x:-35,y:25},{x:-41,y:26},{x:-44,y:26},{x:-48,y:26},{x:-53,y:27},{x:-57,y:29},{x:-62,y:30},{x:-67,y:33},{x:-72,y:35},{x:-77,y:38},{x:-83,y:42},{x:-88,y:46},{x:-92,y:50},{x:-97,y:55},{x:-101,y:62},{x:-105,y:68},{x:-108,y:75},{x:-111,y:81},{x:-113,y:87},{x:-114,y:92},{x:-114,y:96},{x:-114,y:101},{x:-114,y:104},{x:-113,y:108},{x:-111,y:111},{x:-108,y:115},{x:-105,y:118},{x:-101,y:121},{x:-98,y:123},{x:-94,y:126},{x:-90,y:128},{x:-85,y:130},{x:-80,y:132},{x:-74,y:133},{x:-69,y:135},{x:-62,y:137},{x:-56,y:138},{x:-49,y:139},{x:-43,y:140},{x:-36,y:140},{x:-30,y:140},{x:-24,y:140},{x:-18,y:140},{x:-12,y:140},{x:-7,y:140},{x:-1,y:141},{x:4,y:142},{x:9,y:142},{x:14,y:143},{x:21,y:144},{x:27,y:145},{x:33,y:147},{x:40,y:147},{x:46,y:148},{x:52,y:148},{x:58,y:148},{x:64,y:148},{x:70,y:148},{x:77,y:149},{x:83,y:149},{x:89,y:149},{x:95,y:149},{x:101,y:149},{x:107,y:149},{x:114,y:149},{x:121,y:149},{x:128,y:149},{x:136,y:149},{x:144,y:148},{x:151,y:147},{x:158,y:147},{x:165,y:145},{x:172,y:144},{x:179,y:144},{x:186,y:143},{x:193,y:142},{x:200,y:140},{x:206,y:139},{x:213,y:137},{x:220,y:134},{x:225,y:132},{x:231,y:130},{x:237,y:127},{x:242,y:123},{x:249,y:119},{x:255,y:113},{x:262,y:108},{x:266,y:103},{x:270,y:99},{x:274,y:95},{x:276,y:92},{x:278,y:89},{x:279,y:86},{x:280,y:83},{x:281,y:80},{x:281,y:77},{x:281,y:75},{x:281,y:74},{x:281,y:72},{x:280,y:69},{x:279,y:65},{x:277,y:60},{x:275,y:56},{x:274,y:53},{x:272,y:50},{x:270,y:47},{x:267,y:43},{x:265,y:39},{x:262,y:35},{x:259,y:30},{x:256,y:27},{x:252,y:23},{x:250,y:21},{x:246,y:18},{x:242,y:16},{x:239,y:14},{x:235,y:11},{x:230,y:10},{x:227,y:8},{x:223,y:8},{x:221,y:7},{x:217,y:7},{x:213,y:6},{x:210,y:6},{x:206,y:6},{x:204,y:6},{x:202,y:6},{x:201,y:6},{x:200,y:6},{x:200,y:5}]},"shv.8_dqc9S1VROeclkw":{id:"shv.8_dqc9S1VROeclkw",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[{x:-20,y:20},{x:-23,y:16},{x:-23,y:13},{x:-25,y:10},{x:-26,y:7},{x:-29,y:4},{x:-32,y:1},{x:-35,y:-1},{x:-38,y:-4},{x:-39,y:-5},{x:-41,y:-6},{x:-43,y:-6},{x:-46,y:-8},{x:-49,y:-9},{x:-53,y:-9},{x:-56,y:-10},{x:-58,y:-10},{x:-59,y:-10},{x:-61,y:-11},{x:-62,y:-11},{x:-63,y:-11},{x:-64,y:-11},{x:-64,y:-12},{x:-64,y:-13},{x:-64,y:-14},{x:-64,y:-15},{x:-64,y:-16},{x:-63,y:-17},{x:-62,y:-18},{x:-61,y:-20},{x:-59,y:-22},{x:-56,y:-24},{x:-54,y:-26},{x:-52,y:-28},{x:-49,y:-29},{x:-46,y:-31},{x:-43,y:-32},{x:-39,y:-33},{x:-36,y:-33},{x:-32,y:-33},{x:-28,y:-33},{x:-24,y:-33},{x:-19,y:-33},{x:-15,y:-32},{x:-12,y:-31},{x:-9,y:-29},{x:-7,y:-28},{x:-5,y:-26},{x:-3,y:-24},{x:-2,y:-22},{x:0,y:-20},{x:2,y:-18},{x:3,y:-14},{x:5,y:-11},{x:7,y:-8},{x:7,y:-6},{x:9,y:-4},{x:9,y:-3},{x:11,y:-1},{x:12,y:0},{x:14,y:2},{x:15,y:4},{x:16,y:6},{x:16,y:8},{x:17,y:8},{x:17,y:9},{x:18,y:10},{x:18,y:11},{x:19,y:11},{x:19,y:12},{x:19,y:13},{x:19,y:14},{x:19,y:15},{x:20,y:16},{x:21,y:17}]},"shv.9_wkf9c4ZDBAwLRf":{id:"shv.9_wkf9c4ZDBAwLRf",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[{x:152,y:-11},{x:156,y:-17},{x:158,y:-21},{x:162,y:-25},{x:167,y:-31},{x:174,y:-36},{x:181,y:-42},{x:189,y:-48},{x:196,y:-54},{x:204,y:-59},{x:212,y:-62},{x:220,y:-63},{x:228,y:-63},{x:236,y:-63},{x:245,y:-63},{x:252,y:-63},{x:257,y:-62},{x:259,y:-61},{x:261,y:-60},{x:262,y:-60},{x:263,y:-59},{x:263,y:-58},{x:263,y:-57},{x:260,y:-55},{x:255,y:-52},{x:250,y:-48},{x:243,y:-43},{x:237,y:-38},{x:230,y:-33},{x:225,y:-27},{x:218,y:-20},{x:213,y:-13},{x:208,y:-6},{x:206,y:-2},{x:204,y:0},{x:204,y:1},{x:204,y:2}]},"shv.10_QVHVJVxyuxdpD":{id:"shv.10_QVHVJVxyuxdpD",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[{x:31,y:17},{x:33,y:16},{x:36,y:16},{x:47,y:11},{x:58,y:6},{x:72,y:1},{x:84,y:-1},{x:99,y:-4},{x:113,y:-6},{x:124,y:-6},{x:134,y:-7},{x:141,y:-8},{x:147,y:-8},{x:152,y:-8},{x:154,y:-8},{x:155,y:-7},{x:155,y:-6},{x:155,y:-4}]},"shv.12_5jxllLtpm93b7":{id:"shv.12_5jxllLtpm93b7",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[{x:19,y:55},{x:12,y:55},{x:9,y:55},{x:4,y:55},{x:-1,y:56},{x:-6,y:57},{x:-10,y:57},{x:-15,y:58},{x:-20,y:59},{x:-26,y:60},{x:-32,y:63},{x:-37,y:65},{x:-43,y:68},{x:-47,y:71},{x:-52,y:74},{x:-54,y:77},{x:-57,y:81},{x:-59,y:86},{x:-61,y:90},{x:-62,y:95},{x:-62,y:98},{x:-62,y:101},{x:-62,y:103},{x:-61,y:105},{x:-56,y:107},{x:-51,y:108},{x:-44,y:110},{x:-37,y:110},{x:-30,y:110},{x:-24,y:110},{x:-17,y:108},{x:-9,y:106},{x:-3,y:103},{x:4,y:100},{x:10,y:97},{x:16,y:94},{x:21,y:91},{x:25,y:88},{x:30,y:84},{x:33,y:81},{x:36,y:77},{x:37,y:75},{x:38,y:73},{x:38,y:72},{x:38,y:71},{x:38,y:70},{x:38,y:69},{x:37,y:69},{x:36,y:67},{x:35,y:66},{x:34,y:65},{x:32,y:61},{x:29,y:54},{x:26,y:51},{x:25,y:50},{x:24,y:50},{x:23,y:50},{x:22,y:50},{x:21,y:50},{x:20,y:51},{x:19,y:52},{x:17,y:54},{x:14,y:57},{x:13,y:59}]},"shv.14_GWIuG0AcQVcWv":{id:"shv.14_GWIuG0AcQVcWv",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[{x:221,y:50},{x:215,y:47},{x:211,y:47},{x:206,y:46},{x:200,y:46},{x:195,y:45},{x:191,y:45},{x:185,y:45},{x:179,y:45},{x:173,y:46},{x:166,y:50},{x:160,y:53},{x:155,y:57},{x:150,y:60},{x:148,y:64},{x:146,y:67},{x:145,y:71},{x:144,y:76},{x:144,y:81},{x:144,y:86},{x:144,y:89},{x:145,y:92},{x:148,y:94},{x:152,y:97},{x:158,y:99},{x:165,y:100},{x:173,y:101},{x:181,y:101},{x:189,y:101},{x:197,y:99},{x:205,y:96},{x:213,y:93},{x:221,y:90},{x:228,y:87},{x:234,y:84},{x:238,y:81},{x:241,y:80},{x:244,y:78},{x:247,y:76},{x:248,y:74},{x:248,y:73},{x:248,y:72},{x:248,y:70},{x:248,y:69},{x:248,y:68},{x:248,y:67},{x:246,y:66},{x:243,y:60},{x:240,y:57},{x:238,y:55},{x:237,y:54},{x:235,y:54},{x:233,y:53},{x:229,y:52},{x:224,y:52},{x:218,y:52},{x:214,y:52},{x:210,y:52},{x:204,y:52},{x:197,y:54}]},"shv.15_IegtY8uWpenHx":{id:"shv.15_IegtY8uWpenHx",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[{x:-137,y:13},{x:-143,y:8},{x:-144,y:8},{x:-146,y:8},{x:-148,y:7},{x:-150,y:6},{x:-152,y:6},{x:-155,y:5},{x:-158,y:4},{x:-161,y:3},{x:-165,y:2},{x:-169,y:1},{x:-173,y:1},{x:-176,y:1},{x:-180,y:1},{x:-183,y:1},{x:-186,y:1},{x:-189,y:1},{x:-192,y:1},{x:-195,y:1},{x:-196,y:1},{x:-198,y:3},{x:-200,y:5},{x:-202,y:10},{x:-204,y:15},{x:-206,y:20},{x:-207,y:24},{x:-208,y:28},{x:-209,y:31},{x:-209,y:35},{x:-209,y:38},{x:-209,y:40},{x:-209,y:43},{x:-209,y:46},{x:-207,y:49},{x:-205,y:52},{x:-204,y:56},{x:-202,y:59},{x:-200,y:63},{x:-199,y:67},{x:-197,y:70},{x:-195,y:72},{x:-194,y:74},{x:-193,y:76},{x:-190,y:77},{x:-188,y:80},{x:-186,y:82},{x:-183,y:84},{x:-179,y:87},{x:-175,y:90},{x:-171,y:93},{x:-166,y:96},{x:-160,y:99},{x:-155,y:102},{x:-149,y:105},{x:-143,y:108},{x:-137,y:110},{x:-131,y:113},{x:-125,y:116},{x:-119,y:120},{x:-112,y:123},{x:-106,y:125},{x:-100,y:127},{x:-94,y:129},{x:-88,y:132},{x:-82,y:134},{x:-76,y:135},{x:-70,y:137},{x:-64,y:139},{x:-58,y:141},{x:-52,y:142},{x:-45,y:144},{x:-38,y:145},{x:-31,y:146},{x:-23,y:147},{x:-16,y:147},{x:-8,y:147},{x:0,y:147},{x:8,y:147},{x:17,y:147},{x:25,y:147},{x:34,y:147},{x:42,y:147},{x:49,y:147},{x:56,y:146},{x:63,y:146},{x:71,y:145},{x:78,y:144},{x:85,y:143},{x:92,y:142},{x:99,y:142},{x:106,y:141},{x:113,y:140},{x:120,y:139},{x:127,y:138},{x:134,y:137},{x:141,y:137},{x:149,y:136},{x:156,y:135},{x:164,y:134},{x:172,y:132},{x:179,y:131},{x:187,y:130},{x:194,y:128},{x:201,y:126},{x:208,y:123},{x:214,y:121},{x:221,y:118},{x:226,y:114},{x:230,y:111},{x:235,y:108},{x:238,y:104},{x:241,y:99},{x:244,y:93},{x:247,y:89},{x:250,y:82},{x:252,y:75},{x:255,y:65},{x:257,y:55},{x:257,y:48},{x:257,y:45},{x:257,y:43},{x:257,y:42},{x:252,y:36},{x:249,y:32},{x:245,y:28},{x:241,y:26},{x:239,y:25},{x:235,y:24},{x:231,y:21},{x:225,y:18},{x:219,y:16},{x:215,y:13},{x:211,y:11},{x:209,y:10},{x:208,y:8},{x:208,y:7},{x:207,y:6},{x:206,y:6},{x:205,y:6},{x:204,y:6},{x:203,y:6},{x:202,y:6},{x:201,y:6},{x:199,y:6},{x:198,y:6},{x:196,y:6},{x:194,y:6},{x:191,y:5},{x:189,y:5},{x:187,y:4},{x:184,y:4},{x:180,y:3},{x:177,y:3},{x:172,y:2},{x:168,y:1},{x:164,y:1},{x:160,y:0},{x:155,y:0},{x:151,y:0},{x:147,y:-1},{x:143,y:-1},{x:139,y:-1},{x:136,y:-1},{x:132,y:-1},{x:128,y:-1},{x:123,y:-1},{x:119,y:-1},{x:114,y:-1},{x:110,y:-1},{x:106,y:-1},{x:102,y:-1},{x:99,y:0},{x:95,y:1},{x:92,y:1},{x:90,y:1},{x:89,y:1},{x:87,y:2},{x:86,y:2},{x:85,y:2},{x:84,y:2},{x:84,y:3},{x:83,y:3},{x:82,y:3},{x:82,y:4},{x:81,y:4},{x:80,y:4},{x:79,y:4},{x:78,y:4},{x:77,y:4},{x:77,y:5},{x:76,y:5},{x:75,y:5},{x:74,y:5},{x:73,y:6},{x:72,y:6},{x:70,y:6},{x:67,y:7},{x:65,y:7},{x:63,y:8},{x:61,y:8},{x:59,y:8},{x:57,y:9},{x:55,y:10},{x:53,y:10},{x:52,y:11},{x:50,y:11},{x:49,y:11},{x:48,y:11},{x:47,y:11},{x:47,y:12},{x:47,y:13}]},"shv.17_JPHh1b7aVM4a5":{id:"shv.17_JPHh1b7aVM4a5",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[{x:-130,y:1},{x:-135,y:-3},{x:-137,y:-4},{x:-140,y:-8},{x:-143,y:-11},{x:-147,y:-13},{x:-151,y:-15},{x:-155,y:-17},{x:-160,y:-19},{x:-165,y:-21},{x:-170,y:-23},{x:-175,y:-23},{x:-179,y:-23},{x:-183,y:-23},{x:-188,y:-23},{x:-191,y:-23},{x:-194,y:-22},{x:-197,y:-21},{x:-200,y:-20},{x:-201,y:-19},{x:-202,y:-19},{x:-203,y:-19},{x:-204,y:-19},{x:-204,y:-20},{x:-204,y:-21},{x:-204,y:-25},{x:-202,y:-30},{x:-198,y:-35},{x:-194,y:-40},{x:-190,y:-43},{x:-185,y:-46},{x:-181,y:-48},{x:-176,y:-49},{x:-171,y:-50},{x:-165,y:-52},{x:-159,y:-52},{x:-154,y:-54},{x:-149,y:-54},{x:-145,y:-54},{x:-139,y:-54},{x:-134,y:-53},{x:-130,y:-50},{x:-127,y:-48},{x:-124,y:-45},{x:-121,y:-41},{x:-119,y:-37},{x:-117,y:-32},{x:-115,y:-26},{x:-113,y:-19},{x:-112,y:-12},{x:-112,y:-6},{x:-112,y:-2},{x:-112,y:0},{x:-112,y:1},{x:-112,y:2},{x:-112,y:3},{x:-111,y:3},{x:-111,y:4},{x:-111,y:5}]},"shv.19_XdsJ3W4A719pc":{id:"shv.19_XdsJ3W4A719pc",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[{x:-31,y:2},{x:-33,y:-4},{x:-33,y:-7},{x:-34,y:-11},{x:-36,y:-14},{x:-38,y:-17},{x:-40,y:-22},{x:-43,y:-27},{x:-46,y:-32},{x:-48,y:-35},{x:-50,y:-38},{x:-52,y:-41},{x:-55,y:-44},{x:-59,y:-48},{x:-62,y:-52},{x:-66,y:-56},{x:-69,y:-58},{x:-72,y:-60},{x:-76,y:-61},{x:-79,y:-61},{x:-82,y:-61},{x:-85,y:-61},{x:-87,y:-61},{x:-88,y:-61},{x:-89,y:-61},{x:-90,y:-62},{x:-88,y:-62},{x:-87,y:-63},{x:-85,y:-63},{x:-83,y:-63},{x:-80,y:-63},{x:-76,y:-63},{x:-70,y:-63},{x:-64,y:-63},{x:-58,y:-63},{x:-52,y:-63},{x:-47,y:-62},{x:-42,y:-61},{x:-38,y:-59},{x:-34,y:-56},{x:-30,y:-53},{x:-27,y:-49},{x:-24,y:-45},{x:-21,y:-42},{x:-19,y:-39},{x:-17,y:-35},{x:-14,y:-31},{x:-10,y:-25},{x:-7,y:-19},{x:-3,y:-13},{x:0,y:-8},{x:3,y:-4},{x:5,y:-1},{x:7,y:2},{x:9,y:5},{x:12,y:9},{x:16,y:13},{x:19,y:17},{x:22,y:19},{x:24,y:21},{x:26,y:23},{x:27,y:23},{x:28,y:24},{x:28,y:25},{x:29,y:25},{x:29,y:26}]},"shv.20_QSK3n1l8MmGEZ":{id:"shv.20_QSK3n1l8MmGEZ",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[{x:-102,y:9},{x:-100,y:8},{x:-97,y:8},{x:-93,y:8},{x:-89,y:7},{x:-86,y:6},{x:-83,y:5},{x:-79,y:4},{x:-75,y:4},{x:-71,y:4},{x:-67,y:4},{x:-63,y:4},{x:-60,y:3},{x:-58,y:3},{x:-55,y:3},{x:-52,y:3},{x:-49,y:3},{x:-47,y:3},{x:-44,y:3},{x:-43,y:3},{x:-42,y:3}]},"shv.22_I2STbWZAXgo1B":{id:"shv.22_I2STbWZAXgo1B",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[{x:-110,y:42},{x:-115,y:40},{x:-118,y:40},{x:-122,y:40},{x:-126,y:38},{x:-130,y:36},{x:-134,y:34},{x:-138,y:32},{x:-141,y:31},{x:-144,y:30},{x:-147,y:29},{x:-151,y:28},{x:-154,y:27},{x:-158,y:26},{x:-162,y:26},{x:-165,y:26},{x:-168,y:26},{x:-170,y:27},{x:-171,y:29},{x:-172,y:32},{x:-173,y:34},{x:-174,y:37},{x:-174,y:39},{x:-174,y:41},{x:-174,y:43},{x:-174,y:45},{x:-174,y:47},{x:-172,y:49},{x:-169,y:52},{x:-165,y:56},{x:-160,y:60},{x:-155,y:64},{x:-149,y:68},{x:-143,y:72},{x:-137,y:75},{x:-132,y:78},{x:-125,y:81},{x:-119,y:83},{x:-112,y:85},{x:-107,y:86},{x:-101,y:86},{x:-96,y:86},{x:-92,y:86},{x:-88,y:84},{x:-85,y:80},{x:-83,y:77},{x:-82,y:74},{x:-82,y:72},{x:-82,y:71},{x:-82,y:69},{x:-82,y:67},{x:-83,y:63},{x:-86,y:60},{x:-87,y:57},{x:-88,y:55},{x:-90,y:51},{x:-93,y:44},{x:-96,y:37},{x:-100,y:32},{x:-102,y:29},{x:-103,y:28},{x:-105,y:28},{x:-106,y:28},{x:-107,y:28},{x:-108,y:28},{x:-108,y:29}]},"shv.23_wW18nQbpEd7gx":{id:"shv.23_wW18nQbpEd7gx",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[{x:4,y:40},{x:-2,y:38},{x:-5,y:38},{x:-9,y:38},{x:-14,y:37},{x:-18,y:37},{x:-24,y:37},{x:-28,y:37},{x:-32,y:37},{x:-35,y:38},{x:-38,y:39},{x:-40,y:41},{x:-42,y:43},{x:-42,y:45},{x:-43,y:46},{x:-43,y:47},{x:-43,y:50},{x:-43,y:54},{x:-41,y:59},{x:-38,y:64},{x:-35,y:68},{x:-32,y:72},{x:-29,y:74},{x:-25,y:77},{x:-22,y:79},{x:-18,y:79},{x:-13,y:80},{x:-8,y:80},{x:-3,y:80},{x:3,y:80},{x:9,y:79},{x:15,y:75},{x:21,y:72},{x:26,y:69},{x:31,y:66},{x:34,y:64},{x:36,y:61},{x:38,y:59},{x:38,y:58},{x:38,y:57},{x:37,y:56},{x:36,y:56},{x:34,y:55},{x:31,y:52},{x:26,y:49},{x:21,y:45},{x:16,y:42},{x:12,y:40},{x:9,y:38},{x:6,y:36},{x:3,y:35},{x:-1,y:35},{x:-4,y:34},{x:-7,y:34},{x:-10,y:33},{x:-12,y:33},{x:-13,y:33},{x:-21,y:38}]},"shv.25_bSftSx0IJxw7H":{id:"shv.25_bSftSx0IJxw7H",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[{x:110.49240292871617,y:19.52362771067062},{x:101.42737067012109,y:11.753600060446258},{x:100.13236606175036,y:11.753600060446258},{x:96.24735223663818,y:11.753600060446258},{x:89.77232919478455,y:10.458595452075532},{x:84.59231076130163,y:9.163590843704805},{x:75.52727850270655,y:9.163590843704805},{x:67.75725085248219,y:7.868586235334078},{x:58.6922185938871,y:7.868586235334078},{x:50.922190943662734,y:7.868586235334078},{x:43.15216329343838,y:7.868586235334078},{x:35.38213564321401,y:7.868586235334078},{x:27.612107992989653,y:7.868586235334078},{x:19.84208034276529,y:7.868586235334078},{x:13.367057300911656,y:7.868586235334078},{x:6.892034259058021,y:9.163590843704805},{x:.4170112172043865,y:9.163590843704805},{x:-6.058011824649248,y:11.753600060446258},{x:-12.533034866502883,y:14.343609277187712},{x:-17.71305329998579,y:15.63861388555844},{x:-22.893071733468698,y:19.52362771067062},{x:-29.368094775322334,y:22.113636927412074},{x:-34.54811320880524,y:24.703646144153527},{x:-41.02313625065887,y:29.883664577636434},{x:-47.49815929251251,y:33.76867840274862},{x:-51.38317311762469,y:37.653692227860795},{x:-55.268186942736875,y:40.24370144460225},{x:-56.5631915511076,y:41.53870605297298},{x:-57.858196159478325,y:42.83371066134371},{x:-59.15320076784905,y:44.128715269714434},{x:-59.15320076784905,y:46.71872448645588},{x:-60.44820537621978,y:50.603738311568065},{x:-61.74320998459051,y:55.78375674505097},{x:-63.03821459296123,y:60.96377517853388},{x:-64.33321920133196,y:67.43879822038751},{x:-64.33321920133196,y:73.91382126224116},{x:-64.33321920133196,y:80.38884430409479},{x:-64.33321920133196,y:86.86386734594842},{x:-61.74320998459051,y:92.04388577943133},{x:-59.15320076784905,y:95.92889960454352},{x:-55.268186942736875,y:99.81391342965568},{x:-51.38317311762469,y:102.40392264639715},{x:-47.49815929251251,y:106.28893647150933},{x:-42.318140859029604,y:108.87894568825078},{x:-35.843117817175965,y:111.46895490499223},{x:-29.368094775322334,y:112.76395951336296},{x:-21.598067125097973,y:115.35396873010441},{x:-15.123044083244336,y:116.64897333847514},{x:-7.353016433019975,y:116.64897333847514},{x:-.8779933911663405,y:117.94397794684586},{x:6.892034259058021,y:119.2389825552166},{x:15.95706651765311,y:120.53398716358733},{x:23.72709416787747,y:123.12399638032878},{x:34.08713103484329,y:123.12399638032878},{x:41.85715868506765,y:124.41900098869951},{x:50.922190943662734,y:125.71400559707023},{x:58.6922185938871,y:128.30401481381168},{x:67.75725085248219,y:129.5990194221824},{x:76.82228311107728,y:132.18902863892387},{x:87.1823199780431,y:133.4840332472946},{x:96.24735223663818,y:134.7790378556653},{x:106.60738910360399,y:136.07404246403604},{x:115.67242136219909,y:137.36904707240677},{x:124.73745362079417,y:138.6640516807775},{x:132.50748127101855,y:138.6640516807775},{x:140.27750892124288,y:139.95905628914824},{x:149.34254117983798,y:141.25406089751894},{x:157.11256883006234,y:142.54906550588967},{x:166.17760108865744,y:143.8440701142604},{x:175.24263334725254,y:145.13907472263114},{x:184.3076656058476,y:145.13907472263114},{x:192.07769325607197,y:146.43407933100187},{x:201.14272551466706,y:146.43407933100187},{x:210.20775777326216,y:146.43407933100187},{x:219.27279003185726,y:146.43407933100187},{x:228.33782229045232,y:146.43407933100187},{x:239.99286376578888,y:146.43407933100187},{x:250.35290063275468,y:143.8440701142604},{x:263.302946716462,y:141.25406089751894},{x:276.25299280016924,y:137.36904707240677},{x:289.2030388838765,y:133.4840332472946},{x:300.85808035921303,y:129.5990194221824},{x:312.51312183454957,y:125.71400559707023},{x:322.8731587015154,y:121.82899177195804},{x:333.2331955684812,y:117.94397794684586},{x:344.88823704381775,y:111.46895490499223},{x:355.24827391078355,y:104.9939318631386},{x:364.3133061693787,y:98.51890882128497},{x:372.083333819603,y:92.04388577943133},{x:379.8533614698274,y:86.86386734594842},{x:386.328384511681,y:80.38884430409479},{x:394.0984121619054,y:72.61881665387043},{x:401.86843981212974,y:66.1437936120168},{x:408.3434628539834,y:57.078761353421704},{x:412.22847667909554,y:50.603738311568065},{x:414.818485895837,y:46.71872448645588},{x:414.818485895837,y:44.128715269714434},{x:414.818485895837,y:42.83371066134371},{x:414.818485895837,y:41.53870605297298},{x:414.818485895837,y:40.24370144460225},{x:413.52348128746627,y:37.653692227860795},{x:410.9334720707248,y:36.35868761949007},{x:408.3434628539834,y:33.76867840274862},{x:405.75345363724193,y:29.883664577636434},{x:401.86843981212974,y:24.703646144153527},{x:397.98342598701754,y:19.52362771067062},{x:392.80340755353467,y:13.048604668816985},{x:388.9183937284225,y:9.163590843704805},{x:386.328384511681,y:6.5735816269633505},{x:382.4433706865688,y:2.68856780185117},{x:379.8533614698274,y:.098558585109716},{x:375.9683476447152,y:-2.491450631631738},{x:372.083333819603,y:-3.7864552400024647},{x:368.1983199944908,y:-6.376464456743919},{x:364.3133061693787,y:-7.671469065114645},{x:360.4282923442665,y:-8.966473673485373},{x:357.838283127525,y:-8.966473673485373},{x:352.65826469404215,y:-8.966473673485373},{x:348.77325086892995,y:-10.2614782818561},{x:343.593232435447,y:-10.2614782818561},{x:338.4132140019641,y:-10.2614782818561},{x:331.9381909601105,y:-10.2614782818561},{x:326.75817252662756,y:-10.2614782818561},{x:320.28314948477396,y:-10.2614782818561},{x:313.8081264429203,y:-10.2614782818561},{x:307.3331034010667,y:-10.2614782818561},{x:302.15308496758377,y:-10.2614782818561},{x:296.97306653410084,y:-10.2614782818561},{x:291.79304810061797,y:-10.2614782818561},{x:285.3180250587643,y:-10.2614782818561},{x:277.54799740853997,y:-10.2614782818561},{x:269.7779697583156,y:-8.966473673485373},{x:262.00794210809124,y:-7.671469065114645},{x:255.53291906623758,y:-6.376464456743919},{x:251.64790524112541,y:-5.081459848373192},{x:250.35290063275468,y:-3.7864552400024647},{x:249.05789602438395,y:-3.7864552400024647},{x:250.35290063275468,y:-2.491450631631738}]},"shv.26_FUFwushsNIoT8":{id:"shv.26_FUFwushsNIoT8",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[{x:116.9674259705698,y:15.63861388555844},{x:120.85243979568199,y:6.5735816269633505},{x:122.14744440405272,y:2.68856780185117},{x:124.73745362079417,y:.098558585109716},{x:128.62246744590635,y:-3.7864552400024647},{x:131.21247666264782,y:-7.671469065114645},{x:135.09749048775998,y:-12.851487498597553},{x:138.98250431287218,y:-16.736501323709735},{x:144.16252274635508,y:-21.916519757192642},{x:149.34254117983798,y:-25.801533582304824},{x:153.22755500495018,y:-29.686547407417002},{x:157.11256883006234,y:-33.571561232529184},{x:160.99758265517454,y:-36.16157044927064},{x:164.8825964802867,y:-38.75157966601209},{x:168.7676103053989,y:-41.34158888275355},{x:172.65262413051107,y:-42.63659349112427},{x:176.53763795562324,y:-43.931598099495},{x:179.1276471723647,y:-43.931598099495},{x:181.71765638910617,y:-43.931598099495},{x:183.0126609974769,y:-43.931598099495},{x:184.3076656058476,y:-45.22660270786573},{x:185.60267021421834,y:-45.22660270786573},{x:188.1926794309598,y:-46.521607316236455},{x:189.48768403933053,y:-46.521607316236455},{x:190.78268864770124,y:-46.521607316236455},{x:192.07769325607197,y:-46.521607316236455},{x:193.3726978644427,y:-46.521607316236455},{x:194.66770247281343,y:-46.521607316236455},{x:195.96270708118416,y:-45.22660270786573},{x:195.96270708118416,y:-43.931598099495},{x:195.96270708118416,y:-42.63659349112427},{x:195.96270708118416,y:-40.046584274382816},{x:195.96270708118416,y:-37.456575057641366},{x:194.66770247281343,y:-32.27655662415846},{x:193.3726978644427,y:-28.391542799046277},{x:189.48768403933053,y:-21.916519757192642},{x:185.60267021421834,y:-15.441496715339007},{x:181.71765638910617,y:-8.966473673485373},{x:177.83264256399397,y:-3.7864552400024647},{x:173.9476287388818,y:1.3935631934804429},{x:171.35761952214034,y:5.278577018592624},{x:170.0626149137696,y:6.5735816269633505},{x:168.7676103053989,y:7.868586235334078},{x:168.7676103053989,y:9.163590843704805},{x:168.7676103053989,y:10.458595452075532},{x:168.7676103053989,y:11.753600060446258},{x:168.7676103053989,y:13.048604668816985}]},"shv.28_mqL5cK4iYMnLO":{id:"shv.28_mqL5cK4iYMnLO",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[{x:241.2878683741596,y:-8.966473673485373},{x:238.69785915741815,y:-15.441496715339007},{x:238.69785915741815,y:-18.03150593208046},{x:238.69785915741815,y:-21.916519757192642},{x:241.2878683741596,y:-25.801533582304824},{x:242.58287298253032,y:-30.98155201578773},{x:245.17288219927178,y:-34.86656584089991},{x:247.76289141601325,y:-38.75157966601209},{x:251.64790524112541,y:-42.63659349112427},{x:256.8279236746083,y:-47.81661192460718},{x:264.5979513248327,y:-52.99663035809009},{x:271.0729743666863,y:-59.471653399943726},{x:277.54799740853997,y:-63.35666722505591},{x:284.0230204503936,y:-65.94667644179736},{x:290.49804349224723,y:-67.24168105016808},{x:298.26807114247157,y:-67.24168105016808},{x:306.03809879269596,y:-67.24168105016808},{x:313.8081264429203,y:-67.24168105016808},{x:321.5781540931447,y:-67.24168105016808},{x:328.0531771349983,y:-67.24168105016808},{x:333.2331955684812,y:-65.94667644179736},{x:335.8232047852227,y:-65.94667644179736},{x:337.1182093935934,y:-64.65167183342663},{x:338.4132140019641,y:-64.65167183342663},{x:335.8232047852227,y:-64.65167183342663},{x:333.2331955684812,y:-64.65167183342663},{x:325.46316791825683,y:-63.35666722505591},{x:317.6931402680325,y:-62.061662616685176},{x:311.21811722617883,y:-60.76665800831445},{x:303.4480895759545,y:-58.176648791572994},{x:294.38305731735943,y:-52.99663035809009},{x:286.61302966713504,y:-47.81661192460718},{x:277.54799740853997,y:-41.34158888275355},{x:271.0729743666863,y:-34.86656584089991},{x:265.89295593320344,y:-28.391542799046277},{x:262.00794210809124,y:-25.801533582304824},{x:260.7129374997205,y:-21.916519757192642},{x:259.4179328913498,y:-20.621515148821913},{x:258.12292828297905,y:-19.32651054045119},{x:258.12292828297905,y:-18.03150593208046},{x:258.12292828297905,y:-16.736501323709735},{x:258.12292828297905,y:-15.441496715339007},{x:258.12292828297905,y:-14.14649210696828},{x:258.12292828297905,y:-12.851487498597553},{x:258.12292828297905,y:-11.556482890226826},{x:258.12292828297905,y:-10.2614782818561},{x:258.12292828297905,y:-8.966473673485373},{x:259.4179328913498,y:-8.966473673485373},{x:259.4179328913498,y:-1.196446023261011}]},"shv.29_7s9cPPIlpJ9Np":{id:"shv.29_7s9cPPIlpJ9Np",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[{x:188.1926794309598,y:16.933618493929167},{x:192.07769325607197,y:10.458595452075532},{x:195.96270708118416,y:10.458595452075532},{x:202.4377301230378,y:9.163590843704805},{x:210.20775777326216,y:9.163590843704805},{x:217.97778542348652,y:7.868586235334078},{x:224.45280846534015,y:6.5735816269633505},{x:230.9278315071938,y:5.278577018592624},{x:236.1078499406767,y:2.68856780185117},{x:239.99286376578888,y:2.68856780185117},{x:242.58287298253032,y:1.3935631934804429},{x:243.87787759090105,y:1.3935631934804429},{x:245.17288219927178,y:1.3935631934804429},{x:246.46788680764251,y:1.3935631934804429}]},"shv.30_gZeoEkcUkLcml":{id:"shv.30_gZeoEkcUkLcml",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[{x:238.69785915741815,y:38.94869683623153},{x:232.22283611556452,y:41.53870605297298},{x:228.33782229045232,y:41.53870605297298},{x:225.7478130737109,y:45.42371987808516},{x:220.56779464022796,y:49.30873370319734},{x:216.6827808151158,y:54.48875213668025},{x:211.5027623816329,y:59.668770570163154},{x:206.32274394814996,y:66.1437936120168},{x:201.14272551466706,y:71.3238120454997},{x:198.5527162979256,y:76.50383047898261},{x:195.96270708118416,y:81.6838489124655},{x:194.66770247281343,y:84.27385812920697},{x:193.3726978644427,y:88.15887195431915},{x:193.3726978644427,y:89.45387656268987},{x:193.3726978644427,y:90.7488811710606},{x:193.3726978644427,y:93.33889038780205},{x:194.66770247281343,y:94.63389499617278},{x:198.5527162979256,y:95.92889960454352},{x:203.73273473140853,y:97.22390421291423},{x:208.91275316489143,y:98.51890882128497},{x:214.09277159837433,y:99.81391342965568},{x:220.56779464022796,y:99.81391342965568},{x:228.33782229045232,y:99.81391342965568},{x:237.40285454904742,y:97.22390421291423},{x:246.46788680764251,y:93.33889038780205},{x:256.8279236746083,y:88.15887195431915},{x:264.5979513248327,y:80.38884430409479},{x:272.36797897505704,y:72.61881665387043},{x:278.8430020169107,y:66.1437936120168},{x:282.72801584202284,y:60.96377517853388},{x:286.61302966713504,y:54.48875213668025},{x:287.90803427550577,y:49.30873370319734},{x:289.2030388838765,y:45.42371987808516},{x:289.2030388838765,y:44.128715269714434},{x:287.90803427550577,y:44.128715269714434},{x:285.3180250587643,y:44.128715269714434},{x:281.4330112336521,y:42.83371066134371},{x:276.25299280016924,y:42.83371066134371},{x:269.7779697583156,y:42.83371066134371},{x:262.00794210809124,y:42.83371066134371},{x:252.94290984949615,y:42.83371066134371},{x:245.17288219927178,y:42.83371066134371},{x:239.99286376578888,y:42.83371066134371},{x:237.40285454904742,y:42.83371066134371},{x:236.1078499406767,y:42.83371066134371},{x:236.1078499406767,y:44.128715269714434}]},"shv.32_Is4OGgrMoyylx":{id:"shv.32_Is4OGgrMoyylx",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[{x:377.26335225308594,y:20.81863231904135},{x:366.90331538612014,y:19.52362771067062},{x:364.3133061693787,y:19.52362771067062},{x:359.13328773589575,y:22.113636927412074},{x:352.65826469404215,y:27.29365536089498},{x:344.88823704381775,y:35.063683011119345},{x:337.1182093935934,y:44.128715269714434},{x:330.64318635173976,y:51.8987429199388},{x:326.75817252662756,y:59.668770570163154},{x:321.5781540931447,y:66.1437936120168},{x:320.28314948477396,y:72.61881665387043},{x:317.6931402680325,y:77.79883508735334},{x:317.6931402680325,y:80.38884430409479},{x:317.6931402680325,y:82.97885352083624},{x:318.9881448764032,y:84.27385812920697},{x:321.5781540931447,y:85.56886273757769},{x:326.75817252662756,y:85.56886273757769},{x:331.9381909601105,y:85.56886273757769},{x:339.7082186103348,y:84.27385812920697},{x:347.4782462605592,y:80.38884430409479},{x:355.24827391078355,y:76.50383047898261},{x:363.01830156100795,y:71.3238120454997},{x:370.7883292112323,y:67.43879822038751},{x:375.9683476447152,y:62.25877978690461},{x:381.14836607819814,y:57.078761353421704},{x:383.73837529493954,y:51.8987429199388},{x:387.62338912005174,y:46.71872448645588},{x:390.2133983367932,y:40.24370144460225},{x:392.80340755353467,y:35.063683011119345},{x:392.80340755353467,y:31.178669186007163},{x:392.80340755353467,y:28.58865996926571},{x:392.80340755353467,y:27.29365536089498},{x:390.2133983367932,y:27.29365536089498},{x:388.9183937284225,y:27.29365536089498},{x:387.62338912005174,y:27.29365536089498},{x:386.328384511681,y:27.29365536089498},{x:386.328384511681,y:28.58865996926571},{x:386.328384511681,y:31.178669186007163}]}}});function rs(){return V(le,{children:[p(is,{}),p(os,{}),p(as,{}),p(ss,{})]})}function os(){const{getContextForEvent:e}=Q();return p(oe,{onClick:()=>{const{document:t,location:n}=e(),r=encodeURIComponent(JSON.stringify(_n({document:t,location:n}))),o=window.document.createElement("a");o.setAttribute("href",`data:text/json;charset=utf-8,${r}`),o.setAttribute("download","splatapus.json"),o.click()},children:"export"})}function is(){const{updateDocument:e}=Q();return p(oe,{onClick:()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.addEventListener("change",n=>{var i;const r=(i=t.files)==null?void 0:i.item(0);if(!r)return;const o=new FileReader;o.addEventListener("load",()=>{const s=o.result;if(!s){alert("could not read file :(");return}A(typeof s=="string");try{const a=Fn(JSON.parse(s));if(a.isError()){alert(`cannot read splat doc: ${a.error.message}`);return}const u=a.value;e(()=>ee.deserialize(u.document),{lockstepLocation:l=>$e.deserialize(u.location,l.viewport.screenSize)})}catch(a){alert(`could not parse json: ${Cr(a)}`)}}),o.readAsText(r)}),t.click()},children:"import"})}function ss(){const{updateDocument:e}=Q();return p(oe,{onClick:()=>{const{document:t,location:n}=Vn(E.UNIT);e(()=>t,{lockstepLocation:n})},children:"reset"})}function as(){const{updateDocument:e}=Q();return bn.isOk()?p(oe,{onClick:()=>{const t=bn.unwrap(),n=ee.deserialize(t);e(()=>n,{lockstepLocation:Rn(n,E.UNIT)})},children:"example"}):null}var mr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},In=C.createContext&&C.createContext(mr),xe=globalThis&&globalThis.__assign||function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},xe.apply(this,arguments)},ls=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function gr(e){return e&&e.map(function(t,n){return C.createElement(t.tag,xe({key:n},t.attr),gr(t.child))})}function wr(e){return function(t){return p(us,{...xe({attr:xe({},e.attr)},t),children:gr(e.child)})}}function us(e){var t=function(n){var r=e.attr,o=e.size,i=e.title,s=ls(e,["attr","size","title"]),a=o||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),V("svg",{...xe({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:u,style:xe(xe({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[i&&p("title",{children:i}),e.children]})};return In!==void 0?p(In.Consumer,{children:function(n){return t(n)}}):t(mr)}function cs(e){return wr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"}}]})(e)}function ys(e){return wr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"}}]})(e)}function xs(){const e=$(({undoStack:i})=>K.canUndo(i)),t=$(({undoStack:i})=>K.canRedo(i)),{updateUndoStack:n}=Q(),r=$t("undo",()=>({keyFrames:{transform:["rotate(0)","rotate(-360deg)"]},duration:300,easing:Tt.DEFAULT})),o=$t("redo",()=>({keyFrames:{transform:["rotate(0)","rotate(360deg)"]},duration:300,easing:Tt.DEFAULT}));return V("div",{className:"pointer-events-auto pb-2 pl-3",children:[p(oe,{disabled:!e,className:j("transition-all duration-300",e?"pointer-events-auto ease-out-back":t?"pointer-events-none opacity-50":"pointer-events-none scale-0 opacity-0 ease-in-back"),onClick:()=>n((i,s)=>K.undo(s,i.vfx)),iconLeft:p("div",{className:"mt-[2px] h-3 w-3 transition-transform duration-300 ease-in-out",ref:r,children:p(ys,{size:12})}),children:"undo"}),p(oe,{disabled:!t,className:j("transition-all duration-300",t?"pointer-events-auto ease-out-back-md":"scale-0 opacity-0 ease-in-back-md"),onClick:()=>n((i,s)=>K.redo(s,i.vfx)),iconRight:p("div",{className:"mt-[2px] h-3 w-3 transition-transform duration-300 ease-in-out",ref:o,children:p(cs,{size:12})}),children:"redo"})]})}function ds(){const e=E.UNIT;{const t=ao("autosave",e);if(t.isOk())return H.initialize(t.value);console.error(`Error loading autosave: ${t.error}`)}return H.initialize(Vn(e))}function ps(){const[e,t]=y.exports.useState(null),n=Tn(e,Nr);return p("div",{ref:t,className:"absolute inset-0 touch-none overflow-hidden",children:n&&p(wo,{size:n,initialize:ds,children:p(fs,{size:n})})})}function fs({size:e}){const t=y.exports.useRef(null),{onKeyDown:n,onKeyUp:r,onWheel:o,onPointerDown:i,onPointerMove:s,onPointerUp:a,onPointerCancel:u}=Q();return y.exports.useEffect(()=>{const l=We(t.current);return l.addEventListener("wheel",o,{passive:!1}),window.addEventListener("keydown",n),window.addEventListener("keyup",r),()=>{l.removeEventListener("wheel",o),window.removeEventListener("keydown",n),window.removeEventListener("keyup",r)}},[n,r,o]),V(le,{children:[V("div",{className:"absolute inset-0",ref:t,onPointerDown:i,onPointerMove:s,onPointerUp:a,onPointerCancel:u,children:[p(Ji,{}),p(W.Overlay,{})]}),p(ns,{topBarLeft:p(Oo,{}),topBarRight:p(rs,{}),rightBar:p(Yi,{}),bottomBarLeft:p(xs,{}),bottomBarRight:p(ji,{})}),!1,p(hs,{size:e})]})}const hs=C.memo(function({size:t}){const n=At("document"),r=At("location"),{updateViewport:o}=Q();y.exports.useEffect(()=>{uo("autosave",{document:n,location:r})},[n,r]);const i=r.viewport.screenSize;return y.exports.useLayoutEffect(()=>{i!==t&&o((s,a)=>a.with({screenSize:t}))},[t,o,i]),null}),vs=We(document.getElementById("root"));zr(vs).render(p(ps,{}));
