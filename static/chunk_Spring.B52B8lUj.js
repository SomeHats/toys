var L=(c,e,a)=>{if(!e.has(c))throw TypeError("Cannot "+a)};var R=(c,e,a)=>(L(c,e,"read from private field"),a?a.call(c):e.get(c)),x=(c,e,a)=>{if(e.has(c))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(c):e.set(c,a)},z=(c,e,a,v)=>(L(c,e,"write to private field"),v?v.call(c,a):e.set(c,a),a);import"./chunk_Ticker.lTo-XsP5.js";import{r as U}from"./chunk_signia.rTErdSNa.js";import{d as Q}from"./chunk_utils.qw3xpJ_t.js";import{a as B,R as X}from"./chunk_track.rtZiweUj.js";import"./chunk_index.HRzIbU8d.js";var q,G,J;function Y(){function c(r,i){return function(u){(function(h,t){if(h.v)throw new Error("attempted to call "+t+" after decoration was finished")})(i,"addInitializer"),v(u,"An initializer"),r.push(u)}}function e(r,i){if(!r(i))throw new TypeError("Attempted to access private element on non-instance")}function a(r,i,u,h,t,p,g,y,_){var s;switch(t){case 1:s="accessor";break;case 2:s="method";break;case 3:s="getter";break;case 4:s="setter";break;default:s="field"}var o,n,d={kind:s,name:g?"#"+i:i,static:p,private:g},l={v:!1};if(t!==0&&(d.addInitializer=c(h,l)),g||t!==0&&t!==2)if(t===2)o=function(f){return e(_,f),u.value};else{var m=t===0||t===1;(m||t===3)&&(o=g?function(f){return e(_,f),u.get.call(f)}:function(f){return u.get.call(f)}),(m||t===4)&&(n=g?function(f,w){e(_,f),u.set.call(f,w)}:function(f,w){u.set.call(f,w)})}else o=function(f){return f[i]},t===0&&(n=function(f,w){f[i]=w});var b=g?_.bind():function(f){return i in f};d.access=o&&n?{get:o,set:n,has:b}:o?{get:o,has:b}:{set:n,has:b};try{return r(y,d)}finally{l.v=!0}}function v(r,i){if(typeof r!="function")throw new TypeError(i+" must be a function")}function E(r,i){var u=typeof i;if(r===1){if(u!=="object"||i===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");i.get!==void 0&&v(i.get,"accessor.get"),i.set!==void 0&&v(i.set,"accessor.set"),i.init!==void 0&&v(i.init,"accessor.init")}else if(u!=="function"){var h;throw h=r===0?"field":r===10?"class":"method",new TypeError(h+" decorators must return a function or void 0")}}function M(r){return function(i){r(this,i)}}function D(r,i,u,h,t,p,g,y,_){var s,o,n,d,l,m,b,f=u[0];if(g?s=t===0||t===1?{get:(d=u[3],function(){return d(this)}),set:M(u[4])}:t===3?{get:u[3]}:t===4?{set:u[3]}:{value:u[3]}:t!==0&&(s=Object.getOwnPropertyDescriptor(i,h)),t===1?n={get:s.get,set:s.set}:t===2?n=s.value:t===3?n=s.get:t===4&&(n=s.set),typeof f=="function")(l=a(f,h,s,y,t,p,g,n,_))!==void 0&&(E(t,l),t===0?o=l:t===1?(o=l.init,m=l.get||n.get,b=l.set||n.set,n={get:m,set:b}):n=l);else for(var w=f.length-1;w>=0;w--){var V;(l=a(f[w],h,s,y,t,p,g,n,_))!==void 0&&(E(t,l),t===0?V=l:t===1?(V=l.init,m=l.get||n.get,b=l.set||n.set,n={get:m,set:b}):n=l,V!==void 0&&(o===void 0?o=V:typeof o=="function"?o=[o,V]:o.push(V)))}if(t===0||t===1){if(o===void 0)o=function(C,k){return k};else if(typeof o!="function"){var I=o;o=function(C,k){for(var W=k,O=0;O<I.length;O++)W=I[O].call(C,W);return W}}else{var P=o;o=function(C,k){return P.call(C,k)}}r.push(o)}t!==0&&(t===1?(s.get=n.get,s.set=n.set):t===2?s.value=n:t===3?s.get=n:t===4&&(s.set=n),g?t===1?(r.push(function(C,k){return n.get.call(C,k)}),r.push(function(C,k){return n.set.call(C,k)})):t===2?r.push(n):r.push(function(C,k){return n.call(C,k)}):Object.defineProperty(i,h,s))}function T(r,i,u){for(var h,t,p,g=[],y=new Map,_=new Map,s=0;s<i.length;s++){var o=i[s];if(Array.isArray(o)){var n,d,l=o[1],m=o[2],b=o.length>3,f=l>=5,w=u;if(f?(n=r,(l-=5)!==0&&(d=t=t||[]),b&&!p&&(p=function(P){return Z(P)===r}),w=p):(n=r.prototype,l!==0&&(d=h=h||[])),l!==0&&!b){var V=f?_:y,I=V.get(m)||0;if(I===!0||I===3&&l!==4||I===4&&l!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+m);!I&&l>2?V.set(m,l):V.set(m,!0)}D(g,n,o,m,l,f,b,d,w)}}return A(g,h),A(g,t),g}function A(r,i){i&&r.push(function(u){for(var h=0;h<i.length;h++)i[h].call(u);return u})}return function(r,i,u,h){return{e:T(r,i,h),get c(){return function(t,p){if(p.length>0){for(var g=[],y=t,_=t.name,s=p.length-1;s>=0;s--){var o={v:!1};try{var n=p[s](y,{kind:"class",name:_,addInitializer:c(g,o)})}finally{o.v=!0}n!==void 0&&(E(10,n),y=n)}return[y,function(){for(var d=0;d<g.length;d++)g[d].call(y)}]}}(r,u)}}}}function N(c,e,a,v){return(N=Y())(c,e,a,v)}function Z(c){if(Object(c)!==c)throw TypeError("right-hand side of 'in' should be an object, got "+(c!==null?typeof c:"null"));return c}function F(c){const e=B("target",typeof c=="number"?B("signal",c):null),a={name:"signal",get value(){return e.value?e.value.value:c.value},get lastChangedEpoch(){return e.value?e.value.lastChangedEpoch:c.lastChangedEpoch},getDiffSince(){return X},__unsafe__getWithoutCapture(){const v=e.__unsafe__getWithoutCapture();return v?v.__unsafe__getWithoutCapture():c.__unsafe__getWithoutCapture()},set(v){const E=e.value;return E?E.set(v):e.set(B("signal",v)),v},update(v){return a.set(v(a.value))}};return a}var S,j;const H=class H{constructor(e){x(this,S,void 0);x(this,j,void 0);z(this,S,(J(this),q(this))),z(this,j,G(this,0)),this.destroy=Q,this._target=F(e.target),this._tension=F(e.tension??230),this._friction=F(e.friction??22),this.value=e.value??this._target.__unsafe__getWithoutCapture(),this.ticker=e.ticker,(e.shouldStart??!0)&&this.start()}get value(){return R(this,S)}set value(e){z(this,S,e)}get velocity(){return R(this,j)}set velocity(e){z(this,j,e)}reset(){this.value=this.target,this.velocity=0}start(){this.destroy=this.ticker.listen(({deltaMs:e})=>{this.tick(e)})}get target(){return this._target.value}set target(e){this._target.set(e)}get tension(){return this._tension.value}set tension(e){this._tension.set(e)}get friction(){return this._friction.value}set friction(e){this._friction.set(e)}tick(e){const a=Math.min(e,100)/1e3,{target:v,tension:E,friction:M,value:D,velocity:T}=this;let A=D,r=T;const i=T,u=E*(v-A)-M*T;A=D+i*a*.5,r=T+u*a*.5;const h=r,t=E*(v-A)-M*r;A=D+h*a*.5,r=T+t*a*.5;const p=r,g=E*(v-A)-M*r;A=D+p*a,r=T+g*a;const y=r,_=E*(v-A)-M*r,s=1/6*(i+2*(h+p)+y),o=1/6*(u+2*(t+g)+_);Math.abs(s)<1e-6?this.value=this.target:this.value+=s*a,Math.abs(o)<1e-6?this.velocity=0:this.velocity+=o*a}};S=new WeakMap,j=new WeakMap,[q,G,J]=N(H,[[U,1,"value"],[U,1,"velocity"]],[]).e;let K=H;export{K as S};
