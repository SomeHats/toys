var yn=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var F=(e,t,n)=>(yn(e,t,"read from private field"),n?n.call(e):t.get(e)),ve=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},me=(e,t,n,r)=>(yn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{i as At,t as ye,s as Tr,O as qt,k as Lr,h as wn,g as Nr,a as A,y as He,b as Oe,l as $n,f as We,P as _e,w as Dr,c as Z,C as Fn,m as Mr,q as _r,e as Ar,Q as zr,R as $r}from"./chunk_assert.6e3d4d7d.js";/* empty css                       */import{R as T,r as p,b as et}from"./chunk_index.9ef61b8f.js";import{a as Fr,s as Rr,c as Vr}from"./chunk_client.564fb305.js";import{S as z,R as ot,a as Br,V as O}from"./chunk_Vector2.cb3dfab2.js";import{e as zt,d as Re}from"./chunk_debugPropsToString.cee35e13.js";import{A as Ur}from"./chunk_AABB.f77a6698.js";import{L as ue,r as Ze,a as U,A as jr,b as K,c as it,d as st,e as pe,f as Hr,B as he,P as Kr,S as Wr,G as Gr,g as qr,V as Zr,h as Pn,i as xn}from"./chunk_svgPathBuilder.11b64d30.js";import{g as Yr,s as Jr,c as Xr,d as Qr}from"./chunk_storage.7eef0f64.js";import{c as Y}from"./chunk_index.9d627959.js";import{a as _,F as W,j as f}from"./chunk_jsx-runtime.faf32752.js";import{D as j}from"./chunk_DebugDraw.3a06287c.js";import{a as De,m as eo}from"./chunk_useKeyPress.3323b155.js";import{a as Sn}from"./chunk_theme.5443e31e.js";import"./chunk__commonjsHelpers.e5e952e9.js";import"./chunk_EventEmitter.18fc68ab.js";const Zt=300,to=30,no=500,Ge={size:16,streamline:.5,smoothing:.5,thinning:.5,simulatePressure:!0,easing:e=>e,start:{},end:{},last:!1},ro="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("");class ft{constructor(t,n=16){this.randomLength=n,this.debugIdCounter=0,this.prefix=t,this.Id=`${t}.SAMPLE`;const r=new RegExp(`^${this.prefix}\\.([a-zA-Z0-9_]+)$`);this.schema=z.string.transform(o=>r.test(o)?ot.ok(o):ot.error(new Br(`Expected ${this.prefix}.*, got ${o}`,[])),At)}generate(){const t=ye(this.randomLength,()=>Tr(ro)).join("");return`${this.prefix}.${t}`}}const Ue=new ft("key"),oo=z.object({id:Ue.schema,position:O.schema.nullable()}),je=new ft("shp"),io=z.object({id:je.schema}),Yt=new ft("shv"),so=z.object({id:Yt.schema,keyPointId:Ue.schema,shapeId:je.schema,rawPoints:z.arrayOf(O.schema)}),Rn=new ft("doc"),ao=z.object({id:Rn.schema,keyPoints:z.objectMap(Ue.schema,oo),shapes:z.objectMap(je.schema,io),shapeVersions:z.objectMap(Yt.schema,so)});function lo(){return{id:Rn.generate(),keyPoints:{},shapes:{},shapeVersions:{}}}class ee{static fromArray(t){return new ee(qt(t.map(n=>[n.id,n])))}constructor(t){this.data=t}count(){return Lr(this.data).length}has(t){return wn(this.data,t)}getIfExists(t){return Nr(this.data,t)}get(t){const n=this.getIfExists(t);return A(n!=null,`Item with id ${t} not found`),n}insert(t){return new ee({...this.data,[t.id]:t})}update(t,n){const r=this.get(t),o=He(r,n);return A(r.id===o.id,"Assertion Error: before.id === after.id"),this.insert(o)}delete(t){const{[t]:n,...r}=this.data;return new ee(r)}*[Symbol.iterator](){for(const t in this.data)wn(this.data,t)&&(yield Oe(this.data[t],'Assertion Error: this.data[(id as T["id"])]'))}toJSON(){return this.data}}var le,Ie,$e;const pt=class{constructor(t,n,r,o){ve(this,le,void 0);ve(this,Ie,void 0);ve(this,$e,void 0);this.index=t,me(this,le,n),me(this,Ie,r),me(this,$e,o)}static build(t,n,r,o){const i=new Map;for(const s of t){const a=n(s);A(!i.has(a),"Assertion Error: !index.has(key)"),i.set(a,r(s))}return new pt(i,n,r,o)}withIndex(t){return new pt(t,F(this,le),F(this,Ie),F(this,$e))}lookup(t){return this.index.get(F(this,$e).call(this,t))}insert(t){const n=F(this,le).call(this,t);A(!this.index.has(n),`key ${n} already exists in index`);const r=new Map(this.index);return r.set(n,F(this,Ie).call(this,t)),this.withIndex(r)}remove(t){const n=F(this,le).call(this,t);A(this.index.has(n),`key ${n} does not exist in index`);const r=new Map(this.index);return r.delete(n),this.withIndex(r)}update(t){const n=F(this,le).call(this,t);A(this.index.has(n),`key ${n} does not exist in index`);const r=new Map(this.index);return r.set(n,F(this,Ie).call(this,t)),this.withIndex(r)}toJSON(){return qt(this.index)}};let $t=pt;le=new WeakMap,Ie=new WeakMap,$e=new WeakMap;const uo=new Set;var ke,Ce,Fe;const ht=class{constructor(t,n,r,o){ve(this,ke,void 0);ve(this,Ce,void 0);ve(this,Fe,void 0);this.index=t,me(this,ke,n),me(this,Ce,r),me(this,Fe,o)}static build(t,n,r,o){const i=new Map;for(const s of t){const a=n(s);let l=i.get(a);l||(l=new Set,i.set(a,l)),l.add(r(s))}return new ht(i,n,r,o)}withIndex(t){return new ht(t,F(this,ke),F(this,Ce),F(this,Fe))}lookup(t){var n;return(n=this.index.get(F(this,Fe).call(this,t)))!=null?n:uo}insert(t){const n=F(this,ke).call(this,t),r=F(this,Ce).call(this,t),o=this.index.get(n);let i;o?(A(!o.has(r),"already exists"),i=new Set(o)):i=new Set,i.add(r);const s=new Map(this.index);return s.set(n,i),this.withIndex(s)}remove(t){const n=F(this,ke).call(this,t),r=F(this,Ce).call(this,t),o=this.index.get(n);A(o&&o.has(r),"value does not exist"),new Set(o).delete(r);const s=new Map(this.index);return s.delete(n),this.withIndex(s)}update(t,n){return this.remove(t).insert(n)}toJSON(){return qt(this.index)}};let at=ht;ke=new WeakMap,Ce=new WeakMap,Fe=new WeakMap;const{min:Le,PI:sa}=Math,bn=.275;function Vn(e,t={}){const{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:s=w=>w,start:a={},end:l={}}=t,{easing:u=w=>w*(2-w)}=a,{easing:c=w=>--w*w*w+1}=l;if(e.length===0||n<=0)return[];const d=e[e.length-1].runningLength,v=a.taper===!1?0:a.taper===!0?Math.max(n,d):a.taper,g=l.taper===!1?0:l.taper===!0?Math.max(n,d):l.taper,h=Math.pow(n*r,2),m=[];let y=e.slice(0,10).reduce((w,b)=>{let I=b.pressure;if(i){const L=Le(1,b.distance/n),k=Le(1,1-L);I=Le(1,w+(k-w)*(L*bn))}return(w+I)/2},e[0].pressure),P=En(n,o,e[e.length-1].pressure,s),S=e[0].point,E=S;for(let w=0;w<e.length;w++){let{pressure:b}=e[w];const{point:I,distance:L,runningLength:k}=e[w];if(w<e.length-1&&d-k<3)continue;if(o){if(i){const N=Le(1,L/n),V=Le(1,1-N);b=Le(1,y+(V-y)*(N*bn))}P=En(n,o,b,s)}else P=n/2;const x=k<v?u(k/v):1,C=d-k<g?c((d-k)/g):1;if(P=Math.max(.01,P*Math.min(x,C)),w===e.length-1){m.push({center:I,radius:P});continue}E=I,(w<=1||S.distanceToSquared(E)>h)&&(m.push({center:I,radius:P}),S=E),y=b}return m}function Bn(e,t={}){var v,g;const{streamline:n=.5,size:r=16,last:o=!1}=t;if(e.length===0)return[];const i=.15+(1-n)*.85;let s=e.map(h=>({point:O.from(h),pressure:h.pressure}));if(s.length===2){const h=s[1];s=s.slice(0,-1);for(let m=1;m<5;m++)s.push({point:s[0].point.lerp(h.point,m/4),pressure:h.pressure})}s.length===1&&s.push({point:s[0].point.add(O.UNIT),pressure:s[0].pressure});const a=[{point:s[0].point,pressure:s[0].pressure!=null&&s[0].pressure>=0?s[0].pressure:.25,vector:O.UNIT,distance:0,runningLength:0}];let l=!1,u=0,c=a[0];const d=s.length-1;for(let h=1;h<s.length;h++){const m=s[h],y=o&&h===d?m.point:c.point.lerp(m.point,i);if(c.point.equals(y))continue;const P=y.distanceTo(c.point);if(u+=P,h<d&&!l){if(u<r)continue;l=!0}c={point:y,pressure:m.pressure!=null&&m.pressure>=0?m.pressure:.5,vector:c.point.sub(y).normalize(),distance:P,runningLength:u},a.push(c)}return a[0].vector=(g=(v=a[1])==null?void 0:v.vector)!=null?g:O.ZERO,a}function En(e,t,n,r=o=>o){return e*r(.5-t*(.5-n))}function lt(e){if(!e.length)return"";const t=["M",e[0].x,e[0].y,"Q"];for(let n=0;n<e.length;n++){const r=e[n],o=e[(n+1)%e.length],i=r.add(o).scale(.5);t.push(r.x,r.y,i.x,i.y)}return t.push("Z"),t.join(" ")}function Un(e,t){const n=[e[0]];if(e.length===0)return[];let r=t,o=e[0],i=e[0].center;for(let s=1;s<e.length;s++){const a=e[s],l=e[Math.min(s+1,e.length-1)],u=a.center.add(l.center).scale(.5),c=a.center.distanceTo(o.center),d=i,v=a.center,g=u;let h=0;for(;c-h>=r;){const m=(r+h)/c;n.push({center:d.lerp(v,m).lerp(v.lerp(g,m),m),radius:$n(o.radius,a.radius,m)}),h+=r,r=t}r-=c-h,o=a,i=u}return n.push(e[e.length-1]),n}function St(e){var i,s;const t=Array.from(e);if(t.length===0)return{versions:new ee({})};const n=[];let r=0;for(const a of t){const l=Bn(a.rawPoints),u=(s=(i=l[l.length-1])==null?void 0:i.runningLength)!=null?s:0;n.push({id:a.id,strokePoints:l,length:u}),u>r&&(r=u)}const o=Math.floor(r/Ge.size);return{versions:ee.fromArray(n.map(({strokePoints:a,length:l,id:u})=>{const c=Vn(a,Ge);return{id:u,length:l,smoothedCenterPoints:c,normalizedCenterPoints:Un(c,l/o)}}))}}function fe(){}fe.prototype={diff:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.callback;typeof r=="function"&&(o=r,r={}),this.options=r;var i=this;function s(m){return o?(setTimeout(function(){o(void 0,m)},0),!0):m}t=this.castInput(t),n=this.castInput(n),t=this.removeEmpty(this.tokenize(t)),n=this.removeEmpty(this.tokenize(n));var a=n.length,l=t.length,u=1,c=a+l;r.maxEditLength&&(c=Math.min(c,r.maxEditLength));var d=[{newPos:-1,components:[]}],v=this.extractCommon(d[0],n,t,0);if(d[0].newPos+1>=a&&v+1>=l)return s([{value:this.join(n),count:n.length}]);function g(){for(var m=-1*u;m<=u;m+=2){var y=void 0,P=d[m-1],S=d[m+1],E=(S?S.newPos:0)-m;P&&(d[m-1]=void 0);var w=P&&P.newPos+1<a,b=S&&0<=E&&E<l;if(!w&&!b){d[m]=void 0;continue}if(!w||b&&P.newPos<S.newPos?(y=po(S),i.pushComponent(y.components,void 0,!0)):(y=P,y.newPos++,i.pushComponent(y.components,!0,void 0)),E=i.extractCommon(y,n,t,m),y.newPos+1>=a&&E+1>=l)return s(co(i,y.components,n,t,i.useLongestToken));d[m]=y}u++}if(o)(function m(){setTimeout(function(){if(u>c)return o();g()||m()},0)})();else for(;u<=c;){var h=g();if(h)return h}},pushComponent:function(t,n,r){var o=t[t.length-1];o&&o.added===n&&o.removed===r?t[t.length-1]={count:o.count+1,added:n,removed:r}:t.push({count:1,added:n,removed:r})},extractCommon:function(t,n,r,o){for(var i=n.length,s=r.length,a=t.newPos,l=a-o,u=0;a+1<i&&l+1<s&&this.equals(n[a+1],r[l+1]);)a++,l++,u++;return u&&t.components.push({count:u}),t.newPos=a,l},equals:function(t,n){return this.options.comparator?this.options.comparator(t,n):t===n||this.options.ignoreCase&&t.toLowerCase()===n.toLowerCase()},removeEmpty:function(t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(t[r]);return n},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function co(e,t,n,r,o){for(var i=0,s=t.length,a=0,l=0;i<s;i++){var u=t[i];if(u.removed){if(u.value=e.join(r.slice(l,l+u.count)),l+=u.count,i&&t[i-1].added){var d=t[i-1];t[i-1]=t[i],t[i]=d}}else{if(!u.added&&o){var c=n.slice(a,a+u.count);c=c.map(function(g,h){var m=r[l+h];return m.length>g.length?m:g}),u.value=e.join(c)}else u.value=e.join(n.slice(a,a+u.count));a+=u.count,u.added||(l+=u.count)}}var v=t[s-1];return s>1&&typeof v.value=="string"&&(v.added||v.removed)&&e.equals("",v.value)&&(t[s-2].value+=v.value,t.pop()),t}function po(e){return{newPos:e.newPos,components:e.components.slice(0)}}var In=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,kn=/\S/,jn=new fe;jn.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!kn.test(e)&&!kn.test(t)};jn.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&In.test(t[n])&&In.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var Hn=new fe;Hn.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t};var ho=new fe;ho.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var fo=new fe;fo.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function rt(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rt=function(t){return typeof t}:rt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(e)}var vo=Object.prototype.toString,Ve=new fe;Ve.useLongestToken=!0;Ve.tokenize=Hn.tokenize;Ve.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,o=r===void 0?function(i,s){return typeof s>"u"?n:s}:r;return typeof e=="string"?e:JSON.stringify(Ft(e,null,null,o),o,"  ")};Ve.equals=function(e,t){return fe.prototype.equals.call(Ve,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function mo(e,t,n){return Ve.diff(e,t,n)}function Ft(e,t,n,r,o){t=t||[],n=n||[],r&&(e=r(o,e));var i;for(i=0;i<t.length;i+=1)if(t[i]===e)return n[i];var s;if(vo.call(e)==="[object Array]"){for(t.push(e),s=new Array(e.length),n.push(s),i=0;i<e.length;i+=1)s[i]=Ft(e[i],t,n,r,o);return t.pop(),n.pop(),s}if(e&&e.toJSON&&(e=e.toJSON()),rt(e)==="object"&&e!==null){t.push(e),s={},n.push(s);var a=[],l;for(l in e)e.hasOwnProperty(l)&&a.push(l);for(a.sort(),i=0;i<a.length;i+=1)l=a[i],s[l]=Ft(e[l],t,n,r,l);t.pop(),n.pop()}else s=e;return s}var Rt=new fe;Rt.tokenize=function(e){return e.slice()};Rt.join=Rt.removeEmpty=function(e){return e};const Ae=class{constructor(e,t=0,n=!0){if(this.data=e,this.version=t,!n)return;const r=this.serialize(),o=Ae.deserialize(r,this.version);if(!zt(this,o)){console.log({actual:this,expected:o});const i=JSON.stringify(this,null,2),s=JSON.stringify(o,null,2);for(const a of mo(i,s))console.log("CHANGE",a);We(`Mismatch after update:
Actual:
${JSON.stringify(this,null,2)}

Expected:
${JSON.stringify(o,null,2)}`)}}static create(){return Ae.deserialize(lo())}static deserialize(e,t=0){const n=new ee(e.shapeVersions);return new Ae({id:e.id,keyPoints:new ee(e.keyPoints),shapes:new ee(e.shapes),shapeVersions:n,shapeVersionLookup:$t.build(n,r=>`${r.shapeId}/${r.keyPointId}`,r=>r.id,([r,o])=>`${r}/${o}`),shapeVersionIdsByShape:at.build(n,r=>r.shapeId,r=>r.id,At),shapeVersionIdsByKeyPoint:at.build(n,r=>r.keyPointId,r=>r.id,At),normalizedShapeVersions:St(Array.from(n)).versions},t,!1)}with(e){return new Ae({...this.data,...e},this.version+1)}serialize(){return{id:this.data.id,keyPoints:this.data.keyPoints.data,shapes:this.data.shapes.data,shapeVersions:this.data.shapeVersions.data}}get shapes(){return this.data.shapes}get keyPoints(){return this.data.keyPoints}get shapeVersions(){return this.data.shapeVersions}getShapeVersion(e,t){const n=this.data.shapeVersionLookup.lookup([t,e]);return n?this.shapeVersions.get(n):null}getNormalizedCenterPointsForShapeVersion(e){return this.data.normalizedShapeVersions.get(e)}*iterateShapeVersionsForShape(e){for(const t of this.data.shapeVersionIdsByShape.lookup(e))yield this.shapeVersions.get(t)}addShape(e){console.log("doc.addShape",e);const t=this.shapes.insert({id:e});return this.with({shapes:t})}addKeyPoint(e,t){console.log("doc.addKeyPoint",e);const n=this.keyPoints.insert({id:e,position:t});return this.with({keyPoints:n})}updateKeyPoint(e,t){return this.with({keyPoints:this.keyPoints.update(e,t)})}replacePointsForVersion(e,t,n){const r=this.getShapeVersion(e,t);if(r){const s=this.shapeVersions.insert({...r,rawPoints:n});return this.with({shapeVersions:s,normalizedShapeVersions:St(s).versions})}const o={id:Yt.generate(),keyPointId:e,shapeId:t,rawPoints:n},i=this.shapeVersions.insert(o);return this.with({shapeVersions:i,normalizedShapeVersions:St(i).versions,shapeVersionLookup:this.data.shapeVersionLookup.insert(o),shapeVersionIdsByShape:this.data.shapeVersionIdsByShape.insert(o),shapeVersionIdsByKeyPoint:this.data.shapeVersionIdsByKeyPoint.insert(o)})}};let Jt=Ae;Jt.schema=ao.transform(e=>ot.ok(Ae.deserialize(e)),e=>e.serialize());var M=(e=>(e.Draw="draw",e.Rig="rig",e.Play="play",e))(M||{});const go=z.enum(M),yo=z.object({pan:O.schema,zoom:z.number}),Kn={initialize:()=>({pan:O.ZERO,zoom:1}),schema:yo};class wo{constructor(t,n,r){this.screenSize=t,this.isSidebarOpen=n,this.state=r,this.pan=new ue(()=>this.state.live().pan,o=>this.state.update(i=>_e(i,"pan",o))),this.zoom=new ue(()=>this.state.live().zoom,o=>this.state.update(i=>_e(i,"zoom",o))),this.screenSize=t,this.isSidebarOpen=n}screenSizeWithSidebarOpenLive(){return this.screenSize.live().sub(new O(Zt,0))}canvasScreenSizeLive(){return this.isSidebarOpen.live()?this.screenSizeWithSidebarOpenLive():this.screenSize.live()}handleWheelEvent(t){t.preventDefault(),t.stopImmediatePropagation();const{deltaX:n,deltaY:r,ctrlKey:o}=t;this.state.update(({pan:i,zoom:s})=>{if(o){const a=O.fromEvent(t),l=Math.exp(-r/100)*s;return{pan:a.add(i).scale(l/s).sub(a),zoom:l}}else return{pan:i.add(new O(n,r)),zoom:s}})}originLive(){const{pan:t,zoom:n}=this.state.live();return t.sub(this.canvasScreenSizeLive().scale(.5*n))}visibleSceneBoundsLive(){return new Ur(this.originLive(),this.canvasScreenSizeLive())}screenToSceneLive(t){return t.add(this.originLive()).scale(1/this.state.live().zoom)}sceneToScreenLive(t){return t.scale(this.state.live().zoom).sub(this.originLive())}eventSceneCoords(t){return Ze(()=>this.screenToSceneLive(O.fromEvent(t)))}getSceneTransformLive(){const t=this.originLive(),n=this.state.live().zoom;return`translate(${-t.x}px, ${-t.y}px) scale(${n}) `}}const Po=z.object({keyPointId:Ue.schema,shapeId:je.schema,viewport:Kn.schema,mode:go}),Wn={initialize:(e,t)=>({keyPointId:e,shapeId:t,mode:M.Draw,viewport:Kn.initialize()}),schema:Po};class xo{constructor(t){this.state=t,this.keyPointId=new ue(()=>this.state.live().keyPointId,n=>this.state.update(r=>_e(r,"keyPointId",n))),this.shapeId=new ue(()=>this.state.live().shapeId,n=>this.state.update(r=>_e(r,"shapeId",n))),this.mode=new ue(()=>this.state.live().mode,n=>this.state.update(r=>_e(r,"mode",n))),this.viewportState=new ue(()=>this.state.live().viewport,n=>this.state.update(r=>_e(r,"viewport",n)))}}const Je=z.object({document:Jt.schema,location:Wn.schema});function So(e){const t=Yr(`splatapus.${e}`);return t?Je.parse(t).mapErr(n=>n.toString()):ot.error("No saved data found")}function bo(e,t){window.splatSerializedDoc=t,Jr(`splatapus.${e}`,Je.serialize(t))}const Eo=Dr(no,bo);function Io(e,t){const n=[...e.keyPoints][0].id,r=[...e.shapes][0].id;return Wn.initialize(n,r)}function Gn(e){const t=Ue.generate(),n=je.generate(),r=Jt.create().addKeyPoint(t,O.ZERO).addShape(n).replacePointsForVersion(t,n,[]);return{document:r,location:Io(r)}}const qn={[M.Draw]:{gradient500:"from-fuchsia-500 to-violet-500",border500:"border-purple-500",ring500:"ring-purple-500"},[M.Rig]:{gradient500:"from-cyan-500 to-blue-500",border500:"border-sky-500",ring500:"ring-sky-500"},[M.Play]:{gradient500:"from-lime-500 to-emerald-500",border500:"border-green-500",ring500:"ring-green-500"}};function ko(e){const t=U(()=>e.interaction.activeMode.live().type,[e]);return qn[t]}const Co=T.memo(function({splatapus:t}){return _(W,{children:[f(bt,{modeType:M.Draw,splatapus:t,children:"draw"}),f(bt,{modeType:M.Rig,splatapus:t,children:"rig"}),f(bt,{modeType:M.Play,splatapus:t,children:"play"})]})}),bt=function({modeType:t,splatapus:n,children:r}){const i=U(()=>n.interaction.activeMode.live().type,[n.interaction])===t;return f(jr,{actionName:t,vfx:n.vfx,onClick:()=>{n.vfx.triggerAnimation(t),n.interaction.requestSetActiveMode(t)},className:Y(i&&`pointer-events-none bg-gradient-to-br ${qn[t].gradient500} !text-white`),disabled:i,children:r})};class qe{static distance(t,n){let r=0;for(let o=0;o<t.length;o++)r+=Math.pow(t[o]-n[o],2);return Math.sqrt(r)}static kernel(t,n){const r=qe.distance(t,n);return r===0?0:Math.pow(r,2)*Math.log(r)}constructor(t,n){t.length===0&&We("bad centers array :/"),t.every(u=>u.length===t[0].length)||We("centers must have same dimensions :/"),this.centers=t;const r=n.slice(),o=[],i=[];for(let u=0;u<t.length;u++){const c=[],d=[1];for(let v=0;v<t[u].length;v++)d.push(t[u][v]);for(let v=0;v<t.length;v++)c.push(qe.kernel(t[u],t[v]));i.push(d),o.push(c.concat(d))}const a=R.transpose(i).map(u=>{for(let c=u.length;c<o[0].length;c++)u.push(0);return u});for(let u=0;u<a.length;u++)o.push(a[u]),r.push(0);const l=this.solve(r,o);l||We("rbf failed to compile with given centers./nCenters must be unique :/"),this.ws=l}solve(t,n){const r=R.inverse(n);return r?R.multiplyVector(r,t):null}getValue(t){A(this.ws,"Assertion Error: this.ws");let n=0,r=0;for(r=0;r<this.centers.length;r++)n+=Number(this.ws[r])*qe.kernel(t,this.centers[r]);for(n+=Number(this.ws[this.centers.length]),r=0;r<t.length;r++)n+=t[r]*Number(this.ws[this.centers.length+(r+1)]);return n}}const R={create(e){return e.map(t=>t.slice())},fromVector(e){return e.map(t=>[t])},identity(e){return ye(e,t=>ye(e,n=>t===n?1:0))},col(e,t){return e.map(n=>n[t-1])},clone(e){return e.slice()},canMultiplyFromLeft(e,t){return e[0].length===t.length},multiplyMatrix(e,t){if(!R.canMultiplyFromLeft(e,t))return null;const n=e[0].length;return ye(e.length,r=>ye(t[0].length,o=>{let i=0;for(let s=0;s<n;s++)i+=e[r][s]*t[s][o];return i}))},multiplyVector(e,t){return R.multiplyMatrix(e,R.fromVector(t))},transpose(e){return ye(e[0].length,t=>ye(e.length,n=>e[n][t]))},isSquare(e){return e.length===e[0].length},toRightTriangular(e){const t=R.clone(e),n=e.length,r=e[0].length;for(let o=0;o<n;o++){if(t[o][o]===0){for(let i=o+1;i<n;i++)if(t[i][o]!==0){const s=[];for(let a=0;a<r;a++)s.push(t[o][a]+t[i][a]);t[o]=s;break}}if(t[o][o]!==0)for(let i=o+1;i<n;i++){const s=t[i][o]/t[o][o],a=[];for(let l=0;l<r;l++)a.push(l<=o?0:t[i][l]-t[o][l]*s);t[i]=a}}return t},determinant(e){if(!R.isSquare(e))return null;const t=R.toRightTriangular(e);let n=t[0][0];for(let r=1;r<t.length;r++)n=n*t[r][r];return n},isSingular(e){return R.isSquare(e)&&R.determinant(e)===0},augment(e,t){const n=R.clone(e),r=n[0].length;A(n.length===t.length,"Assertion Error: result.length === other.length");for(let o=0;o<n.length;o++)for(let i=0;i<t[0].length;i++)n[o][r+i]=t[o][i];return n},inverse(e){if(!R.isSquare(e)||R.isSingular(e))return null;const t=e.length,n=[],r=R.toRightTriangular(R.augment(e,R.identity(t))),o=r[0].length;let i=e.length;for(;i--;){const s=[];n[i]=[];const a=r[i][i];for(let u=0;u<o;u++){const c=r[i][u]/a;s.push(c),u>=t&&n[i].push(c)}r[i]=s;let l=i;for(;l--;){const u=[];for(let c=0;c<o;c++)u.push(r[l][c]-r[i][c]*r[l][i]);r[l]=u}}return n}};class Oo{interpolate(t){We("cannot interpolate none")}}class To{constructor(t){this.value=t}interpolate(t){return this.value}}class Lo{constructor(t,n,r,o){this.centerA=t,this.centerB=n,this.valueA=r,this.valueB=o}interpolate(t){const n=this.centerB.sub(this.centerA),o=t.sub(this.centerA).dot(n)/n.dot(n);return $n(this.valueA,this.valueB,o)}}class No extends qe{constructor(t,n){super(t.map(({x:r,y:o})=>[r,o]),n)}interpolate(t){return this.getValue([t.x,t.y])}}class Et{constructor(t,n){switch(A(t.length===n.length,"Assertion Error: centers.length === values.length"),t.length){case 0:this.interpolator=new Oo;break;case 1:this.interpolator=new To(n[0]);break;case 2:this.interpolator=new Lo(t[0],t[1],n[0],n[1]);break;default:this.interpolator=new No(t,n)}}interpolate(t){return this.interpolator.interpolate(t)}}class Do{constructor(){this.cache=new Map}getCenterPointsAtPosition(t,n,r){switch(r.type){case"keyPointId":{const o=t.getShapeVersion(r.keyPointId,n);if(!o){const i=t.keyPoints.get(r.keyPointId);if(!i.position)return null;const s=this.getCenterPointsAtInterpolatedPosition(t,n,i.position);return s?{normalized:s,smoothed:null}:null}return{normalized:t.getNormalizedCenterPointsForShapeVersion(o.id).normalizedCenterPoints,smoothed:t.getNormalizedCenterPointsForShapeVersion(o.id).smoothedCenterPoints}}case"interpolated":{const o=this.getCenterPointsAtInterpolatedPosition(t,n,r.scenePosition);return o?{normalized:o,smoothed:null}:null}default:Z(r)}}getCenterPointsAtInterpolatedPosition(t,n,r){var u;const o=t.shapes.get(n),i=new Set(t.iterateShapeVersionsForShape(n));if(!i.size)return null;const s=new Set;for(const c of i)s.add(t.keyPoints.get(c.keyPointId));const a=this.getCacheEntry(o,i,s);let l;return a?l=a.interpolators:(l=this.calculateInterpolators(t,i),this.cache.set(o,{versions:i,keyPoints:s,interpolators:l})),(u=l==null?void 0:l.map(({x:c,y:d,r:v})=>({center:new O(c.interpolate(r),d.interpolate(r)),radius:v.interpolate(r)})))!=null?u:null}calculateInterpolators(t,n){console.time("calculatInterpolators");const r=Fn(Array.from(n,a=>{const l=t.keyPoints.get(a.keyPointId);return l.position?{normalizedCenterPoints:t.getNormalizedCenterPointsForShapeVersion(a.id).normalizedCenterPoints,version:a,keyPointPosition:l.position}:null}));if(!r.length)return null;const o=r.map(({keyPointPosition:a})=>a),i=Math.min(...r.map(({normalizedCenterPoints:a})=>a.length));console.log({minLength:i,allNormalizedPoints:r});const s=[];for(let a=0;a<i;a++){const l=r.map(({normalizedCenterPoints:d})=>d[a].center.x),u=r.map(({normalizedCenterPoints:d})=>d[a].center.y),c=r.map(({normalizedCenterPoints:d})=>d[a].radius);s.push({x:new Et(o,l),y:new Et(o,u),r:new Et(o,c)})}return console.timeEnd("calculatInterpolators"),s}getCacheEntry(t,n,r){const o=this.cache.get(t);if(!o||n.size!==o.versions.size||r.size!==o.keyPoints.size)return null;for(const i of n)if(!o.versions.has(i))return null;for(const i of r)if(!o.keyPoints.has(i))return null;return o}}const Zn=new Do;function ut(e){const t=[],n=[];if(e.length===0)return[];if(e.length===1){const d=[];for(let v=0;v<12;v++)d.push(e[0].center.add(O.fromPolar(v*Math.PI/6,e[0].radius)));return d}const r=e[0],i=e[1].center.sub(r.center).normalize(),s=i.perpendicular().scale(r.radius);t.push(r.center.sub(i.scale(r.radius))),t.push(r.center.sub(s)),n.push(r.center.add(s));for(let d=1;d<e.length-1;d++){const v=e[d-1],g=e[d],y=e[d+1].center.sub(v.center).normalize().perpendicular().scale(g.radius);t.push(g.center.sub(y)),n.push(g.center.add(y))}const a=e[e.length-2],l=e[e.length-1],u=l.center.sub(a.center).normalize(),c=u.perpendicular().scale(l.radius);return t.push(l.center.sub(c)),t.push(l.center.add(u.scale(l.radius))),n.push(l.center.add(c)),t.concat(n.reverse())}function Mo(e){return lt(ut(e))}const Yn=typeof window>"u"||typeof document>"u";let ne=Yn?p.exports.useEffect:p.exports.useLayoutEffect;function te(e){let t=p.exports.useRef(e);return ne(()=>{t.current=e},[e]),t}function _o(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function vt(){let e=[],t=[],n={enqueue(r){t.push(r)},addEventListener(r,o,i,s){return r.addEventListener(o,i,s),n.add(()=>r.removeEventListener(o,i,s))},requestAnimationFrame(...r){let o=requestAnimationFrame(...r);return n.add(()=>cancelAnimationFrame(o))},nextFrame(...r){return n.requestAnimationFrame(()=>n.requestAnimationFrame(...r))},setTimeout(...r){let o=setTimeout(...r);return n.add(()=>clearTimeout(o))},microTask(...r){let o={current:!0};return _o(()=>{o.current&&r[0]()}),n.add(()=>{o.current=!1})},add(r){return e.push(r),()=>{let o=e.indexOf(r);if(o>=0){let[i]=e.splice(o,1);i()}}},dispose(){for(let r of e.splice(0))r()},async workQueue(){for(let r of t.splice(0))await r()}};return n}function Jn(){let[e]=p.exports.useState(vt);return p.exports.useEffect(()=>()=>e.dispose(),[e]),e}let D=function(e){let t=te(e);return T.useCallback((...n)=>t.current(...n),[t])},It={serverHandoffComplete:!1};function Xt(){let[e,t]=p.exports.useState(It.serverHandoffComplete);return p.exports.useEffect(()=>{e!==!0&&t(!0)},[e]),p.exports.useEffect(()=>{It.serverHandoffComplete===!1&&(It.serverHandoffComplete=!0)},[]),e}var Cn;let Ao=0;function On(){return++Ao}let re=(Cn=T.useId)!=null?Cn:function(){let e=Xt(),[t,n]=T.useState(e?On:null);return ne(()=>{t===null&&n(On())},[t]),t!=null?""+t:void 0};function $(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,$),r}function Qt(e){return Yn?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Vt=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Se=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Se||{}),zo=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(zo||{}),$o=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))($o||{});function Xn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Vt))}var en=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(en||{});function Qn(e,t=0){var n;return e===((n=Qt(e))==null?void 0:n.body)?!1:$(t,{[0](){return e.matches(Vt)},[1](){let r=e;for(;r!==null;){if(r.matches(Vt))return!0;r=r.parentElement}return!1}})}let Fo=["textarea","input"].join(",");function Ro(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Fo))!=null?n:!1}function Vo(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let s=o.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ze(e,t,n=!0,r=null){let o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,i=Array.isArray(e)?n?Vo(e):e:Xn(e);r=r!=null?r:o.activeElement;let s=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,i.indexOf(r))-1;if(t&4)return Math.max(0,i.indexOf(r))+1;if(t&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=t&32?{preventScroll:!0}:{},u=0,c=i.length,d;do{if(u>=c||u+c<=0)return 0;let v=a+u;if(t&16)v=(v+c)%c;else{if(v<0)return 3;if(v>=c)return 1}d=i[v],d==null||d.focus(l),u+=s}while(d!==o.activeElement);return t&6&&Ro(d)&&d.select(),d.hasAttribute("tabindex")||d.setAttribute("tabindex","0"),2}function kt(e,t,n){let r=te(t);p.exports.useEffect(()=>{function o(i){r.current(i)}return document.addEventListener(e,o,n),()=>document.removeEventListener(e,o,n)},[e,n])}function Bo(e,t,n=!0){let r=p.exports.useRef(!1);p.exports.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function o(s,a){if(!r.current||s.defaultPrevented)return;let l=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(e),u=a(s);if(u!==null&&!!u.ownerDocument.documentElement.contains(u)){for(let c of l){if(c===null)continue;let d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(u))return}return!Qn(u,en.Loose)&&u.tabIndex!==-1&&s.preventDefault(),t(s,u)}}let i=p.exports.useRef(null);kt("mousedown",s=>{r.current&&(i.current=s.target)},!0),kt("click",s=>{!i.current||(o(s,()=>i.current),i.current=null)},!0),kt("blur",s=>o(s,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Tn(e){var t;if(e.type)return e.type;let n=(t=e.as)!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function er(e,t){let[n,r]=p.exports.useState(()=>Tn(e));return ne(()=>{r(Tn(e))},[e.type,e.as]),ne(()=>{n||!t.current||t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&r("button")},[n,t]),n}let tr=Symbol();function Uo(e,t=!0){return Object.assign(e,{[tr]:t})}function J(...e){let t=p.exports.useRef(e);p.exports.useEffect(()=>{t.current=e},[e]);let n=D(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||(r==null?void 0:r[tr]))?void 0:n}var Be=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Be||{}),Q=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Q||{});function G({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:s}){let a=nr(t,e);if(i)return tt(a,n,r,s);let l=o!=null?o:0;if(l&2){let{static:u=!1,...c}=a;if(u)return tt(c,n,r,s)}if(l&1){let{unmount:u=!0,...c}=a;return $(u?0:1,{[0](){return null},[1](){return tt({...c,hidden:!0,style:{display:"none"}},n,r,s)}})}return tt(a,n,r,s)}function tt(e,t={},n,r){let{as:o=n,children:i,refName:s="ref",...a}=Ct(e,["unmount","static"]),l=e.ref!==void 0?{[s]:e.ref}:{},u=typeof i=="function"?i(t):i;a.className&&typeof a.className=="function"&&(a.className=a.className(t));let c={};if(t){let d=!1,v=[];for(let[g,h]of Object.entries(t))typeof h=="boolean"&&(d=!0),h===!0&&v.push(g);d&&(c["data-headlessui-state"]=v.join(" "))}if(o===p.exports.Fragment&&Object.keys(Bt(a)).length>0){if(!p.exports.isValidElement(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(a).map(d=>`  - ${d}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(d=>`  - ${d}`).join(`
`)].join(`
`));return p.exports.cloneElement(u,Object.assign({},nr(u.props,Bt(Ct(a,["ref"]))),c,l,jo(u.ref,l.ref)))}return p.exports.createElement(o,Object.assign({},Ct(a,["ref"]),o!==p.exports.Fragment&&l,o!==p.exports.Fragment&&c),u)}function jo(...e){return{ref:e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}}function nr(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](o,...i){let s=n[r];for(let a of s){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;a(o,...i)}}});return t}function q(e){var t;return Object.assign(p.exports.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Bt(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Ct(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function tn(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&Ho(n)?!1:r}function Ho(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function Ko(e){var t;let n=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(n){for(let r of n.elements)if(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image"){r.click();return}}}let Wo="div";var Ye=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ye||{});let ct=q(function(e,t){let{features:n=1,...r}=e,o={ref:t,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return G({ourProps:o,theirProps:r,slot:{},defaultTag:Wo,name:"Hidden"})}),nn=p.exports.createContext(null);nn.displayName="OpenClosedContext";var oe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(oe||{});function mt(){return p.exports.useContext(nn)}function rr({value:e,children:t}){return T.createElement(nn.Provider,{value:e},t)}var X=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(X||{});function Go(e,t,n){let[r,o]=p.exports.useState(n),i=e!==void 0;return[i?e:r,D(s=>(i||o(s),t==null?void 0:t(s)))]}function qo(e,t,n){let r=te(t);p.exports.useEffect(()=>{function o(i){r.current(i)}return window.addEventListener(e,o,n),()=>window.removeEventListener(e,o,n)},[e,n])}var be=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(be||{});function or(){let e=p.exports.useRef(0);return qo("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function ir(){let e=p.exports.useRef(!1);return ne(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function rn(...e){return p.exports.useMemo(()=>Qt(...e),[...e])}function Zo(e,t,n,r){let o=te(n);p.exports.useEffect(()=>{e=e!=null?e:window;function i(s){o.current(s)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}let sr=p.exports.createContext(null);function ar(){let e=p.exports.useContext(sr);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ar),t}return e}function Yo(){let[e,t]=p.exports.useState([]);return[e.length>0?e.join(" "):void 0,p.exports.useMemo(()=>function(n){let r=D(i=>(t(s=>[...s,i]),()=>t(s=>{let a=s.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),o=p.exports.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return T.createElement(sr.Provider,{value:o},n.children)},[t])]}let Jo="p",Xo=q(function(e,t){let n=ar(),r=`headlessui-description-${re()}`,o=J(t);ne(()=>n.register(r),[r,n.register]);let i=e,s={ref:o,...n.props,id:r};return G({ourProps:s,theirProps:i,slot:n.slot||{},defaultTag:Jo,name:n.name||"Description"})});var Qo=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Qo||{}),ei=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(ei||{});let ti={[0]:e=>({...e,popoverState:$(e.popoverState,{[0]:1,[1]:0})}),[1](e){return e.popoverState===1?e:{...e,popoverState:1}},[2](e,t){return e.button===t.button?e:{...e,button:t.button}},[3](e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},[4](e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},[5](e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},on=p.exports.createContext(null);on.displayName="PopoverContext";function gt(e){let t=p.exports.useContext(on);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,gt),n}return t}let sn=p.exports.createContext(null);sn.displayName="PopoverAPIContext";function an(e){let t=p.exports.useContext(sn);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,an),n}return t}let ln=p.exports.createContext(null);ln.displayName="PopoverGroupContext";function lr(){return p.exports.useContext(ln)}let un=p.exports.createContext(null);un.displayName="PopoverPanelContext";function ni(){return p.exports.useContext(un)}function ri(e,t){return $(t.type,ti,e,t)}let oi="div",ii=q(function(e,t){var n;let r=`headlessui-popover-button-${re()}`,o=`headlessui-popover-panel-${re()}`,i=p.exports.useRef(null),s=J(t,Uo(x=>{i.current=x})),a=p.exports.useReducer(ri,{popoverState:1,button:null,buttonId:r,panel:null,panelId:o,beforePanelSentinel:p.exports.createRef(),afterPanelSentinel:p.exports.createRef()}),[{popoverState:l,button:u,panel:c,beforePanelSentinel:d,afterPanelSentinel:v},g]=a,h=rn((n=i.current)!=null?n:u);p.exports.useEffect(()=>g({type:3,buttonId:r}),[r,g]),p.exports.useEffect(()=>g({type:5,panelId:o}),[o,g]);let m=p.exports.useMemo(()=>{if(!u||!c)return!1;for(let x of document.querySelectorAll("body > *"))if(Number(x==null?void 0:x.contains(u))^Number(x==null?void 0:x.contains(c)))return!0;return!1},[u,c]),y=p.exports.useMemo(()=>({buttonId:r,panelId:o,close:()=>g({type:1})}),[r,o,g]),P=lr(),S=P==null?void 0:P.registerPopover,E=D(()=>{var x;return(x=P==null?void 0:P.isFocusWithinPopoverGroup())!=null?x:(h==null?void 0:h.activeElement)&&((u==null?void 0:u.contains(h.activeElement))||(c==null?void 0:c.contains(h.activeElement)))});p.exports.useEffect(()=>S==null?void 0:S(y),[S,y]),Zo(h==null?void 0:h.defaultView,"focus",x=>{var C,N,V,B;l===0&&(E()||!u||!c||(N=(C=d.current)==null?void 0:C.contains)!=null&&N.call(C,x.target)||(B=(V=v.current)==null?void 0:V.contains)!=null&&B.call(V,x.target)||g({type:1}))},!0),Bo([u,c],(x,C)=>{g({type:1}),Qn(C,en.Loose)||(x.preventDefault(),u==null||u.focus())},l===0);let w=D(x=>{g({type:1});let C=(()=>x?x instanceof HTMLElement?x:"current"in x&&x.current instanceof HTMLElement?x.current:u:u)();C==null||C.focus()}),b=p.exports.useMemo(()=>({close:w,isPortalled:m}),[w,m]),I=p.exports.useMemo(()=>({open:l===0,close:w}),[l,w]),L=e,k={ref:s};return T.createElement(on.Provider,{value:a},T.createElement(sn.Provider,{value:b},T.createElement(rr,{value:$(l,{[0]:oe.Open,[1]:oe.Closed})},G({ourProps:k,theirProps:L,slot:I,defaultTag:oi,name:"Popover"}))))}),si="button",ai=q(function(e,t){let[n,r]=gt("Popover.Button"),{isPortalled:o}=an("Popover.Button"),i=p.exports.useRef(null),s=`headlessui-focus-sentinel-${re()}`,a=lr(),l=a==null?void 0:a.closeOthers,u=ni(),c=u===null?!1:u===n.panelId,d=J(i,t,c?null:x=>r({type:2,button:x})),v=J(i,t),g=rn(i),h=D(x=>{var C,N,V;if(c){if(n.popoverState===1)return;switch(x.key){case X.Space:case X.Enter:x.preventDefault(),(N=(C=x.target).click)==null||N.call(C),r({type:1}),(V=n.button)==null||V.focus();break}}else switch(x.key){case X.Space:case X.Enter:x.preventDefault(),x.stopPropagation(),n.popoverState===1&&(l==null||l(n.buttonId)),r({type:0});break;case X.Escape:if(n.popoverState!==0)return l==null?void 0:l(n.buttonId);if(!i.current||(g==null?void 0:g.activeElement)&&!i.current.contains(g.activeElement))return;x.preventDefault(),x.stopPropagation(),r({type:1});break}}),m=D(x=>{c||x.key===X.Space&&x.preventDefault()}),y=D(x=>{var C,N;tn(x.currentTarget)||e.disabled||(c?(r({type:1}),(C=n.button)==null||C.focus()):(x.preventDefault(),x.stopPropagation(),n.popoverState===1&&(l==null||l(n.buttonId)),r({type:0}),(N=n.button)==null||N.focus()))}),P=D(x=>{x.preventDefault(),x.stopPropagation()}),S=n.popoverState===0,E=p.exports.useMemo(()=>({open:S}),[S]),w=er(e,i),b=e,I=c?{ref:v,type:w,onKeyDown:h,onClick:y}:{ref:d,id:n.buttonId,type:w,"aria-expanded":e.disabled?void 0:n.popoverState===0,"aria-controls":n.panel?n.panelId:void 0,onKeyDown:h,onKeyUp:m,onClick:y,onMouseDown:P},L=or(),k=D(()=>{let x=n.panel;if(!x)return;function C(){$(L.current,{[be.Forwards]:()=>ze(x,Se.First),[be.Backwards]:()=>ze(x,Se.Last)})}C()});return _(W,{children:[G({ourProps:I,theirProps:b,slot:E,defaultTag:si,name:"Popover.Button"}),S&&!c&&o&&f(ct,{id:s,features:Ye.Focusable,as:"button",type:"button",onFocus:k})]})}),li="div",ui=Be.RenderStrategy|Be.Static,ci=q(function(e,t){let[{popoverState:n},r]=gt("Popover.Overlay"),o=J(t),i=`headlessui-popover-overlay-${re()}`,s=mt(),a=(()=>s!==null?s===oe.Open:n===0)(),l=D(c=>{if(tn(c.currentTarget))return c.preventDefault();r({type:1})}),u=p.exports.useMemo(()=>({open:n===0}),[n]);return G({ourProps:{ref:o,id:i,"aria-hidden":!0,onClick:l},theirProps:e,slot:u,defaultTag:li,features:ui,visible:a,name:"Popover.Overlay"})}),di="div",pi=Be.RenderStrategy|Be.Static,hi=q(function(e,t){let{focus:n=!1,...r}=e,[o,i]=gt("Popover.Panel"),{close:s,isPortalled:a}=an("Popover.Panel"),l=`headlessui-focus-sentinel-before-${re()}`,u=`headlessui-focus-sentinel-after-${re()}`,c=p.exports.useRef(null),d=J(c,t,b=>{i({type:4,panel:b})}),v=rn(c),g=mt(),h=(()=>g!==null?g===oe.Open:o.popoverState===0)(),m=D(b=>{var I;switch(b.key){case X.Escape:if(o.popoverState!==0||!c.current||(v==null?void 0:v.activeElement)&&!c.current.contains(v.activeElement))return;b.preventDefault(),b.stopPropagation(),i({type:1}),(I=o.button)==null||I.focus();break}});p.exports.useEffect(()=>{var b;e.static||o.popoverState===1&&((b=e.unmount)!=null?b:!0)&&i({type:4,panel:null})},[o.popoverState,e.unmount,e.static,i]),p.exports.useEffect(()=>{if(!n||o.popoverState!==0||!c.current)return;let b=v==null?void 0:v.activeElement;c.current.contains(b)||ze(c.current,Se.First)},[n,c,o.popoverState]);let y=p.exports.useMemo(()=>({open:o.popoverState===0,close:s}),[o,s]),P={ref:d,id:o.panelId,onKeyDown:m,onBlur:n&&o.popoverState===0?b=>{var I,L,k,x,C;let N=b.relatedTarget;!N||!c.current||(I=c.current)!=null&&I.contains(N)||(i({type:1}),(((k=(L=o.beforePanelSentinel.current)==null?void 0:L.contains)==null?void 0:k.call(L,N))||((C=(x=o.afterPanelSentinel.current)==null?void 0:x.contains)==null?void 0:C.call(x,N)))&&N.focus({preventScroll:!0}))}:void 0,tabIndex:-1},S=or(),E=D(()=>{let b=c.current;if(!b)return;function I(){$(S.current,{[be.Forwards]:()=>{ze(b,Se.First)},[be.Backwards]:()=>{var L;(L=o.button)==null||L.focus({preventScroll:!0})}})}I()}),w=D(()=>{let b=c.current;if(!b)return;function I(){$(S.current,{[be.Forwards]:()=>{var L,k,x;if(!o.button)return;let C=Xn(),N=C.indexOf(o.button),V=C.slice(0,N+1),B=[...C.slice(N+1),...V];for(let Te of B.slice())if(((k=(L=Te==null?void 0:Te.id)==null?void 0:L.startsWith)==null?void 0:k.call(L,"headlessui-focus-sentinel-"))||((x=o.panel)==null?void 0:x.contains(Te))){let Xe=B.indexOf(Te);Xe!==-1&&B.splice(Xe,1)}ze(B,Se.First,!1)},[be.Backwards]:()=>ze(b,Se.Last)})}I()});return T.createElement(un.Provider,{value:o.panelId},h&&a&&f(ct,{id:l,ref:o.beforePanelSentinel,features:Ye.Focusable,as:"button",type:"button",onFocus:E}),G({ourProps:P,theirProps:r,slot:y,defaultTag:di,features:pi,visible:h,name:"Popover.Panel"}),h&&a&&f(ct,{id:u,ref:o.afterPanelSentinel,features:Ye.Focusable,as:"button",type:"button",onFocus:w}))}),fi="div",vi=q(function(e,t){let n=p.exports.useRef(null),r=J(n,t),[o,i]=p.exports.useState([]),s=D(h=>{i(m=>{let y=m.indexOf(h);if(y!==-1){let P=m.slice();return P.splice(y,1),P}return m})}),a=D(h=>(i(m=>[...m,h]),()=>s(h))),l=D(()=>{var h;let m=Qt(n);if(!m)return!1;let y=m.activeElement;return(h=n.current)!=null&&h.contains(y)?!0:o.some(P=>{var S,E;return((S=m.getElementById(P.buttonId))==null?void 0:S.contains(y))||((E=m.getElementById(P.panelId))==null?void 0:E.contains(y))})}),u=D(h=>{for(let m of o)m.buttonId!==h&&m.close()}),c=p.exports.useMemo(()=>({registerPopover:a,unregisterPopover:s,isFocusWithinPopoverGroup:l,closeOthers:u}),[a,s,l,u]),d=p.exports.useMemo(()=>({}),[]),v=e,g={ref:r};return T.createElement(ln.Provider,{value:c},G({ourProps:g,theirProps:v,slot:d,defaultTag:fi,name:"Popover.Group"}))}),Ot=Object.assign(ii,{Button:ai,Overlay:ci,Panel:hi,Group:vi}),ur=p.exports.createContext(null);function cr(){let e=p.exports.useContext(ur);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,cr),t}return e}function mi(){let[e,t]=p.exports.useState([]);return[e.length>0?e.join(" "):void 0,p.exports.useMemo(()=>function(n){let r=D(i=>(t(s=>[...s,i]),()=>t(s=>{let a=s.slice(),l=a.indexOf(i);return l!==-1&&a.splice(l,1),a}))),o=p.exports.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return T.createElement(ur.Provider,{value:o},n.children)},[t])]}let gi="label",yi=q(function(e,t){let{passive:n=!1,...r}=e,o=cr(),i=`headlessui-label-${re()}`,s=J(t);ne(()=>o.register(i),[i,o.register]);let a={ref:s,...o.props,id:i};return n&&("onClick"in a&&delete a.onClick,"onClick"in r&&delete r.onClick),G({ourProps:a,theirProps:r,slot:o.slot||{},defaultTag:gi,name:o.name||"Label"})}),cn=p.exports.createContext(null);cn.displayName="GroupContext";let wi=p.exports.Fragment;function Pi(e){let[t,n]=p.exports.useState(null),[r,o]=mi(),[i,s]=Yo(),a=p.exports.useMemo(()=>({switch:t,setSwitch:n,labelledby:r,describedby:i}),[t,n,r,i]),l={},u=e;return T.createElement(s,{name:"Switch.Description"},T.createElement(o,{name:"Switch.Label",props:{onClick(){!t||(t.click(),t.focus({preventScroll:!0}))}}},T.createElement(cn.Provider,{value:a},G({ourProps:l,theirProps:u,defaultTag:wi,name:"Switch.Group"}))))}let xi="button",Si=q(function(e,t){let{checked:n,defaultChecked:r=!1,onChange:o,name:i,value:s,...a}=e,l=`headlessui-switch-${re()}`,u=p.exports.useContext(cn),c=p.exports.useRef(null),d=J(c,t,u===null?null:u.setSwitch),[v,g]=Go(n,o,r),h=D(()=>g==null?void 0:g(!v)),m=D(w=>{if(tn(w.currentTarget))return w.preventDefault();w.preventDefault(),h()}),y=D(w=>{w.key===X.Space?(w.preventDefault(),h()):w.key===X.Enter&&Ko(w.currentTarget)}),P=D(w=>w.preventDefault()),S=p.exports.useMemo(()=>({checked:v}),[v]),E={id:l,ref:d,role:"switch",type:er(e,c),tabIndex:0,"aria-checked":v,"aria-labelledby":u==null?void 0:u.labelledby,"aria-describedby":u==null?void 0:u.describedby,onClick:m,onKeyUp:y,onKeyPress:P};return _(W,{children:[i!=null&&v&&T.createElement(ct,{features:Ye.Hidden,...Bt({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:v,name:i,value:s})}),G({ourProps:E,theirProps:a,slot:S,defaultTag:xi,name:"Switch"})]})}),bi=Object.assign(Si,{Group:Pi,Label:yi,Description:Xo});function Ei(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Tt(e,...t){e&&t.length>0&&e.classList.add(...t)}function Lt(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Ut=(e=>(e.Ended="ended",e.Cancelled="cancelled",e))(Ut||{});function Ii(e,t){let n=vt();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:o}=getComputedStyle(e),[i,s]=[r,o].map(a=>{let[l=0]=a.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,c)=>c-u);return l});if(i+s!==0){let a=[];a.push(n.addEventListener(e,"transitionrun",l=>{l.target===l.currentTarget&&(a.splice(0).forEach(u=>u()),a.push(n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t("ended"),a.splice(0).forEach(c=>c()))}),n.addEventListener(e,"transitioncancel",u=>{u.target===u.currentTarget&&(t("cancelled"),a.splice(0).forEach(c=>c()))})))}))}else t("ended");return n.add(()=>t("cancelled")),n.dispose}function ki(e,t,n,r){let o=n?"enter":"leave",i=vt(),s=r!==void 0?Ei(r):()=>{};o==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let a=$(o,{enter:()=>t.enter,leave:()=>t.leave}),l=$(o,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=$(o,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Lt(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Tt(e,...a,...u),i.nextFrame(()=>{Lt(e,...u),Tt(e,...l),Ii(e,c=>(c==="ended"&&(Lt(e,...a),Tt(e,...t.entered)),s(c)))}),i.dispose}function Ci({container:e,direction:t,classes:n,onStart:r,onStop:o}){let i=ir(),s=Jn(),a=te(t);ne(()=>{let l=vt();s.add(l.dispose);let u=e.current;if(!!u&&a.current!=="idle"&&!!i.current)return l.dispose(),r.current(a.current),l.add(ki(u,n.current,a.current==="enter",c=>{l.dispose(),$(c,{[Ut.Ended](){o.current(a.current)},[Ut.Cancelled]:()=>{}})})),l.dispose},[t])}function ge(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let yt=p.exports.createContext(null);yt.displayName="TransitionContext";var Oi=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Oi||{});function Ti(){let e=p.exports.useContext(yt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Li(){let e=p.exports.useContext(wt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let wt=p.exports.createContext(null);wt.displayName="NestingContext";function Pt(e){return"children"in e?Pt(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function dr(e,t){let n=te(e),r=p.exports.useRef([]),o=ir(),i=Jn(),s=D((g,h=Q.Hidden)=>{let m=r.current.findIndex(({el:y})=>y===g);m!==-1&&($(h,{[Q.Unmount](){r.current.splice(m,1)},[Q.Hidden](){r.current[m].state="hidden"}}),i.microTask(()=>{var y;!Pt(r)&&o.current&&((y=n.current)==null||y.call(n))}))}),a=D(g=>{let h=r.current.find(({el:m})=>m===g);return h?h.state!=="visible"&&(h.state="visible"):r.current.push({el:g,state:"visible"}),()=>s(g,Q.Unmount)}),l=p.exports.useRef([]),u=p.exports.useRef(Promise.resolve()),c=p.exports.useRef({enter:[],leave:[],idle:[]}),d=D((g,h,m)=>{l.current.splice(0),t&&(t.chains.current[h]=t.chains.current[h].filter(([y])=>y!==g)),t==null||t.chains.current[h].push([g,new Promise(y=>{l.current.push(y)})]),t==null||t.chains.current[h].push([g,new Promise(y=>{Promise.all(c.current[h].map(([P,S])=>S)).then(()=>y())})]),h==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>m(h)):m(h)}),v=D((g,h,m)=>{Promise.all(c.current[h].splice(0).map(([y,P])=>P)).then(()=>{var y;(y=l.current.shift())==null||y()}).then(()=>m(h))});return p.exports.useMemo(()=>({children:r,register:a,unregister:s,onStart:d,onStop:v,wait:u,chains:c}),[a,s,r,d,v,c,u])}function Ni(){}let Di=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Ln(e){var t;let n={};for(let r of Di)n[r]=(t=e[r])!=null?t:Ni;return n}function Mi(e){let t=p.exports.useRef(Ln(e));return p.exports.useEffect(()=>{t.current=Ln(e)},[e]),t}let _i="div",pr=Be.RenderStrategy,hr=q(function(e,t){let{beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:i,enter:s,enterFrom:a,enterTo:l,entered:u,leave:c,leaveFrom:d,leaveTo:v,...g}=e,h=p.exports.useRef(null),m=J(h,t),y=g.unmount?Q.Unmount:Q.Hidden,{show:P,appear:S,initial:E}=Ti(),[w,b]=p.exports.useState(P?"visible":"hidden"),I=Li(),{register:L,unregister:k}=I,x=p.exports.useRef(null);p.exports.useEffect(()=>L(h),[L,h]),p.exports.useEffect(()=>{if(y===Q.Hidden&&!!h.current){if(P&&w!=="visible"){b("visible");return}return $(w,{hidden:()=>k(h),visible:()=>L(h)})}},[w,h,L,k,P,y]);let C=te({enter:ge(s),enterFrom:ge(a),enterTo:ge(l),entered:ge(u),leave:ge(c),leaveFrom:ge(d),leaveTo:ge(v)}),N=Mi({beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:i}),V=Xt();p.exports.useEffect(()=>{if(V&&w==="visible"&&h.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[h,w,V]);let B=E&&!S,Te=(()=>!V||B||x.current===P?"idle":P?"enter":"leave")(),Xe=D(se=>$(se,{enter:()=>N.current.beforeEnter(),leave:()=>N.current.beforeLeave(),idle:()=>{}})),kr=D(se=>$(se,{enter:()=>N.current.afterEnter(),leave:()=>N.current.afterLeave(),idle:()=>{}})),Qe=dr(()=>{b("hidden"),k(h)},I);Ci({container:h,classes:C,direction:Te,onStart:te(se=>{Qe.onStart(h,se,Xe)}),onStop:te(se=>{Qe.onStop(h,se,kr),se==="leave"&&!Pt(Qe)&&(b("hidden"),k(h))})}),p.exports.useEffect(()=>{!B||(y===Q.Hidden?x.current=null:x.current=P)},[P,B,w]);let Cr=g,Or={ref:m};return f(wt.Provider,{value:Qe,children:f(rr,{value:$(w,{visible:oe.Open,hidden:oe.Closed}),children:G({ourProps:Or,theirProps:Cr,defaultTag:_i,features:pr,visible:w==="visible",name:"Transition.Child"})})})}),jt=q(function(e,t){let{show:n,appear:r=!1,unmount:o,...i}=e,s=p.exports.useRef(null),a=J(s,t);Xt();let l=mt();if(n===void 0&&l!==null&&(n=$(l,{[oe.Open]:!0,[oe.Closed]:!1})),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,c]=p.exports.useState(n?"visible":"hidden"),d=dr(()=>{c("hidden")}),[v,g]=p.exports.useState(!0),h=p.exports.useRef([n]);ne(()=>{v!==!1&&h.current[h.current.length-1]!==n&&(h.current.push(n),g(!1))},[h,n]);let m=p.exports.useMemo(()=>({show:n,appear:r,initial:v}),[n,r,v]);p.exports.useEffect(()=>{if(n)c("visible");else if(!Pt(d))c("hidden");else{let P=s.current;if(!P)return;let S=P.getBoundingClientRect();S.x===0&&S.y===0&&S.width===0&&S.height===0&&c("hidden")}},[n,d]);let y={unmount:o};return f(wt.Provider,{value:d,children:f(yt.Provider,{value:m,children:G({ourProps:{...y,as:p.exports.Fragment,children:T.createElement(hr,{ref:a,...y,...i})},theirProps:{},defaultTag:p.exports.Fragment,features:pr,visible:u==="visible",name:"Transition"})})})}),Ai=q(function(e,t){let n=p.exports.useContext(yt)!==null,r=mt()!==null;return f(W,{children:!n&&r?T.createElement(jt,{ref:t,...e}):T.createElement(hr,{ref:t,...e})})}),ce=Object.assign(jt,{Child:Ai,Root:jt});const fr="splatapus.debugSettings",zi=z.object({shouldShowPoints:z.boolean,shouldShowRawPoints:z.boolean,shouldShowSmoothPoints:z.boolean,useSmartNormalization:z.boolean}),$i={shouldShowPoints:!1,shouldShowRawPoints:!1,shouldShowSmoothPoints:!1,useSmartNormalization:!0};function Fi(){const e=pe(xe),[t,n]=p.exports.useState(null),r=Hr(t,16);return _(Ot,{className:"pointer-events-auto relative px-3 py-2 opacity-0 hover:opacity-100 ui-open:opacity-100",children:[f(Ot.Button,{as:he,children:"!"}),f(ce,{className:"absolute bottom-12 right-3 origin-bottom-right",enter:"transition duration-200 ease-out-back",enterFrom:"opacity-0 scale-75",enterTo:"opacity-100",leave:"transition duration-300 ease-in-back",leaveFrom:"opacity-100",leaveTo:"opacity-0 scale-75",children:_(Ot.Panel,{ref:n,className:Y("flex  w-60 flex-col gap-3 bg-stone-100 p-3"),style:{clipPath:r},children:[f(nt,{label:"Show points",value:e.shouldShowPoints,onChange:o=>xe.update({...e,shouldShowPoints:o})}),f(nt,{label:"Show raw points",value:e.shouldShowRawPoints,onChange:o=>xe.update({...e,shouldShowRawPoints:o})}),f(nt,{label:"Smooth points",value:e.shouldShowSmoothPoints,onChange:o=>xe.update({...e,shouldShowSmoothPoints:o})}),f(nt,{label:"Smart normalization",value:e.useSmartNormalization,onChange:o=>xe.update({...e,useSmartNormalization:o})})]})})]})}function nt({label:e,value:t,onChange:n}){return _(bi,{checked:t,onChange:n,as:Kr,className:"justify-between py-1 pl-3 pr-1",children:[f("span",{children:e}),f("div",{className:"relative inline-flex h-6 w-10 rounded-full bg-stone-200 transition ui-checked:bg-green-400",children:f("div",{className:"absolute top-[2px] left-[2px] h-5 w-5 rounded-full bg-white transition ui-checked:translate-x-4"})})]})}function Ri(){const e=Xr(fr);try{return zi.parse(JSON.parse(e)).unwrap()}catch{return $i}}const xe=new K(Ri(),"debugSettings");it(st.idle,()=>{Qr(fr,JSON.stringify(xe.live()))});function Nt(e){return pe(xe)[e]}function vr(){return e=>e}function mr({strokeWidth:e=1,stroke:t="transparent",strokeCap:n="butt",strokeDash:r=[],strokeDashOffset:o=0,strokeJoin:i="round"}={}){return vr()({stroke:t,strokeWidth:e,strokeLinecap:n,strokeLinejoin:i,strokeDasharray:r.join(" "),strokeDashoffset:o})}function gr({fill:e="transparent"}={}){return vr()({fill:e})}function Vi(e){return{...mr(e),...gr(e)}}function yr(e=j.DEFAULT_DEBUG_COLOR){return{stroke:e,strokeWidth:j.HAIRLINE}}function wr({label:e,position:t,color:n}){if(!e)return null;const r=O.from(t).add(j.LABEL_OFFSET);return f("text",{x:r.x,y:r.y,className:"font-sans",textAnchor:"middle",fontSize:4,...gr({fill:n!=null?n:j.DEFAULT_DEBUG_COLOR}),children:e})}function Bi({color:e,path:t}){return f("path",{d:t,...mr(yr(e)),fill:"transparent"})}function Ui({position:e,...t}){const{x:n,y:r}=O.from(e);return _(W,{children:[f(Bi,{...t,path:new Wr().moveTo(n-j.DEBUG_POINT_SIZE,r-j.DEBUG_POINT_SIZE).lineTo(n+j.DEBUG_POINT_SIZE,r+j.DEBUG_POINT_SIZE).moveTo(n-j.DEBUG_POINT_SIZE,r+j.DEBUG_POINT_SIZE).lineTo(n+j.DEBUG_POINT_SIZE,r-j.DEBUG_POINT_SIZE).toString()}),f(wr,{...t,position:e})]})}function Nn({center:e,radius:t,...n}){const{x:r,y:o}=O.from(e);return _(W,{children:[f("circle",{cx:r,cy:o,r:t,...Vi(yr(n.color))}),f(wr,{...n,position:e})]})}const ji=T.memo(function({shapeId:t,splatapus:n}){const r=Nt("shouldShowPoints"),o=Nt("shouldShowSmoothPoints"),i=Nt("shouldShowRawPoints"),s=U(()=>{if(n.location.shapeId.live()===t){const c=n.interaction.activeMode.live();switch(c.type){case M.Draw:{const d=c.previewPoints.live();if(d.length){const v=Vn(Bn(d,Ge),Ge);return{normalized:Un(v,Ge.size),reduced:Dt(v),smoothed:v,raw:d}}return null}case M.Rig:case M.Play:return null;default:throw Z(c)}}return null},[n,t]),a=U(()=>{const c=n.document.live(),d=n.previewPosition.live();let v;switch(d.type){case"interpolated":v=[];break;case"keyPointId":{const m=c.getShapeVersion(d.keyPointId,t);v=m?m.rawPoints:[];break}default:Z(d)}const g=Zn.getCenterPointsAtPosition(c,t,d);if(g)return{normalized:g.normalized,smoothed:g.smoothed,reduced:g.smoothed?Dt(g.smoothed):null,raw:v};const h=n.keyPointIdHistory.live();for(let m=h.length-1;m>=0;m--){const y=c.getShapeVersion(h[m],t);if(y){const{normalizedCenterPoints:P,smoothedCenterPoints:S}=c.getNormalizedCenterPointsForShapeVersion(y.id);return{normalized:P,smoothed:S,reduced:Dt(S),raw:v}}}return{normalized:null,raw:v}},[t,n]),l=U(()=>n.location.shapeId.live()===t,[n,t]),u=s||a;return _(W,{children:[a.normalized&&f("path",{d:lt(ut(a.normalized)),className:Y(s?"fill-stone-300":l?"fill-stone-800":"fill-stone-600")}),s&&f("path",{d:lt(ut(s.reduced.retainedPoints)),className:Y(l?"fill-stone-800":"fill-stone-600")}),r&&u.normalized&&u.normalized.map((c,d)=>f(Nn,{center:c.center,radius:c.radius},d)),i&&u.raw&&u.raw.map((c,d)=>f(Ui,{position:c,color:"lime"},d)),o&&u.reduced&&u.reduced.retainedPoints.map((c,d)=>f(Nn,{center:c.center,radius:c.radius,color:"skyblue"},d))]})}),Hi=10,Ki=10;function Wi(e,t){if(t===0||t===e.length-1)return null;const n=e[t-1],r=e[t],o=e[t+1],i=Math.abs(r.center.sub(n.center).angleBetween(o.center.sub(r.center)))/Math.PI*Hi,s=(1-(r.radius<n.radius?r.radius/n.radius:n.radius/r.radius))*Ki;return i+s}function Dt(e){const t=[];let n=1,r=0;const o=[e[0]];for(let i=1;i<e.length-1;i++){const s=Oe(Wi(e,i),"Assertion Error: getCostAtIndex(points, i)");n-=s,r+=s,n<0&&(o.push(e[i]),n=1)}return o.push(e[e.length-1]),{retainedPoints:o,totalCost:r,dbg:t}}function Gi(e){const t=p.exports.useRef(e);return p.exports.useEffect(()=>{t.current=e},[e]),t.current}const qi=T.memo(function({splatapus:t}){const n=U(()=>t.interaction.getCanvasClassNameLive(),[t]),r=pe(t.viewport.isSidebarOpen),o=pe(t.viewport.screenSize),i=U(()=>t.viewport.getSceneTransformLive(),[t]),s=Gi(r),[a,l]=p.exports.useState(!1);return p.exports.useLayoutEffect(()=>{l(!0);const u=setTimeout(()=>l(!1),400);return()=>clearTimeout(u)},[r]),f("svg",{viewBox:`0 0 ${o.x} ${o.y}`,className:Y("absolute top-0 left-0",n),children:f("g",{style:{transform:i},className:Y((a||r!==s)&&"transition-transform"),children:f(Zi,{splatapus:t})})})}),Zi=T.memo(function({splatapus:t}){return f(W,{children:Array.from(U(()=>t.document.live().shapes,[t]),n=>f(ji,{shapeId:n.id,splatapus:t},n.id))})});class Yi{constructor(){this.state={type:"idle"}}onPointerDown(t){const{event:n,splatapus:r}=t;switch(this.state.type){case"idle":return this.state={type:"oneFingerDown",pointerA:{id:n.pointerId,startScreenPosition:O.fromEvent(n),currentScreenPosition:O.fromEvent(n),startEvent:n}},t;case"oneFingerDown":return this.state={type:"bothFingersDown",pointerA:this.state.pointerA,pointerB:{id:n.pointerId,startScreenPosition:O.fromEvent(n),currentScreenPosition:O.fromEvent(n),startEvent:n},initialViewportState:r.viewport.state.getOnce()},{splatapus:r,eventType:"cancel",event:this.state.pointerA.startEvent};case"bothFingersDown":return t;default:throw Z(this.state)}}onPointerMove(t){const{event:n,splatapus:r}=t;switch(this.state.type){case"idle":return t;case"oneFingerDown":return this.state.pointerA.id===n.pointerId&&(this.state.pointerA.currentScreenPosition=O.fromEvent(n)),t;case"bothFingersDown":if(n.pointerId===this.state.pointerA.id||n.pointerId===this.state.pointerB.id){const o=n.pointerId===this.state.pointerA.id?O.fromEvent(n):this.state.pointerA.currentScreenPosition,i=n.pointerId===this.state.pointerB.id?O.fromEvent(n):this.state.pointerB.currentScreenPosition,s=this.state.pointerA.startScreenPosition.distanceTo(this.state.pointerB.startScreenPosition),l=o.distanceTo(i)/s,u=this.state.pointerA.startScreenPosition.lerp(this.state.pointerB.startScreenPosition,.5),c=o.lerp(i,.5),d=u.add(this.state.initialViewportState.pan).scale(l).sub(c);return r.viewport.state.update({zoom:this.state.initialViewportState.zoom*l,pan:d}),this.state.pointerA.currentScreenPosition=o,this.state.pointerB.currentScreenPosition=i,null}return t;default:throw Z(this.state)}}onPointerUp(t){const{event:n}=t;switch(this.state.type){case"idle":return t;case"oneFingerDown":return n.pointerId===this.state.pointerA.id&&(this.state={type:"idle"}),t;case"bothFingersDown":return n.pointerId===this.state.pointerA.id||n.pointerId===this.state.pointerB.id?(this.state={type:"idle"},null):t;default:throw Z(this.state)}}onPointerCancel(t){return this.onPointerUp(t)}}function Ji(e,t){switch(t.eventType){case"down":return e.onPointerDown(t);case"move":return e.onPointerMove(t);case"up":return e.onPointerUp(t);case"cancel":return e.onPointerCancel(t);default:Z(t.eventType)}}class dn{constructor({onTap:t,onDragStart:n}){this.isDragging=new K(!1,"Gesture.isDragging"),this.isDragConfirmed=new K(!1,"Gesture.isDragConfirmed");const r=n!=null?n:qr;this.gesture=new Gr({onTap:t,onDragStart:(o,i,...s)=>{const a=r(o,i,...s);return a?(this.isDragging.update(!0),{couldBeTap:a.couldBeTap,pointerCapture:a.pointerCapture,onMove:a.onMove,onEnd:l=>(this.isDragging.update(!1),this.isDragConfirmed.update(!1),a.onEnd(l)),onCancel:l=>(this.isDragging.update(!1),this.isDragConfirmed.update(!1),a.onCancel(l)),onConfirm:l=>{if(this.isDragConfirmed.update(!1),a.onConfirm)return a.onConfirm(l)}}):null}})}onPointerEvent(t,...n){switch(t.eventType){case"down":return this.gesture.onPointerDown(t.event,t.splatapus,...n);case"move":return this.gesture.onPointerMove(t.event);case"up":return this.gesture.onPointerUp(t.event);case"cancel":return this.gesture.onPointerCancel(t.event);default:Z(t.eventType)}}end(){this.gesture.end()}cancel(){this.gesture.end()}}class Xi{constructor(){this.type=M.Draw,this.previewPoints=new K([],"DrawMode.previewPoints"),this.gesture=new dn({onDragStart:(t,{viewport:n,location:r,document:o})=>(t.preventDefault(),this.previewPoints.update([n.eventSceneCoords(t)]),{couldBeTap:!1,pointerCapture:!0,onMove:i=>this.previewPoints.update(s=>[...s,n.eventSceneCoords(i)]),onEnd:i=>{const s=this.previewPoints.getOnce();this.previewPoints.update([]),o.update(a=>a.replacePointsForVersion(r.keyPointId.getOnce(),r.shapeId.getOnce(),s))},onCancel:()=>{this.previewPoints.update([])}})})}isIdleLive(){return!this.gesture.isDragging.live()}toDebugStringLive(){return Re("draw",this.isIdleLive()?{_:"idle"}:{_:"drawing",points:this.previewPoints.live().length})}onPointerEvent(t){this.gesture.onPointerEvent(t)}getPreviewPositionLive(){return null}renderOverlay(){return null}}const Ht={interpolated:e=>({type:"interpolated",scenePosition:e}),keyPointId:e=>({type:"keyPointId",keyPointId:e}),toDebugString:e=>{switch(e.type){case"interpolated":return Re(e.type,{_:e.scenePosition.toString(2)});case"keyPointId":return Re(e.type,{_:e.keyPointId});default:Z(e)}}};function Pr({splatapus:e,keyPointId:t,width:n,height:r,className:o}){const s=U(()=>{const S=e.document.live();return Fn(Array.from(S.shapes,E=>{const w=Zn.getCenterPointsAtPosition(S,E.id,Ht.keyPointId(t));return w?{centerPoints:w.normalized,svg:Mo(w.normalized),shapeId:E.id}:null}))},[e,t]),{minX:a,minY:l,maxX:u,maxY:c}=p.exports.useMemo(()=>{let S=1/0,E=1/0,w=-1/0,b=-1/0;for(const I of s)for(const{center:L,radius:k}of I.centerPoints)S=Math.min(S,L.x-k),w=Math.max(w,L.x+k),E=Math.min(E,L.y-k),b=Math.max(b,L.y+k);return{minX:S,minY:E,maxX:w,maxY:b}},[s]);if(!s.length)return null;const d=u-a,v=c-l,g=n-4*2,h=r-4*2,m=Math.min(g/d,.8),y=Math.min(h/v,.8),P=Math.min(m,y);return f("svg",{viewBox:`0 0 ${n} ${r}`,style:{width:n,height:r},children:f("g",{transform:`translate(${4+Math.max(g-d*P,0)/2}, ${4+Math.max(h-v*P,0)/2}) scale(${P}) translate(${-a}, ${-l})`,children:s.map(({svg:S,shapeId:E})=>f("path",{d:S,className:"fill-stone-800"},E))})})}function Qi(e){const t=p.exports.useRef(e);return p.exports.useEffect(()=>{e!=null&&(t.current=e)},[e]),e!=null?e:t.current}function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kt.apply(this,arguments)}function pn(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Wt(e,t){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},Wt(e,t)}function hn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Wt(e,t)}function es(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function ts(e,t){e.classList?e.classList.add(t):es(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Dn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ns(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Dn(e.className,t):e.setAttribute("class",Dn(e.className&&e.className.baseVal||"",t))}const Mn={disabled:!1},dt=T.createContext(null);var xr=function(t){return t.scrollTop},Ke="unmounted",we="exited",Pe="entering",Me="entered",Gt="exiting",ie=function(e){hn(t,e);function t(r,o){var i;i=e.call(this,r,o)||this;var s=o,a=s&&!s.isMounting?r.enter:r.appear,l;return i.appearStatus=null,r.in?a?(l=we,i.appearStatus=Pe):l=Me:r.unmountOnExit||r.mountOnEnter?l=Ke:l=we,i.state={status:l},i.nextCallback=null,i}t.getDerivedStateFromProps=function(o,i){var s=o.in;return s&&i.status===Ke?{status:we}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var i=null;if(o!==this.props){var s=this.state.status;this.props.in?s!==Pe&&s!==Me&&(i=Pe):(s===Pe||s===Me)&&(i=Gt)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,i,s,a;return i=s=a=o,o!=null&&typeof o!="number"&&(i=o.exit,s=o.enter,a=o.appear!==void 0?o.appear:s),{exit:i,enter:s,appear:a}},n.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null)if(this.cancelNextCallback(),i===Pe){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:et.findDOMNode(this);s&&xr(s)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===we&&this.setState({status:Ke})},n.performEnter=function(o){var i=this,s=this.props.enter,a=this.context?this.context.isMounting:o,l=this.props.nodeRef?[a]:[et.findDOMNode(this),a],u=l[0],c=l[1],d=this.getTimeouts(),v=a?d.appear:d.enter;if(!o&&!s||Mn.disabled){this.safeSetState({status:Me},function(){i.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:Pe},function(){i.props.onEntering(u,c),i.onTransitionEnd(v,function(){i.safeSetState({status:Me},function(){i.props.onEntered(u,c)})})})},n.performExit=function(){var o=this,i=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:et.findDOMNode(this);if(!i||Mn.disabled){this.safeSetState({status:we},function(){o.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Gt},function(){o.props.onExiting(a),o.onTransitionEnd(s.exit,function(){o.safeSetState({status:we},function(){o.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},n.setNextCallback=function(o){var i=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,i.nextCallback=null,o(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(o,i){this.setNextCallback(i);var s=this.props.nodeRef?this.props.nodeRef.current:et.findDOMNode(this),a=o==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===Ke)return null;var i=this.props,s=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var a=pn(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return f(dt.Provider,{value:null,children:typeof s=="function"?s(o,a):T.cloneElement(T.Children.only(s),a)})},t}(T.Component);ie.contextType=dt;ie.propTypes={};function Ne(){}ie.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ne,onEntering:Ne,onEntered:Ne,onExit:Ne,onExiting:Ne,onExited:Ne};ie.UNMOUNTED=Ke;ie.EXITED=we;ie.ENTERING=Pe;ie.ENTERED=Me;ie.EXITING=Gt;const rs=ie;var os=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return ts(t,r)})},Mt=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return ns(t,r)})},fn=function(e){hn(t,e);function t(){for(var r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(a,l){var u=r.resolveArguments(a,l),c=u[0],d=u[1];r.removeClasses(c,"exit"),r.addClass(c,d?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(a,l)},r.onEntering=function(a,l){var u=r.resolveArguments(a,l),c=u[0],d=u[1],v=d?"appear":"enter";r.addClass(c,v,"active"),r.props.onEntering&&r.props.onEntering(a,l)},r.onEntered=function(a,l){var u=r.resolveArguments(a,l),c=u[0],d=u[1],v=d?"appear":"enter";r.removeClasses(c,v),r.addClass(c,v,"done"),r.props.onEntered&&r.props.onEntered(a,l)},r.onExit=function(a){var l=r.resolveArguments(a),u=l[0];r.removeClasses(u,"appear"),r.removeClasses(u,"enter"),r.addClass(u,"exit","base"),r.props.onExit&&r.props.onExit(a)},r.onExiting=function(a){var l=r.resolveArguments(a),u=l[0];r.addClass(u,"exit","active"),r.props.onExiting&&r.props.onExiting(a)},r.onExited=function(a){var l=r.resolveArguments(a),u=l[0];r.removeClasses(u,"exit"),r.addClass(u,"exit","done"),r.props.onExited&&r.props.onExited(a)},r.resolveArguments=function(a,l){return r.props.nodeRef?[r.props.nodeRef.current,a]:[a,l]},r.getClassNames=function(a){var l=r.props.classNames,u=typeof l=="string",c=u&&l?l+"-":"",d=u?""+c+a:l[a],v=u?d+"-active":l[a+"Active"],g=u?d+"-done":l[a+"Done"];return{baseClassName:d,activeClassName:v,doneClassName:g}},r}var n=t.prototype;return n.addClass=function(o,i,s){var a=this.getClassNames(i)[s+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;i==="appear"&&s==="done"&&u&&(a+=" "+u),s==="active"&&o&&xr(o),a&&(this.appliedClasses[i][s]=a,os(o,a))},n.removeClasses=function(o,i){var s=this.appliedClasses[i],a=s.base,l=s.active,u=s.done;this.appliedClasses[i]={},a&&Mt(o,a),l&&Mt(o,l),u&&Mt(o,u)},n.render=function(){var o=this.props;o.classNames;var i=pn(o,["classNames"]);return f(rs,{...i,onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited})},t}(T.Component);fn.defaultProps={classNames:""};fn.propTypes={};const is=fn;function ss(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(e,t){var n=function(i){return t&&p.exports.isValidElement(i)?t(i):i},r=Object.create(null);return e&&p.exports.Children.map(e,function(o){return o}).forEach(function(o){r[o.key]=n(o)}),r}function as(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),o=[];for(var i in e)i in t?o.length&&(r[i]=o,o=[]):o.push(i);var s,a={};for(var l in t){if(r[l])for(s=0;s<r[l].length;s++){var u=r[l][s];a[r[l][s]]=n(u)}a[l]=n(l)}for(s=0;s<o.length;s++)a[o[s]]=n(o[s]);return a}function Ee(e,t,n){return n[t]!=null?n[t]:e.props[t]}function ls(e,t){return vn(e.children,function(n){return p.exports.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Ee(n,"appear",e),enter:Ee(n,"enter",e),exit:Ee(n,"exit",e)})})}function us(e,t,n){var r=vn(e.children),o=as(t,r);return Object.keys(o).forEach(function(i){var s=o[i];if(!!p.exports.isValidElement(s)){var a=i in t,l=i in r,u=t[i],c=p.exports.isValidElement(u)&&!u.props.in;l&&(!a||c)?o[i]=p.exports.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:Ee(s,"exit",e),enter:Ee(s,"enter",e)}):!l&&a&&!c?o[i]=p.exports.cloneElement(s,{in:!1}):l&&a&&p.exports.isValidElement(u)&&(o[i]=p.exports.cloneElement(s,{onExited:n.bind(null,s),in:u.props.in,exit:Ee(s,"exit",e),enter:Ee(s,"enter",e)}))}}),o}var cs=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},ds={component:"div",childFactory:function(t){return t}},mn=function(e){hn(t,e);function t(r,o){var i;i=e.call(this,r,o)||this;var s=i.handleExited.bind(ss(i));return i.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(o,i){var s=i.children,a=i.handleExited,l=i.firstRender;return{children:l?ls(o,a):us(o,s,a),firstRender:!1}},n.handleExited=function(o,i){var s=vn(this.props.children);o.key in s||(o.props.onExited&&o.props.onExited(i),this.mounted&&this.setState(function(a){var l=Kt({},a.children);return delete l[o.key],{children:l}}))},n.render=function(){var o=this.props,i=o.component,s=o.childFactory,a=pn(o,["component","childFactory"]),l=this.state.contextValue,u=cs(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,i===null?f(dt.Provider,{value:l,children:u}):f(dt.Provider,{value:l,children:f(i,{...a,children:u})})},t}(T.Component);mn.propTypes={};mn.defaultProps=ds;const ps=mn,hs=80,fs=64;function Sr(e,t){return t.y>e.screenSize.live().y-hs}const gn=class{constructor(){this.type=M.Rig,this.previewMovement=new K(null,"RigMode.previewMovement"),this.previewPosition=new K(null,"RigMode.previewPosition"),this.gesture=new dn({onTap:(e,{location:t},n)=>{!n||t.keyPointId.update(n.id)},onDragStart:(e,{viewport:t,document:n,location:r},o)=>{if(e.preventDefault(),!o)return this.previewPosition.update(t.eventSceneCoords(e)),{couldBeTap:!1,pointerCapture:!0,onMove:a=>this.previewPosition.update(t.eventSceneCoords(a)),onEnd:()=>this.previewPosition.update(null),onCancel:()=>this.previewPosition.update(null)};r.keyPointId.update(o.id);const i=t.eventSceneCoords(e),s=o.initialScenePosition;return{couldBeTap:!0,pointerCapture:!0,onMove:a=>{this.previewMovement.update({keyPointId:o.id,scenePosition:t.eventSceneCoords(a).sub(i).add(s)})},onEnd:a=>{const l=t.eventSceneCoords(a).sub(i).add(s),u=Ze(()=>Sr(t,t.sceneToScreenLive(l)));this.previewMovement.update(null),n.update(c=>c.updateKeyPoint(o.id,d=>({...d,position:u?null:l})))},onCancel:a=>{this.previewMovement.update(null)}}}})}isIdleLive(){return!this.gesture.isDragging.live()}toDebugStringLive(){const e=this.previewMovement.live(),t=this.previewPosition.live();return Re("rig",t?{_:"preview",position:t.toString(2)}:e?{_:"moving",keyPointId:e.keyPointId,delta:e.scenePosition.toString(2)}:{_:"idle"})}onPointerEvent(e){this.gesture.onPointerEvent(e)}getPreviewPositionLive(){return this.previewPosition.live()}renderOverlay(e){return f(gn.Overlay,{splatapus:e,mode:this})}};let xt=gn;xt.Overlay=function({splatapus:t,mode:n}){const{points:r,pointsInDock:o,size:i,isAnyDragging:s,maxScreenProgress:a,minScreenProgress:l}=U(()=>{const P=t.viewport.screenSizeWithSidebarOpenLive(),S=n==null?void 0:n.previewMovement.live(),E=t.location.keyPointId.live();let w=0,b=1/0,I=-1/0;return{points:Array.from(t.document.live().keyPoints,(k,x)=>{const C=(S==null?void 0:S.keyPointId)===k.id?t.viewport.sceneToScreenLive(S.scenePosition):null,N=k.position?t.viewport.sceneToScreenLive(k.position):null,V=C?Sr(t.viewport,C):!k.position;let B=null;return N&&(B=N.dot(P)/P.dot(P),b=Math.min(b,B),I=Math.max(I,B)),{dockIndex:V?w++:null,keyPoint:k,overallIndex:x,isSelected:k.id===E,screenPosition:C!=null?C:N,isDragging:!!C,screenProgress:B}}),pointsInDock:w,size:P,isAnyDragging:!!S,minScreenProgress:b,maxScreenProgress:I}},[t,n]),u=!!n,[c,d]=p.exports.useState(u),v=new O(i.x/2,i.y+50),[g,h]=p.exports.useState(null),m=r.find(P=>P.dockIndex!==null&&P.keyPoint.id===g),y=Qi(m);return console.log({dockedHovered:m,prevDockedHovered:y}),console.log("render"),_(W,{children:[f(ce,{show:u,className:"absolute left-0 right-0 bottom-0 z-10 h-24 bg-white/50 backdrop-blur-md ",enter:"transition duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",beforeEnter:()=>requestAnimationFrame(()=>d(!0)),beforeLeave:()=>d(!1)}),r.map(P=>f(gn.KeyPoint,{shouldShow:u,shouldShowDock:c,splatapus:t,mode:n,screenSize:i,pointsInDock:o,exitPosition:v,isAnyDragging:s,minScreenProgress:l,maxScreenProgress:a,onPointerEnter:()=>h(P.keyPoint.id),onPointerLeave:()=>h(null),...P},P.keyPoint.id)),f(ce,{show:u&&o>0,className:"duration pointer-events-none absolute bottom-2 z-10 text-center font-semibold text-stone-400",enter:"transition duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition duration-75",leaveFrom:"opacity-100",leaveTo:"opacity-0",style:{width:i.x,transitionDelay:u?`${o*30+400}ms`:"0ms"},children:"drag each key point into the canvas"}),y&&f(ce,{show:!s&&!!m,className:"pointer-events-none absolute bottom-24 z-10 -mt-16 -ml-10 h-16 w-20 origin-bottom overflow-hidden rounded border border-stone-300 bg-stone-50 shadow-md transition",enter:"ease-out",enterFrom:"translate-y-4 opacity-0 scale-75",enterTo:"translate-y-0 opacity-100 scale-100",leave:"ease-in",leaveFrom:"translate-y-0 opacity-100 scale-100",leaveTo:"translate-y-4 opacity-0 scale-75",style:{left:i.x/2,transform:`translateX(${(Oe((m!=null?m:y).dockIndex,"Assertion Error: (dockedHovered ?? prevDockedHovered).dockIndex")-(o-1)/2)*56}px) translateY(var(--tw-translate-y)) scale(var(--tw-scale-x), var(--tw-scale-y))`},children:f(ps,{children:f(is,{timeout:300,classNames:{enter:"transition-opacity bg-stone-50 absolute",enterActive:"transition-opacity bg-stone-50 absolute",enterDone:"transition-opacity bg-stone-50 absolute",exit:"transition-opacity opacity-0 bg-stone-50 absolute",exitActive:"transition-opacity opacity-0 bg-stone-50 absolute",exitDone:"transition-opacity opacity-0 bg-stone-50 absolute"},children:f(Pr,{width:78,height:62,keyPointId:y.keyPoint.id,splatapus:t})},y.keyPoint.id)})})]})};xt.KeyPoint=function({dockIndex:t,screenPosition:n,shouldShowDock:r,shouldShow:o,screenSize:i,pointsInDock:s,keyPoint:a,exitPosition:l,isDragging:u,mode:c,splatapus:d,isSelected:v,isAnyDragging:g,overallIndex:h,screenProgress:m,minScreenProgress:y,maxScreenProgress:P,onPointerEnter:S,onPointerLeave:E}){const[w,b]=p.exports.useState(!!c),I=t!==null;n||(A(t!==null,"Assertion Error: dockIndex !== null"),n=r?new O(i.x/2+(t-(s-1)/2)*56,i.y-fs):l);const[L,k]=p.exports.useState(!1);return _(W,{children:[f(ce,{show:o,className:Y("absolute top-0 left-0 flex cursor-move items-center justify-center",I?"-mt-7 -ml-7 h-14 w-14":"-mt-5 -ml-5 h-10 w-10 rounded-full",u?"z-20":I?"z-10":"z-[5]",!u&&(o?t!==null&&"transition duration-300 ease-out-back":t!==null&&"transition duration-200 ease-in")),enter:I?"transition-transform duration-300 ease-out-back":"transition-transform duration-200 ease-out-back",enterFrom:I?"scale-50":"scale-0",enterTo:"scale-100",leave:I?"transition-transform duration-200 ease-in":"transition-transform duration-200 ease-in-back",leaveFrom:"scale-100",leaveTo:I?"scale-50":"scale-0",afterEnter:()=>b(!0),beforeLeave:()=>b(!1),onPointerEnter:x=>{k(!0),S(x)},onPointerLeave:x=>{k(!1),E(x)},onPointerDown:x=>{!c||c.gesture.onPointerEvent({event:x,eventType:"down",splatapus:d},{id:a.id,initialScenePosition:Ze(()=>d.viewport.screenToSceneLive(Oe(n,"Assertion Error: screenPosition")))})},style:{transform:`translate(${n.x}px, ${n.y}px) scale(var(--tw-scale-x), var(--tw-scale-y))`,transitionDelay:g?"0ms":I?`${t*25}ms`:w?"0ms":`${Mr(y,P,0,200,Oe(m,"Assertion Error: screenProgress"))}ms`},children:f("div",{className:Y("flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold shadow-md transition-transform duration-200 ease-out-back-md",I?"scale-150":"scale-100",v?"bg-gradient-to-br from-cyan-400 to-blue-400 text-white":"border border-stone-200 bg-white text-stone-400"),children:h+1})},a.id),f(ce,{show:L&&!I&&!g,className:"pointer-events-none absolute top-0 left-0 z-[4]",style:{transform:`translate(${n.x}px, ${n.y-24}px)`},children:f(ce.Child,{className:"-mt-16 -ml-10 h-16 w-20 origin-bottom rounded border border-stone-300 bg-stone-50 shadow-md",enter:"transition ease-out",enterFrom:"translate-y-4 opacity-0 scale-75",enterTo:"translate-y-0 opacity-100 scale-100",leave:"transition ease-in",leaveFrom:"translate-y-0 opacity-100 scale-100",leaveTo:"translate-y-4 opacity-0 scale-75",children:f(Pr,{width:78,height:62,keyPointId:a.id,splatapus:d})})})]})};class vs{constructor(){this.isKeyDown=new K(!1,"QuickPan.isKeyDown"),this.gesture=new dn({onDragStart:(t,n)=>{const r=n.viewport.pan.getOnce();let o=O.fromEvent(t);return{couldBeTap:!1,pointerCapture:!0,onMove:i=>{const s=O.fromEvent(i),a=o.sub(s);n.viewport.pan.update(l=>l.add(a)),o=s},onEnd:_r,onCancel:()=>{n.viewport.pan.update(r)}}}}),this.isDragging=this.gesture.isDragging}onKeyDown({event:t}){return De(t," ")?(this.isKeyDown.update(!0),!0):!1}onKeyUp({event:t}){return this.isKeyDown.getOnce()&&eo(t," ")?(this.isKeyDown.update(!1),this.gesture.end(),!0):!1}getCanvasClassNameLive(){if(this.isKeyDown.live()){if(this.isDragging.live())return"cursor-grabbing"}else return null;return"cursor-grab"}onPointerEvent(t){this.gesture.onPointerEvent(t)}toDebugStringLive(){return this.isKeyDown.live()?Re("quickPan",{dragging:this.isDragging.live()}):null}}const H={initialize:e=>({undoStates:[],redoStates:[],pendingOp:null,current:{...e,options:{}}}),canUndo:e=>e.undoStates.length>0,canRedo:e=>{var t,n;return((n=(t=e.redoStates)==null?void 0:t.length)!=null?n:0)>0},beginOperation:e=>{const t=Math.random();return A(e.pendingOp==null,"pending op already in progress"),{undoStack:{...e,pendingOp:{txId:t,initialDoc:e.current.document,initialOptions:e.current.options},current:{...e.current,options:{}}},txId:t}},updateOperation:(e,t,n)=>{var r;return A(((r=e.pendingOp)==null?void 0:r.txId)===t,"pending op mismatch"),{...e,current:{...e.current,document:He(e.current.document,n)}}},revertOperation:(e,t)=>{var n;return A(((n=e.pendingOp)==null?void 0:n.txId)===t,"Pending op mismatch"),{...e,pendingOp:null,current:{document:e.pendingOp.initialDoc,location:e.current.location,options:e.pendingOp.initialOptions}}},commitOperation:(e,t,n={})=>{var i;A(((i=e.pendingOp)==null?void 0:i.txId)===t,"Pending op mismatch");const r=[{document:e.pendingOp.initialDoc,location:e.current.location,options:e.pendingOp.initialOptions},...e.undoStates];for(;r.length>to;)r.pop();const o={...e.current,options:n};return n.lockstepLocation&&(o.location=He(o.location,n.lockstepLocation)),{...e,current:o,pendingOp:null,undoStates:r,redoStates:null}},updateDocument:(e,t,n)=>{let r;return{undoStack:e,txId:r}=H.beginOperation(e),e=H.updateOperation(e,r,t),H.commitOperation(e,r,n)},undo:(e,t)=>{var i;if(A(e.pendingOp==null,"Pending op in progress"),e.undoStates.length==0)return e;t.triggerAnimation("undo");const[n,...r]=e.undoStates;if(!zt(n.location,e.current.location)&&!e.current.options.lockstepLocation)return{...e,current:{...e.current,location:n.location}};const o=[e.current,...(i=e.redoStates)!=null?i:[]];return{...e,current:n,undoStates:r,redoStates:o}},redo:(e,t)=>{if(A(e.pendingOp==null,"pending op in progress"),!e.redoStates||e.redoStates.length==0)return e;t.triggerAnimation("redo");const[n,...r]=e.redoStates;if(!zt(n.location,e.current.location)&&!n.options.lockstepLocation)return{...e,current:{...e.current,location:n.location}};const o=[e.current,...e.undoStates];return{...e,current:n.options.lockstepLocation?{...n,location:He(e.current.location,n.options.lockstepLocation)}:n,undoStates:o,redoStates:r.length===0?null:r}},updateLocation:(e,t)=>({...e,current:{...e.current,location:He(e.current.location,t)}})};class ms{constructor(){this.type=M.Play,this.previewPosition=new K(null,"PlayMode.previewPosition")}isIdleLive(){return!0}toDebugStringLive(){var t,n;return Re("play",{_:(n=(t=this.previewPosition.live())==null?void 0:t.toString(2))!=null?n:null})}onPointerEvent({event:t,eventType:n,splatapus:r}){switch(n){case"move":case"down":t.isPrimary&&this.previewPosition.update(r.viewport.eventSceneCoords(t));return;case"cancel":case"up":return;default:Z(n)}}getPreviewPositionLive(){return this.previewPosition.live()}renderOverlay(){return null}}function _t(e){switch(e){case M.Draw:return new Xi;case M.Rig:return new xt;case M.Play:return new ms;default:Z(e)}}const gs={[M.Draw]:"d",[M.Rig]:"r",[M.Play]:"p"};class ys{constructor(t){this.multiTouchPan=new Yi,this.quickPan=new vs,this.activeMode=new K(_t(t),"Interaction.activeMode"),this.activeMode.addBatchInvalidateListener(()=>this.activeMode.getOnce())}toDebugStringLive(){var t;return(t=this.quickPan.toDebugStringLive())!=null?t:this.activeMode.live().toDebugStringLive()}getCanvasClassNameLive(){return this.quickPan.getCanvasClassNameLive()}getPreviewPositionLive(){return this.activeMode.live().getPreviewPositionLive()}isSidebarOpenLive(){return this.activeMode.live().type!==M.Play}requestSetActiveMode(t){this.quickPan.isKeyDown.getOnce()||this.activeMode.update(n=>Ze(()=>!n.isIdleLive())?n:_t(t))}onKeyDown(t){var r;const n=this.activeMode.getOnce();if(Ze(()=>n.isIdleLive())){if(this.quickPan.onKeyDown(t)||this.quickPan.isKeyDown.getOnce())return;for(const[o,i]of Ar(gs))if(De(t.event,i)){const s=_t(o);t.splatapus.vfx.triggerAnimation(o),this.activeMode.update(s);return}if(De(t.event,{key:"z",command:!0})){t.splatapus.undoStack.update(o=>H.undo(o,t.splatapus.vfx));return}if(De(t.event,{key:"z",command:!0,shift:!0})){t.splatapus.undoStack.update(o=>H.redo(o,t.splatapus.vfx));return}}if(De(t.event,{key:"0",command:!0})){t.splatapus.viewport.pan.update(O.ZERO),t.splatapus.viewport.zoom.update(1);return}for(let o=0;o<9;o++)if(De(t.event,`${o+1}`)){const i=(r=[...t.splatapus.document.getOnce().keyPoints][o])==null?void 0:r.id;if(i){t.splatapus.location.keyPointId.update(i);return}}}onKeyUp(t){this.quickPan.onKeyUp(t)}onPointerEvent(t){const n=Ji(this.multiTouchPan,t);!n||(this.quickPan.isKeyDown.getOnce()?this.quickPan.onPointerEvent(n):this.activeMode.getOnce().onPointerEvent(n))}}class ws{constructor(t,n){this.screenSize=t,this.vfx=new Zr,this.location=new xo(new ue(()=>this.undoStack.live().current.location,r=>this.undoStack.update(o=>H.updateLocation(o,r)),"location")),this.document=new ue(()=>this.undoStack.live().current.document,(r,o)=>this.undoStack.update(i=>H.updateDocument(i,r,o)),"document"),this.viewport=new wo(this.screenSize,new Pn(()=>this.interaction.isSidebarOpenLive(),"viewport.isSidebarOpen"),this.location.viewportState),this.onPointerDown=r=>this.onPointerEvent("down",r),this.onPointerMove=r=>this.onPointerEvent("move",r),this.onPointerUp=r=>this.onPointerEvent("up",r),this.onPointerCancel=r=>this.onPointerEvent("cancel",r),this.onWheel=r=>{this.viewport.handleWheelEvent(r)},this.onKeyDown=r=>this.interaction.onKeyDown({event:r,splatapus:this}),this.onKeyUp=r=>this.interaction.onKeyUp({event:r,splatapus:this}),this.previewPosition=new Pn(()=>{const r=this.interaction.getPreviewPositionLive();return r?Ht.interpolated(r):Ht.keyPointId(this.location.keyPointId.live())},"previewPosition"),this.undoStack=new K(H.initialize(n),"undoStack"),this.interaction=new ys(n.location.mode),this.keyPointIdHistory=new K(Array.from(this.document.getOnce().keyPoints,r=>r.id),"keyPointIdHistory")}onPointerEvent(t,n){this.interaction.onPointerEvent({event:n,eventType:t,splatapus:this})}}function Ps(e){const t=p.exports.useState(()=>new ws(new K(O.ZERO,"screenSize"),e()))[0];return p.exports.useEffect(()=>{window.splatapus=t;const n=[it(st.eager,()=>{const r=t.interaction.activeMode.live().type;t.location.mode.live()!==r&&t.location.mode.update(r)}),it(st.eager,()=>{const r=t.location.keyPointId.live(),o=t.document.live();t.keyPointIdHistory.update(i=>{const s=i.filter(a=>o.keyPoints.has(a)&&a!==r);return s.length===i.length-1&&zr(i)===r?(console.log("update keyPointIdHistory (static)"),i):(console.log("update keyPointIdHistory (changed)"),s.push(r),s)})})];return()=>{for(const r of n)r()}},[t]),t}const xs=T.memo(function({width:t,height:n,shapeId:r,keyPointId:o,splatapus:i}){const a=U(()=>{const E=i.document.live(),w=E.getShapeVersion(o,r);return w?E.getNormalizedCenterPointsForShapeVersion(w.id).normalizedCenterPoints:null},[o,r,i.document]);if(!a||a.length<2)return null;let l=1/0,u=1/0,c=-1/0,d=-1/0;for(const{center:E,radius:w}of a)l=Math.min(l,E.x-w),c=Math.max(c,E.x+w),u=Math.min(u,E.y-w),d=Math.max(d,E.y+w);const v=c-l,g=d-u,h=t-4*2,m=n-4*2,y=Math.min(h/v,.8),P=Math.min(m/g,.8),S=Math.min(y,P);return f("svg",{viewBox:`0 0 ${t} ${n}`,style:{width:t,height:n},children:f("g",{transform:`translate(${4+Math.max(h-v*S,0)/2}, ${4+Math.max(m-g*S,0)/2}) scale(${S}) translate(${-l}, ${-u})`,children:f("path",{d:lt(ut(a)),className:"fill-stone-800"})})})}),_n=84,An=80;function Ss({splatapus:e}){const t=pe(e.location.keyPointId),n=pe(e.location.shapeId),r=Array.from(U(()=>e.document.live().keyPoints,[e])),o=Array.from(U(()=>e.document.live().shapes,[e])),i=Array.from(r).findIndex(l=>t===l.id),s=Array.from(o).findIndex(l=>n===l.id),a=ko(e);return _("div",{className:"relative flex h-0 flex-auto flex-col gap-4 overflow-auto p-5 [-webkit-overflow-scrolling:touch]",children:[f("div",{className:"absolute top-5 left-5 z-0 w-20 rounded bg-stone-200 ring-2 ring-stone-200 transition-transform",style:{height:-16+An*o.length,transform:`translateX(${i*_n}px)`}}),f("div",{className:"absolute top-5 z-0 h-16 rounded bg-stone-200 ring-2 ring-stone-200 transition-transform",style:{width:-4+_n*(r.length+1),transform:`translateY(${s*An}px)`}}),o.map((l,u)=>f("div",{className:"relative flex w-max flex-col gap-2",children:_("div",{className:"flex gap-1",children:[r.map(c=>f("button",{className:Y("overflow-none h-16 w-20 flex-none rounded border",l.id===n&&c.id===t?`${a.border500} ring-1 ${a.ring500} bg-white`:"border-stone-300 bg-white/25 hover:bg-white/50"),onClick:()=>{e.location.shapeId.update(l.id),e.location.keyPointId.update(c.id)},children:f(xs,{width:78,height:62,keyPointId:c.id,shapeId:l.id,splatapus:e})},c.id)),f("button",{className:"h-16 w-20 flex-none rounded border border-stone-300 text-xl text-stone-400 hover:bg-white/50",onClick:()=>{const c=Ue.generate();e.document.update(d=>d.addKeyPoint(c,null),{lockstepLocation:d=>({...d,keyPointId:c,shapeId:l.id})})},children:"+"})]})},l.id)),f(he,{className:"sticky left-0",onClick:()=>{const l=je.generate();e.document.update(u=>u.addShape(l),{lockstepLocation:u=>({...u,shapeId:l})})},children:"+ shape"})]})}const bs={width:Zt},ae=20,Es=f("svg",{viewBox:`0 0 ${ae} ${ae}`,className:"flex-none",style:{width:ae,height:ae},children:f("path",{className:"fill-stone-100",d:["M 0,0",`L ${ae},0`,`L ${ae},${ae}`,`Q ${ae},0 0,0`,"Z"].join(" ")})});function Is({topBarRight:e,topBarLeft:t,rightBar:n,bottomBarLeft:r,bottomBarRight:o,splatapus:i}){const s=pe(i.viewport.isSidebarOpen);return _("div",{className:"pointer-events-none absolute inset-0 z-20 flex flex-col items-stretch",children:[_("div",{className:"pointer-events-auto flex flex-none items-center justify-between gap-3 bg-stone-100 px-3 py-2",children:[f("h1",{className:"order-1 flex-1 font-bold tracking-wide text-stone-600",children:"splatapus"}),f("div",{className:"order-2 flex flex-1 items-center justify-center gap-2",children:t}),f("div",{className:"order-3 flex flex-1 items-center justify-end gap-2",children:e})]}),_(ce,{className:"flex flex-auto items-start justify-end",show:s,enter:"transition",enterFrom:"translate-x-80",enterTo:"translate-x-0",leave:"transition",leaveFrom:"translate-0",leaveTo:"translate-x-80",children:[Es,f("div",{className:"pointer-events-auto flex h-full flex-col bg-stone-100",style:bs,children:n})]}),f("div",{className:"absolute bottom-0 left-0",children:r}),f("div",{className:"absolute bottom-0 right-0 transition-transform",style:{transform:`translateX(${-Zt}px)`},children:o})]})}const ks={id:"doc.0_VcKaG8h9Zf8pyG",keyPoints:{"key.0_a3vKHuIcxpHnVg":{id:"key.0_a3vKHuIcxpHnVg",position:[84.4612113767582,-310.6259226617922]},"key.1_TYmFrn9Wh1QZ3t":{id:"key.1_TYmFrn9Wh1QZ3t",position:[76.77421647506128,82.8797180046771]},"key.2_8mSx0MUXiSEjNK":{id:"key.2_8mSx0MUXiSEjNK",position:[-290.00197453390416,88.34970510918276]},"key.3_RariJQz2eTMOkJ":{id:"key.3_RariJQz2eTMOkJ",position:[466.25676711635367,91.8418718809971]}},shapes:{"shp.0_n9ry1znj34Bp1k":{id:"shp.0_n9ry1znj34Bp1k"},"shp.1_ONCgL3fjUYIryN":{id:"shp.1_ONCgL3fjUYIryN"},"shp.2_Zwa9ObnrYgWogq":{id:"shp.2_Zwa9ObnrYgWogq"},"shp.3_mUCVyzbyAGCuIa":{id:"shp.3_mUCVyzbyAGCuIa"},"shp.4_SMMSTDAbn3tdXv":{id:"shp.4_SMMSTDAbn3tdXv"},"shp.5_pFzZ21ghrzLlt1":{id:"shp.5_pFzZ21ghrzLlt1"}},shapeVersions:{"shv.0_LwpIe0fFofKDNO":{id:"shv.0_LwpIe0fFofKDNO",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[[-41,-45],[-47,-41],[-49,-39],[-53,-34],[-57,-30],[-61,-25],[-64,-20],[-66,-16],[-69,-11],[-71,-6],[-73,-1],[-74,5],[-76,11],[-76,16],[-77,22],[-78,28],[-78,35],[-78,42],[-78,49],[-78,56],[-78,62],[-78,68],[-76,74],[-74,80],[-71,86],[-68,91],[-64,96],[-60,102],[-55,107],[-49,112],[-44,118],[-37,123],[-30,128],[-23,132],[-15,137],[-7,140],[2,144],[11,147],[20,150],[30,152],[39,152],[49,153],[59,153],[69,153],[78,153],[89,152],[99,149],[109,147],[120,143],[129,139],[138,134],[148,129],[156,123],[164,117],[172,110],[179,103],[187,96],[193,89],[198,83],[202,76],[206,69],[208,63],[210,58],[211,52],[212,46],[213,38],[213,30],[213,23],[213,17],[213,11],[213,5],[213,-3],[213,-11],[213,-18],[213,-23],[212,-28],[211,-32],[209,-36],[208,-40],[206,-42],[205,-44],[203,-46],[201,-47],[200,-48],[199,-48],[199,-50]]},"shv.1_SWgK9k5Y2kn7dj":{id:"shv.1_SWgK9k5Y2kn7dj",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[[-25,-43],[-25,-47],[-25,-49],[-24,-56],[-22,-65],[-19,-77],[-16,-90],[-14,-101],[-10,-113],[-8,-123],[-4,-131],[-2,-139],[1,-145],[3,-149],[4,-152],[6,-154],[7,-154],[8,-154],[10,-153],[12,-151],[15,-147],[18,-142],[21,-135],[24,-127],[27,-118],[29,-108],[30,-98],[30,-88],[31,-79],[32,-72],[32,-67],[33,-64],[33,-62],[34,-62],[34,-61],[34,-60],[35,-59]]},"shv.3_3ILI63YytH2Ite":{id:"shv.3_3ILI63YytH2Ite",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[[126,-69],[127,-75],[130,-84],[136,-96],[142,-108],[148,-118],[154,-128],[161,-137],[169,-145],[177,-152],[183,-158],[188,-162],[191,-164],[192,-164],[193,-164],[193,-163],[194,-158],[194,-152],[196,-144],[196,-135],[197,-125],[197,-114],[197,-103],[197,-92],[196,-83],[195,-74],[194,-67],[193,-62],[192,-60],[192,-58],[192,-57],[192,-55],[192,-50],[192,-48]]},"shv.4_dljDpCZ90LHjbP":{id:"shv.4_dljDpCZ90LHjbP",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[[41,-63],[46,-66],[51,-67],[57,-69],[65,-71],[72,-72],[80,-73],[89,-74],[99,-74],[109,-74],[115,-74],[120,-74],[124,-74],[127,-74],[129,-74],[130,-73],[130,-72]]},"shv.5_g5nKgDG7juS3Au":{id:"shv.5_g5nKgDG7juS3Au",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[[21,-10],[15,-10],[11,-10],[5,-7],[-2,-3],[-8,1],[-14,6],[-18,10],[-22,14],[-25,19],[-27,24],[-29,30],[-30,38],[-30,44],[-30,48],[-29,52],[-26,55],[-22,59],[-17,62],[-10,65],[-3,66],[4,67],[11,67],[17,67],[22,64],[26,59],[29,53],[32,47],[33,44],[33,41],[33,40],[33,39],[33,36],[33,22],[33,16],[33,13],[33,11],[32,10],[31,9],[29,8],[27,8],[25,7],[24,6],[23,6],[22,6],[22,5],[21,4],[20,4],[20,3],[19,3],[18,3],[17,3]]},"shv.6_fOyfl45j6IoVJD":{id:"shv.6_fOyfl45j6IoVJD",keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[[151,-26],[145,-27],[138,-26],[127,-21],[116,-14],[106,-6],[98,3],[91,11],[87,20],[84,30],[83,39],[83,47],[86,53],[92,57],[100,59],[110,60],[121,60],[133,59],[144,56],[154,51],[163,45],[172,37],[177,30],[180,24],[182,18],[184,11],[184,4],[184,-6],[180,-13],[176,-19],[171,-23],[166,-25],[161,-27],[155,-27],[148,-27],[141,-27],[135,-26],[129,-23],[123,-18]]},"shv.7_MNXQuLFOxPhQSP":{id:"shv.7_MNXQuLFOxPhQSP",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[[-35,25],[-41,26],[-44,26],[-48,26],[-53,27],[-57,29],[-62,30],[-67,33],[-72,35],[-77,38],[-83,42],[-88,46],[-92,50],[-97,55],[-101,62],[-105,68],[-108,75],[-111,81],[-113,87],[-114,92],[-114,96],[-114,101],[-114,104],[-113,108],[-111,111],[-108,115],[-105,118],[-101,121],[-98,123],[-94,126],[-90,128],[-85,130],[-80,132],[-74,133],[-69,135],[-62,137],[-56,138],[-49,139],[-43,140],[-36,140],[-30,140],[-24,140],[-18,140],[-12,140],[-7,140],[-1,141],[4,142],[9,142],[14,143],[21,144],[27,145],[33,147],[40,147],[46,148],[52,148],[58,148],[64,148],[70,148],[77,149],[83,149],[89,149],[95,149],[101,149],[107,149],[114,149],[121,149],[128,149],[136,149],[144,148],[151,147],[158,147],[165,145],[172,144],[179,144],[186,143],[193,142],[200,140],[206,139],[213,137],[220,134],[225,132],[231,130],[237,127],[242,123],[249,119],[255,113],[262,108],[266,103],[270,99],[274,95],[276,92],[278,89],[279,86],[280,83],[281,80],[281,77],[281,75],[281,74],[281,72],[280,69],[279,65],[277,60],[275,56],[274,53],[272,50],[270,47],[267,43],[265,39],[262,35],[259,30],[256,27],[252,23],[250,21],[246,18],[242,16],[239,14],[235,11],[230,10],[227,8],[223,8],[221,7],[217,7],[213,6],[210,6],[206,6],[204,6],[202,6],[201,6],[200,6],[200,5]]},"shv.8_dqc9S1VROeclkw":{id:"shv.8_dqc9S1VROeclkw",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[[-20,20],[-23,16],[-23,13],[-25,10],[-26,7],[-29,4],[-32,1],[-35,-1],[-38,-4],[-39,-5],[-41,-6],[-43,-6],[-46,-8],[-49,-9],[-53,-9],[-56,-10],[-58,-10],[-59,-10],[-61,-11],[-62,-11],[-63,-11],[-64,-11],[-64,-12],[-64,-13],[-64,-14],[-64,-15],[-64,-16],[-63,-17],[-62,-18],[-61,-20],[-59,-22],[-56,-24],[-54,-26],[-52,-28],[-49,-29],[-46,-31],[-43,-32],[-39,-33],[-36,-33],[-32,-33],[-28,-33],[-24,-33],[-19,-33],[-15,-32],[-12,-31],[-9,-29],[-7,-28],[-5,-26],[-3,-24],[-2,-22],[0,-20],[2,-18],[3,-14],[5,-11],[7,-8],[7,-6],[9,-4],[9,-3],[11,-1],[12,0],[14,2],[15,4],[16,6],[16,8],[17,8],[17,9],[18,10],[18,11],[19,11],[19,12],[19,13],[19,14],[19,15],[20,16],[21,17]]},"shv.9_wkf9c4ZDBAwLRf":{id:"shv.9_wkf9c4ZDBAwLRf",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[[152,-11],[156,-17],[158,-21],[162,-25],[167,-31],[174,-36],[181,-42],[189,-48],[196,-54],[204,-59],[212,-62],[220,-63],[228,-63],[236,-63],[245,-63],[252,-63],[257,-62],[259,-61],[261,-60],[262,-60],[263,-59],[263,-58],[263,-57],[260,-55],[255,-52],[250,-48],[243,-43],[237,-38],[230,-33],[225,-27],[218,-20],[213,-13],[208,-6],[206,-2],[204,0],[204,1],[204,2]]},"shv.10_QVHVJVxyuxdpD":{id:"shv.10_QVHVJVxyuxdpD",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[[31,17],[33,16],[36,16],[47,11],[58,6],[72,1],[84,-1],[99,-4],[113,-6],[124,-6],[134,-7],[141,-8],[147,-8],[152,-8],[154,-8],[155,-7],[155,-6],[155,-4]]},"shv.12_5jxllLtpm93b7":{id:"shv.12_5jxllLtpm93b7",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[[19,55],[12,55],[9,55],[4,55],[-1,56],[-6,57],[-10,57],[-15,58],[-20,59],[-26,60],[-32,63],[-37,65],[-43,68],[-47,71],[-52,74],[-54,77],[-57,81],[-59,86],[-61,90],[-62,95],[-62,98],[-62,101],[-62,103],[-61,105],[-56,107],[-51,108],[-44,110],[-37,110],[-30,110],[-24,110],[-17,108],[-9,106],[-3,103],[4,100],[10,97],[16,94],[21,91],[25,88],[30,84],[33,81],[36,77],[37,75],[38,73],[38,72],[38,71],[38,70],[38,69],[37,69],[36,67],[35,66],[34,65],[32,61],[29,54],[26,51],[25,50],[24,50],[23,50],[22,50],[21,50],[20,51],[19,52],[17,54],[14,57],[13,59]]},"shv.14_GWIuG0AcQVcWv":{id:"shv.14_GWIuG0AcQVcWv",keyPointId:"key.1_TYmFrn9Wh1QZ3t",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[[221,50],[215,47],[211,47],[206,46],[200,46],[195,45],[191,45],[185,45],[179,45],[173,46],[166,50],[160,53],[155,57],[150,60],[148,64],[146,67],[145,71],[144,76],[144,81],[144,86],[144,89],[145,92],[148,94],[152,97],[158,99],[165,100],[173,101],[181,101],[189,101],[197,99],[205,96],[213,93],[221,90],[228,87],[234,84],[238,81],[241,80],[244,78],[247,76],[248,74],[248,73],[248,72],[248,70],[248,69],[248,68],[248,67],[246,66],[243,60],[240,57],[238,55],[237,54],[235,54],[233,53],[229,52],[224,52],[218,52],[214,52],[210,52],[204,52],[197,54]]},"shv.15_IegtY8uWpenHx":{id:"shv.15_IegtY8uWpenHx",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[[-137,13],[-143,8],[-144,8],[-146,8],[-148,7],[-150,6],[-152,6],[-155,5],[-158,4],[-161,3],[-165,2],[-169,1],[-173,1],[-176,1],[-180,1],[-183,1],[-186,1],[-189,1],[-192,1],[-195,1],[-196,1],[-198,3],[-200,5],[-202,10],[-204,15],[-206,20],[-207,24],[-208,28],[-209,31],[-209,35],[-209,38],[-209,40],[-209,43],[-209,46],[-207,49],[-205,52],[-204,56],[-202,59],[-200,63],[-199,67],[-197,70],[-195,72],[-194,74],[-193,76],[-190,77],[-188,80],[-186,82],[-183,84],[-179,87],[-175,90],[-171,93],[-166,96],[-160,99],[-155,102],[-149,105],[-143,108],[-137,110],[-131,113],[-125,116],[-119,120],[-112,123],[-106,125],[-100,127],[-94,129],[-88,132],[-82,134],[-76,135],[-70,137],[-64,139],[-58,141],[-52,142],[-45,144],[-38,145],[-31,146],[-23,147],[-16,147],[-8,147],[0,147],[8,147],[17,147],[25,147],[34,147],[42,147],[49,147],[56,146],[63,146],[71,145],[78,144],[85,143],[92,142],[99,142],[106,141],[113,140],[120,139],[127,138],[134,137],[141,137],[149,136],[156,135],[164,134],[172,132],[179,131],[187,130],[194,128],[201,126],[208,123],[214,121],[221,118],[226,114],[230,111],[235,108],[238,104],[241,99],[244,93],[247,89],[250,82],[252,75],[255,65],[257,55],[257,48],[257,45],[257,43],[257,42],[252,36],[249,32],[245,28],[241,26],[239,25],[235,24],[231,21],[225,18],[219,16],[215,13],[211,11],[209,10],[208,8],[208,7],[207,6],[206,6],[205,6],[204,6],[203,6],[202,6],[201,6],[199,6],[198,6],[196,6],[194,6],[191,5],[189,5],[187,4],[184,4],[180,3],[177,3],[172,2],[168,1],[164,1],[160,0],[155,0],[151,0],[147,-1],[143,-1],[139,-1],[136,-1],[132,-1],[128,-1],[123,-1],[119,-1],[114,-1],[110,-1],[106,-1],[102,-1],[99,0],[95,1],[92,1],[90,1],[89,1],[87,2],[86,2],[85,2],[84,2],[84,3],[83,3],[82,3],[82,4],[81,4],[80,4],[79,4],[78,4],[77,4],[77,5],[76,5],[75,5],[74,5],[73,6],[72,6],[70,6],[67,7],[65,7],[63,8],[61,8],[59,8],[57,9],[55,10],[53,10],[52,11],[50,11],[49,11],[48,11],[47,11],[47,12],[47,13]]},"shv.17_JPHh1b7aVM4a5":{id:"shv.17_JPHh1b7aVM4a5",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[[-130,1],[-135,-3],[-137,-4],[-140,-8],[-143,-11],[-147,-13],[-151,-15],[-155,-17],[-160,-19],[-165,-21],[-170,-23],[-175,-23],[-179,-23],[-183,-23],[-188,-23],[-191,-23],[-194,-22],[-197,-21],[-200,-20],[-201,-19],[-202,-19],[-203,-19],[-204,-19],[-204,-20],[-204,-21],[-204,-25],[-202,-30],[-198,-35],[-194,-40],[-190,-43],[-185,-46],[-181,-48],[-176,-49],[-171,-50],[-165,-52],[-159,-52],[-154,-54],[-149,-54],[-145,-54],[-139,-54],[-134,-53],[-130,-50],[-127,-48],[-124,-45],[-121,-41],[-119,-37],[-117,-32],[-115,-26],[-113,-19],[-112,-12],[-112,-6],[-112,-2],[-112,0],[-112,1],[-112,2],[-112,3],[-111,3],[-111,4],[-111,5]]},"shv.19_XdsJ3W4A719pc":{id:"shv.19_XdsJ3W4A719pc",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[[-31,2],[-33,-4],[-33,-7],[-34,-11],[-36,-14],[-38,-17],[-40,-22],[-43,-27],[-46,-32],[-48,-35],[-50,-38],[-52,-41],[-55,-44],[-59,-48],[-62,-52],[-66,-56],[-69,-58],[-72,-60],[-76,-61],[-79,-61],[-82,-61],[-85,-61],[-87,-61],[-88,-61],[-89,-61],[-90,-62],[-88,-62],[-87,-63],[-85,-63],[-83,-63],[-80,-63],[-76,-63],[-70,-63],[-64,-63],[-58,-63],[-52,-63],[-47,-62],[-42,-61],[-38,-59],[-34,-56],[-30,-53],[-27,-49],[-24,-45],[-21,-42],[-19,-39],[-17,-35],[-14,-31],[-10,-25],[-7,-19],[-3,-13],[0,-8],[3,-4],[5,-1],[7,2],[9,5],[12,9],[16,13],[19,17],[22,19],[24,21],[26,23],[27,23],[28,24],[28,25],[29,25],[29,26]]},"shv.20_QSK3n1l8MmGEZ":{id:"shv.20_QSK3n1l8MmGEZ",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[[-102,9],[-100,8],[-97,8],[-93,8],[-89,7],[-86,6],[-83,5],[-79,4],[-75,4],[-71,4],[-67,4],[-63,4],[-60,3],[-58,3],[-55,3],[-52,3],[-49,3],[-47,3],[-44,3],[-43,3],[-42,3]]},"shv.22_I2STbWZAXgo1B":{id:"shv.22_I2STbWZAXgo1B",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[[-110,42],[-115,40],[-118,40],[-122,40],[-126,38],[-130,36],[-134,34],[-138,32],[-141,31],[-144,30],[-147,29],[-151,28],[-154,27],[-158,26],[-162,26],[-165,26],[-168,26],[-170,27],[-171,29],[-172,32],[-173,34],[-174,37],[-174,39],[-174,41],[-174,43],[-174,45],[-174,47],[-172,49],[-169,52],[-165,56],[-160,60],[-155,64],[-149,68],[-143,72],[-137,75],[-132,78],[-125,81],[-119,83],[-112,85],[-107,86],[-101,86],[-96,86],[-92,86],[-88,84],[-85,80],[-83,77],[-82,74],[-82,72],[-82,71],[-82,69],[-82,67],[-83,63],[-86,60],[-87,57],[-88,55],[-90,51],[-93,44],[-96,37],[-100,32],[-102,29],[-103,28],[-105,28],[-106,28],[-107,28],[-108,28],[-108,29]]},"shv.23_wW18nQbpEd7gx":{id:"shv.23_wW18nQbpEd7gx",keyPointId:"key.2_8mSx0MUXiSEjNK",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[[4,40],[-2,38],[-5,38],[-9,38],[-14,37],[-18,37],[-24,37],[-28,37],[-32,37],[-35,38],[-38,39],[-40,41],[-42,43],[-42,45],[-43,46],[-43,47],[-43,50],[-43,54],[-41,59],[-38,64],[-35,68],[-32,72],[-29,74],[-25,77],[-22,79],[-18,79],[-13,80],[-8,80],[-3,80],[3,80],[9,79],[15,75],[21,72],[26,69],[31,66],[34,64],[36,61],[38,59],[38,58],[38,57],[37,56],[36,56],[34,55],[31,52],[26,49],[21,45],[16,42],[12,40],[9,38],[6,36],[3,35],[-1,35],[-4,34],[-7,34],[-10,33],[-12,33],[-13,33],[-21,38]]},"shv.25_bSftSx0IJxw7H":{id:"shv.25_bSftSx0IJxw7H",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.0_n9ry1znj34Bp1k",rawPoints:[[110.49240292871617,19.52362771067062],[101.42737067012109,11.753600060446258],[100.13236606175036,11.753600060446258],[96.24735223663818,11.753600060446258],[89.77232919478455,10.458595452075532],[84.59231076130163,9.163590843704805],[75.52727850270655,9.163590843704805],[67.75725085248219,7.868586235334078],[58.6922185938871,7.868586235334078],[50.922190943662734,7.868586235334078],[43.15216329343838,7.868586235334078],[35.38213564321401,7.868586235334078],[27.612107992989653,7.868586235334078],[19.84208034276529,7.868586235334078],[13.367057300911656,7.868586235334078],[6.892034259058021,9.163590843704805],[.4170112172043865,9.163590843704805],[-6.058011824649248,11.753600060446258],[-12.533034866502883,14.343609277187712],[-17.71305329998579,15.63861388555844],[-22.893071733468698,19.52362771067062],[-29.368094775322334,22.113636927412074],[-34.54811320880524,24.703646144153527],[-41.02313625065887,29.883664577636434],[-47.49815929251251,33.76867840274862],[-51.38317311762469,37.653692227860795],[-55.268186942736875,40.24370144460225],[-56.5631915511076,41.53870605297298],[-57.858196159478325,42.83371066134371],[-59.15320076784905,44.128715269714434],[-59.15320076784905,46.71872448645588],[-60.44820537621978,50.603738311568065],[-61.74320998459051,55.78375674505097],[-63.03821459296123,60.96377517853388],[-64.33321920133196,67.43879822038751],[-64.33321920133196,73.91382126224116],[-64.33321920133196,80.38884430409479],[-64.33321920133196,86.86386734594842],[-61.74320998459051,92.04388577943133],[-59.15320076784905,95.92889960454352],[-55.268186942736875,99.81391342965568],[-51.38317311762469,102.40392264639715],[-47.49815929251251,106.28893647150933],[-42.318140859029604,108.87894568825078],[-35.843117817175965,111.46895490499223],[-29.368094775322334,112.76395951336296],[-21.598067125097973,115.35396873010441],[-15.123044083244336,116.64897333847514],[-7.353016433019975,116.64897333847514],[-.8779933911663405,117.94397794684586],[6.892034259058021,119.2389825552166],[15.95706651765311,120.53398716358733],[23.72709416787747,123.12399638032878],[34.08713103484329,123.12399638032878],[41.85715868506765,124.41900098869951],[50.922190943662734,125.71400559707023],[58.6922185938871,128.30401481381168],[67.75725085248219,129.5990194221824],[76.82228311107728,132.18902863892387],[87.1823199780431,133.4840332472946],[96.24735223663818,134.7790378556653],[106.60738910360399,136.07404246403604],[115.67242136219909,137.36904707240677],[124.73745362079417,138.6640516807775],[132.50748127101855,138.6640516807775],[140.27750892124288,139.95905628914824],[149.34254117983798,141.25406089751894],[157.11256883006234,142.54906550588967],[166.17760108865744,143.8440701142604],[175.24263334725254,145.13907472263114],[184.3076656058476,145.13907472263114],[192.07769325607197,146.43407933100187],[201.14272551466706,146.43407933100187],[210.20775777326216,146.43407933100187],[219.27279003185726,146.43407933100187],[228.33782229045232,146.43407933100187],[239.99286376578888,146.43407933100187],[250.35290063275468,143.8440701142604],[263.302946716462,141.25406089751894],[276.25299280016924,137.36904707240677],[289.2030388838765,133.4840332472946],[300.85808035921303,129.5990194221824],[312.51312183454957,125.71400559707023],[322.8731587015154,121.82899177195804],[333.2331955684812,117.94397794684586],[344.88823704381775,111.46895490499223],[355.24827391078355,104.9939318631386],[364.3133061693787,98.51890882128497],[372.083333819603,92.04388577943133],[379.8533614698274,86.86386734594842],[386.328384511681,80.38884430409479],[394.0984121619054,72.61881665387043],[401.86843981212974,66.1437936120168],[408.3434628539834,57.078761353421704],[412.22847667909554,50.603738311568065],[414.818485895837,46.71872448645588],[414.818485895837,44.128715269714434],[414.818485895837,42.83371066134371],[414.818485895837,41.53870605297298],[414.818485895837,40.24370144460225],[413.52348128746627,37.653692227860795],[410.9334720707248,36.35868761949007],[408.3434628539834,33.76867840274862],[405.75345363724193,29.883664577636434],[401.86843981212974,24.703646144153527],[397.98342598701754,19.52362771067062],[392.80340755353467,13.048604668816985],[388.9183937284225,9.163590843704805],[386.328384511681,6.5735816269633505],[382.4433706865688,2.68856780185117],[379.8533614698274,.098558585109716],[375.9683476447152,-2.491450631631738],[372.083333819603,-3.7864552400024647],[368.1983199944908,-6.376464456743919],[364.3133061693787,-7.671469065114645],[360.4282923442665,-8.966473673485373],[357.838283127525,-8.966473673485373],[352.65826469404215,-8.966473673485373],[348.77325086892995,-10.2614782818561],[343.593232435447,-10.2614782818561],[338.4132140019641,-10.2614782818561],[331.9381909601105,-10.2614782818561],[326.75817252662756,-10.2614782818561],[320.28314948477396,-10.2614782818561],[313.8081264429203,-10.2614782818561],[307.3331034010667,-10.2614782818561],[302.15308496758377,-10.2614782818561],[296.97306653410084,-10.2614782818561],[291.79304810061797,-10.2614782818561],[285.3180250587643,-10.2614782818561],[277.54799740853997,-10.2614782818561],[269.7779697583156,-8.966473673485373],[262.00794210809124,-7.671469065114645],[255.53291906623758,-6.376464456743919],[251.64790524112541,-5.081459848373192],[250.35290063275468,-3.7864552400024647],[249.05789602438395,-3.7864552400024647],[250.35290063275468,-2.491450631631738]]},"shv.26_FUFwushsNIoT8":{id:"shv.26_FUFwushsNIoT8",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.1_ONCgL3fjUYIryN",rawPoints:[[116.9674259705698,15.63861388555844],[120.85243979568199,6.5735816269633505],[122.14744440405272,2.68856780185117],[124.73745362079417,.098558585109716],[128.62246744590635,-3.7864552400024647],[131.21247666264782,-7.671469065114645],[135.09749048775998,-12.851487498597553],[138.98250431287218,-16.736501323709735],[144.16252274635508,-21.916519757192642],[149.34254117983798,-25.801533582304824],[153.22755500495018,-29.686547407417002],[157.11256883006234,-33.571561232529184],[160.99758265517454,-36.16157044927064],[164.8825964802867,-38.75157966601209],[168.7676103053989,-41.34158888275355],[172.65262413051107,-42.63659349112427],[176.53763795562324,-43.931598099495],[179.1276471723647,-43.931598099495],[181.71765638910617,-43.931598099495],[183.0126609974769,-43.931598099495],[184.3076656058476,-45.22660270786573],[185.60267021421834,-45.22660270786573],[188.1926794309598,-46.521607316236455],[189.48768403933053,-46.521607316236455],[190.78268864770124,-46.521607316236455],[192.07769325607197,-46.521607316236455],[193.3726978644427,-46.521607316236455],[194.66770247281343,-46.521607316236455],[195.96270708118416,-45.22660270786573],[195.96270708118416,-43.931598099495],[195.96270708118416,-42.63659349112427],[195.96270708118416,-40.046584274382816],[195.96270708118416,-37.456575057641366],[194.66770247281343,-32.27655662415846],[193.3726978644427,-28.391542799046277],[189.48768403933053,-21.916519757192642],[185.60267021421834,-15.441496715339007],[181.71765638910617,-8.966473673485373],[177.83264256399397,-3.7864552400024647],[173.9476287388818,1.3935631934804429],[171.35761952214034,5.278577018592624],[170.0626149137696,6.5735816269633505],[168.7676103053989,7.868586235334078],[168.7676103053989,9.163590843704805],[168.7676103053989,10.458595452075532],[168.7676103053989,11.753600060446258],[168.7676103053989,13.048604668816985]]},"shv.28_mqL5cK4iYMnLO":{id:"shv.28_mqL5cK4iYMnLO",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.2_Zwa9ObnrYgWogq",rawPoints:[[241.2878683741596,-8.966473673485373],[238.69785915741815,-15.441496715339007],[238.69785915741815,-18.03150593208046],[238.69785915741815,-21.916519757192642],[241.2878683741596,-25.801533582304824],[242.58287298253032,-30.98155201578773],[245.17288219927178,-34.86656584089991],[247.76289141601325,-38.75157966601209],[251.64790524112541,-42.63659349112427],[256.8279236746083,-47.81661192460718],[264.5979513248327,-52.99663035809009],[271.0729743666863,-59.471653399943726],[277.54799740853997,-63.35666722505591],[284.0230204503936,-65.94667644179736],[290.49804349224723,-67.24168105016808],[298.26807114247157,-67.24168105016808],[306.03809879269596,-67.24168105016808],[313.8081264429203,-67.24168105016808],[321.5781540931447,-67.24168105016808],[328.0531771349983,-67.24168105016808],[333.2331955684812,-65.94667644179736],[335.8232047852227,-65.94667644179736],[337.1182093935934,-64.65167183342663],[338.4132140019641,-64.65167183342663],[335.8232047852227,-64.65167183342663],[333.2331955684812,-64.65167183342663],[325.46316791825683,-63.35666722505591],[317.6931402680325,-62.061662616685176],[311.21811722617883,-60.76665800831445],[303.4480895759545,-58.176648791572994],[294.38305731735943,-52.99663035809009],[286.61302966713504,-47.81661192460718],[277.54799740853997,-41.34158888275355],[271.0729743666863,-34.86656584089991],[265.89295593320344,-28.391542799046277],[262.00794210809124,-25.801533582304824],[260.7129374997205,-21.916519757192642],[259.4179328913498,-20.621515148821913],[258.12292828297905,-19.32651054045119],[258.12292828297905,-18.03150593208046],[258.12292828297905,-16.736501323709735],[258.12292828297905,-15.441496715339007],[258.12292828297905,-14.14649210696828],[258.12292828297905,-12.851487498597553],[258.12292828297905,-11.556482890226826],[258.12292828297905,-10.2614782818561],[258.12292828297905,-8.966473673485373],[259.4179328913498,-8.966473673485373],[259.4179328913498,-1.196446023261011]]},"shv.29_7s9cPPIlpJ9Np":{id:"shv.29_7s9cPPIlpJ9Np",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.3_mUCVyzbyAGCuIa",rawPoints:[[188.1926794309598,16.933618493929167],[192.07769325607197,10.458595452075532],[195.96270708118416,10.458595452075532],[202.4377301230378,9.163590843704805],[210.20775777326216,9.163590843704805],[217.97778542348652,7.868586235334078],[224.45280846534015,6.5735816269633505],[230.9278315071938,5.278577018592624],[236.1078499406767,2.68856780185117],[239.99286376578888,2.68856780185117],[242.58287298253032,1.3935631934804429],[243.87787759090105,1.3935631934804429],[245.17288219927178,1.3935631934804429],[246.46788680764251,1.3935631934804429]]},"shv.30_gZeoEkcUkLcml":{id:"shv.30_gZeoEkcUkLcml",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.4_SMMSTDAbn3tdXv",rawPoints:[[238.69785915741815,38.94869683623153],[232.22283611556452,41.53870605297298],[228.33782229045232,41.53870605297298],[225.7478130737109,45.42371987808516],[220.56779464022796,49.30873370319734],[216.6827808151158,54.48875213668025],[211.5027623816329,59.668770570163154],[206.32274394814996,66.1437936120168],[201.14272551466706,71.3238120454997],[198.5527162979256,76.50383047898261],[195.96270708118416,81.6838489124655],[194.66770247281343,84.27385812920697],[193.3726978644427,88.15887195431915],[193.3726978644427,89.45387656268987],[193.3726978644427,90.7488811710606],[193.3726978644427,93.33889038780205],[194.66770247281343,94.63389499617278],[198.5527162979256,95.92889960454352],[203.73273473140853,97.22390421291423],[208.91275316489143,98.51890882128497],[214.09277159837433,99.81391342965568],[220.56779464022796,99.81391342965568],[228.33782229045232,99.81391342965568],[237.40285454904742,97.22390421291423],[246.46788680764251,93.33889038780205],[256.8279236746083,88.15887195431915],[264.5979513248327,80.38884430409479],[272.36797897505704,72.61881665387043],[278.8430020169107,66.1437936120168],[282.72801584202284,60.96377517853388],[286.61302966713504,54.48875213668025],[287.90803427550577,49.30873370319734],[289.2030388838765,45.42371987808516],[289.2030388838765,44.128715269714434],[287.90803427550577,44.128715269714434],[285.3180250587643,44.128715269714434],[281.4330112336521,42.83371066134371],[276.25299280016924,42.83371066134371],[269.7779697583156,42.83371066134371],[262.00794210809124,42.83371066134371],[252.94290984949615,42.83371066134371],[245.17288219927178,42.83371066134371],[239.99286376578888,42.83371066134371],[237.40285454904742,42.83371066134371],[236.1078499406767,42.83371066134371],[236.1078499406767,44.128715269714434]]},"shv.32_Is4OGgrMoyylx":{id:"shv.32_Is4OGgrMoyylx",keyPointId:"key.3_RariJQz2eTMOkJ",shapeId:"shp.5_pFzZ21ghrzLlt1",rawPoints:[[377.26335225308594,20.81863231904135],[366.90331538612014,19.52362771067062],[364.3133061693787,19.52362771067062],[359.13328773589575,22.113636927412074],[352.65826469404215,27.29365536089498],[344.88823704381775,35.063683011119345],[337.1182093935934,44.128715269714434],[330.64318635173976,51.8987429199388],[326.75817252662756,59.668770570163154],[321.5781540931447,66.1437936120168],[320.28314948477396,72.61881665387043],[317.6931402680325,77.79883508735334],[317.6931402680325,80.38884430409479],[317.6931402680325,82.97885352083624],[318.9881448764032,84.27385812920697],[321.5781540931447,85.56886273757769],[326.75817252662756,85.56886273757769],[331.9381909601105,85.56886273757769],[339.7082186103348,84.27385812920697],[347.4782462605592,80.38884430409479],[355.24827391078355,76.50383047898261],[363.01830156100795,71.3238120454997],[370.7883292112323,67.43879822038751],[375.9683476447152,62.25877978690461],[381.14836607819814,57.078761353421704],[383.73837529493954,51.8987429199388],[387.62338912005174,46.71872448645588],[390.2133983367932,40.24370144460225],[392.80340755353467,35.063683011119345],[392.80340755353467,31.178669186007163],[392.80340755353467,28.58865996926571],[392.80340755353467,27.29365536089498],[390.2133983367932,27.29365536089498],[388.9183937284225,27.29365536089498],[387.62338912005174,27.29365536089498],[386.328384511681,27.29365536089498],[386.328384511681,28.58865996926571],[386.328384511681,31.178669186007163]]}}},Cs={keyPointId:"key.0_a3vKHuIcxpHnVg",shapeId:"shp.0_n9ry1znj34Bp1k",viewport:{pan:[120,-2],zoom:1},mode:"draw"},Os={document:ks,location:Cs};function Ts({splatapus:e}){return _(W,{children:[f(Ns,{splatapus:e}),f(Ls,{splatapus:e}),f(Ms,{splatapus:e}),f(Ds,{splatapus:e})]})}function Ls({splatapus:e}){return f(he,{onClick:()=>{const t=encodeURIComponent(JSON.stringify(Je.serialize({document:e.document.getOnce(),location:e.location.state.getOnce()}))),n=window.document.createElement("a");n.setAttribute("href",`data:text/json;charset=utf-8,${t}`),n.setAttribute("download","splatapus.json"),n.click()},children:"export"})}function Ns({splatapus:e}){return f(he,{onClick:()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.addEventListener("change",n=>{var i;const r=(i=t.files)==null?void 0:i.item(0);if(!r)return;const o=new FileReader;o.addEventListener("load",()=>{const s=o.result;if(!s){alert("could not read file :(");return}A(typeof s=="string",'Assertion Error: typeof result === "string"');try{const a=Je.parse(JSON.parse(s));if(a.isError()){alert(`cannot read splat doc: ${a.error.message}`);return}const l=a.value;e.document.update(()=>l.document,{lockstepLocation:u=>l.location})}catch(a){alert(`could not parse json: ${$r(a)}`)}}),o.readAsText(r)}),t.click()},children:"import"})}function Ds({splatapus:e}){return f(he,{onClick:()=>{const{document:t,location:n}=Gn(O.UNIT);e.document.update(()=>t,{lockstepLocation:n})},children:"reset"})}function Ms({splatapus:e}){return f(he,{onClick:()=>{const t=Je.parse(Os).unwrap();e.document.update(()=>t.document,{lockstepLocation:t.location})},children:"example"})}var br={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zn=T.createContext&&T.createContext(br),de=globalThis&&globalThis.__assign||function(){return de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},de.apply(this,arguments)},_s=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function Er(e){return e&&e.map(function(t,n){return T.createElement(t.tag,de({key:n},t.attr),Er(t.child))})}function Ir(e){return function(t){return f(As,{...de({attr:de({},e.attr)},t),children:Er(e.child)})}}function As(e){var t=function(n){var r=e.attr,o=e.size,i=e.title,s=_s(e,["attr","size","title"]),a=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),_("svg",{...de({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:de(de({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[i&&f("title",{children:i}),e.children]})};return zn!==void 0?f(zn.Consumer,{children:function(n){return t(n)}}):t(br)}function zs(e){return Ir({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"}}]})(e)}function $s(e){return Ir({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"}}]})(e)}function Fs({splatapus:e}){const t=U(()=>H.canUndo(e.undoStack.live()),[e]),n=U(()=>H.canRedo(e.undoStack.live()),[e]),r=xn(e.vfx,"undo",()=>({keyFrames:{transform:["rotate(0)","rotate(-360deg)"]},duration:300,easing:Sn.DEFAULT})),o=xn(e.vfx,"redo",()=>({keyFrames:{transform:["rotate(0)","rotate(360deg)"]},duration:300,easing:Sn.DEFAULT}));return _("div",{className:"pointer-events-auto pb-2 pl-3",children:[f(he,{disabled:!t,className:Y("transition-all duration-300",t?"pointer-events-auto ease-out-back":n?"pointer-events-none opacity-50":"pointer-events-none scale-0 opacity-0 ease-in-back"),onClick:()=>e.undoStack.update(i=>H.undo(i,e.vfx)),iconLeft:f("div",{className:"mt-[2px] h-3 w-3 transition-transform duration-300 ease-in-out",ref:r,children:f($s,{size:12})}),children:"undo"}),f(he,{disabled:!n,className:Y("transition-all duration-300",n?"pointer-events-auto ease-out-back-md":"scale-0 opacity-0 ease-in-back-md"),onClick:()=>e.undoStack.update(i=>H.redo(i,e.vfx)),iconRight:f("div",{className:"mt-[2px] h-3 w-3 transition-transform duration-300 ease-in-out",ref:o,children:f(zs,{size:12})}),children:"redo"})]})}function Rs(){O.UNIT;{const e=So("autosave");if(e.isOk())return e.value;console.error(`Error loading autosave: ${e.error}`)}return Gn()}function Vs(){const[e,t]=p.exports.useState(null),n=Ps(Rs),r=Fr(e,o=>{const i=Rr(o);return n.screenSize.update(i),i});return f("div",{ref:t,className:"absolute inset-0 touch-none overflow-hidden",children:r&&f(Bs,{splatapus:n})})}function Bs({splatapus:e}){const t=p.exports.useRef(null);p.exports.useEffect(()=>{const r=Oe(t.current,"Assertion Error: canvasRef.current");return r.addEventListener("wheel",e.onWheel,{passive:!1}),window.addEventListener("keydown",e.onKeyDown),window.addEventListener("keyup",e.onKeyUp),()=>{r.removeEventListener("wheel",e.onWheel),window.removeEventListener("keydown",e.onKeyDown),window.removeEventListener("keyup",e.onKeyUp)}},[e]),p.exports.useEffect(()=>it(st.idle,()=>{Eo("autosave",{document:e.document.live(),location:e.location.state.live()})}),[e]);const n=pe(e.interaction.activeMode);return _(W,{children:[_("div",{className:"absolute inset-0",ref:t,onPointerDown:e.onPointerDown,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,children:[f(qi,{splatapus:e}),f(xt.Overlay,{splatapus:e,mode:n.type===M.Rig?n:null})]}),f(Is,{topBarLeft:f(Co,{splatapus:e}),topBarRight:f(Ts,{splatapus:e}),rightBar:f(Ss,{splatapus:e}),bottomBarLeft:f(Fs,{splatapus:e}),bottomBarRight:f(Fi,{}),splatapus:e}),!1]})}const Us=Oe(document.getElementById("root"),'Assertion Error: document.getElementById("root")');Vr(Us).render(f(T.StrictMode,{children:f(Vs,{})}));
