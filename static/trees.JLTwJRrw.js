import{t as H,m as x,A as j,i as Y,a as Z,g as G,b as V}from"./chunk_utils.qw3xpJ_t.js";/* empty css                       */import{j as c,c as _}from"./chunk_client.49X8lzWC.js";import{S as C,a as J}from"./chunk_DebugSvg.A2AwPweU.js";import{T as N,d as A}from"./chunk_Ticker.lTo-XsP5.js";import{c as K}from"./chunk_easings.EgZmcXFh.js";import{A as W}from"./chunk_AABB.VzaPYI_h.js";import{V as u}from"./chunk_Vector2.7Ra9a_Y4.js";import{S as B}from"./chunk_svgPathBuilder.J8VGlY3q.js";import"./chunk_Spring.B52B8lUj.js";import{t as b}from"./chunk_track.rtZiweUj.js";import{r as w}from"./chunk_index.HRzIbU8d.js";import{m as q}from"./chunk_mod.ALiVJ6Yv.js";import{c as Q,R as U}from"./chunk_index.YgXO-yX4.js";import"./chunk_DebugDraw.ychrZIxY.js";import"./chunk_useResizeObserver.bT7jiE2V.js";import"./chunk_ResizeObserver.-NVrOerG.js";import"./chunk_useMergedRefs.nliS7m8d.js";import"./chunk_EventEmitter.__zN63g-.js";import"./chunk_signia.rTErdSNa.js";import"./chunk__commonjsHelpers.5-cIlDoe.js";const $=1e-4,S=.001;function T(t,s,{scaleT:o=1,scaleXy:r=1}={}){const[e]=w.useState(()=>q.makeNoise3D(Math.random()*1e5));return e(t.x*S*r,t.y*S*r,s.elapsedMs*$*o)}function E(t,s,{scaleT:o=1,scaleXy:r=1}={}){const[e]=w.useState(()=>q.makeNoise4D(Math.random()*1e5));return i=>e(t.x*S*r,t.y*S*r,s.elapsedMs*$*o,i)}function tt(){const[t,s]=w.useState(u.ZERO),[o,r]=w.useState(()=>new N);return w.useEffect(()=>(o.start(),()=>{o.stop()}),[o]),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-stone-200",onPointerMove:e=>{e.isPrimary&&s(u.fromEvent(e))},children:c.jsx("svg",{className:"bg-stone-200 w-[min(80vw,80vh)] overflow-visible",viewBox:"0 0 100 100",children:c.jsxs("g",{className:"stroke-stone-600",children:[c.jsx("line",{x1:0,y1:100,x2:100,y2:100,strokeWidth:3}),c.jsx(et,{xy:t,t:o}),c.jsx("line",{x1:0,y1:103,x2:100,y2:103,className:"stroke-stone-200",strokeWidth:3})]})})})}const et=b(function({xy:s,t:o}){const e=E(s,o),i=H(7,h=>x(-1,1,.1,3,e(h))),d=100/i.reduce((h,f)=>h+f,0),a=[];let l=0;for(let h=0;h<i.length-1;h++){l+=i[h]*d;const f=h*100,m=x(-1,1,-200,200,e(f+1e3+l/20));a.push({x:l,height:m,width:x(-1,1,2,x(0,200,0,20,j(0,200,m)),e(f+l/20))})}return a.map((h,f)=>c.jsx(st,{tree:h,xy:s,t:o,baseY:100},f))});function st({tree:t,xy:s,t:o,baseY:r}){const e=j(5,100,x(-1,1,t.height*.1,Math.sqrt(t.height)*5,E(s,o,{scaleT:1.5})(t.height/10))),i=T(s,o,{scaleT:2}),n=T(s,o,{scaleT:2});if(t.height<0)return null;const d=c.jsx("line",{x1:t.x,y1:r,x2:t.x,y2:r-Math.min(e,t.height),strokeWidth:t.width,strokeLinecap:"round"});let a=null,l=null;if(e<t.height){const h=Math.sqrt(j(0,1,i)),f=Math.sqrt(j(0,1,n)),m=r-e;a=c.jsx("g",{transform:`translate(${t.x} ${m})`,children:c.jsx(P,{tree:{x:0,height:t.height-e,width:t.width},xy:s,t:o,lean:h})}),l=c.jsx("g",{transform:`translate(${t.x} ${m}) scale(-1 1)`,children:c.jsx(P,{tree:{x:0,height:t.height-e,width:t.width},xy:s,t:o,lean:f})})}return c.jsxs(c.Fragment,{children:[d,a,l]})}function P({tree:t,xy:s,t:o,lean:r}){const e=x(-1,1,20,60,T(s,o)),i=A(e),n=x(-1,1,5,10,T(s,o)),d=new u(n,0),a=n*i,l=j(0,1,Y(0,a,t.height)),h=u.ZERO.rotateAround(d,i*l),f=new B().moveTo(0,t.width/2).arcTo(n,n,0,!1,!0,h);return c.jsx("path",{d:f.toString(),className:"stroke-stone-600",fill:"none",strokeWidth:1})}const v=W.fromLeftTopWidthHeight(0,0,100,100),y=W.fromLeftTopRightBottom(-1,-1,1,1),ot=[new u(1,1),new u(1,-1),new u(-1,-1),new u(-1,1)],nt=Math.sqrt(3)/2,L=10,D=L*nt,z=new u(L,D),rt=b(function(){const[s,o]=w.useState(u.ZERO),r=s.mapRange(v,y).clamp(y),[e]=w.useState(()=>new N);w.useEffect(()=>(e.start(),()=>{e.stop()}),[e]);const i=E(s,e,{scaleT:10}),n=E(s,e,{scaleT:10}),d=[];for(let a=0;a<v.height/D;a++)for(let l=0;l<v.width/L;l++){const h=new u(i(l/8),n(a/8)).scale(3).clamp(y);d.push(c.jsx(it,{weights:at(h),size:5,strokeWeight:1,originIdx:new u(l,a),spacing:z},`${l}-${a}`))}return c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-stone-200",children:c.jsxs(C,{className:"bg-stone-200 w-[min(80vw,80vh)] overflow-visible",viewBox:v,onPointerMove:a=>o(a),children:[c.jsx(J,{position:r.mapRange(y,v)}),d]})})});function it({weights:t,size:s,strokeWeight:o,originIdx:r}){Z(t.length===M.length,"Assertion Error: weights.length === structureFlavours.length");const e={weight:0,origin:new u(0,0),lines:[g(0,0,0,0),g(0,0,0,0),g(0,0,0,0),g(0,0,0,0)]};for(let n=0;n<t.length;n++){const d=M[n],a=t[n];e.weight+=a*d.weight*o,e.origin=e.origin.add(d.origin(r,z).scale(a)),e.lines.forEach((l,h)=>{lt(l,d.lines[h],a*d.weight*s)})}console.log(e);const i=new B;return e.lines.forEach(n=>{i.moveTo(e.origin.add(n.start)),i.bezierCurveTo(e.origin.add(n.c1),e.origin.add(n.c2),e.origin.add(n.end))}),c.jsx("path",{d:i.toString(),fill:"none",stroke:"black",strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:e.weight})}function at(t){const s=ot.map(e=>K(G(0,1,x(0,2,1,0,e.distanceTo(t))))),o=s.reduce((e,i)=>e+i,0);return s.map(e=>e/o)}const ct=(t,s)=>t.mul(s),R=(t,s)=>{const o=t.y%2===0?-s.x/4:s.x/4;return t.mul(s).add(o,0)},k={dashes:()=>({weight:1,origin:R,lines:[g(0,-.5,0,0),g(0,0,0,.5),g(0,-.5,0,0),g(0,0,0,.5)]}),separatedPeaks:()=>({weight:1,origin:ct,lines:[g(-.2,-(.5-.2),-.5,0),g(-.5,0,-(1-.2),.5-.2),g(.2,-(.5-.2),.5,0),g(.5,0,1-.2,.5-.2)]}),ohs:()=>({weight:1,origin:R,lines:[p(0,-.5,-.5,0,0,0),p(-.5,0,0,.5,0,0),p(0,-.5,.5,0,0,0),p(.5,0,0,.5,0,0)]}),yous:()=>{const t=new u(0,-.25),s=t.add(0,.5),o=s.rotateAround(t,A(45)),r=s.rotateAround(t,A(90));return{weight:1,origin:R,lines:[p(s.x,s.y,o.x,o.y,t.x,t.y),p(o.x,o.y,r.x,r.y,t.x,t.y),p(-s.x,s.y,-o.x,o.y,t.x,t.y),p(-o.x,o.y,-r.x,r.y,t.x,t.y)]}}},M=[k.yous(),k.ohs(),k.dashes(),k.separatedPeaks()];function g(t,s,o,r){const e=new u(t,s),i=new u(o,r),n=e.lerp(i,.5);return{start:e,end:i,c1:n,c2:n}}function p(t,s,o,r,e,i){const n=t-e,d=s-i,a=o-e,l=r-i,h=n*n+d*d,f=h+n*a+d*l,m=4/3*(Math.sqrt(2*h*f)-f)/(n*l-d*a),F=e+n-m*d,I=i+d+m*n,O=e+a+m*l,X=i+l-m*a;return{start:new u(t,s),end:new u(o,r),c1:new u(F,I),c2:new u(O,X)}}function lt(t,s,o){t.start=t.start.add(s.start.scale(o)),t.end=t.end.add(s.end.scale(o)),t.c1=t.c1.add(s.c1.scale(o)),t.c2=t.c2.add(s.c2.scale(o))}const ht=Q([{path:"/patterns",element:c.jsx(rt,{})},{path:"*",element:c.jsx(tt,{})}]),dt=V(document.getElementById("root"),'Assertion Error: document.getElementById("root")');_(dt).render(c.jsx(U,{router:ht}));
