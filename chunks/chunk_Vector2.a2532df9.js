import{f as E,e as M,g as p,k as b,n as P,l as x}from"./chunk_assert.5a48dca8.js";const o={ok(r){return new $(r)},error(r){return new v(r)},collect(r){const t=[];for(const e of r)if(e.isOk())t.push(e.value);else return e;return o.ok(t)}};class y{constructor(){}}class $ extends y{constructor(t){super(),this.value=t}isOk(){return!0}isError(){return!1}unwrap(){return this.value}map(t){return o.ok(t(this.value))}mapErr(t){return this}andThen(t){return t(this.value)}}class v extends y{constructor(t){super(),this.error=t}isOk(){return!1}isError(){return!0}unwrap(t){E(`${t}: ${String(this.error)}`)}map(t){return this}mapErr(t){return o.error(t(this.error))}andThen(t){return this}}class i{constructor(t,e=[]){this.message=t,this.path=e}formatPath(){let t="ROOT";for(const e of t)typeof e=="number"?t+=`[${e}]`:t+=`.${e}`;return t}toString(){return`At ${this.formatPath()}: ${this.message}`}}function w(r){return t=>typeof t===r?o.ok(t):o.error(new i(`Expected ${r}, got ${typeof t}`,[]))}function f(r,t){return new i(r.message,[t,...r.path])}const k=w("string"),m=w("number");function R(r){return t=>Array.isArray(t)?o.collect(t.map((e,n)=>r(e).mapErr(a=>f(a,n)))):o.error(new i(`Expected Array, got ${typeof t}`,[]))}function O(r){return t=>typeof t!="object"?o.error(new i(`Expected object, got ${typeof t}`,[])):t===null?o.error(new i("Expected object, got null",[])):o.collect(M(r).map(([e,n])=>n(p(t,e)).map(a=>[e,a]).mapErr(a=>f(a,e)))).map(e=>Object.fromEntries(e))}function S(r,t){return e=>typeof e!="object"?o.error(new i(`Expected object, got ${typeof e}`,[])):e===null?o.error(new i("Expected object, got null",[])):o.collect(b(e).map(n=>r(n).map(a=>[a,t(p(e,a))]).mapErr(a=>f(a,n)))).map(n=>Object.fromEntries(n))}function j(r,t){return e=>r(e).andThen(t)}const s=class{constructor(r,t){this.x=r,this.y=t}static fromPolar(r,t){return new s(t*Math.cos(r),t*Math.sin(r))}static average(r){return r.reduce((e,n)=>e.add(n),s.ZERO).div(r.length)}static fromVectorLike({x:r,y:t}){return new s(r,t)}static fromEvent({clientX:r,clientY:t}){return new s(r,t)}toString(){return`Vector2(${this.x}, ${this.y})`}get magnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitude(){return Math.sqrt(this.magnitudeSquared)}get angle(){return Math.atan2(this.y,this.x)}isInPolygon(r){const{x:t,y:e}=this;let n=!1;for(let a=0,u=r.length-1;a<r.length;u=a++){const{x:l,y:c}=r[a],{x:g,y:d}=r[u];c>e!=d>e&&t<(g-l)*(e-c)/(d-c)+l&&(n=!n)}return n}equals(r){return this===r||this.x===r.x&&this.y===r.y}distanceTo({x:r,y:t}){return Math.hypot(this.x-r,this.y-t)}distanceToSq({x:r,y:t}){const e=this.x-r,n=this.y-t;return e*e+n*n}angleTo(r){return r.sub(this).angle}angleBetween(r){return P(Math.atan2(r.y,r.x)-Math.atan2(this.y,this.x))}dot(r){return this.x*r.x+this.y*r.y}div(r){return new s(this.x/r,this.y/r)}scale(r){return new s(this.x*r,this.y*r)}negate(){return this.scale(-1)}add({x:r,y:t}){return new s(this.x+r,this.y+t)}sub({x:r,y:t}){return new s(this.x-r,this.y-t)}floor(){return new s(Math.floor(this.x),Math.floor(this.y))}ceil(){return new s(Math.ceil(this.x),Math.ceil(this.y))}round(){return new s(Math.round(this.x),Math.round(this.y))}withMagnitude(r){return s.fromPolar(this.angle,r)}normalize(){return this.withMagnitude(1)}withAngle(r){return s.fromPolar(r,this.magnitude)}rotate(r){return this.withAngle(this.angle+r)}rotateAround(r,t){const e=Math.sin(t),n=Math.cos(t),a=this.x-r.x,u=this.y-r.y,l=a*n-u*e,c=a*e+u*n;return new s(l+r.x,c+r.y)}lerp(r,t){return new s(x(this.x,r.x,t),x(this.y,r.y,t))}perpendicular(){return new s(this.y,-this.x)}project(r,t){return r.scale(t).add(this)}};let h=s;h.ZERO=new s(0,0);h.UNIT=new s(1,1);h.X=new s(1,0);h.Y=new s(0,1);h.parse=j(O({x:m,y:m}),({x:r,y:t})=>o.ok(new s(r,t)));export{i as P,o as R,h as V,R as a,j as b,O as c,k as d,S as e,m as p};
